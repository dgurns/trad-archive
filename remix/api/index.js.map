{
  "version": 3,
  "sources": ["<stdin>", "../node_modules/@remix-run/dev/dist/compiler/shims/react.ts", "../app/entry.server.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/root.tsx", "../app/sessions.server.ts", "../app/utils/db.server.ts", "../app/components/PlayerContextProvider.tsx", "../app/components/Player.tsx", "../app/hooks/usePlayerContext.ts", "../app/types/index.ts", "../app/components/AudioPlayer.tsx", "../app/components/Header.tsx", "../app/services/Entity.ts", "../app/components/Modal.tsx", "../app/components/SearchEntities.tsx", "../app/fragments/index.ts", "../app/components/LoadingCircle.tsx", "../app/components/CreateNewEntities.tsx", "../app/hooks/useRequireLogin.ts", "../app/hooks/useCurrentUser.ts", "../app/components/CreatePersonForm.tsx", "../app/components/CreateInstrumentForm.tsx", "../app/components/CreatePlaceForm.tsx", "../app/components/CreateCollectionForm.tsx", "../app/components/Footer.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/submissions/[id]/upload.tsx", "../app/components/Layout.tsx", "../app/components/RequireUser.tsx", "../app/components/Breadcrumb.tsx", "../app/components/LoadingBlock.tsx", "../app/components/FileUploader.tsx", "../app/services/DateTime.ts", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/verification-requests.tsx", "../app/components/RequireAdmin.tsx", "../app/services/User.ts", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/random.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/$slug.tsx", "../app/components/AudioItemCard.tsx", "../app/components/Tags.tsx", "../app/services/Tag.ts", "../app/components/AddTagButton.tsx", "../app/components/CreateTagForm.tsx", "../app/hooks/useTags.ts", "../app/components/SelectRelationship.tsx", "../app/components/TimestampInput.tsx", "../app/components/EditTagsButton.tsx", "../app/components/SaveItemButton.tsx", "../app/components/ViewCommentsButton.tsx", "../app/components/CreateCommentForm.tsx", "../app/components/TimeMarkers.tsx", "../app/components/AudioItemCompact.tsx", "../app/components/Menu.tsx", "../app/components/RequestTakedownButton.tsx", "../app/components/CreateTakedownRequestForm.tsx", "../app/components/AudioItemTextOnly.tsx", "../app/components/AudioItem.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/$slug/about.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/$slug/edit.tsx", "../app/components/EditAudioItemForm.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/$slug/tags.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/$slug.tsx", "../app/components/ViewEntityAndAudioItems.tsx", "../app/hooks/useFilters.ts", "../app/components/Filters.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/$slug/about.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/$slug/edit.tsx", "../app/components/EditCollectionForm.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/$slug/tags.tsx", "../app/components/TagWithRelationshipToObject.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/$slug.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/$slug/about.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/$slug/edit.tsx", "../app/components/EditInstrumentForm.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/$slug/tags.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/submissions/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/new.tsx", "../app/hooks/useAudioItems.ts", "../app/components/CreateAudioItemForm.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/new.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/new.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/submissions/new.tsx", "../app/components/CreateSubmissionForm.tsx", "../app/components/Checkbox.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/submissions/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/takedown-requests.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/submissions/[id].tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/$slug.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/$slug/about.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/$slug/edit.tsx", "../app/components/EditPersonForm.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/$slug/tags.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/$slug.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/$slug/about.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/$slug/edit.tsx", "../app/components/EditPlaceForm.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/$slug/tags.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/$slug.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/$slug/about.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/$slug/tags.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/choose-new-password.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/new.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/new.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/verify.tsx", "../app/hooks/useVerificationRequestsForCurrentUser.ts", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/reset-password.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/saved-items.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/users/$id.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/comments.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/logout.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/signup.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/index.tsx", "../app/services/LocalStorage.ts", "../app/components/ProjectIntro.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/login.tsx", "server-assets-manifest:@remix-run/dev/assets-manifest", "server-entry-module:@remix-run/dev/server-build"],
  "sourcesContent": ["export * from \"@remix-run/dev/server-build\";", "// eslint-disable-next-line import/no-extraneous-dependencies\nimport * as React from \"react\";\nexport { React };\n", "import type { EntryContext } from \"@remix-run/node\";\nimport { RemixServer } from \"@remix-run/react\";\nimport { renderToString } from \"react-dom/server\";\n\nexport default function handleRequest(\n\trequest: Request,\n\tresponseStatusCode: number,\n\tresponseHeaders: Headers,\n\tremixContext: EntryContext\n) {\n\tlet markup = renderToString(\n\t\t<RemixServer context={remixContext} url={request.url} />\n\t);\n\n\tresponseHeaders.set(\"Content-Type\", \"text/html\");\n\n\treturn new Response(\"<!DOCTYPE html>\" + markup, {\n\t\tstatus: responseStatusCode,\n\t\theaders: responseHeaders,\n\t});\n}\n", "import type { LoaderFunction, MetaFunction } from \"@remix-run/node\";\nimport { json } from \"@remix-run/node\";\nimport {\n\tLinks,\n\tLiveReload,\n\tMeta,\n\tOutlet,\n\tScripts,\n\tScrollRestoration,\n\tuseCatch,\n\tuseLoaderData,\n} from \"@remix-run/react\";\nimport { ApolloProvider, ApolloClient, InMemoryCache } from \"@apollo/client\";\nimport styles from \"~/styles/globals-generated-do-not-edit.css\";\n\nimport { getSession } from \"~/sessions.server\";\nimport { db } from \"~/utils/db.server\";\n\nimport PlayerContextProvider from \"~/components/PlayerContextProvider\";\nimport Header from \"~/components/Header\";\nimport Footer from \"~/components/Footer\";\nimport type { User } from \"@prisma/client\";\n\n// TODO: Remove this\nconst apolloClient = new ApolloClient({ cache: new InMemoryCache() });\n\nexport const meta: MetaFunction = () => ({\n\tcharset: \"utf-8\",\n\ttitle: \"Trad Archive\",\n\tviewport: \"width=device-width,initial-scale=1\",\n});\n\nexport function links() {\n\treturn [\n\t\t{ rel: \"stylesheet\", href: styles },\n\t\t{ rel: \"dns-prefetch\", href: \"https://fonts.googleapis.com\" },\n\t\t{ rel: \"preconnect\", href: \"https://fonts.gstatic.com/\" },\n\t\t{\n\t\t\trel: \"stylesheet\",\n\t\t\thref: \"https://fonts.googleapis.com/icon?family=Material+Icons\",\n\t\t},\n\t\t{\n\t\t\trel: \"apple-touch-icon\",\n\t\t\tsizes: \"180x180\",\n\t\t\thref: \"/favicons/apple-touch-icon.png\",\n\t\t},\n\t\t{\n\t\t\trel: \"icon\",\n\t\t\ttype: \"image/png\",\n\t\t\tsizes: \"192x192\",\n\t\t\thref: \"/favicons/android-chrome-192x192.png\",\n\t\t},\n\t\t{\n\t\t\trel: \"icon\",\n\t\t\ttype: \"image/png\",\n\t\t\tsizes: \"32x32\",\n\t\t\thref: \"/favicons/favicon-32x32.png\",\n\t\t},\n\t\t{\n\t\t\trel: \"icon\",\n\t\t\ttype: \"image/png\",\n\t\t\tsizes: \"16x16\",\n\t\t\thref: \"/favicons/favicon-16x16.png\",\n\t\t},\n\t\t{\n\t\t\trel: \"shortcut icon\",\n\t\t\thref: \"/favicons/favicon.ico\",\n\t\t},\n\t];\n}\n\ninterface LoaderData {\n\tcurrentUser: User | null;\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\tlet currentUser: User | null = null;\n\tif (userId) {\n\t\tcurrentUser = await db.user.findUnique({ where: { id: userId } });\n\t}\n\n\tconst data = { currentUser };\n\treturn json<LoaderData>(data);\n};\n\nexport default function App() {\n\tconst { currentUser } = useLoaderData<LoaderData>();\n\n\treturn (\n\t\t<html lang=\"en\">\n\t\t\t<head>\n\t\t\t\t<Meta />\n\t\t\t\t<Links />\n\t\t\t</head>\n\t\t\t<ApolloProvider client={apolloClient}>\n\t\t\t\t<PlayerContextProvider>\n\t\t\t\t\t<body className=\"bg-gray-100\">\n\t\t\t\t\t\t<div className=\"flex flex-col w-full relative pt-12\">\n\t\t\t\t\t\t\t<div className=\"flex flex-col justify-start items-center\">\n\t\t\t\t\t\t\t\t<div className=\"w-full min-h-screen lg:max-w-5xl px-4 pt-6 pb-44\">\n\t\t\t\t\t\t\t\t\t<Outlet />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Footer />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Add header to the DOM after child content so its modals overlay */}\n\t\t\t\t\t\t\t<div className=\"fixed top-0 right-0 left-0\" id=\"header\">\n\t\t\t\t\t\t\t\t<Header currentUser={currentUser} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<ScrollRestoration />\n\t\t\t\t\t\t<Scripts />\n\t\t\t\t\t\t<LiveReload />\n\t\t\t\t\t</body>\n\t\t\t\t</PlayerContextProvider>\n\t\t\t</ApolloProvider>\n\t\t</html>\n\t);\n}\n\ninterface ErrorBoundaryArgs {\n\terror: Error;\n}\nexport function ErrorBoundary({ error }: ErrorBoundaryArgs) {\n\treturn (\n\t\t<html lang=\"en\">\n\t\t\t<head>\n\t\t\t\t<Meta />\n\t\t\t\t<Links />\n\t\t\t</head>\n\t\t\t<ApolloProvider client={apolloClient}>\n\t\t\t\t<PlayerContextProvider>\n\t\t\t\t\t<body className=\"bg-gray-100\">\n\t\t\t\t\t\t<div className=\"flex flex-col w-full relative pt-12\">\n\t\t\t\t\t\t\t<div className=\"flex flex-col justify-start items-center\">\n\t\t\t\t\t\t\t\t<div className=\"w-full min-h-screen lg:max-w-5xl px-4 pt-6 pb-44 text-center\">\n\t\t\t\t\t\t\t\t\t<h1>Oops! There was an error.</h1>\n\t\t\t\t\t\t\t\t\t<p className=\"text-red-500 mt-2\">{error.message}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Footer />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Add header to the DOM after child content so its modals overlay */}\n\t\t\t\t\t\t\t<div className=\"fixed top-0 right-0 left-0\" id=\"header\">\n\t\t\t\t\t\t\t\t<Header />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<ScrollRestoration />\n\t\t\t\t\t\t<Scripts />\n\t\t\t\t\t\t<LiveReload />\n\t\t\t\t\t</body>\n\t\t\t\t</PlayerContextProvider>\n\t\t\t</ApolloProvider>\n\t\t</html>\n\t);\n}\n\nexport function CatchBoundary() {\n\tconst { currentUser } = useLoaderData<LoaderData>();\n\n\tconst caught = useCatch();\n\treturn (\n\t\t<html lang=\"en\">\n\t\t\t<head>\n\t\t\t\t<Meta />\n\t\t\t\t<Links />\n\t\t\t</head>\n\t\t\t<ApolloProvider client={apolloClient}>\n\t\t\t\t<PlayerContextProvider>\n\t\t\t\t\t<body className=\"bg-gray-100\">\n\t\t\t\t\t\t<div className=\"flex flex-col w-full relative pt-12\">\n\t\t\t\t\t\t\t<div className=\"flex flex-col justify-start items-center\">\n\t\t\t\t\t\t\t\t<div className=\"w-full min-h-screen lg:max-w-5xl px-4 pt-6 pb-44 text-center\">\n\t\t\t\t\t\t\t\t\t<h1>Oops! There was an error.</h1>\n\t\t\t\t\t\t\t\t\t<p className=\"text-red-500 mt-2\">\n\t\t\t\t\t\t\t\t\t\t{caught.status} - {caught.statusText}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Footer />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Add header to the DOM after child content so its modals overlay */}\n\t\t\t\t\t\t\t<div className=\"fixed top-0 right-0 left-0\" id=\"header\">\n\t\t\t\t\t\t\t\t<Header currentUser={currentUser} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<ScrollRestoration />\n\t\t\t\t\t\t<Scripts />\n\t\t\t\t\t\t<LiveReload />\n\t\t\t\t\t</body>\n\t\t\t\t</PlayerContextProvider>\n\t\t\t</ApolloProvider>\n\t\t</html>\n\t);\n}\n", "import { createCookieSessionStorage } from \"@remix-run/node\";\n\nconst { getSession, commitSession, destroySession } =\n\tcreateCookieSessionStorage({\n\t\tcookie: {\n\t\t\tname: \"jwt\",\n\t\t\thttpOnly: true,\n\t\t\tmaxAge: 60 * 60 * 24 * 30, // 30 days\n\t\t\tpath: \"/\",\n\t\t\tsameSite: \"none\",\n\t\t\tsecure: true,\n\t\t\tsecrets: [process.env.JWT_SECRET_KEY ?? \"jwt_secret_key\"],\n\t\t},\n\t});\n\nexport { getSession, commitSession, destroySession };\n", "import { PrismaClient } from \"@prisma/client\";\n\nlet db: PrismaClient;\n\ndeclare global {\n\tvar __db: PrismaClient | undefined;\n}\n\n// this is needed because in development we don't want to restart\n// the server with every change, but we want to make sure we don't\n// create a new connection to the DB with every change either.\nif (process.env.NODE_ENV === \"production\") {\n\tdb = new PrismaClient();\n} else {\n\tif (!global.__db) {\n\t\tglobal.__db = new PrismaClient();\n\t}\n\tdb = global.__db;\n}\n\nexport { db };\n", "import React, { useEffect, useState } from \"react\";\nimport Player from \"~/components/Player\";\nimport { AudioItem } from \"~/types\";\n\ninterface PlayerContextValue {\n\tactiveAudioItem: AudioItem | null;\n\tsetActiveAudioItem: React.Dispatch<React.SetStateAction<AudioItem>>;\n\tactiveItemDurationSeconds: number | undefined;\n\tsetActiveItemDurationSeconds: React.Dispatch<\n\t\tReact.SetStateAction<number | undefined>\n\t>;\n\tplaybackPositionSeconds: number | undefined;\n\tsetPlaybackPositionSeconds: React.Dispatch<\n\t\tReact.SetStateAction<number | undefined>\n\t>;\n\tseekPositionSeconds: number | undefined;\n\tsetSeekPositionSeconds: React.Dispatch<\n\t\tReact.SetStateAction<number | undefined>\n\t>;\n}\n\nexport const PlayerContext = React.createContext<PlayerContextValue>(null);\n\ninterface PlayerContextProviderProps {\n\tchildren: React.ReactChild | React.ReactChild[];\n}\n\nfunction PlayerContextProvider({ children }: PlayerContextProviderProps) {\n\tconst [activeAudioItem, setActiveAudioItem] = useState<AudioItem>(null);\n\tconst [activeItemDurationSeconds, setActiveItemDurationSeconds] = useState<\n\t\tnumber | undefined\n\t>(undefined);\n\tconst [playbackPositionSeconds, setPlaybackPositionSeconds] = useState<\n\t\tnumber | undefined\n\t>(undefined);\n\tconst [seekPositionSeconds, setSeekPositionSeconds] = useState<\n\t\tnumber | undefined\n\t>(undefined);\n\n\t// Reset PlayerContext when there is no active item\n\tuseEffect(() => {\n\t\tif (!activeAudioItem) {\n\t\t\tsetActiveItemDurationSeconds(undefined);\n\t\t\tsetPlaybackPositionSeconds(undefined);\n\t\t\tsetSeekPositionSeconds(undefined);\n\t\t}\n\t}, [activeAudioItem]);\n\n\treturn (\n\t\t<PlayerContext.Provider\n\t\t\tvalue={{\n\t\t\t\tactiveAudioItem,\n\t\t\t\tsetActiveAudioItem,\n\t\t\t\tactiveItemDurationSeconds,\n\t\t\t\tsetActiveItemDurationSeconds,\n\t\t\t\tplaybackPositionSeconds,\n\t\t\t\tsetPlaybackPositionSeconds,\n\t\t\t\tseekPositionSeconds,\n\t\t\t\tsetSeekPositionSeconds,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\n\t\t\t{/* Player is rendered here so it is persistent across all routes */}\n\t\t\t{activeAudioItem && (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"fixed bottom-0 left-0 right-0\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tboxShadow:\n\t\t\t\t\t\t\t\"0 -10px 15px -3px rgba(0, 0, 0, 0.1), 0 -4px 6px -2px rgba(0, 0, 0, 0.05)\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Player />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</PlayerContext.Provider>\n\t);\n}\n\nexport default PlayerContextProvider;\n", "import { useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\nimport { isAudioItem } from \"~/types\";\n\nimport AudioPlayer from \"~/components/AudioPlayer\";\n\nconst Player = () => {\n\tconst { activeAudioItem, setActiveAudioItem } = usePlayerContext();\n\n\tconst itemHref = useMemo(() => {\n\t\tif (isAudioItem(activeAudioItem)) {\n\t\t\treturn `/entities/audio-items/${activeAudioItem.slug}`;\n\t\t}\n\t\treturn window.location.href;\n\t}, [activeAudioItem]);\n\n\tif (!activeAudioItem) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className=\"flex flex-col align-center justify-center px-4 pb-4 pt-2 bg-white\">\n\t\t\t<div className=\"flex flex-row justify-between mb-2\">\n\t\t\t\t<div className=\"leading-8\">\n\t\t\t\t\tNow playing:{\" \"}\n\t\t\t\t\t<span className=\"text-gray-500\">{activeAudioItem.name}</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex flex-row items-center ml-4\">\n\t\t\t\t\t<Link to={itemHref} className=\"whitespace-nowrap\">\n\t\t\t\t\t\tView\n\t\t\t\t\t</Link>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn-icon flex ml-2 md:ml-4\"\n\t\t\t\t\t\tonClick={() => setActiveAudioItem(null)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className=\"material-icons\">close</i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<AudioPlayer item={activeAudioItem} key={activeAudioItem.id} />\n\t\t</div>\n\t);\n};\n\nexport default Player;\n", "import { useContext } from \"react\";\nimport { PlayerContext } from \"~/components/PlayerContextProvider\";\n\nconst usePlayerContext = () => {\n\tconst playerContext = useContext(PlayerContext);\n\treturn playerContext;\n};\n\nexport default usePlayerContext;\n", "import type {\n\tUser,\n\tAudioItem,\n\tCollection,\n\tInstrument,\n\tPerson,\n\tPlace,\n\tTune,\n} from \"@prisma/client\";\nimport { Prisma } from \"@prisma/client\";\n\nexport type Entity =\n\t| AudioItem\n\t| AudioItemWithRelations\n\t| Collection\n\t| CollectionWithRelations\n\t| Instrument\n\t| Person\n\t| Place\n\t| Tune;\n\nconst audioItemWithRelations = Prisma.validator<Prisma.AudioItemArgs>()({\n\tinclude: {\n\t\ttagsAsSubject: {\n\t\t\tinclude: {\n\t\t\t\tobjectAudioItem: true,\n\t\t\t\tobjectCollection: true,\n\t\t\t\tobjectInstrument: true,\n\t\t\t\tobjectPerson: true,\n\t\t\t\tobjectPlace: true,\n\t\t\t\tobjectTune: true,\n\t\t\t\trelationship: true,\n\t\t\t},\n\t\t},\n\t\tcreatedByUser: true,\n\t\tupdatedByUser: true,\n\t\tcomments: {\n\t\t\tinclude: {\n\t\t\t\tcreatedByUser: true,\n\t\t\t},\n\t\t},\n\t\tsavedItems: true,\n\t},\n});\nexport type AudioItemWithRelations = Prisma.AudioItemGetPayload<\n\ttypeof audioItemWithRelations\n>;\n\nconst collectionWithRelations = Prisma.validator<Prisma.CollectionArgs>()({\n\tinclude: { tagsAsSubject: true, createdByUser: true, updatedByUser: true },\n});\nexport type CollectionWithRelations = Prisma.CollectionGetPayload<\n\ttypeof collectionWithRelations\n>;\n\nconst commentWithRelations = Prisma.validator<Prisma.CommentArgs>()({\n\tinclude: { parentAudioItem: true, createdByUser: true },\n});\nexport type CommentWithRelations = Prisma.CommentGetPayload<\n\ttypeof commentWithRelations\n>;\n\nconst tagWithRelations = Prisma.validator<Prisma.TagArgs>()({\n\tinclude: {\n\t\tobjectAudioItem: true,\n\t\tobjectCollection: true,\n\t\tobjectInstrument: true,\n\t\tobjectPerson: true,\n\t\tobjectPlace: true,\n\t\tobjectTune: true,\n\t\trelationship: true,\n\t},\n});\nexport type TagWithRelations = Prisma.TagGetPayload<typeof tagWithRelations>;\n\n// EVERYTHING BELOW THIS LINE SHOULD BE GRADUALLY DEPRECATED\n\nexport enum EntityType {\n\tAudioItem = \"AudioItem\",\n\tPerson = \"Person\",\n\tInstrument = \"Instrument\",\n\tPlace = \"Place\",\n\tTune = \"Tune\",\n\tCollection = \"Collection\",\n}\n\nexport enum PerPage {\n\tTen = 10,\n\tTwenty = 20,\n\tFifty = 50,\n\tHundred = 100,\n}\n\nexport enum SortBy {\n\tRecentlyTagged = \"RecentlyTagged\",\n\tRecentlyAdded = \"RecentlyAdded\",\n\tAToZ = \"AToZ\",\n}\n\nexport enum ViewAs {\n\tCards = \"Cards\",\n\tCompact = \"Compact\",\n\tList = \"List\",\n}\n\nexport enum UserRole {\n\tUser = \"User\",\n\tAdmin = \"Admin\",\n}\n\nexport enum CopyrightPermissionStatus {\n\tFullNonCommercialGranted = \"FullNonCommercialGranted\",\n}\n\nexport enum EntityStatus {\n\tPublished = \"PUBLISHED\",\n\tTakenDown = \"TAKEN_DOWN\",\n}\n\nexport function isAudioItem(entity: Entity): entity is AudioItem {\n\treturn (entity as AudioItem).entityType === EntityType.AudioItem;\n}\nexport function isPerson(entity: Entity): entity is Person {\n\treturn (entity as Person).entityType === EntityType.Person;\n}\nexport function isInstrument(entity: Entity): entity is Instrument {\n\treturn (entity as Instrument).entityType === EntityType.Instrument;\n}\nexport function isPlace(entity: Entity): entity is Place {\n\treturn (entity as Place).entityType === EntityType.Place;\n}\nexport function isTune(entity: Entity): entity is Tune {\n\treturn (entity as Tune).entityType === EntityType.Tune;\n}\nexport function isCollection(entity: Entity): entity is Collection {\n\treturn (entity as Collection).entityType === EntityType.Collection;\n}\nexport interface Relationship {\n\tid: string;\n\tname: string;\n\tsubjectEntityType: EntityType;\n\tobjectEntityType: EntityType;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedAt: string;\n}\n\nexport interface Comment {\n\tid: string;\n\tparentAudioItem?: AudioItem | null;\n\ttext: string;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedAt: string;\n}\n\nexport interface SavedItem {\n\tid: string;\n\taudioItem?: AudioItem | null;\n\tuser?: User | null;\n\tcreatedAt: string;\n}\n\nexport enum TakedownRequestType {\n\tPerformer = \"Performer\",\n\tCopyright = \"Copyright\",\n}\n\nexport enum TakedownRequestStatus {\n\tPending = \"Pending\",\n\tApproved = \"Approved\",\n\tDenied = \"Denied\",\n}\n\nexport interface TakedownRequest {\n\tid: string;\n\tentity?: Entity;\n\ttype: TakedownRequestType;\n\tmessage: string | null;\n\tstatus: TakedownRequestStatus;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedByUser: User;\n\tupdatedAt: string;\n}\n\nexport const isPendingTakedownRequest = (takedownRequest: TakedownRequest) =>\n\ttakedownRequest.status.valueOf() === \"Pending\";\n\nexport const isApprovedTakedownRequest = (takedownRequest: TakedownRequest) =>\n\ttakedownRequest.status.valueOf() === \"Approved\";\n\nexport const isDeniedTakedownRequest = (takedownRequest: TakedownRequest) =>\n\ttakedownRequest.status.valueOf() === \"Denied\";\n\nexport enum VerificationRequestStatus {\n\tPending = \"Pending\",\n\tApproved = \"Approved\",\n\tDenied = \"Denied\",\n}\nexport interface VerificationRequest {\n\tid: string;\n\tperson: Person;\n\tpresignedImageDownloadUrl: string | null;\n\tcopyrightPermissionStatus: CopyrightPermissionStatus | null;\n\tstatus: VerificationRequestStatus;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedByUser: User;\n\tupdatedAt: string;\n}\n\nexport const isPendingVerificationRequest = (\n\tverificationRequest: VerificationRequest\n) => verificationRequest.status.valueOf() === \"Pending\";\n\nexport const isApprovedVerificationRequest = (\n\tverificationRequest: VerificationRequest\n) => verificationRequest.status.valueOf() === \"Approved\";\n\nexport const isDeniedVerificationRequest = (\n\tverificationRequest: VerificationRequest\n) => verificationRequest.status.valueOf() === \"Denied\";\n\nexport enum SubmissionStatus {\n\tPending = \"Pending\",\n\tApproved = \"Approved\",\n\tDenied = \"Denied\",\n}\nexport enum SubmissionMaterialType {\n\tAudio = \"Audio\",\n\tVideo = \"Video\",\n\tImage = \"Image\",\n\tDocument = \"Document\",\n}\nexport interface Submission {\n\tid: string;\n\tstatus: SubmissionStatus;\n\tmaterialTypes: SubmissionMaterialType[];\n\tuserControlsCopyright: boolean;\n\tcopyrightDetails: string | null;\n\tdescription: string | null;\n\ts3DirectoryKey: string | null;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedByUser: User;\n\tupdatedAt: string;\n}\n\nexport interface Stats {\n\tnumAudioItemsAllTime: number;\n\tnumTagsAllTime: number;\n\tnumCommentsAllTime: number;\n}\n", "import { useEffect, useRef } from \"react\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\nimport { AudioItem } from \"~/types\";\n\ninterface AudioPlayerProps {\n\titem: AudioItem;\n}\nconst AudioPlayer = ({ item }: AudioPlayerProps) => {\n\tconst audioPlayerRef = useRef<HTMLAudioElement>();\n\n\tconst {\n\t\tsetActiveItemDurationSeconds,\n\t\tsetPlaybackPositionSeconds,\n\t\tseekPositionSeconds,\n\t\tsetSeekPositionSeconds,\n\t} = usePlayerContext();\n\n\t// Set up event callbacks on the audio tag\n\tuseEffect(() => {\n\t\tconst audioPlayer = audioPlayerRef.current;\n\t\tif (audioPlayer) {\n\t\t\t// When the audio item's duration changes, update PlayerContext\n\t\t\taudioPlayer.ondurationchange = () => {\n\t\t\t\tconst duration = audioPlayer.duration;\n\t\t\t\tif (typeof duration === \"number\") {\n\t\t\t\t\tconst durationSeconds = Math.floor(audioPlayer.duration);\n\t\t\t\t\tsetActiveItemDurationSeconds(durationSeconds);\n\t\t\t\t}\n\t\t\t};\n\t\t\t// As the audio tag's playback position changes, update PlayerContext with the\n\t\t\t// new value\n\t\t\taudioPlayer.ontimeupdate = () => {\n\t\t\t\tconst playbackPositionSeconds = Math.floor(audioPlayer.currentTime);\n\t\t\t\tsetPlaybackPositionSeconds(playbackPositionSeconds);\n\t\t\t};\n\t\t}\n\t}, []);\n\n\t// If a seek position is set in PlayerContext, update audio tag's playback\n\t// position to match and ensure audio is playing\n\tuseEffect(() => {\n\t\tconst audioPlayer = audioPlayerRef.current;\n\t\tif (audioPlayer && typeof seekPositionSeconds === \"number\") {\n\t\t\taudioPlayer.currentTime = seekPositionSeconds;\n\t\t\tsetSeekPositionSeconds(undefined);\n\t\t\tif (audioPlayer.paused) {\n\t\t\t\taudioPlayer.play();\n\t\t\t}\n\t\t}\n\t}, [seekPositionSeconds]);\n\n\treturn (\n\t\t<audio\n\t\t\tref={audioPlayerRef}\n\t\t\tid=\"audio\"\n\t\t\tpreload=\"metadata\"\n\t\t\tautoPlay\n\t\t\tcontrols\n\t\t\tcontrolsList=\"nodownload\"\n\t\t\tclassName=\"w-full outline-none\"\n\t\t>\n\t\t\t<source src={item.urlSource} type=\"audio/mpeg\" />\n\t\t</audio>\n\t);\n};\n\nexport default AudioPlayer;\n", "import React, { useState, useCallback } from \"react\";\nimport { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\nimport { useHotkeys } from \"react-hotkeys-hook\";\n\nimport type { Entity } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\n\nimport Modal from \"~/components/Modal\";\nimport SearchEntities from \"~/components/SearchEntities\";\nimport type { User } from \"@prisma/client\";\n\ninterface Props {\n\tcurrentUser?: User | null;\n}\n\nconst Header = ({ currentUser }: Props) => {\n\tconst navigate = useNavigate();\n\n\tconst [searchModalIsVisible, setSearchModalIsVisible] = useState(false);\n\n\tconst openSearchModal = (\n\t\tevent: KeyboardEvent | React.SyntheticEvent<HTMLButtonElement>\n\t) => {\n\t\tevent.preventDefault();\n\t\tsetSearchModalIsVisible(true);\n\t};\n\tconst closeSearchModal = () => {\n\t\tsetSearchModalIsVisible(false);\n\t};\n\n\tuseHotkeys(\"/\", openSearchModal);\n\n\tconst onSelectSearchResult = useCallback(\n\t\t(entity: Entity) => {\n\t\t\tsetSearchModalIsVisible(false);\n\t\t\tnavigate(EntityService.makeHrefForView(entity));\n\t\t},\n\t\t[navigate]\n\t);\n\n\tconst onNewEntityCreated = useCallback(\n\t\t(entity: Entity) => {\n\t\t\tnavigate(EntityService.makeHrefForView(entity));\n\t\t},\n\t\t[navigate]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-row py-3 px-4 justify-between text-white items-center bg-teal-700\">\n\t\t\t\t<div className=\"flex flex-row\">\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto=\"/\"\n\t\t\t\t\t\tclassName=\"whitespace-nowrap no-underline text-yellow-200 hover:text-gray-400\"\n\t\t\t\t\t>\n\t\t\t\t\t\tTrad Archive\n\t\t\t\t\t</Link>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"flex flex-row items-center whitespace-nowrap text-white hover:text-gray-400 group ml-4\"\n\t\t\t\t\t\tonClick={openSearchModal}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className=\"material-icons\">search</i>\n\t\t\t\t\t\t<span className=\"hidden md:block md:pl-1\">Search</span>\n\t\t\t\t\t\t<span className=\"hidden md:block border border-gray-300 group-hover:border-gray-400 rounded text-xs px-1.5 ml-2.5\">{`/`}</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto=\"/entities/audio-items/random\"\n\t\t\t\t\t\tclassName=\"flex flex-row items-center no-underline text-white hover:text-gray-400 ml-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"block h-6\">\n\t\t\t\t\t\t\t<i className=\"material-icons\">shuffle</i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"md:pl-2 hidden md:block\">Random</div>\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\n\t\t\t\t{!currentUser ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"/login\"\n\t\t\t\t\t\t\tclassName=\"whitespace-nowrap text-white no-underline hover:text-gray-400 ml-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tLog In\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"/signup\"\n\t\t\t\t\t\t\tclassName=\"btn text-current no-underline whitespace-nowrap hover:text-current ml-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSign Up\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"/saved-items\"\n\t\t\t\t\t\t\tclassName=\"flex flex-row items-center whitespace-nowrap text-white no-underline hover:text-gray-400 ml-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i className=\"material-icons\">bookmark</i>\n\t\t\t\t\t\t\t<span className=\"hidden md:block md:pl-1\">Saved</span>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"/account\"\n\t\t\t\t\t\t\tclassName=\"flex flex-row items-center whitespace-nowrap text-white no-underline hover:text-gray-400 ml-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i className=\"material-icons\">account_circle</i>\n\t\t\t\t\t\t\t<span className=\"hidden md:block md:pl-1\">Account</span>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Search\"\n\t\t\t\tisVisible={searchModalIsVisible}\n\t\t\t\tonClose={closeSearchModal}\n\t\t\t>\n\t\t\t\t<SearchEntities\n\t\t\t\t\tonSelect={onSelectSearchResult}\n\t\t\t\t\tonNewEntityCreated={onNewEntityCreated}\n\t\t\t\t/>\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default Header;\n", "import { EntityType } from \"@prisma/client\";\n\nconst cleanSlug = (rawSlug: string) => {\n\tconst slugWithHyphens = rawSlug.replace(/[\\s]/g, \"-\");\n\treturn slugWithHyphens.replace(/[^a-zA-Z0-9-]/g, \"\").toLowerCase();\n};\n\ninterface EntityArg {\n\tentityType: EntityType | null;\n\tslug: string;\n}\n\nconst makeHrefForTopLevel = (entity?: EntityArg | null) => {\n\tswitch (entity?.entityType) {\n\t\tcase EntityType.AudioItem:\n\t\t\treturn \"/entities/audio-items\";\n\t\tcase EntityType.Person:\n\t\t\treturn \"/entities/people\";\n\t\tcase EntityType.Instrument:\n\t\t\treturn \"/entities/instruments\";\n\t\tcase EntityType.Place:\n\t\t\treturn \"/entities/places\";\n\t\tcase EntityType.Tune:\n\t\t\treturn \"/entities/tunes\";\n\t\tcase EntityType.Collection:\n\t\t\treturn \"/entities/collections\";\n\t\tdefault:\n\t\t\treturn \"\";\n\t}\n};\n\nconst makeHrefForView = (entity?: EntityArg | null) => {\n\tif (!entity) {\n\t\treturn \"\";\n\t}\n\treturn `${makeHrefForTopLevel(entity)}/${entity.slug}`;\n};\n\nconst makeHrefForEdit = (entity?: EntityArg | null) => {\n\tif (!entity) {\n\t\treturn \"\";\n\t}\n\treturn `${makeHrefForView(entity)}/edit`;\n};\n\nconst makeHrefForAbout = (entity?: EntityArg | null) => {\n\tif (!entity) {\n\t\treturn \"\";\n\t}\n\treturn `${makeHrefForView(entity)}/about`;\n};\n\nconst makeHrefForTags = (entity?: EntityArg | null) => {\n\tif (!entity) {\n\t\treturn \"\";\n\t}\n\treturn `${makeHrefForView(entity)}/tags`;\n};\n\nconst makeReadableNamePlural = (entity?: EntityArg | null) => {\n\tswitch (entity?.entityType) {\n\t\tcase EntityType.AudioItem:\n\t\t\treturn \"Audio Items\";\n\t\tcase EntityType.Person:\n\t\t\treturn \"People\";\n\t\tcase EntityType.Instrument:\n\t\t\treturn \"Instruments\";\n\t\tcase EntityType.Place:\n\t\t\treturn \"Places\";\n\t\tcase EntityType.Tune:\n\t\t\treturn \"Tunes\";\n\t\tcase EntityType.Collection:\n\t\t\treturn \"Collections\";\n\t\tdefault:\n\t\t\treturn \"\";\n\t}\n};\n\nconst EntityService = {\n\tcleanSlug,\n\tmakeHrefForTopLevel,\n\tmakeHrefForView,\n\tmakeHrefForEdit,\n\tmakeHrefForAbout,\n\tmakeHrefForTags,\n\tmakeReadableNamePlural,\n};\nexport default EntityService;\n", "import React, { useEffect } from \"react\";\nimport { useHotkeys } from \"react-hotkeys-hook\";\n\ninterface Props {\n\tchildren: React.ReactNode;\n\tisVisible: boolean;\n\tonClose: () => void;\n\ttitle?: string;\n\tclassName?: string;\n}\n\nconst Modal = ({\n\tchildren,\n\tisVisible = false,\n\tonClose,\n\ttitle,\n\tclassName,\n}: Props) => {\n\t// Close the modal when escape key is pressed, even if a form field is focused\n\tuseHotkeys(\n\t\t\"esc\",\n\t\tonClose,\n\t\t{\n\t\t\tenableOnTags: [\"INPUT\", \"TEXTAREA\"],\n\t\t},\n\t\t[onClose]\n\t);\n\n\t// \uD83D\uDEA8 Nasty ugly hack. There is something about how DOM elements are rendered\n\t// where the Filters component, even though it has a lower z-index than this,\n\t// appears above the Modal. So when the Modal is open we manually hide the\n\t// Filters.\n\tuseEffect(() => {\n\t\tif (isVisible) {\n\t\t\tdocument.querySelector(\"#filters\")?.classList.add(\"invisible\");\n\t\t} else {\n\t\t\tdocument.querySelector(\"#filters\")?.classList.remove(\"invisible\");\n\t\t}\n\t}, [isVisible]);\n\n\tif (!isVisible) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`${\n\t\t\t\tisVisible ? \"visible\" : \"hidden\"\n\t\t\t} z-40 fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center`}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName=\"absolute top-0 left-0 right-0 bottom-0 bg-black bg-opacity-40\"\n\t\t\t\tonClick={onClose}\n\t\t\t/>\n\n\t\t\t<div\n\t\t\t\tclassName={`bg-white cursor-auto rounded relative w-full px-4 pb-4 pt-3 m-2 max-h-9/10 overflow-y-auto overflow-x-hidden md:max-w-md ${\n\t\t\t\t\tclassName ?? \"\"\n\t\t\t\t}`}\n\t\t\t>\n\t\t\t\t<div className=\"flex flex-row justify-between items-center mb-4 text-black\">\n\t\t\t\t\t<h2>{title}</h2>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn-icon flex flex-row items-center justify-center ml-4 mb-0.5\"\n\t\t\t\t\t\tonClick={onClose}\n\t\t\t\t\t\taria-label=\"Close\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className=\"hidden md:block border border-gray-300 group-hover:border-gray-400 rounded text-xs px-1.5 ml-0.5 mr-3\">\n\t\t\t\t\t\t\tESC\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<i className=\"material-icons\">close</i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Add some style resets so that the Modal's parent doesn't affect the content */}\n\t\t\t\t<div className=\"text-base text-black font-normal whitespace-normal text-left cursor-auto\">\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Modal;\n", "import { Link } from \"@remix-run/react\";\nimport type { ChangeEvent } from \"react\";\nimport { useEffect, useState, useCallback } from \"react\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\nimport debounce from \"lodash/debounce\";\n\nimport type { Entity } from \"~/types\";\nimport { EntityType } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport EntityService from \"~/services/Entity\";\n\nimport LoadingCircle from \"~/components/LoadingCircle\";\nimport CreateNewEntities from \"~/components/CreateNewEntities\";\n\nconst SEARCH_ENTITIES_QUERY = gql`\n\tquery SearchEntities($input: SearchEntitiesInput!) {\n\t\tsearchEntities(input: $input) {\n\t\t\t...AudioItem\n\t\t\t...Person\n\t\t\t...Instrument\n\t\t\t...Place\n\t\t\t...Tune\n\t\t\t...Collection\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n\t${EntityFragments.person}\n\t${EntityFragments.instrument}\n\t${EntityFragments.place}\n\t${EntityFragments.tune}\n\t${EntityFragments.collection}\n`;\n\ninterface QueryData {\n\tsearchEntities: Entity[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\tsearchTerm: string;\n\t\tentityTypes?: EntityType[];\n\t\ttake?: number;\n\t};\n}\ninterface Props {\n\tentityTypes?: EntityType[];\n\ttake?: number;\n\tonSelect: (entity: Entity) => void;\n\tonNewEntityCreated?: (entity: Entity) => void;\n\tclassName?: string;\n}\nconst SearchEntities = ({\n\tentityTypes,\n\ttake,\n\tonSelect,\n\tonNewEntityCreated,\n\tclassName,\n}: Props) => {\n\tconst [searchTerm, setSearchTerm] = useState<string>(\"\");\n\tconst [searchResults, setSearchResults] = useState<Entity[] | undefined>();\n\n\tconst onChangeSearchTerm = (event: ChangeEvent<HTMLInputElement>) => {\n\t\tsetSearchTerm(event.target.value);\n\t};\n\n\tconst [searchEntities, { loading, data, error }] = useLazyQuery<\n\t\tQueryData,\n\t\tQueryVariables\n\t>(SEARCH_ENTITIES_QUERY, {\n\t\tfetchPolicy: \"no-cache\",\n\t});\n\tconst debouncedSearchEntities = useCallback(\n\t\tdebounce(searchEntities, 300, { trailing: true }),\n\t\t[searchEntities]\n\t);\n\n\tuseEffect(() => {\n\t\tconst cleanedSearchTerm = searchTerm?.trim() ?? \"\";\n\t\tif (cleanedSearchTerm.length >= 3) {\n\t\t\tdebouncedSearchEntities({\n\t\t\t\tvariables: {\n\t\t\t\t\tinput: {\n\t\t\t\t\t\tsearchTerm: cleanedSearchTerm,\n\t\t\t\t\t\tentityTypes,\n\t\t\t\t\t\ttake: take ?? 24,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}, [searchTerm]);\n\n\tuseEffect(() => {\n\t\tif (data?.searchEntities) {\n\t\t\tsetSearchResults(data.searchEntities);\n\t\t}\n\t}, [data]);\n\n\treturn (\n\t\t<div className={className ?? \"\"}>\n\t\t\t<div className=\"relative\">\n\t\t\t\t<input\n\t\t\t\t\tautoFocus\n\t\t\t\t\tplaceholder=\"Start typing...\"\n\t\t\t\t\tvalue={searchTerm}\n\t\t\t\t\tonChange={onChangeSearchTerm}\n\t\t\t\t/>\n\t\t\t\t{loading && (\n\t\t\t\t\t<div className=\"absolute top-2 right-2\">\n\t\t\t\t\t\t<LoadingCircle />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{error && (\n\t\t\t\t<div className=\"text-red-600 mt-4 ml-2\">Error fetching results</div>\n\t\t\t)}\n\n\t\t\t{searchResults && (\n\t\t\t\t<div className=\"mt-4\">\n\t\t\t\t\t<ul className=\"max-h-40\">\n\t\t\t\t\t\t{searchResults.map((entity, index) => (\n\t\t\t\t\t\t\t<li className=\"flex flex-row\" key={index}>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"flex flex-1 justify-between items-center text-left p-2 rounded cursor-pointer hover:bg-gray-200\"\n\t\t\t\t\t\t\t\t\tonClick={() => onSelect(entity)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t{entity.name}\n\t\t\t\t\t\t\t\t\t\t{entity.entityType === EntityType.Tune\n\t\t\t\t\t\t\t\t\t\t\t? ` (${entity.type})`\n\t\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span className=\"uppercase text-gray-500 text-sm\">\n\t\t\t\t\t\t\t\t\t\t{entity.entityType}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForAbout(entity)}>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn-icon w-auto px-2\"\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\taria-label={`Open ${entity.name} in New Tab`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i className=\"material-icons text-base\">launch</i>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\n\t\t\t\t\t{searchResults.length === 0 && (\n\t\t\t\t\t\t<div className=\"p-2 block text-gray-500\">No results</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{onNewEntityCreated && (\n\t\t\t\t\t\t<div className=\"mt-2 ml-2\">\n\t\t\t\t\t\t\t<CreateNewEntities\n\t\t\t\t\t\t\t\tentityTypes={entityTypes}\n\t\t\t\t\t\t\t\tonNewEntityCreated={onNewEntityCreated}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default SearchEntities;\n", "import { gql } from \"@apollo/client\";\n\nexport const UserFragments = {\n\tuser: gql`\n\t\tfragment User on User {\n\t\t\tid\n\t\t\tusername\n\t\t\tcopyrightPermissionStatus\n\t\t\tverifiedPerson {\n\t\t\t\tid\n\t\t\t\tentityType\n\t\t\t\tslug\n\t\t\t\tname\n\t\t\t}\n\t\t\tcreatedAt\n\t\t}\n\t`,\n\tcurrentUser: gql`\n\t\tfragment CurrentUser on User {\n\t\t\tid\n\t\t\trole\n\t\t\temail\n\t\t\tusername\n\t\t\tcopyrightPermissionStatus\n\t\t}\n\t`,\n};\n\nexport const RelationshipFragments = {\n\trelationship: gql`\n\t\tfragment Relationship on Relationship {\n\t\t\tid\n\t\t\tname\n\t\t\tsubjectEntityType\n\t\t\tobjectEntityType\n\t\t}\n\t`,\n};\n\nexport const TagEntityFragments = {\n\ttagAudioItem: gql`\n\t\tfragment TagAudioItem on AudioItem {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t}\n\t`,\n\ttagInstrument: gql`\n\t\tfragment TagInstrument on Instrument {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t}\n\t`,\n\ttagPerson: gql`\n\t\tfragment TagPerson on Person {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t}\n\t`,\n\ttagPlace: gql`\n\t\tfragment TagPlace on Place {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t}\n\t`,\n\ttagTune: gql`\n\t\tfragment TagTune on Tune {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\ttype\n\t\t}\n\t`,\n\ttagCollection: gql`\n\t\tfragment TagCollection on Collection {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t}\n\t`,\n};\n\nexport const TagFragments = {\n\ttag: gql`\n\t\tfragment Tag on Tag {\n\t\t\tid\n\t\t\trelationship {\n\t\t\t\t...Relationship\n\t\t\t}\n\t\t\tsubjectEntity {\n\t\t\t\t...TagAudioItem\n\t\t\t\t...TagInstrument\n\t\t\t\t...TagPerson\n\t\t\t\t...TagPlace\n\t\t\t\t...TagTune\n\t\t\t\t...TagCollection\n\t\t\t}\n\t\t\tobjectEntity {\n\t\t\t\t...TagAudioItem\n\t\t\t\t...TagInstrument\n\t\t\t\t...TagPerson\n\t\t\t\t...TagPlace\n\t\t\t\t...TagTune\n\t\t\t\t...TagCollection\n\t\t\t}\n\t\t\tsubjectTimeMarkerSeconds\n\t\t\tcreatedByUser {\n\t\t\t\t...User\n\t\t\t}\n\t\t\tcreatedAt\n\t\t}\n\t\t${RelationshipFragments.relationship}\n\t\t${TagEntityFragments.tagAudioItem}\n\t\t${TagEntityFragments.tagInstrument}\n\t\t${TagEntityFragments.tagPerson}\n\t\t${TagEntityFragments.tagPlace}\n\t\t${TagEntityFragments.tagTune}\n\t\t${TagEntityFragments.tagCollection}\n\t\t${UserFragments.user}\n\t`,\n\ttagForEntity: gql`\n\t\tfragment TagForEntity on Tag {\n\t\t\tid\n\t\t\trelationship {\n\t\t\t\t...Relationship\n\t\t\t}\n\t\t\tobjectEntity {\n\t\t\t\t...TagAudioItem\n\t\t\t\t...TagInstrument\n\t\t\t\t...TagPerson\n\t\t\t\t...TagPlace\n\t\t\t\t...TagTune\n\t\t\t\t...TagCollection\n\t\t\t}\n\t\t\tsubjectTimeMarkerSeconds\n\t\t\tcreatedByUser {\n\t\t\t\t...User\n\t\t\t}\n\t\t\tcreatedAt\n\t\t}\n\t\t${RelationshipFragments.relationship}\n\t\t${TagEntityFragments.tagAudioItem}\n\t\t${TagEntityFragments.tagInstrument}\n\t\t${TagEntityFragments.tagPerson}\n\t\t${TagEntityFragments.tagPlace}\n\t\t${TagEntityFragments.tagTune}\n\t\t${TagEntityFragments.tagCollection}\n\t\t${UserFragments.user}\n\t`,\n};\n\nexport const EntityFragments = {\n\taudioItem: gql`\n\t\tfragment AudioItem on AudioItem {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...TagForEntity\n\t\t\t}\n\t\t\tcommentsCount\n\t\t\tisSavedByUser\n\t\t\tstatus\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\tverifiedPerson {\n\t\t\t\t\tid\n\t\t\t\t\tentityType\n\t\t\t\t\tslug\n\t\t\t\t}\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedAt\n\t\t\turlSource\n\t\t\titmaAtomSlug\n\t\t}\n\t\t${TagFragments.tagForEntity}\n\t`,\n\tperson: gql`\n\t\tfragment Person on Person {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...Tag\n\t\t\t}\n\t\t\tverifiedUser {\n\t\t\t\t...User\n\t\t\t}\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedAt\n\t\t\tfirstName\n\t\t\tmiddleName\n\t\t\tlastName\n\t\t}\n\t\t${TagFragments.tag}\n\t\t${UserFragments.user}\n\t`,\n\tinstrument: gql`\n\t\tfragment Instrument on Instrument {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...Tag\n\t\t\t}\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t}\n\t\t}\n\t\t${TagFragments.tag}\n\t`,\n\tplace: gql`\n\t\tfragment Place on Place {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...Tag\n\t\t\t}\n\t\t\tlatitude\n\t\t\tlongitude\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t}\n\t\t}\n\t\t${TagFragments.tag}\n\t`,\n\ttune: gql`\n\t\tfragment Tune on Tune {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...Tag\n\t\t\t}\n\t\t\ttheSessionTuneId\n\t\t\ttype\n\t\t\tmeter\n\t\t\tmode\n\t\t\tabc\n\t\t}\n\t\t${TagFragments.tag}\n\t`,\n\tcollection: gql`\n\t\tfragment Collection on Collection {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...Tag\n\t\t\t}\n\t\t\titmaAtomSlug\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedAt\n\t\t}\n\t\t${TagFragments.tag}\n\t\t${UserFragments.user}\n\t`,\n};\n\nexport const CommentFragments = {\n\tcomment: gql`\n\t\tfragment Comment on Comment {\n\t\t\tid\n\t\t\ttext\n\t\t\tparentAudioItem {\n\t\t\t\t...AudioItem\n\t\t\t}\n\t\t\tcreatedByUser {\n\t\t\t\t...User\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedAt\n\t\t}\n\t\t${EntityFragments.audioItem}\n\t\t${UserFragments.user}\n\t`,\n\tcommentWithoutParentEntity: gql`\n\t\tfragment CommentWithoutParentEntity on Comment {\n\t\t\tid\n\t\t\ttext\n\t\t\tcreatedByUser {\n\t\t\t\t...User\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedAt\n\t\t}\n\t\t${UserFragments.user}\n\t`,\n};\n\nexport const SavedItemFragments = {\n\tsavedItem: gql`\n\t\tfragment SavedItem on SavedItem {\n\t\t\tid\n\t\t\taudioItem {\n\t\t\t\t...AudioItem\n\t\t\t}\n\t\t\tcreatedAt\n\t\t}\n\t\t${EntityFragments.audioItem}\n\t`,\n};\n\nexport const TakedownRequestFragments = {\n\ttakedownRequest: gql`\n\t\tfragment TakedownRequest on TakedownRequest {\n\t\t\tid\n\t\t\tentity {\n\t\t\t\t...AudioItem\n\t\t\t}\n\t\t\ttype\n\t\t\tmessage\n\t\t\tstatus\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tupdatedAt\n\t\t}\n\t\t${EntityFragments.audioItem}\n\t`,\n\ttakedownRequestWithoutEntity: gql`\n\t\tfragment TakedownRequestWithoutEntity on TakedownRequest {\n\t\t\tid\n\t\t\ttype\n\t\t\tmessage\n\t\t\tstatus\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tupdatedAt\n\t\t}\n\t`,\n};\n\nexport const VerificationRequestFragments = {\n\tverificationRequest: gql`\n\t\tfragment VerificationRequest on VerificationRequest {\n\t\t\tid\n\t\t\tperson {\n\t\t\t\tid\n\t\t\t\tentityType\n\t\t\t\tname\n\t\t\t\tslug\n\t\t\t}\n\t\t\tpresignedImageDownloadUrl\n\t\t\tcopyrightPermissionStatus\n\t\t\tstatus\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tupdatedAt\n\t\t}\n\t`,\n};\n\nexport const SubmissionFragments = {\n\tsubmission: gql`\n\t\tfragment Submission on Submission {\n\t\t\tid\n\t\t\tstatus\n\t\t\tmaterialTypes\n\t\t\tuserControlsCopyright\n\t\t\tcopyrightDetails\n\t\t\tdescription\n\t\t\ts3DirectoryKey\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tupdatedAt\n\t\t}\n\t`,\n};\n", "interface Props {\n\tclassName?: string;\n}\n\nconst LoadingCircle = ({ className }: Props) => (\n\t<div className=\"h-6\">\n\t\t<i\n\t\t\tclassName={`material-icons animate-spin text-gray-500 ${className ?? \"\"}`}\n\t\t>\n\t\t\tscatter_plot\n\t\t</i>\n\t</div>\n);\n\nexport default LoadingCircle;\n", "import { useState, useCallback } from \"react\";\n\nimport type { Entity, Person, Instrument, Place, Collection } from \"~/types\";\nimport { EntityType } from \"~/types\";\nimport useRequireLogin from \"~/hooks/useRequireLogin\";\n\nimport Modal from \"~/components/Modal\";\nimport CreatePersonForm from \"~/components/CreatePersonForm\";\nimport CreateInstrumentForm from \"~/components/CreateInstrumentForm\";\nimport CreatePlaceForm from \"~/components/CreatePlaceForm\";\nimport CreateCollectionForm from \"~/components/CreateCollectionForm\";\n\ninterface Props {\n\tentityTypes?: EntityType[];\n\tonNewEntityCreated: (entity: Entity) => void;\n}\nconst CreateNewEntities = ({ entityTypes, onNewEntityCreated }: Props) => {\n\tconst { currentUser, requireLogin } = useRequireLogin();\n\n\tconst [createPersonModalIsVisible, setCreatePersonModalIsVisible] =\n\t\tuseState(false);\n\tconst [createInstrumentModalIsVisible, setCreateInstrumentModalIsVisible] =\n\t\tuseState(false);\n\tconst [createPlaceModalIsVisible, setCreatePlaceModalIsVisible] =\n\t\tuseState(false);\n\tconst [createCollectionModalIsVisible, setCreateCollectionModalIsVisible] =\n\t\tuseState(false);\n\n\tconst onCreateNewPersonClicked = useCallback(async () => {\n\t\tif (!currentUser) {\n\t\t\treturn await requireLogin();\n\t\t}\n\t\tsetCreatePersonModalIsVisible(true);\n\t}, [requireLogin, currentUser]);\n\n\tconst onCreateNewInstrumentClicked = useCallback(async () => {\n\t\tif (!currentUser) {\n\t\t\treturn await requireLogin();\n\t\t}\n\t\tsetCreateInstrumentModalIsVisible(true);\n\t}, [requireLogin, currentUser]);\n\n\tconst onCreateNewPlaceClicked = useCallback(async () => {\n\t\tif (!currentUser) {\n\t\t\treturn await requireLogin();\n\t\t}\n\t\tsetCreatePlaceModalIsVisible(true);\n\t}, [requireLogin, currentUser]);\n\n\tconst onCreateNewCollectionClicked = useCallback(async () => {\n\t\tif (!currentUser) {\n\t\t\treturn await requireLogin();\n\t\t}\n\t\tsetCreateCollectionModalIsVisible(true);\n\t}, [requireLogin, currentUser]);\n\n\tconst onNewPersonCreated = useCallback(\n\t\t(person: Person) => {\n\t\t\tsetCreatePersonModalIsVisible(false);\n\t\t\tonNewEntityCreated(person);\n\t\t},\n\t\t[onNewEntityCreated]\n\t);\n\n\tconst onNewInstrumentCreated = useCallback((instrument: Instrument) => {\n\t\tsetCreateInstrumentModalIsVisible(false);\n\t\tonNewEntityCreated(instrument);\n\t}, []);\n\n\tconst onNewPlaceCreated = useCallback((place: Place) => {\n\t\tsetCreatePlaceModalIsVisible(false);\n\t\tonNewEntityCreated(place);\n\t}, []);\n\n\tconst onNewCollectionCreated = useCallback((collection: Collection) => {\n\t\tsetCreateCollectionModalIsVisible(false);\n\t\tonNewEntityCreated(collection);\n\t}, []);\n\n\tconst shouldShowCreatePerson =\n\t\ttypeof entityTypes === \"undefined\" ||\n\t\tentityTypes.includes(EntityType.Person);\n\tconst shouldShowCreateInstrument =\n\t\ttypeof entityTypes === \"undefined\" ||\n\t\tentityTypes.includes(EntityType.Instrument);\n\tconst shouldShowCreatePlace =\n\t\ttypeof entityTypes === \"undefined\" ||\n\t\tentityTypes.includes(EntityType.Place);\n\tconst shouldShowCreateCollection =\n\t\ttypeof entityTypes === \"undefined\" ||\n\t\tentityTypes.includes(EntityType.Collection);\n\n\tconst shouldShowCommaAfterCreatePerson =\n\t\t!entityTypes ||\n\t\tshouldShowCreateInstrument ||\n\t\tshouldShowCreatePlace ||\n\t\tshouldShowCreateCollection;\n\tconst shouldShowCommaAfterCreateInstrument =\n\t\t!entityTypes || shouldShowCreatePlace || shouldShowCreateCollection;\n\tconst shouldShowCommaAfterCreatePlace =\n\t\t!entityTypes || shouldShowCreateCollection;\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"text-gray-500\">\n\t\t\t\tCan't find it? Create new:{\" \"}\n\t\t\t\t{shouldShowCreatePerson && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<button className=\"btn-text\" onClick={onCreateNewPersonClicked}>\n\t\t\t\t\t\t\tPerson\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{shouldShowCommaAfterCreatePerson && \", \"}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{shouldShowCreateInstrument && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<button className=\"btn-text\" onClick={onCreateNewInstrumentClicked}>\n\t\t\t\t\t\t\tInstrument\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{shouldShowCommaAfterCreateInstrument && \", \"}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{shouldShowCreatePlace && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<button className=\"btn-text\" onClick={onCreateNewPlaceClicked}>\n\t\t\t\t\t\t\tPlace\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{shouldShowCommaAfterCreatePlace && \", \"}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{shouldShowCreateCollection && (\n\t\t\t\t\t<button className=\"btn-text\" onClick={onCreateNewCollectionClicked}>\n\t\t\t\t\t\tCollection\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Create New Person\"\n\t\t\t\tisVisible={createPersonModalIsVisible}\n\t\t\t\tonClose={() => setCreatePersonModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t<CreatePersonForm onSuccess={onNewPersonCreated} />\n\t\t\t</Modal>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Create New Instrument\"\n\t\t\t\tisVisible={createInstrumentModalIsVisible}\n\t\t\t\tonClose={() => setCreateInstrumentModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t<CreateInstrumentForm onSuccess={onNewInstrumentCreated} />\n\t\t\t</Modal>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Create New Place\"\n\t\t\t\tisVisible={createPlaceModalIsVisible}\n\t\t\t\tonClose={() => setCreatePlaceModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t<CreatePlaceForm onSuccess={onNewPlaceCreated} />\n\t\t\t</Modal>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Create New Collection\"\n\t\t\t\tisVisible={createCollectionModalIsVisible}\n\t\t\t\tonClose={() => setCreateCollectionModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t<CreateCollectionForm onSuccess={onNewCollectionCreated} />\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default CreateNewEntities;\n", "import { useLocation, useNavigate } from \"@remix-run/react\";\nimport type { User } from \"@prisma/client\";\n\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\n\ninterface RequireLoginFunctionArgs {\n\tredirectTo?: string;\n}\n\ninterface HookReturnValue {\n\trequireLogin: (args?: RequireLoginFunctionArgs) => void;\n\tcurrentUser: User | null | undefined;\n}\n\n// useRequireLogin returns a function that will navigate to the /login page\n// and then back to the given redirect path, if specified.\nconst useRequireLogin = (): HookReturnValue => {\n\tconst navigate = useNavigate();\n\tconst { pathname } = useLocation();\n\tconst [currentUser] = useCurrentUser();\n\n\tconst requireLogin = ({ redirectTo }: RequireLoginFunctionArgs = {}) => {\n\t\tconst params = new URLSearchParams({ redirectTo: redirectTo ?? pathname });\n\t\tnavigate(`/login?${params.toString()}`);\n\t};\n\n\treturn { requireLogin, currentUser };\n};\n\nexport default useRequireLogin;\n", "import { useEffect } from \"react\";\nimport type { LazyQueryResult } from \"@apollo/client\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\n\nimport type { User } from \"~/types\";\nimport { UserFragments } from \"~/fragments\";\n\nexport const CURRENT_USER_QUERY = gql`\n\tquery CurrentUser {\n\t\tcurrentUser {\n\t\t\t...CurrentUser\n\t\t}\n\t}\n\t${UserFragments.currentUser}\n`;\n\ninterface QueryData {\n\tcurrentUser: User;\n}\n\nconst useCurrentUser = (): [\n\tUser | null | undefined,\n\tLazyQueryResult<QueryData, {}>\n] => {\n\tconst [getCurrentUser, currentUserQuery] =\n\t\tuseLazyQuery<QueryData>(CURRENT_USER_QUERY);\n\n\tuseEffect(() => {\n\t\tgetCurrentUser();\n\t}, [getCurrentUser]);\n\n\tconst currentUser = currentUserQuery.data?.currentUser;\n\n\treturn [currentUser, currentUserQuery];\n};\n\nexport default useCurrentUser;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { Person } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport EntityService from \"~/services/Entity\";\n\nconst CREATE_PERSON_MUTATION = gql`\n\tmutation CreatePerson($input: CreatePersonInput!) {\n\t\tcreatePerson(input: $input) {\n\t\t\t...Person\n\t\t}\n\t}\n\t${EntityFragments.person}\n`;\ninterface CreatePersonInput {\n\tslug: string;\n\taliases?: string;\n\tdescription?: string;\n\tfirstName: string;\n\tmiddleName?: string;\n\tlastName: string;\n}\ninterface Props {\n\tonSuccess?: (person: Person) => void;\n}\nconst CreatePersonForm = ({ onSuccess }: Props) => {\n\tconst [createPerson, { loading, error, data }] = useMutation<\n\t\t{ createPerson: Person },\n\t\t{ input: CreatePersonInput }\n\t>(CREATE_PERSON_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\n\tconst [firstName, setFirstName] = useState(\"\");\n\tconst [middleName, setMiddleName] = useState(\"\");\n\tconst [lastName, setLastName] = useState(\"\");\n\tconst [slug, setSlug] = useState(\"\");\n\tconst [aliases, setAliases] = useState(\"\");\n\tconst [description, setDescription] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tlet proposedSlug = \"\";\n\t\tif (firstName) {\n\t\t\tproposedSlug = firstName;\n\t\t}\n\t\tif (middleName) {\n\t\t\tproposedSlug = `${proposedSlug}-${middleName}`;\n\t\t}\n\t\tif (lastName) {\n\t\t\tproposedSlug = `${proposedSlug}-${lastName}`;\n\t\t}\n\t\tsetSlug(EntityService.cleanSlug(proposedSlug));\n\t}, [firstName, middleName, lastName]);\n\n\tconst onCreatePerson = (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tfirstName,\n\t\t\tmiddleName,\n\t\t\tlastName,\n\t\t\tslug,\n\t\t\taliases,\n\t\t\tdescription,\n\t\t};\n\t\tcreatePerson({ variables: { input } });\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.createPerson) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.createPerson);\n\t\t\t}\n\t\t\twindow.alert(\"Person created successfully!\");\n\t\t\tsetFirstName(\"\");\n\t\t\tsetMiddleName(\"\");\n\t\t\tsetLastName(\"\");\n\t\t\tsetSlug(\"\");\n\t\t\tsetAliases(\"\");\n\t\t\tsetDescription(\"\");\n\t\t}\n\t}, [data]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onCreatePerson}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"First name\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={firstName}\n\t\t\t\t\t\tonChange={(event) => setFirstName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Middle name (optional)\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={middleName}\n\t\t\t\t\t\tonChange={(event) => setMiddleName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Last name\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={lastName}\n\t\t\t\t\t\tonChange={(event) => setLastName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"URL slug (ie. kitty-hayes)\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={slug}\n\t\t\t\t\t\tonChange={(event) => setSlug(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tThis will be used for the URL of this Person, for example{\" \"}\n\t\t\t\t\t\t{`https://trad-archive.com/entities/people/${\n\t\t\t\t\t\t\tslug || \"kitty-hayes\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Person. For example:{\" \"}\n\t\t\t\t\t\t<em>Tony D, The Tradfather, Tony from the County Calamari</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={5}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Create\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default CreatePersonForm;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { Instrument } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport EntityService from \"~/services/Entity\";\n\nconst CREATE_INSTRUMENT_MUTATION = gql`\n\tmutation CreateInstrument($input: CreateInstrumentInput!) {\n\t\tcreateInstrument(input: $input) {\n\t\t\t...Instrument\n\t\t}\n\t}\n\t${EntityFragments.instrument}\n`;\ninterface CreateInstrumentInput {\n\tname: string;\n\tslug: string;\n\taliases?: string;\n\tdescription?: string;\n}\ninterface Props {\n\tonSuccess?: (instrument: Instrument) => void;\n}\nconst CreateInstrumentForm = ({ onSuccess }: Props) => {\n\tconst [createInstrument, { loading, error, data }] = useMutation<\n\t\t{ createInstrument: Instrument },\n\t\t{ input: CreateInstrumentInput }\n\t>(CREATE_INSTRUMENT_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\n\tconst [name, setName] = useState(\"\");\n\tconst [slug, setSlug] = useState(\"\");\n\tconst [aliases, setAliases] = useState(\"\");\n\tconst [description, setDescription] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tconst proposedSlug = EntityService.cleanSlug(name ?? \"\");\n\t\tsetSlug(proposedSlug);\n\t}, [name]);\n\n\tconst onCreateInstrument = (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tname,\n\t\t\tslug,\n\t\t\taliases,\n\t\t\tdescription,\n\t\t};\n\t\tcreateInstrument({ variables: { input } });\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.createInstrument) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.createInstrument);\n\t\t\t}\n\t\t\twindow.alert(\"Instrument created successfully!\");\n\t\t\tsetName(\"\");\n\t\t\tsetSlug(\"\");\n\t\t\tsetAliases(\"\");\n\t\t\tsetDescription(\"\");\n\t\t}\n\t}, [data]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onCreateInstrument}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(event) => setName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"URL slug (ie. button-accordion)\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={slug}\n\t\t\t\t\t\tonChange={(event) => setSlug(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tThis will be used for the URL of this Instrument, for example{\" \"}\n\t\t\t\t\t\t{`https://trad-archive.com/entities/instruments/${\n\t\t\t\t\t\t\tslug || \"button-accordion\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Instrument. For example:{\" \"}\n\t\t\t\t\t\t<em>Stomach Steinway, Squeezebox, Belly Organ</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={5}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Create\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default CreateInstrumentForm;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { Place } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport EntityService from \"~/services/Entity\";\n\nconst CREATE_PLACE_MUTATION = gql`\n\tmutation CreatePlace($input: CreatePlaceInput!) {\n\t\tcreatePlace(input: $input) {\n\t\t\t...Place\n\t\t}\n\t}\n\t${EntityFragments.place}\n`;\ninterface CreatePlaceInput {\n\tslug: string;\n\taliases?: string;\n\tdescription?: string;\n\tlatitude: number;\n\tlongitude: number;\n}\ninterface Props {\n\tonSuccess?: (place: Place) => void;\n}\nconst CreatePlaceForm = ({ onSuccess }: Props) => {\n\tconst [createPlace, { loading, error, data }] = useMutation<\n\t\t{ createPlace: Place },\n\t\t{ input: CreatePlaceInput }\n\t>(CREATE_PLACE_MUTATION, { errorPolicy: \"all\" });\n\n\tconst [name, setName] = useState(\"\");\n\tconst [slug, setSlug] = useState(\"\");\n\tconst [aliases, setAliases] = useState(\"\");\n\tconst [latitude, setLatitude] = useState(\"\");\n\tconst [longitude, setLongitude] = useState(\"\");\n\tconst [description, setDescription] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tconst proposedSlug = EntityService.cleanSlug(name ?? \"\");\n\t\tsetSlug(proposedSlug);\n\t}, [name]);\n\n\tconst onCreatePlace = async (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tname,\n\t\t\tslug,\n\t\t\taliases,\n\t\t\tlatitude: parseFloat(latitude),\n\t\t\tlongitude: parseFloat(longitude),\n\t\t\tdescription,\n\t\t};\n\t\ttry {\n\t\t\tawait createPlace({ variables: { input } });\n\t\t} catch {\n\t\t\t//\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.createPlace) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.createPlace);\n\t\t\t}\n\t\t\twindow.alert(\"Place created successfully!\");\n\t\t\tsetName(\"\");\n\t\t\tsetSlug(\"\");\n\t\t\tsetAliases(\"\");\n\t\t\tsetLatitude(\"\");\n\t\t\tsetLongitude(\"\");\n\t\t\tsetDescription(\"\");\n\t\t}\n\t}, [data]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onCreatePlace}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(event) => setName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"URL slug (ie. galway-city)\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={slug}\n\t\t\t\t\t\tonChange={(event) => setSlug(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tThis will be used for the URL of this Place, for example{\" \"}\n\t\t\t\t\t\t{`https://trad-archive.com/entities/places/${\n\t\t\t\t\t\t\tslug || \"galway-city\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Place. For example:{\" \"}\n\t\t\t\t\t\t<em>Gaillimh, The City of Tribes</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Latitude\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={latitude}\n\t\t\t\t\t\tonChange={(event) => setLatitude(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Longitude\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={longitude}\n\t\t\t\t\t\tonChange={(event) => setLongitude(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tTo find the latitude and longitude, visit{\" \"}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={`https://www.google.com/maps/place/${name}`}\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{name ? `${name} on ` : \"\"}Google Maps (will open in new tab)\n\t\t\t\t\t\t</a>{\" \"}\n\t\t\t\t\t\tand right-click on the exact location you'd like. You'll see numbers\n\t\t\t\t\t\tlike \"53.2838294,-9.1888286\". Click to copy them to your clipboard.\n\t\t\t\t\t\tThe first one is latitude, and the second is longitude.\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={5}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Create\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default CreatePlaceForm;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { Collection } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport EntityService from \"~/services/Entity\";\n\nconst CREATE_COLLECTION_MUTATION = gql`\n\tmutation CreateCollection($input: CreateCollectionInput!) {\n\t\tcreateCollection(input: $input) {\n\t\t\t...Collection\n\t\t}\n\t}\n\t${EntityFragments.collection}\n`;\n\ninterface CreateCollectionInput {\n\tslug: string;\n\taliases?: string;\n\tdescription?: string;\n}\ninterface Props {\n\tonSuccess?: (collection: Collection) => void;\n}\n\nconst CreateCollectionForm = ({ onSuccess }: Props) => {\n\tconst [createCollection, { loading, error, data }] = useMutation<\n\t\t{ createCollection: Collection },\n\t\t{ input: CreateCollectionInput }\n\t>(CREATE_COLLECTION_MUTATION, { errorPolicy: \"all\" });\n\n\tconst [name, setName] = useState(\"\");\n\tconst [slug, setSlug] = useState(\"\");\n\tconst [aliases, setAliases] = useState(\"\");\n\tconst [description, setDescription] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tconst proposedSlug = EntityService.cleanSlug(name ?? \"\");\n\t\tsetSlug(proposedSlug);\n\t}, [name]);\n\n\tconst onCreateCollection = async (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tname,\n\t\t\tslug,\n\t\t\taliases,\n\t\t\tdescription,\n\t\t};\n\t\ttry {\n\t\t\tawait createCollection({ variables: { input } });\n\t\t} catch {\n\t\t\t//\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.createCollection) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.createCollection);\n\t\t\t}\n\t\t\twindow.alert(\"Collection created successfully!\");\n\t\t\tsetName(\"\");\n\t\t\tsetSlug(\"\");\n\t\t\tsetAliases(\"\");\n\t\t\tsetDescription(\"\");\n\t\t}\n\t}, [data]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<div className=\"text-gray-500 mb-8\">\n\t\t\t\t\tA Collection is a logical grouping of other entities. For example,\n\t\t\t\t\t\"O'Neill's Music of Ireland\" would be a Collection of Tunes. Or the\n\t\t\t\t\t\"Alen MacWeeney Collection\" would be a Collection of AudioItems.\n\t\t\t\t</div>\n\n\t\t\t\t<form onSubmit={onCreateCollection}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(event) => setName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"URL slug (ie. alan-macweeney-collection)\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={slug}\n\t\t\t\t\t\tonChange={(event) => setSlug(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tThis will be used for the URL of this Collection, for example{\" \"}\n\t\t\t\t\t\t{`https://trad-archive.com/entities/collections/${\n\t\t\t\t\t\t\tslug || \"alan-macweeney-collection\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Collection. For example:{\" \"}\n\t\t\t\t\t\t<em>O'Neill's, 1000 Fiddle Tunes</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={5}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Create\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default CreateCollectionForm;\n", "export default function Footer() {\n\treturn (\n\t\t<div className=\"flex flex-col items-start w-full p-4 pt-7 pb-24 bg-gray-900 text-gray-100\">\n\t\t\t<div className=\"mb-4\">\n\t\t\t\tThis project is a collaboration between the{\" \"}\n\t\t\t\t<a href=\"https://www.itma.ie/\" target=\"_blank\">\n\t\t\t\t\tIrish Traditional Music Archive{\" \"}\n\t\t\t\t\t<i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t</a>{\" \"}\n\t\t\t\tand{\" \"}\n\t\t\t\t<a href=\"https://dangurney.net\" target=\"_blank\">\n\t\t\t\t\tDan Gurney <i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t</a>\n\t\t\t</div>\n\n\t\t\t<div className=\"mb-4\">\n\t\t\t\tSpecial thanks to{\" \"}\n\t\t\t\t<a href=\"https://thesession.org/\" target=\"_blank\">\n\t\t\t\t\tThe Session <i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t</a>{\" \"}\n\t\t\t\tfor providing tune data.\n\t\t\t</div>\n\n\t\t\t<div className=\"mb-4\">\n\t\t\t\tAll of the code is open source on{\" \"}\n\t\t\t\t<a href=\"https://github.com/dgurns/trad-archive\" target=\"_blank\">\n\t\t\t\t\tGitHub <i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t</a>\n\t\t\t\t. We welcome community contributors.\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<a\n\t\t\t\t\thref=\"https://github.com/dgurns/trad-archive/discussions\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t>\n\t\t\t\t\tShare feedback or report a bug{\" \"}\n\t\t\t\t\t<i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n", "import { useState } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\nimport { useQuery, useMutation, gql } from \"@apollo/client\";\n\nimport type { Submission } from \"~/types\";\nimport { SubmissionFragments } from \"~/fragments\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport FileUploader from \"~/components/FileUploader\";\nimport DateTimeService from \"~/services/DateTime\";\n\nconst SUBMISSION = gql`\n\tquery Submission($input: SubmissionInput!) {\n\t\tsubmission(input: $input) {\n\t\t\t...Submission\n\t\t}\n\t}\n\t${SubmissionFragments.submission}\n`;\n\nconst CREATE_PRESIGNED_FILE_UPLOAD_URLS = gql`\n\tmutation CreatePresignedFileUploadUrls(\n\t\t$input: CreatePresignedFileUploadUrlsInput!\n\t) {\n\t\tcreatePresignedFileUploadUrls(input: $input) {\n\t\t\tfilename\n\t\t\tpresignedUploadUrl\n\t\t}\n\t}\n`;\n\ninterface QueryData {\n\tsubmission: Submission;\n}\ninterface QueryVars {\n\tinput: {\n\t\tid: string;\n\t};\n}\ninterface MutationData {\n\tcreatePresignedFileUploadUrls: Array<{\n\t\tfilename: string;\n\t\tpresignedUploadUrl: string;\n\t}>;\n}\ninterface MutationVars {\n\tinput: {\n\t\tsubmissionId: string;\n\t\tfilenames: string[];\n\t};\n}\n\nconst SubmissionsViewByIdUpload = () => {\n\tconst navigate = useNavigate();\n\tconst { id } = navigate.query;\n\tconst submissionId = typeof id === \"string\" ? id : undefined;\n\n\tconst { data, error } = useQuery<QueryData, QueryVars>(SUBMISSION, {\n\t\tvariables: { input: { id: submissionId } },\n\t\tskip: !submissionId,\n\t});\n\n\tconst [files, setFiles] = useState<File[]>([]);\n\tconst [uploadQueue, setUploadQueue] =\n\t\tuseState<Array<{ file: File; uploadUrl: string }>>();\n\n\tconst [getPresignedUrls] = useMutation<MutationData, MutationVars>(\n\t\tCREATE_PRESIGNED_FILE_UPLOAD_URLS\n\t);\n\n\tconst onUploadClicked = async () => {\n\t\tif (!submissionId) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\t// Prepend filenames with their size to avoid collisions, for example\n\t\t\t// multiple \"Track1.mp3\"\n\t\t\tconst filenamesForUrls = files.map((f) => `${f.size}_${f.name}`);\n\t\t\tconst response = await getPresignedUrls({\n\t\t\t\tvariables: { input: { submissionId, filenames: filenamesForUrls } },\n\t\t\t});\n\t\t\tconst uploadUrls = response.data.createPresignedFileUploadUrls;\n\t\t\tif (uploadUrls.length !== files.length) {\n\t\t\t\tthrow new Error(\"Unexpected number of presigned upload URLs\");\n\t\t\t}\n\t\t\tsetUploadQueue(\n\t\t\t\tfiles.map((f, index) => ({\n\t\t\t\t\tfile: f,\n\t\t\t\t\tuploadUrl: uploadUrls[index].presignedUploadUrl,\n\t\t\t\t}))\n\t\t\t);\n\t\t} catch {\n\t\t\talert(\"Error uploading files. Please try again.\");\n\t\t}\n\t};\n\n\tif (!data) {\n\t\treturn (\n\t\t\t<Layout>\n\t\t\t\t<RequireUser>\n\t\t\t\t\t{error ? (\n\t\t\t\t\t\t<div className=\"text-red-600\">\n\t\t\t\t\t\t\t{error.graphQLErrors.map((e) => e.message).join(\", \")}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<LoadingBlock />\n\t\t\t\t\t)}\n\t\t\t\t</RequireUser>\n\t\t\t</Layout>\n\t\t);\n\t}\n\n\tconst onFilesSelected = (event) => {\n\t\t// Add any new files to the array in state\n\t\tconst updatedFiles = [...files];\n\t\tconst selected = Array.from<File>(event.target.files);\n\t\tfor (const s of selected) {\n\t\t\tif (\n\t\t\t\t!updatedFiles.find(\n\t\t\t\t\t(f) =>\n\t\t\t\t\t\tf.name === s.name &&\n\t\t\t\t\t\tf.size === s.size &&\n\t\t\t\t\t\tf.lastModified === s.lastModified\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tupdatedFiles.push(s);\n\t\t\t}\n\t\t}\n\t\tsetFiles(updatedFiles);\n\t};\n\n\tconst onRemove = (file: File) => {\n\t\tsetFiles(\n\t\t\tfiles.filter((f) => {\n\t\t\t\tif (\n\t\t\t\t\tf.name === file.name &&\n\t\t\t\t\tf.size === file.size &&\n\t\t\t\t\tf.lastModified === file.lastModified\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t})\n\t\t);\n\t};\n\n\tconst onUploadSuccess = () => {\n\t\talert(\"Files uploaded successfully!\");\n\t\tnavigate(\"/account/submissions\");\n\t};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<Breadcrumb\n\t\t\t\t\titems={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Account\",\n\t\t\t\t\t\t\thref: \"/account\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: \"Submissions\", href: \"/account/submissions\" },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: DateTimeService.formatDateYearTime(\n\t\t\t\t\t\t\t\tdata.submission.createdAt,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: \"Upload Files\" },\n\t\t\t\t\t]}\n\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t/>\n\n\t\t\t\t<div className=\"flex-col\">\n\t\t\t\t\t{!uploadQueue ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<label htmlFor=\"file-picker\">\n\t\t\t\t\t\t\t\t<div className=\"btn-text mb-4 cursor-pointer\">\n\t\t\t\t\t\t\t\t\t{files.length === 0 ? \"Choose Files\" : \"Choose More Files\"}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"file-picker\"\n\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\tonChange={onFilesSelected}\n\t\t\t\t\t\t\t\tstyle={{ display: \"none\" }}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{files.length > 0 && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<ul className=\"mb-6\">\n\t\t\t\t\t\t\t\t\t\t{files.map((f, index) => (\n\t\t\t\t\t\t\t\t\t\t\t<li key={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t{f.name}{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text pl-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onRemove(f)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tRemove\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t<button className=\"btn block\" onClick={onUploadClicked}>\n\t\t\t\t\t\t\t\t\t\tUpload {files.length} File{files.length === 1 ? \"\" : \"s\"}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<FileUploader\n\t\t\t\t\t\t\tfilesWithUploadUrls={uploadQueue}\n\t\t\t\t\t\t\tonSuccess={onUploadSuccess}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default SubmissionsViewByIdUpload;\n", "interface Props {\n\tchildren: React.ReactNode;\n}\n\nconst Layout = ({ children }: Props) => {\n\treturn (\n\t\t<div className=\"flex flex-col justify-start items-center\">\n\t\t\t<div className=\"w-full min-h-screen lg:max-w-5xl pb-44\">{children}</div>\n\t\t</div>\n\t);\n};\n\nexport default Layout;\n", "import { useNavigate } from \"@remix-run/react\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\n\ninterface Props {\n\tchildren: React.ReactNode | React.ReactNode[];\n\trequireUserId?: string;\n}\n\nconst RequireUser = ({\n\tchildren,\n\trequireUserId,\n}: Props): React.ReactElement | null => {\n\tconst navigate = useNavigate();\n\n\tconst [currentUser, { data, error }] = useCurrentUser();\n\n\tif (!data && !error) {\n\t\treturn <div>Checking for logged-in user...</div>;\n\t} else if (requireUserId && currentUser?.id !== requireUserId) {\n\t\treturn <div>You do not have access to this page</div>;\n\t} else if (currentUser) {\n\t\treturn <>{children}</>;\n\t} else if (typeof window !== \"undefined\") {\n\t\tnavigate({\n\t\t\tpathname: \"/login\",\n\t\t\tquery: { redirectTo: window.location.pathname },\n\t\t});\n\t\treturn null;\n\t}\n\n\treturn null;\n};\n\nexport default RequireUser;\n", "import { Link } from \"@remix-run/react\";\n\ninterface BreadcrumbItem {\n\tlabel: string;\n\thref?: string;\n}\n\ninterface Props {\n\titems: BreadcrumbItem[];\n\tclassName?: string;\n}\n\nconst Breadcrumb = ({ items = [], className }: Props) => {\n\tif (items.length === 0) {\n\t\treturn null;\n\t}\n\tif (items.length === 1) {\n\t\treturn <h1 className={className ?? \"\"}>{items[0].label}</h1>;\n\t}\n\n\tconst subItems = items.slice(0, items.length - 1);\n\tconst finalItem = items[items.length - 1];\n\n\treturn (\n\t\t<div className={`flex flex-col ${className ?? \"\"}`}>\n\t\t\t<div className=\"flex flex-row items-center mb-1\">\n\t\t\t\t{subItems.map(({ label, href }, index) => (\n\t\t\t\t\t<div className=\"flex\" key={index}>\n\t\t\t\t\t\t{href ? (\n\t\t\t\t\t\t\t<Link to={href}>{label}</Link>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{label}</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<i className=\"material-icons text-gray-500 text-base ml-1\">\n\t\t\t\t\t\t\tkeyboard_arrow_right\n\t\t\t\t\t\t</i>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\n\t\t\t<h1>{finalItem.label}</h1>\n\t\t</div>\n\t);\n};\n\nexport default Breadcrumb;\n", "interface Props {\n\tclassName?: string;\n}\n\nconst LoadingBlock = ({ className }: Props) => (\n\t<div\n\t\tclassName={`flex flex-col justify-start items-start w-full ${\n\t\t\tclassName ?? \"\"\n\t\t}`}\n\t>\n\t\t<div className=\"flex h-5 w-2/3 rounded bg-gray-300 mb-4 animate-pulse\" />\n\t\t<div className=\"flex h-12 w-full rounded bg-gray-300 mb-4 animate-pulse\" />\n\t\t<div className=\"flex h-5 w-5/12 rounded bg-gray-300 mb-4 animate-pulse\" />\n\t</div>\n);\n\nexport default LoadingBlock;\n", "import { useEffect, useRef, useState } from \"react\";\nimport LoadingCircle from \"~/components/LoadingCircle\";\n\ninterface FileWithUploadUrl {\n\tfile: File;\n\tuploadUrl: string;\n}\ninterface Props {\n\tfilesWithUploadUrls: FileWithUploadUrl[];\n\tonSuccess?: () => void;\n}\nconst FileUploader = ({ filesWithUploadUrls, onSuccess }: Props) => {\n\tconst queue = useRef<{\n\t\tpending: FileWithUploadUrl[];\n\t\tinProgress: FileWithUploadUrl[];\n\t\tfailed: FileWithUploadUrl[];\n\t\tsucceeded: FileWithUploadUrl[];\n\t}>({\n\t\tpending: filesWithUploadUrls,\n\t\tinProgress: [],\n\t\tfailed: [],\n\t\tsucceeded: [],\n\t});\n\tconst [ticker, setTicker] = useState(0);\n\n\tconst moveFromPendingToInProgress = (file: FileWithUploadUrl) => {\n\t\tconst updated = { ...queue.current };\n\t\tupdated.pending = updated.pending.filter(\n\t\t\t(f) => f.uploadUrl !== file.uploadUrl\n\t\t);\n\t\tupdated.inProgress = [...updated.inProgress, file];\n\t\tqueue.current = updated;\n\t};\n\tconst moveFromInProgressToSucceeded = (file: FileWithUploadUrl) => {\n\t\tconst updated = { ...queue.current };\n\t\tupdated.inProgress = updated.inProgress.filter(\n\t\t\t(f) => f.uploadUrl !== file.uploadUrl\n\t\t);\n\t\tupdated.succeeded = [...updated.succeeded, file];\n\t\tqueue.current = updated;\n\t};\n\tconst moveFromInProgressToFailed = (file: FileWithUploadUrl) => {\n\t\tconst updated = { ...queue.current };\n\t\tupdated.inProgress = updated.inProgress.filter(\n\t\t\t(f) => f.uploadUrl !== file.uploadUrl\n\t\t);\n\t\tupdated.failed = [...updated.failed, file];\n\t\tqueue.current = updated;\n\t};\n\n\tconst uploadFile = async (f: FileWithUploadUrl) => {\n\t\ttry {\n\t\t\tmoveFromPendingToInProgress(f);\n\t\t\tawait fetch(f.uploadUrl, {\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\tbody: f.file,\n\t\t\t});\n\t\t\tmoveFromInProgressToSucceeded(f);\n\t\t} catch {\n\t\t\tmoveFromInProgressToFailed(f);\n\t\t}\n\t};\n\n\tconst checkForFilesToUpload = () => {\n\t\tif (queue.current.succeeded.length === filesWithUploadUrls.length) {\n\t\t\tif (onSuccess) {\n\t\t\t\tsetTimeout(() => onSuccess(), 500);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tqueue.current.pending.length === 0 ||\n\t\t\tqueue.current.inProgress.length >= 2\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tuploadFile(queue.current.pending[0]);\n\t};\n\n\tuseEffect(() => {\n\t\tconst interval = setInterval(checkForFilesToUpload, 1000);\n\t\treturn () => clearInterval(interval);\n\t}, [checkForFilesToUpload]);\n\n\t// Use the ticker to force re-renders of upload status\n\tuseEffect(() => {\n\t\tconst interval = setInterval(() => setTicker(ticker + 1), 1000);\n\t\treturn () => clearInterval(interval);\n\t}, [ticker]);\n\n\tconst renderFileStatus = (file: FileWithUploadUrl) => {\n\t\tif (queue.current.inProgress.includes(file)) {\n\t\t\treturn <LoadingCircle />;\n\t\t} else if (queue.current.failed.includes(file)) {\n\t\t\treturn <i className=\"material-icons text-red-600\">error</i>;\n\t\t} else if (queue.current.succeeded.includes(file)) {\n\t\t\treturn <i className=\"material-icons text-teal-600\">check</i>;\n\t\t} else {\n\t\t\treturn <i className=\"material-icons text-gray-500\">schedule</i>;\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"flex flex-col\">\n\t\t\t<ul className=\"flex flex-col\" key={ticker}>\n\t\t\t\t{filesWithUploadUrls.map((f, i) => (\n\t\t\t\t\t<li className=\"flex flex-row\" key={i}>\n\t\t\t\t\t\t<div className=\"flex flex-1\">{f.file.name}</div>\n\t\t\t\t\t\t{renderFileStatus(f)}\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</div>\n\t);\n};\n\nexport default FileUploader;\n", "import format from \"date-fns/format\";\nimport isToday from \"date-fns/isToday\";\nimport isYesterday from \"date-fns/isYesterday\";\n\n/**\n * @param {number} inputSeconds\n * \t- Number of seconds to convert to a duration\n * @returns {string}\n * \t- Readable duration in the format 10:01:01 (hours:minutes:seconds)\n */\nconst formatSecondsAsDuration = (inputSeconds: number) => {\n\tconst hours = Math.floor(inputSeconds / (60 * 60));\n\tconst minutes = Math.floor((inputSeconds - hours * 60 * 60) / 60);\n\tconst minutesAsTwoCharString = minutes < 10 ? `0${minutes}` : `${minutes}`;\n\tconst seconds = inputSeconds - hours * 60 * 60 - minutes * 60;\n\tconst secondsAsTwoCharString = seconds < 10 ? `0${seconds}` : `${seconds}`;\n\tlet output = `${minutes}:${secondsAsTwoCharString}`;\n\tif (hours > 0) {\n\t\toutput = `${hours}:${minutesAsTwoCharString}:${secondsAsTwoCharString}`;\n\t}\n\treturn output;\n};\n\nconst formatDateYear = (\n\tdate?: Date | number | string,\n\tshouldCapitalize: boolean | undefined = false\n) => {\n\tif (!date) {\n\t\treturn \"\";\n\t}\n\tconst dateObject = date instanceof Date ? date : new Date(date);\n\tif (isToday(dateObject)) {\n\t\treturn format(dateObject, `'${shouldCapitalize ? \"T\" : \"t\"}oday`);\n\t} else if (isYesterday(dateObject)) {\n\t\treturn format(dateObject, `'${shouldCapitalize ? \"Y\" : \"y\"}esterday`);\n\t} else {\n\t\treturn format(new Date(date), `LLLL d, y`);\n\t}\n};\n\nconst formatDateYearTime = (\n\tdate?: Date | number | string,\n\tshouldCapitalize: boolean | undefined = false\n) => {\n\tif (!date) {\n\t\treturn \"\";\n\t}\n\tconst dateObject = date instanceof Date ? date : new Date(date);\n\tif (isToday(dateObject)) {\n\t\treturn format(\n\t\t\tdateObject,\n\t\t\t`'${shouldCapitalize ? \"T\" : \"t\"}oday at' h:mm a`\n\t\t);\n\t} else if (isYesterday(dateObject)) {\n\t\treturn format(\n\t\t\tdateObject,\n\t\t\t`'${shouldCapitalize ? \"Y\" : \"y\"}esterday at' h:mm a`\n\t\t);\n\t} else {\n\t\treturn format(new Date(date), `LLLL d, y 'at' h:mm a`);\n\t}\n};\n\nconst DateTimeService = {\n\tformatSecondsAsDuration,\n\tformatDateYear,\n\tformatDateYearTime,\n};\nexport default DateTimeService;\n", "import { useEffect, useMemo, useState } from \"react\";\nimport { Link } from \"@remix-run/react\";\nimport { useQuery, useMutation, gql } from \"@apollo/client\";\nimport compareDesc from \"date-fns/compareDesc\";\n\nimport { VerificationRequestFragments } from \"~/fragments\";\nimport {\n\tisApprovedVerificationRequest,\n\tisDeniedVerificationRequest,\n\tisPendingVerificationRequest,\n\tVerificationRequest,\n\tVerificationRequestStatus,\n} from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport DateTimeService from \"~/services/DateTime\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport RequireAdmin from \"~/components/RequireAdmin\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\n\nconst VERIFICATION_REQUESTS = gql`\n\tquery VerificationRequests($input: VerificationRequestsInput!) {\n\t\tverificationRequests(input: $input) {\n\t\t\t...VerificationRequest\n\t\t}\n\t}\n\t${VerificationRequestFragments.verificationRequest}\n`;\n\nconst UPDATE_VERIFICATION_REQUEST_STATUS = gql`\n\tmutation UpdateVerificationRequestStatus(\n\t\t$input: UpdateVerificationRequestStatusInput!\n\t) {\n\t\tupdateVerificationRequestStatus(input: $input) {\n\t\t\t...VerificationRequest\n\t\t}\n\t}\n\t${VerificationRequestFragments.verificationRequest}\n`;\n\ninterface QueryData {\n\tverificationRequests: VerificationRequest[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\ttake?: number;\n\t\tskip?: number;\n\t\tstatus?: VerificationRequestStatus;\n\t};\n}\ninterface MutationData {\n\tupdateVerificationRequestStatus: VerificationRequest;\n}\ninterface MutationVariables {\n\tinput: {\n\t\tid: string;\n\t\tstatus: VerificationRequestStatus;\n\t};\n}\n\nconst VerificationRequests = () => {\n\tconst [statusToFetch, setStatusToFetch] = useState<\n\t\tVerificationRequestStatus | undefined\n\t>(VerificationRequestStatus.Pending);\n\n\tconst onChangeStatusToFetch = (event) => {\n\t\tconst updatedStatus = event.target.value;\n\t\tif (!updatedStatus) {\n\t\t\tsetStatusToFetch(undefined);\n\t\t} else {\n\t\t\tsetStatusToFetch(event.target.value as VerificationRequestStatus);\n\t\t}\n\t};\n\n\tconst {\n\t\tloading: verificationRequestsLoading,\n\t\tdata: verificationRequestsData,\n\t\terror: verificationRequestsError,\n\t} = useQuery<QueryData, QueryVariables>(VERIFICATION_REQUESTS, {\n\t\t// Take a high number until we implement pagination\n\t\tvariables: { input: { take: 200, skip: 0, status: statusToFetch } },\n\t\tfetchPolicy: \"network-only\",\n\t});\n\n\tconst verificationRequests = useMemo(() => {\n\t\tif (!verificationRequestsData?.verificationRequests) {\n\t\t\treturn [];\n\t\t}\n\t\tconst sortedVerificationRequests = [\n\t\t\t...verificationRequestsData.verificationRequests,\n\t\t];\n\t\tsortedVerificationRequests.sort((a, b) =>\n\t\t\tcompareDesc(new Date(a.createdAt), new Date(b.createdAt))\n\t\t);\n\t\treturn sortedVerificationRequests;\n\t}, [verificationRequestsData]);\n\n\tconst [\n\t\tupdateVerificationRequestStatus,\n\t\t{\n\t\t\tloading: updateVerificationRequestStatusLoading,\n\t\t\terror: updateVerificationRequestStatusError,\n\t\t},\n\t] = useMutation<MutationData, MutationVariables>(\n\t\tUPDATE_VERIFICATION_REQUEST_STATUS,\n\t\t{ errorPolicy: \"all\" }\n\t);\n\n\tconst onApproveClicked = (id: string) => {\n\t\tupdateVerificationRequestStatus({\n\t\t\tvariables: { input: { id, status: VerificationRequestStatus.Approved } },\n\t\t});\n\t};\n\n\tconst onDenyClicked = (id: string) => {\n\t\tupdateVerificationRequestStatus({\n\t\t\tvariables: { input: { id, status: VerificationRequestStatus.Denied } },\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tif (updateVerificationRequestStatusError) {\n\t\t\twindow.alert(\n\t\t\t\t\"Error updating Verification Request status. Please reload the page and try again.\"\n\t\t\t);\n\t\t}\n\t}, [updateVerificationRequestStatusError]);\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireAdmin>\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: \"Admin\",\n\t\t\t\t\t\t\t\thref: \"/admin\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ label: \"Verification Requests\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<select\n\t\t\t\t\t\tclassName=\"mb-6 flex max-w-xs\"\n\t\t\t\t\t\tvalue={statusToFetch}\n\t\t\t\t\t\tonChange={onChangeStatusToFetch}\n\t\t\t\t\t>\n\t\t\t\t\t\t<option value={VerificationRequestStatus.Pending}>Pending</option>\n\t\t\t\t\t\t<option value={VerificationRequestStatus.Approved}>Approved</option>\n\t\t\t\t\t\t<option value={VerificationRequestStatus.Denied}>Denied</option>\n\t\t\t\t\t\t<option value=\"\">All</option>\n\t\t\t\t\t</select>\n\n\t\t\t\t\t{verificationRequestsLoading && <LoadingBlock />}\n\t\t\t\t\t{verificationRequestsError && (\n\t\t\t\t\t\t<div className=\"text-red-600\">\n\t\t\t\t\t\t\t{verificationRequestsError.graphQLErrors\n\t\t\t\t\t\t\t\t.map((error) => error.message)\n\t\t\t\t\t\t\t\t.join(\", \")}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{!verificationRequestsLoading &&\n\t\t\t\t\t\tverificationRequests?.map((verificationRequest, index) => {\n\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tperson,\n\t\t\t\t\t\t\t\tpresignedImageDownloadUrl,\n\t\t\t\t\t\t\t\tcreatedAt,\n\t\t\t\t\t\t\t\tcreatedByUser,\n\t\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\t} = verificationRequest;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className=\"mb-4\" key={index}>\n\t\t\t\t\t\t\t\t\tCreated {DateTimeService.formatDateYearTime(createdAt)}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\tUser{\" \"}\n\t\t\t\t\t\t\t\t\t<Link to={`/users/${createdByUser.id}`}>\n\t\t\t\t\t\t\t\t\t\t<a target=\"_blank\">{createdByUser.username}</a>\n\t\t\t\t\t\t\t\t\t</Link>{\" \"}\n\t\t\t\t\t\t\t\t\tis asking to be verified as Person{\" \"}\n\t\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(person)}>\n\t\t\t\t\t\t\t\t\t\t<a target=\"_blank\">{person.name}</a>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t{presignedImageDownloadUrl && (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\tProof:{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t<a href={presignedImageDownloadUrl} target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t\t\tImage\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tEmail: {createdByUser.email}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\tStatus: {status}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t{isApprovedVerificationRequest(verificationRequest) && (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={updateVerificationRequestStatusLoading}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => onDenyClicked(id)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tDeny\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{isDeniedVerificationRequest(verificationRequest) && (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={updateVerificationRequestStatusLoading}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => onApproveClicked(id)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tApprove\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{isPendingVerificationRequest(verificationRequest) && (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text mr-4\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={updateVerificationRequestStatusLoading}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onApproveClicked(id)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tApprove\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={updateVerificationRequestStatusLoading}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onDenyClicked(id)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tDeny\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t</RequireAdmin>\n\t\t</Layout>\n\t);\n};\n\nexport default VerificationRequests;\n", "import { useNavigate } from \"@remix-run/react\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\nimport UserService from \"~/services/User\";\n\ninterface Props {\n\tchildren: React.ReactNode | React.ReactNode[];\n}\n\nconst RequireAdmin = ({ children }: Props): React.ReactElement | null => {\n\tconst navigate = useNavigate();\n\n\tconst [currentUser, { data, error }] = useCurrentUser();\n\n\tif (currentUser && UserService.isAdmin(currentUser)) {\n\t\treturn <>{children}</>;\n\t} else if (!data && !error) {\n\t\treturn <div>Checking admin permissions...</div>;\n\t} else if (typeof window !== \"undefined\") {\n\t\tnavigate({\n\t\t\tpathname: \"/login\",\n\t\t\tquery: { redirectTo: window.location.pathname },\n\t\t});\n\t\treturn null;\n\t}\n\n\treturn null;\n};\n\nexport default RequireAdmin;\n", "import type { User } from \"~/types\";\nimport { UserRole } from \"~/types\";\n\nconst isAdmin = (user?: User) => {\n\tif (!user) {\n\t\treturn false;\n\t}\n\treturn user.role === UserRole.Admin;\n};\n\nconst UserService = {\n\tisAdmin,\n};\nexport default UserService;\n", "import { db } from \"~/utils/db.server\";\nimport { redirect } from \"@remix-run/node\";\n\nexport async function loader() {\n\tconst totalAudioItems = await db.audioItem.count();\n\tconst randomSkip = Math.round(Math.random() * (totalAudioItems - 1));\n\tconst [audioItem] = await db.audioItem.findMany({\n\t\ttake: 1,\n\t\tskip: randomSkip,\n\t});\n\treturn redirect(`/entities/audio-items/${audioItem.slug}`);\n}\n", "import { useLoaderData, Link } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\n\nimport { db } from \"~/utils/db.server\";\nimport { ViewAs, type AudioItemWithRelations } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport Layout from \"~/components/Layout\";\nimport AudioItemComponent from \"~/components/AudioItem\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\n\ninterface LoaderData {\n\taudioItem: AudioItemWithRelations;\n}\n\nexport async function loader({\n\tparams,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst { slug } = params;\n\tconst audioItem = await db.audioItem.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t\tinclude: {\n\t\t\ttagsAsSubject: {\n\t\t\t\tinclude: {\n\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\tobjectTune: true,\n\t\t\t\t\trelationship: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\tcreatedByUser: true,\n\t\t\tupdatedByUser: true,\n\t\t\tcomments: {\n\t\t\t\tinclude: {\n\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t},\n\t\t\t\torderBy: {\n\t\t\t\t\tcreatedAt: \"asc\",\n\t\t\t\t},\n\t\t\t},\n\t\t\tsavedItems: true,\n\t\t},\n\t});\n\tif (!audioItem) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this AudioItem\",\n\t\t});\n\t}\n\treturn {\n\t\taudioItem,\n\t};\n}\n\nconst ViewAudioItemBySlug = () => {\n\tconst { audioItem } = useLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<div className=\"mb-6\">\n\t\t\t\t<Breadcrumb\n\t\t\t\t\titems={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: EntityService.makeReadableNamePlural(audioItem),\n\t\t\t\t\t\t\thref: EntityService.makeHrefForTopLevel(audioItem),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: audioItem.name },\n\t\t\t\t\t]}\n\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t/>\n\t\t\t\t<div className=\"flex flex-row mb-6\">\n\t\t\t\t\t<Link to={EntityService.makeHrefForAbout(audioItem)}>About</Link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<AudioItemComponent audioItem={audioItem} viewAs={ViewAs.Cards} />\n\t\t</Layout>\n\t);\n};\n\nexport default ViewAudioItemBySlug;\n", "import { useCallback, useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\nimport type { Tag } from \"@prisma/client\";\n\nimport type { AudioItemWithRelations } from \"~/types\";\nimport DateTime from \"~/services/DateTime\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\n\nimport Tags from \"~/components/Tags\";\nimport SaveItemButton from \"~/components/SaveItemButton\";\nimport ViewCommentsButton from \"~/components/ViewCommentsButton\";\nimport TimeMarkers from \"~/components/TimeMarkers\";\n\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n\tshowTitle?: boolean;\n\tclassName?: string;\n}\nconst AudioItemCard = ({ audioItem, showTitle = true, className }: Props) => {\n\tconst {\n\t\tname,\n\t\tslug,\n\t\tdescription,\n\t\ttagsAsSubject: tags,\n\t\tstatus,\n\t\tcreatedByUser,\n\t\tcreatedAt,\n\t} = audioItem;\n\n\tconst {\n\t\tactiveAudioItem,\n\t\tsetActiveAudioItem,\n\t\tactiveItemDurationSeconds,\n\t\tplaybackPositionSeconds,\n\t} = usePlayerContext();\n\n\tconst audioItemIsInPlayer = activeAudioItem?.id === audioItem.id;\n\tconst tagsWithTimeMarkers: Tag[] = useMemo(() => {\n\t\tif (!Array.isArray(tags)) {\n\t\t\treturn [];\n\t\t}\n\t\treturn tags.filter(\n\t\t\t(tag) => typeof tag.subjectTimeMarkerSeconds === \"number\"\n\t\t);\n\t}, [tags]);\n\n\tconst onPlayPressed = useCallback(() => {\n\t\tsetActiveAudioItem(audioItem);\n\t}, [audioItem, setActiveAudioItem]);\n\n\tconst shouldShowPositionAndDuration =\n\t\taudioItemIsInPlayer &&\n\t\ttypeof playbackPositionSeconds === \"number\" &&\n\t\ttypeof activeItemDurationSeconds === \"number\";\n\tconst positionAndDuration = `${DateTime.formatSecondsAsDuration(\n\t\tplaybackPositionSeconds ?? 0\n\t)} / ${DateTime.formatSecondsAsDuration(activeItemDurationSeconds ?? 0)}`;\n\n\tconst isTakenDown = status === \"TAKEN_DOWN\";\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-col justify-start items-start bg-white shadow-md rounded p-4 pb-3 ${\n\t\t\t\tclassName ?? \"\"\n\t\t\t}`}\n\t\t>\n\t\t\t{showTitle && (\n\t\t\t\t<h2 className=\"mb-2\">\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto={`/entities/audio-items/${slug}`}\n\t\t\t\t\t\tclassName=\"no-underline text-gray-700\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{name}\n\t\t\t\t\t</Link>\n\t\t\t\t</h2>\n\t\t\t)}\n\n\t\t\t<div className=\"mb-4\">\n\t\t\t\t<Tags audioItem={audioItem} />\n\t\t\t</div>\n\n\t\t\t<div className=\"flex flex-col w-full border border-gray-200 rounded mb-2\">\n\t\t\t\t{isTakenDown ? (\n\t\t\t\t\t<div className=\"flex flex-row items-center px-4 py-6 text-gray-500\">\n\t\t\t\t\t\tThis Audio Item has been removed via an approved Takedown Request\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"flex flex-row justify-start items-center pr-4 h-16\">\n\t\t\t\t\t\t\t<div className=\"flex flex-1\">\n\t\t\t\t\t\t\t\t{audioItemIsInPlayer ? (\n\t\t\t\t\t\t\t\t\t<div className=\"pl-4 text-gray-500\">Playing</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tstyle={{ lineHeight: 0 }}\n\t\t\t\t\t\t\t\t\t\tonClick={onPlayPressed}\n\t\t\t\t\t\t\t\t\t\taria-label=\"Play\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i className=\"material-icons text-teal-600 hover:text-teal-800\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-6xl\">play_arrow</span>\n\t\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={`ml-4 text-gray-500 opacity-0 ${\n\t\t\t\t\t\t\t\t\t\tshouldShowPositionAndDuration\n\t\t\t\t\t\t\t\t\t\t\t? \"opacity-100 transition-opacity delay-500 duration-400\"\n\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{positionAndDuration}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{tagsWithTimeMarkers.length > 0 && (\n\t\t\t\t\t<div className=\"mx-4 mb-2 pt-3 border-t border-gray-200\">\n\t\t\t\t\t\t<TimeMarkers audioItem={audioItem} />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<div className=\"mt-4\">\n\t\t\t\t<div className=\"text-gray-500 text-sm flex flex-col sm:flex-row\">\n\t\t\t\t\tAdded\n\t\t\t\t\t{createdByUser && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t\tby{\" \"}\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tto={`/users/${createdByUser.id}`}\n\t\t\t\t\t\t\t\tclassName=\"flex flex-row px-0 sm:px-1\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{createdByUser.username}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}{\" \"}\n\t\t\t\t\t{DateTime.formatDateYearTime(createdAt)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"text-sm mt-1 text-gray-900 whitespace-pre-wrap\">\n\t\t\t\t\t{description || \"No description\"}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"border-t border-gray-200 mt-4 pt-3 w-full flex flex-row justify-between items-center\">\n\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\t<ViewCommentsButton audioItem={audioItem} />\n\n\t\t\t\t\t<div className=\"ml-2\">\n\t\t\t\t\t\t<SaveItemButton audioItem={audioItem} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AudioItemCard;\n", "import { useMemo, useState, useCallback, useEffect } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport type { TagWithRelations, AudioItemWithRelations } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport TagService from \"~/services/Tag\";\n\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\n\ninterface TagProps {\n\ttag: TagWithRelations;\n}\nconst TagLink = ({ tag }: TagProps) => {\n\tconst [tooltipIsVisible, setTooltipIsVisible] = useState(false);\n\tconst [timeoutFunc, setTimeoutFunc] = useState<NodeJS.Timeout>();\n\n\tconst onMouseEnter = useCallback(() => {\n\t\tsetTimeoutFunc(setTimeout(() => setTooltipIsVisible(true), 400));\n\t}, []);\n\n\tconst onMouseLeave = useCallback(() => {\n\t\tif (timeoutFunc) {\n\t\t\tclearTimeout(timeoutFunc);\n\t\t\tsetTimeoutFunc(undefined);\n\t\t}\n\t\tsetTooltipIsVisible(false);\n\t}, [timeoutFunc]);\n\n\t// Clean up the timeout function when component unmounts\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (timeoutFunc) {\n\t\t\t\tclearTimeout(timeoutFunc);\n\t\t\t\tsetTimeoutFunc(undefined);\n\t\t\t}\n\t\t};\n\t}, [timeoutFunc]);\n\n\tconst { relationship } = tag;\n\tconst objectEntity = TagService.getObjectEntity(tag);\n\tconst href = EntityService.makeHrefForView(objectEntity);\n\tif (!objectEntity || !href) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<Link\n\t\t\tto={href}\n\t\t\tclassName=\"relative block p-1 px-2 mb-2 no-underline border border-teal-600 rounded hover:border-teal-800\"\n\t\t\tonMouseEnter={onMouseEnter}\n\t\t\tonMouseLeave={onMouseLeave}\n\t\t>\n\t\t\t{objectEntity.name}\n\t\t\t<div\n\t\t\t\tclassName={`${\n\t\t\t\t\ttooltipIsVisible ? \"flex\" : \"hidden\"\n\t\t\t\t} absolute -top-8 left-0 text-center px-2 py-1 text-sm whitespace-nowrap bg-gray-700 rounded text-white`}\n\t\t\t>\n\t\t\t\t{relationship.name} {objectEntity.entityType?.toUpperCase()}\n\t\t\t</div>\n\t\t</Link>\n\t);\n};\n\ninterface TagsProps {\n\taudioItem: AudioItemWithRelations;\n}\nconst Tags = ({ audioItem }: TagsProps) => {\n\tconst { tagsAsSubject } = audioItem;\n\n\tconst sortedTags = useMemo(() => {\n\t\tif (!Array.isArray(tagsAsSubject)) {\n\t\t\treturn [];\n\t\t}\n\t\tconst tagsWithoutTimeMarkers = tagsAsSubject.filter(\n\t\t\t(tag) => typeof tag.subjectTimeMarkerSeconds !== \"number\"\n\t\t);\n\t\treturn TagService.sort(tagsWithoutTimeMarkers);\n\t}, [tagsAsSubject]);\n\n\treturn (\n\t\t<div className=\"flex flex-row items-center flex-wrap\">\n\t\t\t{sortedTags.map((tag, index) => (\n\t\t\t\t<div className=\"mr-2\" key={index}>\n\t\t\t\t\t<TagLink tag={tag} />\n\t\t\t\t</div>\n\t\t\t))}\n\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\ttagsAsSubject && tagsAsSubject.length > 0 ? \"mb-2 ml-1\" : undefined\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<AddTagButton entity={audioItem} />\n\t\t\t</div>\n\n\t\t\t{tagsAsSubject && tagsAsSubject.length > 0 && (\n\t\t\t\t<div className=\"flex ml-1 mb-2\">\n\t\t\t\t\t<span className=\"text-gray-500 mr-1\">/</span>\n\t\t\t\t\t<EditTagsButton entity={audioItem} />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default Tags;\n", "import compareAsc from \"date-fns/compareAsc\";\nimport compareDesc from \"date-fns/compareDesc\";\nimport type {\n\tAudioItem,\n\tCollection,\n\tInstrument,\n\tPerson,\n\tPlace,\n\tTune,\n} from \"@prisma/client\";\nimport type { TagWithRelations } from \"~/types\";\n\nenum TagSortStrategy {\n\tCreatedAtThenTimeMarker = \"CREATED_AT_THEN_TIME_MARKER\",\n\tCreatedAtDesc = \"CREATED_AT_DESC\",\n}\n\n/**\n * Sort with the following logic:\n *   1) Tags without time markers, sorted by `createdAt` ASC\n *   2) Tags with time markers, sorted by time marker ASC\n */\nconst sortByCreatedAtThenTimeMarker = (tags: TagWithRelations[]) => {\n\tconst sortedTags = [...(tags ?? [])];\n\tsortedTags.sort((a, b) => {\n\t\tif (\n\t\t\ttypeof a.subjectTimeMarkerSeconds !== \"number\" &&\n\t\t\ttypeof b.subjectTimeMarkerSeconds !== \"number\"\n\t\t) {\n\t\t\treturn compareAsc(new Date(a.createdAt), new Date(b.createdAt));\n\t\t}\n\t\tif (\n\t\t\ttypeof a.subjectTimeMarkerSeconds !== \"number\" &&\n\t\t\ttypeof b.subjectTimeMarkerSeconds === \"number\"\n\t\t) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn (\n\t\t\t(a.subjectTimeMarkerSeconds ?? 0) - (b.subjectTimeMarkerSeconds ?? 0)\n\t\t);\n\t});\n\treturn sortedTags;\n};\n\n/**\n * Sort Tags by `createdAt` DESC\n */\nconst sortByCreatedAtDesc = (tags: TagWithRelations[]) => {\n\tconst sortedTags = [...(tags ?? [])];\n\tsortedTags.sort((a, b) => {\n\t\treturn compareDesc(new Date(a.createdAt), new Date(b.createdAt));\n\t});\n\treturn sortedTags;\n};\n\nconst sort = (\n\ttags: TagWithRelations[] = [],\n\tsortStrategy = TagSortStrategy.CreatedAtThenTimeMarker\n) => {\n\tswitch (sortStrategy) {\n\t\tcase TagSortStrategy.CreatedAtThenTimeMarker:\n\t\t\treturn sortByCreatedAtThenTimeMarker(tags);\n\t\tcase TagSortStrategy.CreatedAtDesc:\n\t\t\treturn sortByCreatedAtDesc(tags);\n\t\tdefault:\n\t\t\treturn tags;\n\t}\n};\n\nconst getObjectEntity = (\n\ttag: TagWithRelations\n): AudioItem | Collection | Instrument | Person | Place | Tune | null => {\n\treturn (\n\t\ttag.objectAudioItem ??\n\t\ttag.objectCollection ??\n\t\ttag.objectInstrument ??\n\t\ttag.objectPerson ??\n\t\ttag.objectPlace ??\n\t\ttag.objectTune\n\t);\n};\n\nexport default {\n\tTagSortStrategy,\n\tsort,\n\tgetObjectEntity,\n};\n", "import { useState, useCallback } from \"react\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\n\nimport type { Entity, Tag } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport useRequireLogin from \"~/hooks/useRequireLogin\";\nimport EntityService from \"~/services/Entity\";\n\nimport Modal from \"~/components/Modal\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport CreateTagForm from \"~/components/CreateTagForm\";\n\nconst PARENT_ENTITY_QUERY = gql`\n\tquery Entity($id: String!) {\n\t\tentity(id: $id) {\n\t\t\t...AudioItem\n\t\t\t...Collection\n\t\t\t...Person\n\t\t\t...Place\n\t\t\t...Instrument\n\t\t\t...Tune\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n\t${EntityFragments.collection}\n\t${EntityFragments.instrument}\n\t${EntityFragments.person}\n\t${EntityFragments.place}\n\t${EntityFragments.tune}\n`;\n\ninterface Props {\n\tentity: Entity;\n\tonSuccess?: (tag: Tag) => void;\n\tclassName?: string;\n\tchildren?: React.ReactChild | React.ReactChild[];\n}\nconst AddTagButton = ({ entity, onSuccess, className, children }: Props) => {\n\tconst { currentUser, requireLogin } = useRequireLogin();\n\n\tconst [addTagModalIsVisible, setAddTagModalIsVisible] = useState(false);\n\n\tconst [getParentEntity, { loading: parentEntityLoading }] = useLazyQuery<{\n\t\tentity: Entity;\n\t}>(PARENT_ENTITY_QUERY, {\n\t\tvariables: { id: entity.id },\n\t\tfetchPolicy: \"network-only\",\n\t});\n\n\tconst onCreateTagSuccess = useCallback(\n\t\tasync (tag: Tag) => {\n\t\t\t// Refetch the parent Entity so it has updated Tags\n\t\t\tawait getParentEntity();\n\t\t\tsetAddTagModalIsVisible(false);\n\t\t\tif (onSuccess) {\n\t\t\t\tonSuccess(tag);\n\t\t\t}\n\t\t},\n\t\t[getParentEntity, setAddTagModalIsVisible, onSuccess]\n\t);\n\n\tconst onAddTagClicked = useCallback(async () => {\n\t\tif (!currentUser) {\n\t\t\tconst redirectTo = EntityService.makeHrefForView(entity);\n\t\t\treturn await requireLogin({ redirectTo });\n\t\t}\n\t\tsetAddTagModalIsVisible(true);\n\t}, [currentUser, requireLogin, entity]);\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName={`btn-text whitespace-pre ${className ?? \"\"}`}\n\t\t\t\tonClick={onAddTagClicked}\n\t\t\t>\n\t\t\t\t{children ?? \"+ Add Tag\"}\n\t\t\t</button>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Add Tag\"\n\t\t\t\tisVisible={addTagModalIsVisible}\n\t\t\t\tonClose={() => setAddTagModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t{parentEntityLoading ? (\n\t\t\t\t\t<LoadingBlock />\n\t\t\t\t) : (\n\t\t\t\t\t<CreateTagForm entity={entity} onSuccess={onCreateTagSuccess} />\n\t\t\t\t)}\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default AddTagButton;\n", "import { useEffect, useState, useCallback } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { Entity, Tag } from \"~/types\";\nimport { EntityType } from \"~/types\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\nimport useTags from \"~/hooks/useTags\";\n\nimport SearchEntities from \"~/components/SearchEntities\";\nimport SelectRelationship from \"~/components/SelectRelationship\";\nimport TimestampInput from \"~/components/TimestampInput\";\n\nconst CREATE_TAG_MUTATION = gql`\n\tmutation CreateTag($input: CreateTagInput!) {\n\t\tcreateTag(input: $input) {\n\t\t\tid\n\t\t}\n\t}\n`;\ninterface CreateTagInput {\n\trelationshipId: string;\n\tsubjectEntityType: EntityType;\n\tsubjectEntityId: string;\n\tobjectEntityType: EntityType;\n\tobjectEntityId: string;\n\tsubjectTimeMarkerSeconds?: number;\n}\ninterface Props {\n\tentity: Entity;\n\tonSuccess: (tag: Tag) => void;\n}\nconst CreateTagForm = ({ entity, onSuccess }: Props) => {\n\tconst {\n\t\tactiveAudioItem,\n\t\tplaybackPositionSeconds,\n\t\tactiveItemDurationSeconds,\n\t} = usePlayerContext();\n\n\tconst isActiveAudioItem = activeAudioItem?.id === entity.id;\n\tconst defaultTimeMarkerValue = isActiveAudioItem\n\t\t? playbackPositionSeconds\n\t\t: undefined;\n\n\tconst [shouldAddTimeMarker, setShouldAddTimeMarker] = useState(false);\n\tconst [timeMarkerValue, setTimeMarkerValue] = useState<number | undefined>(\n\t\tdefaultTimeMarkerValue\n\t);\n\n\tconst [selectedEntity, setSelectedEntity] = useState<Entity>(null);\n\tconst [selectedRelationshipId, setSelectedRelationshipId] = useState(\"\");\n\tconst [shouldCreateInverseRelationship, setShouldCreateInverseRelationship] =\n\t\tuseState(true);\n\tconst [selectedInverseRelationshipId, setSelectedInverseRelationshipId] =\n\t\tuseState(\"\");\n\n\tconst [createTag, { data, error }] = useMutation<\n\t\t{ createTag: Tag },\n\t\t{ input: CreateTagInput }\n\t>(CREATE_TAG_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\tconst [tagsAreCreating, setTagsAreCreating] = useState(false);\n\tconst [primaryCreatedTag, setPrimaryCreatedTag] = useState<Tag | undefined>(\n\t\tundefined\n\t);\n\tconst [tagsAreCreated, setTagsAreCreated] = useState(false);\n\n\tconst {\n\t\ttagsQuery: { refetch: refetchTopLevelTags },\n\t} = useTags({\n\t\tqueryOptions: { fetchPolicy: \"network-only\" },\n\t});\n\n\tuseEffect(() => {\n\t\tif (!tagsAreCreated) {\n\t\t\treturn;\n\t\t}\n\t\tconst onCreateSuccess = async (tag: Tag) => {\n\t\t\t// Now that a new Tag has been created, refetch the top-level `tags` query\n\t\t\tif (refetchTopLevelTags) {\n\t\t\t\tawait refetchTopLevelTags();\n\t\t\t}\n\t\t\tawait onSuccess(tag);\n\t\t};\n\t\tif (primaryCreatedTag) {\n\t\t\tonCreateSuccess(primaryCreatedTag);\n\t\t}\n\t}, [data, refetchTopLevelTags, onSuccess, tagsAreCreated, primaryCreatedTag]);\n\n\tconst onSelectEntity = useCallback(\n\t\t(selectedEntityFromResults: Entity) => {\n\t\t\tif (selectedEntityFromResults.id === entity.id) {\n\t\t\t\treturn window.alert(\"Cannot tag an entity with itself\");\n\t\t\t}\n\t\t\tsetSelectedEntity(selectedEntityFromResults);\n\t\t},\n\t\t[entity]\n\t);\n\n\tconst onNewEntityCreated = useCallback((entity: Entity) => {\n\t\tsetSelectedEntity(entity);\n\t}, []);\n\n\tconst onTimeMarkerValueChanged = useCallback(\n\t\t(newTimeMarkerValueSeconds: number) => {\n\t\t\tsetShouldAddTimeMarker(true);\n\t\t\tif (newTimeMarkerValueSeconds >= activeItemDurationSeconds) {\n\t\t\t\tsetTimeMarkerValue(activeItemDurationSeconds);\n\t\t\t} else if (newTimeMarkerValueSeconds <= 0) {\n\t\t\t\tsetTimeMarkerValue(0);\n\t\t\t} else {\n\t\t\t\tsetTimeMarkerValue(newTimeMarkerValueSeconds);\n\t\t\t}\n\t\t},\n\t\t[activeItemDurationSeconds]\n\t);\n\n\tconst onSelectRelationship = useCallback(\n\t\t(relationshipId: string) => {\n\t\t\tsetSelectedRelationshipId(relationshipId);\n\t\t},\n\t\t[setSelectedRelationshipId]\n\t);\n\n\tconst onSelectInverseRelationship = useCallback(\n\t\t(relationshipId: string) => {\n\t\t\tsetSelectedInverseRelationshipId(relationshipId);\n\t\t},\n\t\t[setSelectedInverseRelationshipId]\n\t);\n\n\tconst onCreateTagClicked = useCallback(async () => {\n\t\tsetTagsAreCreating(true);\n\n\t\tlet subjectTimeMarkerSeconds: number | undefined;\n\t\tif (shouldAddTimeMarker && !isNaN(timeMarkerValue)) {\n\t\t\tsubjectTimeMarkerSeconds = timeMarkerValue;\n\t\t}\n\t\tconst tagInput = {\n\t\t\trelationshipId: selectedRelationshipId,\n\t\t\tsubjectEntityType: entity.entityType,\n\t\t\tsubjectEntityId: entity.id,\n\t\t\tobjectEntityType: selectedEntity.entityType,\n\t\t\tobjectEntityId: selectedEntity.id,\n\t\t\tsubjectTimeMarkerSeconds,\n\t\t};\n\t\tconst primaryTagQuery = await createTag({ variables: { input: tagInput } });\n\t\tsetPrimaryCreatedTag(primaryTagQuery.data?.createTag);\n\n\t\tif (shouldCreateInverseRelationship && selectedInverseRelationshipId) {\n\t\t\tconst inverseTagInput = {\n\t\t\t\trelationshipId: selectedInverseRelationshipId,\n\t\t\t\tsubjectEntityType: selectedEntity.entityType,\n\t\t\t\tsubjectEntityId: selectedEntity.id,\n\t\t\t\tobjectEntityType: entity.entityType,\n\t\t\t\tobjectEntityId: entity.id,\n\t\t\t\tsubjectTimeMarkerSeconds,\n\t\t\t};\n\t\t\tawait createTag({ variables: { input: inverseTagInput } });\n\t\t}\n\n\t\tsetTagsAreCreating(false);\n\t\tsetTagsAreCreated(true);\n\t}, [\n\t\tselectedRelationshipId,\n\t\tshouldCreateInverseRelationship,\n\t\tselectedInverseRelationshipId,\n\t\tentity,\n\t\tselectedEntity,\n\t\tcreateTag,\n\t\tshouldAddTimeMarker,\n\t\ttimeMarkerValue,\n\t]);\n\n\tif (!selectedEntity) {\n\t\treturn (\n\t\t\t<SearchEntities\n\t\t\t\tonSelect={onSelectEntity}\n\t\t\t\tonNewEntityCreated={onNewEntityCreated}\n\t\t\t/>\n\t\t);\n\t}\n\n\t// Only show the time marker option if the subject entity is an AudioItem\n\tconst shouldShowTimeMarkerCheckbox =\n\t\tentity.entityType === EntityType.AudioItem &&\n\t\ttypeof defaultTimeMarkerValue !== \"undefined\";\n\n\treturn (\n\t\t<>\n\t\t\t<div>What is the relationship between these two entities?</div>\n\n\t\t\t<div className=\"mt-2\">\n\t\t\t\t<SelectRelationship\n\t\t\t\t\tsubjectEntity={entity}\n\t\t\t\t\tobjectEntity={selectedEntity}\n\t\t\t\t\tonSelect={onSelectRelationship}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<div className=\"mt-6 flex flex-row items-center justify-start\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tid=\"reverse-relationship\"\n\t\t\t\t\tchecked={shouldCreateInverseRelationship}\n\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\tsetShouldCreateInverseRelationship(event.target.checked)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<label htmlFor=\"reverse-relationship\" className=\"ml-2\">\n\t\t\t\t\tAlso create the inverse relationship\n\t\t\t\t</label>\n\t\t\t</div>\n\n\t\t\t{shouldCreateInverseRelationship && (\n\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t<SelectRelationship\n\t\t\t\t\t\tsubjectEntity={selectedEntity}\n\t\t\t\t\t\tobjectEntity={entity}\n\t\t\t\t\t\tonSelect={onSelectInverseRelationship}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{shouldShowTimeMarkerCheckbox && (\n\t\t\t\t<div className=\"mt-6 flex flex-row items-start justify-start\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tid=\"time-marker\"\n\t\t\t\t\t\tclassName=\"mt-1\"\n\t\t\t\t\t\tchecked={shouldAddTimeMarker}\n\t\t\t\t\t\tonChange={(event) => setShouldAddTimeMarker(event.target.checked)}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor=\"time-marker\" className=\"ml-2\">\n\t\t\t\t\t\t<div className=\"flex flex-col items-start\">\n\t\t\t\t\t\t\t<div className=\"mb-2\">Mark this Tag at time:</div>\n\t\t\t\t\t\t\t<TimestampInput\n\t\t\t\t\t\t\t\tvalueInSeconds={timeMarkerValue}\n\t\t\t\t\t\t\t\tonChange={onTimeMarkerValueChanged}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<button\n\t\t\t\tclassName=\"btn mt-6\"\n\t\t\t\tonClick={onCreateTagClicked}\n\t\t\t\tdisabled={tagsAreCreating || !selectedRelationshipId}\n\t\t\t>\n\t\t\t\tSave\n\t\t\t</button>\n\t\t\t{error && <div className=\"text-red-600 mt-4\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default CreateTagForm;\n", "import { useEffect, useCallback } from \"react\";\nimport type {\n\tLazyQueryResult,\n\tQueryLazyOptions,\n\tLazyQueryHookOptions,\n} from \"@apollo/client\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\nimport type { Tag } from \"~/types\";\nimport { TagFragments } from \"~/fragments\";\n\nexport const TAGS_QUERY = gql`\n\tquery Tags($input: TagsInput!) {\n\t\ttags(input: $input) {\n\t\t\t...Tag\n\t\t}\n\t}\n\t${TagFragments.tag}\n`;\n\ninterface QueryData {\n\ttags: Tag[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\ttake?: number;\n\t\tskip?: number;\n\t};\n}\ninterface HookArgs {\n\tresultsPerPage?: number;\n\tqueryOptions?: LazyQueryHookOptions<QueryData, QueryVariables>;\n}\ninterface HookReturnValue {\n\ttags: Tag[];\n\tgetTags: (options?: QueryLazyOptions<QueryVariables>) => void;\n\ttagsQuery: LazyQueryResult<QueryData, QueryVariables>;\n\tfetchNextPageOfTags: () => void;\n}\n\nconst useTags = ({\n\tresultsPerPage = 10,\n\tqueryOptions = {},\n}: HookArgs = {}): HookReturnValue => {\n\tconst [getTags, tagsQuery] = useLazyQuery<QueryData, QueryVariables>(\n\t\tTAGS_QUERY,\n\t\t{\n\t\t\tnotifyOnNetworkStatusChange: true,\n\t\t\t...queryOptions,\n\t\t}\n\t);\n\tconst { data, fetchMore } = tagsQuery;\n\n\tuseEffect(() => {\n\t\tgetTags({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\ttake: resultsPerPage,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}, [getTags, resultsPerPage]);\n\n\tconst tags = data?.tags;\n\n\tconst fetchNextPageOfTags = useCallback(() => {\n\t\tfetchMore({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\ttake: resultsPerPage,\n\t\t\t\t\tskip: tags.length ?? 0,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}, [fetchMore, resultsPerPage, tags]);\n\n\treturn {\n\t\ttags: tagsQuery.data?.tags,\n\t\tgetTags,\n\t\ttagsQuery,\n\t\tfetchNextPageOfTags,\n\t};\n};\n\nexport default useTags;\n", "import { useEffect, useState } from \"react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { Entity, Relationship } from \"~/types\";\nimport { RelationshipFragments } from \"~/fragments\";\n\nimport LoadingCircle from \"./LoadingCircle\";\n\nconst SEARCH_RELATIONSHIPS_QUERY = gql`\n\tquery SearchRelationships(\n\t\t$subjectEntityType: String!\n\t\t$objectEntityType: String!\n\t) {\n\t\tsearchRelationships(\n\t\t\tsubjectEntityType: $subjectEntityType\n\t\t\tobjectEntityType: $objectEntityType\n\t\t) {\n\t\t\t...Relationship\n\t\t}\n\t}\n\t${RelationshipFragments.relationship}\n`;\n\ninterface Props {\n\tsubjectEntity: Entity;\n\tobjectEntity: Entity;\n\tonSelect: (relationshipId: string) => void;\n}\nconst SelectRelationship = ({\n\tsubjectEntity,\n\tobjectEntity,\n\tonSelect,\n}: Props) => {\n\tconst [selectedRelationshipId, setSelectedRelationshipId] = useState(\"\");\n\n\tconst { loading, data, error } = useQuery<{\n\t\tsearchRelationships: Relationship[];\n\t}>(SEARCH_RELATIONSHIPS_QUERY, {\n\t\tvariables: {\n\t\t\tsubjectEntityType: subjectEntity.entityType,\n\t\t\tobjectEntityType: objectEntity.entityType,\n\t\t},\n\t\tfetchPolicy: \"no-cache\",\n\t});\n\tconst relationshipOptions = data?.searchRelationships ?? [];\n\n\tuseEffect(() => {\n\t\tif (relationshipOptions.length > 0) {\n\t\t\tonSelectRelationshipId(relationshipOptions[0].id);\n\t\t}\n\t}, [relationshipOptions]);\n\n\tconst onSelectRelationshipId = (relationshipId: string) => {\n\t\tsetSelectedRelationshipId(relationshipId);\n\t\tonSelect(relationshipId);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"mb-2 text-gray-500\">\n\t\t\t\t<span className=\"text-sm uppercase pr-2\">\n\t\t\t\t\t{subjectEntity.entityType}\n\t\t\t\t</span>\n\t\t\t\t{subjectEntity.name}\n\t\t\t</div>\n\n\t\t\t{loading ? (\n\t\t\t\t<LoadingCircle />\n\t\t\t) : (\n\t\t\t\t<select\n\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\tvalue={selectedRelationshipId}\n\t\t\t\t\tonChange={(event) => onSelectRelationshipId(event.target.value)}\n\t\t\t\t>\n\t\t\t\t\t{relationshipOptions.map((relationship, index) => (\n\t\t\t\t\t\t<option value={relationship.id} key={index}>\n\t\t\t\t\t\t\t{relationship.name}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t))}\n\t\t\t\t</select>\n\t\t\t)}\n\n\t\t\t<div className=\"text-gray-500\">\n\t\t\t\t<span className=\"text-sm uppercase pr-2\">\n\t\t\t\t\t{objectEntity.entityType}\n\t\t\t\t</span>\n\t\t\t\t{objectEntity.name}\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600 mt-4\">{error}</div>}\n\t\t</>\n\t);\n};\n\nexport default SelectRelationship;\n", "interface Props {\n\tvalueInSeconds: number;\n\tonChange: (valueInSeconds: number) => void;\n\tclassName?: string;\n}\n\nconst TimestampInput = ({ valueInSeconds, onChange, className }: Props) => {\n\tconst hrs = Math.floor(valueInSeconds / 3600);\n\tconst mins = Math.floor((valueInSeconds - hrs * 3600) / 60);\n\tconst secs = valueInSeconds - hrs * 3600 - mins * 60;\n\n\tconst onChangeHrs = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst newHrs = parseInt(event.target.value, 10) || 0;\n\t\tconst newValueInSeconds = newHrs * 3600 + mins * 60 + secs;\n\t\tonChange(newValueInSeconds);\n\t};\n\n\tconst onChangeMins = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst newMins = parseInt(event.target.value, 10) || 0;\n\t\tconst newValueInSeconds = hrs * 3600 + newMins * 60 + secs;\n\t\tonChange(newValueInSeconds);\n\t};\n\n\tconst onChangeSecs = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst newSecs = parseInt(event.target.value, 10) || 0;\n\t\tconst newValueInSeconds = hrs * 3600 + mins * 60 + newSecs;\n\t\tonChange(newValueInSeconds);\n\t};\n\n\treturn (\n\t\t<div className={`flex flex-row items-center ${className ?? \"\"}`}>\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tid=\"hrs\"\n\t\t\t\tclassName=\"flex max-w-[50px]\"\n\t\t\t\tvalue={hrs || \"\"}\n\t\t\t\tplaceholder=\"0\"\n\t\t\t\tonChange={onChangeHrs}\n\t\t\t/>\n\t\t\t<label htmlFor=\"hours\" className=\"px-2\">\n\t\t\t\thr{hrs !== 1 && \"s\"}\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tid=\"mins\"\n\t\t\t\tclassName=\"flex max-w-[55px]\"\n\t\t\t\tvalue={mins || \"\"}\n\t\t\t\tplaceholder=\"0\"\n\t\t\t\tonChange={onChangeMins}\n\t\t\t/>\n\t\t\t<label htmlFor=\"mins\" className=\"px-2\">\n\t\t\t\tmin{mins !== 1 ? \"s\" : \"\"}\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tid=\"secs\"\n\t\t\t\tclassName=\"flex max-w-[55px]\"\n\t\t\t\tvalue={secs || \"\"}\n\t\t\t\tplaceholder=\"0\"\n\t\t\t\tonChange={onChangeSecs}\n\t\t\t/>\n\t\t\t<label htmlFor=\"secs\" className=\"px-2\">\n\t\t\t\tsec{secs !== 1 ? \"s\" : \"\"}\n\t\t\t</label>\n\t\t</div>\n\t);\n};\n\nexport default TimestampInput;\n", "import { useState, useCallback, useEffect, useMemo } from \"react\";\nimport { useLazyQuery, useMutation, gql } from \"@apollo/client\";\n\nimport type { Entity } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport useRequireLogin from \"~/hooks/useRequireLogin\";\nimport useTags from \"~/hooks/useTags\";\nimport DateTimeService from \"~/services/DateTime\";\nimport TagService from \"~/services/Tag\";\n\nimport Modal from \"~/components/Modal\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst PARENT_ENTITY_QUERY = gql`\n\tquery Entity($id: String!) {\n\t\tentity(id: $id) {\n\t\t\t...AudioItem\n\t\t\t...Collection\n\t\t\t...Person\n\t\t\t...Place\n\t\t\t...Instrument\n\t\t\t...Tune\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n\t${EntityFragments.collection}\n\t${EntityFragments.instrument}\n\t${EntityFragments.person}\n\t${EntityFragments.place}\n\t${EntityFragments.tune}\n`;\n\nconst DELETE_TAG_MUTATION = gql`\n\tmutation DeleteTag($id: String!) {\n\t\tdeleteTag(id: $id)\n\t}\n`;\n\ninterface Props {\n\tentity: Entity;\n\tclassName?: string;\n\tchildren?: React.ReactChild | React.ReactChild[];\n\tonSuccess?: () => void;\n}\nconst EditTagsButton = ({ entity, className, children, onSuccess }: Props) => {\n\tconst { currentUser, requireLogin } = useRequireLogin();\n\n\tconst [editTagsModalIsVisible, setEditTagsModalIsVisible] = useState(false);\n\n\tconst [getParentEntity, { loading: parentEntityLoading }] = useLazyQuery<{\n\t\tentity: Entity;\n\t}>(PARENT_ENTITY_QUERY, {\n\t\tvariables: { id: entity.id },\n\t\tfetchPolicy: \"network-only\",\n\t});\n\n\tconst [deleteTag, { loading: deleteTagLoading, data: deleteTagData }] =\n\t\tuseMutation(DELETE_TAG_MUTATION, { errorPolicy: \"all\" });\n\n\tconst {\n\t\ttagsQuery: { refetch: refetchTopLevelTags },\n\t} = useTags();\n\n\tconst onDeleteTag = useCallback(\n\t\tasync (id: string) => {\n\t\t\tif (!currentUser) {\n\t\t\t\treturn await requireLogin();\n\t\t\t}\n\t\t\tif (window.confirm(\"Are you sure you want to delete this Tag?\")) {\n\t\t\t\tdeleteTag({ variables: { id } });\n\t\t\t}\n\t\t},\n\t\t[deleteTag, currentUser, requireLogin]\n\t);\n\n\tuseEffect(() => {\n\t\tconst onDeleteSuccess = async () => {\n\t\t\tawait Promise.all([refetchTopLevelTags(), getParentEntity()]);\n\t\t\tsetEditTagsModalIsVisible(false);\n\t\t};\n\t\tif (deleteTagData?.deleteTag) {\n\t\t\tonDeleteSuccess();\n\t\t\tif (onSuccess) {\n\t\t\t\tonSuccess();\n\t\t\t}\n\t\t}\n\t}, [\n\t\tdeleteTagData,\n\t\tgetParentEntity,\n\t\tsetEditTagsModalIsVisible,\n\t\trefetchTopLevelTags,\n\t\tonSuccess,\n\t]);\n\n\tconst { tags } = entity;\n\n\tconst sortedTags = useMemo(() => {\n\t\tif (!Array.isArray(tags)) {\n\t\t\treturn [];\n\t\t}\n\t\treturn TagService.sort(tags);\n\t}, [tags]);\n\n\tif (!sortedTags || sortedTags.length === 0) {\n\t\treturn null;\n\t}\n\n\tconst isLoading = parentEntityLoading || deleteTagLoading;\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName={`btn-text whitespace-pre ${className ?? \"\"}`}\n\t\t\t\tonClick={() => setEditTagsModalIsVisible(true)}\n\t\t\t>\n\t\t\t\t{children ?? \"Edit Tags\"}\n\t\t\t</button>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Edit Tags\"\n\t\t\t\tisVisible={editTagsModalIsVisible}\n\t\t\t\tonClose={() => setEditTagsModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t{isLoading ? (\n\t\t\t\t\t<LoadingBlock />\n\t\t\t\t) : (\n\t\t\t\t\tsortedTags.map((tag, index) => {\n\t\t\t\t\t\tconst { id, relationship, objectEntity, subjectTimeMarkerSeconds } =\n\t\t\t\t\t\t\ttag;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"flex flex-row items-start justify-start\"\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"flex flex-col flex-1 justify-start align-start mb-4 pr-4\">\n\t\t\t\t\t\t\t\t\t<div className=\"italic text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t{relationship.name}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"uppercase text-sm text-gray-500 pr-2\">\n\t\t\t\t\t\t\t\t\t\t{objectEntity.entityType}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{objectEntity.name}\n\t\t\t\t\t\t\t\t\t{typeof subjectTimeMarkerSeconds === \"number\" && (\n\t\t\t\t\t\t\t\t\t\t<span className=\"italic text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t{`at ${DateTimeService.formatSecondsAsDuration(\n\t\t\t\t\t\t\t\t\t\t\t\tsubjectTimeMarkerSeconds\n\t\t\t\t\t\t\t\t\t\t\t)}`}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button className=\"btn-text\" onClick={() => onDeleteTag(id)}>\n\t\t\t\t\t\t\t\t\tDelete Tag\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})\n\t\t\t\t)}\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default EditTagsButton;\n", "import { useFetcher } from \"@remix-run/react\";\nimport { type AudioItemWithRelations } from \"~/types\";\n\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n}\nexport default function SaveItemButton({ audioItem }: Props) {\n\tconst fetcher = useFetcher<{ error?: string; ok: boolean }>();\n\n\tfunction onButtonClicked() {\n\t\tfetcher.submit(\n\t\t\t{ audioItemId: audioItem.id },\n\t\t\t{ method: \"post\", action: \"/saved-items\" }\n\t\t);\n\t}\n\n\tconst isSaved = audioItem.savedItems.length === 1;\n\n\treturn (\n\t\t<button\n\t\t\tclassName={`btn-secondary ${\n\t\t\t\tisSaved ? \"btn-secondary-active\" : \"\"\n\t\t\t} pl-0.5`}\n\t\t\tonClick={onButtonClicked}\n\t\t\tdisabled={fetcher.state !== \"idle\"}\n\t\t\taria-label={isSaved ? \"Unsave\" : \"Save\"}\n\t\t>\n\t\t\t{isSaved ? (\n\t\t\t\t<>\n\t\t\t\t\t<i className=\"material-icons\">bookmark</i>\n\t\t\t\t\tSaved\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<i className=\"material-icons\">bookmark_border</i>\n\t\t\t\t\tSave\n\t\t\t\t</>\n\t\t\t)}\n\t\t</button>\n\t);\n}\n", "import { useCallback, useState, useEffect, useRef } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport type { AudioItemWithRelations } from \"~/types\";\nimport DateTimeService from \"~/services/DateTime\";\n\nimport Modal from \"~/components/Modal\";\nimport CreateCommentForm from \"~/components/CreateCommentForm\";\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n}\nconst ViewCommentsButton = ({ audioItem }: Props) => {\n\tconst { comments } = audioItem;\n\tconst commentsCount = comments.length;\n\n\tconst commentsRef = useRef<HTMLDivElement>();\n\tconst [modalIsVisible, setModalIsVisible] = useState(false);\n\n\tconst onViewCommentsButtonClicked = useCallback(async () => {\n\t\tsetModalIsVisible(true);\n\t}, []);\n\n\tconst onCloseModal = useCallback(() => setModalIsVisible(false), []);\n\n\tuseEffect(() => {\n\t\t// If comments have loaded, scroll to the bottom\n\t\tif (!commentsRef.current) {\n\t\t\treturn;\n\t\t}\n\t\tconst commentsHeight = commentsRef.current?.scrollHeight ?? 0;\n\t\tif (modalIsVisible && commentsHeight > 0 && comments.length > 0) {\n\t\t\tcommentsRef.current.scrollTo({\n\t\t\t\ttop: commentsHeight,\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t});\n\t\t}\n\t}, [comments, modalIsVisible]);\n\n\tconst modalTitle =\n\t\tcommentsCount > 0\n\t\t\t? `${commentsCount} Comment${commentsCount === 1 ? \"\" : \"s\"}`\n\t\t\t: \"No Comments\";\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName=\"btn-secondary\"\n\t\t\t\tonClick={onViewCommentsButtonClicked}\n\t\t\t\taria-label=\"View Comments\"\n\t\t\t>\n\t\t\t\t<i className=\"material-icons mr-0.5\">chat_bubble_outline</i>\n\t\t\t\t{commentsCount > 0 ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{commentsCount}\n\t\t\t\t\t\t<span className=\"hidden md:block md:pl-1\">\n\t\t\t\t\t\t\tComment{commentsCount === 1 ? \"\" : \"s\"}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className=\"md:hidden\">0</span>\n\t\t\t\t\t\t<span className=\"hidden md:block\">No Comments</span>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</button>\n\n\t\t\t<Modal\n\t\t\t\ttitle={modalTitle}\n\t\t\t\tisVisible={modalIsVisible}\n\t\t\t\tonClose={onCloseModal}\n\t\t\t>\n\t\t\t\t{comments.length > 0 && (\n\t\t\t\t\t<div className=\"max-h-1/2 overflow-auto\">\n\t\t\t\t\t\t{comments.map(({ createdByUser, createdAt, text }, index) => (\n\t\t\t\t\t\t\t<div className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t\t<div className=\"text-gray-500 text-sm mb-1 flex flex-row items-center\">\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tto={`/users/${createdByUser?.id}`}\n\t\t\t\t\t\t\t\t\t\tclassName=\"mr-1 flex flex-row items-center\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span>{createdByUser?.username}</span>\n\t\t\t\t\t\t\t\t\t</Link>{\" \"}\n\t\t\t\t\t\t\t\t\t{DateTimeService.formatDateYearTime(createdAt)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"text-sm whitespace-pre-line text-gray-900\">\n\t\t\t\t\t\t\t\t\t{text}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"mt-4\">\n\t\t\t\t\t<CreateCommentForm parentAudioItem={audioItem} />\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default ViewCommentsButton;\n", "import { useFetcher } from \"@remix-run/react\";\nimport type { AudioItem, Comment } from \"@prisma/client\";\nimport { useEffect, useRef } from \"react\";\n\ninterface Props {\n\tparentAudioItem: AudioItem;\n}\nconst CreateCommentForm = ({ parentAudioItem }: Props) => {\n\tconst formRef = useRef<HTMLFormElement>(null);\n\tconst fetcher = useFetcher<{ error?: string; comment?: Comment }>();\n\n\tuseEffect(() => {\n\t\tif (fetcher.type === \"done\" && fetcher.data.comment) {\n\t\t\tformRef.current?.reset();\n\t\t}\n\t}, [fetcher]);\n\n\treturn (\n\t\t<fetcher.Form\n\t\t\tref={formRef}\n\t\t\tmethod=\"post\"\n\t\t\taction=\"/comments\"\n\t\t\tclassName=\"w-full\"\n\t\t>\n\t\t\t<textarea\n\t\t\t\tplaceholder=\"Add a comment...\"\n\t\t\t\tautoFocus\n\t\t\t\trows={3}\n\t\t\t\trequired\n\t\t\t\tminLength={1}\n\t\t\t\tname=\"text\"\n\t\t\t/>\n\t\t\t<input\n\t\t\t\ttype=\"hidden\"\n\t\t\t\tname=\"parentAudioItemId\"\n\t\t\t\tvalue={parentAudioItem.id}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\tclassName=\"btn mt-3 w-auto\"\n\t\t\t\ttype=\"submit\"\n\t\t\t\tdisabled={fetcher.state !== \"idle\"}\n\t\t\t>\n\t\t\t\tAdd Comment\n\t\t\t</button>\n\t\t\t{fetcher.data?.error && (\n\t\t\t\t<div className=\"text-red-600 mt-3\">{fetcher.data.error}</div>\n\t\t\t)}\n\t\t</fetcher.Form>\n\t);\n};\n\nexport default CreateCommentForm;\n", "import { useCallback, useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport type { AudioItemWithRelations, TagWithRelations } from \"~/types\";\nimport { EntityType } from \"~/types\";\nimport DateTime from \"~/services/DateTime\";\nimport Entity from \"~/services/Entity\";\nimport TagService from \"~/services/Tag\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\nimport type { Tune } from \"@prisma/client\";\n\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n}\nconst TimeMarkers = ({ audioItem }: Props) => {\n\tconst { tagsAsSubject } = audioItem;\n\n\tconst {\n\t\tactiveAudioItem,\n\t\tsetActiveAudioItem,\n\t\tplaybackPositionSeconds,\n\t\tsetSeekPositionSeconds,\n\t} = usePlayerContext();\n\n\ttype TimeMarkersWithTags = {\n\t\t[timeMarker: string]: TagWithRelations[];\n\t};\n\tconst timeMarkersWithTags: TimeMarkersWithTags = useMemo(() => {\n\t\tconst output: Record<number, TagWithRelations[]> = {};\n\t\tif (!tagsAsSubject) {\n\t\t\treturn output;\n\t\t}\n\t\t// Filter out tags without time markers\n\t\tconst filteredTags = tagsAsSubject.filter(\n\t\t\t(tag) => typeof tag.subjectTimeMarkerSeconds === \"number\"\n\t\t);\n\t\t// Sort array so that time markers are ascending, and thus object keys will\n\t\t// be created in ascending order\n\t\tfilteredTags.sort(\n\t\t\t(a, b) =>\n\t\t\t\ta.subjectTimeMarkerSeconds ?? 0 - (b.subjectTimeMarkerSeconds ?? 0)\n\t\t);\n\t\tfilteredTags.forEach((tag) => {\n\t\t\tif (typeof tag.subjectTimeMarkerSeconds !== \"number\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst existingTagsAtTimeMarker: TagWithRelations[] | undefined =\n\t\t\t\toutput[tag.subjectTimeMarkerSeconds] ?? [];\n\t\t\toutput[tag.subjectTimeMarkerSeconds] = [...existingTagsAtTimeMarker, tag];\n\t\t});\n\t\treturn output;\n\t}, [tagsAsSubject]);\n\n\tconst onTimeMarkerClicked = useCallback(\n\t\t(event, timeMarker) => {\n\t\t\tif (event.target.id === \"time-marker-tag-link\") {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (activeAudioItem?.id !== audioItem.id) {\n\t\t\t\tsetActiveAudioItem(audioItem);\n\t\t\t}\n\t\t\tsetSeekPositionSeconds(parseInt(timeMarker));\n\t\t},\n\t\t[audioItem, activeAudioItem, setActiveAudioItem, setSeekPositionSeconds]\n\t);\n\n\tconst audioItemIsInPlayer = activeAudioItem?.id === audioItem.id;\n\tconst activeTimeMarker: string | undefined = useMemo(() => {\n\t\tif (!audioItemIsInPlayer) {\n\t\t\treturn undefined;\n\t\t}\n\t\tlet result: string | undefined;\n\t\tObject.keys(timeMarkersWithTags).forEach((timeMarker) => {\n\t\t\tif (parseInt(timeMarker) <= (playbackPositionSeconds ?? 0)) {\n\t\t\t\tresult = timeMarker;\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}, [audioItemIsInPlayer, timeMarkersWithTags, playbackPositionSeconds]);\n\n\treturn (\n\t\t<div className=\"flex flex-col\">\n\t\t\t{Object.entries(timeMarkersWithTags).map(\n\t\t\t\t([timeMarker, tagsAsSubjectAtTimeMarker], index) => {\n\t\t\t\t\tconst isActive = activeTimeMarker === timeMarker;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"flex flex-row items-start md:items-center justify-start mb-2 last:mb-1 text-sm\"\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"flex flex-row w-16 flex-shrink-0\">\n\t\t\t\t\t\t\t\t<div className=\"w-3 text-left\">{isActive && \">\"}</div>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t\tonClick={(event) => onTimeMarkerClicked(event, timeMarker)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{DateTime.formatSecondsAsDuration(parseInt(timeMarker))}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex flex-col md:flex-row\">\n\t\t\t\t\t\t\t\t{tagsAsSubjectAtTimeMarker.map((tag, index) => {\n\t\t\t\t\t\t\t\t\tconst objectEntity = TagService.getObjectEntity(tag);\n\t\t\t\t\t\t\t\t\tif (!objectEntity) {\n\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<span className=\"flex flex-row items-center\" key={index}>\n\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\tto={Entity.makeHrefForView(objectEntity)}\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"time-marker-tag-link\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{objectEntity.name}\n\t\t\t\t\t\t\t\t\t\t\t\t{objectEntity.entityType === EntityType.Tune\n\t\t\t\t\t\t\t\t\t\t\t\t\t? ` (${(objectEntity as Tune).type})`\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t{index !== tagsAsSubjectAtTimeMarker.length - 1 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"hidden md:block mr-1\">,</span>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default TimeMarkers;\n", "import { useCallback, useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\nimport { type Tune } from \"@prisma/client\";\n\nimport type { AudioItemWithRelations } from \"~/types\";\nimport { EntityStatus, EntityType } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport TagService from \"~/services/Tag\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\n\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\nimport Menu from \"~/components/Menu\";\nimport SaveItemButton from \"~/components/SaveItemButton\";\nimport ViewCommentsButton from \"~/components/ViewCommentsButton\";\nimport RequestTakedownButton from \"~/components/RequestTakedownButton\";\n\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n\tclassName?: string;\n}\nconst AudioItemCompact = ({ audioItem, className }: Props) => {\n\tconst { name, slug, description, tagsAsSubject, status } = audioItem;\n\tconst isTakenDown = status === EntityStatus.TakenDown;\n\tconst sortedTags = useMemo(\n\t\t() => TagService.sort(tagsAsSubject),\n\t\t[tagsAsSubject]\n\t);\n\n\tconst { activeAudioItem, setActiveAudioItem } = usePlayerContext();\n\n\tconst onPlayPressed = useCallback(() => {\n\t\tsetActiveAudioItem(audioItem);\n\t}, [audioItem, setActiveAudioItem]);\n\n\tconst playButtonMarkup = useMemo(() => {\n\t\tconst audioItemIsInPlayer = activeAudioItem?.id === audioItem.id;\n\t\tif (isTakenDown) {\n\t\t\treturn <div className=\"text-gray-500\">Taken Down</div>;\n\t\t}\n\t\tif (audioItemIsInPlayer) {\n\t\t\treturn <div className=\"text-gray-500\">Playing</div>;\n\t\t}\n\t\treturn (\n\t\t\t<button\n\t\t\t\tstyle={{ lineHeight: 0 }}\n\t\t\t\tonClick={onPlayPressed}\n\t\t\t\taria-label=\"Play\"\n\t\t\t>\n\t\t\t\t<i className=\"material-icons text-teal-600 hover:text-teal-800\">\n\t\t\t\t\t<span className=\"text-6xl\">play_arrow</span>\n\t\t\t\t</i>\n\t\t\t</button>\n\t\t);\n\t}, [isTakenDown, activeAudioItem, audioItem, onPlayPressed]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-row justify-start items-start bg-white shadow-md rounded pt-2 px-3 pb-1 ${\n\t\t\t\tclassName ?? \"\"\n\t\t\t}`}\n\t\t>\n\t\t\t<div className=\"flex justify-center items-center w-14 mr-3\">\n\t\t\t\t{playButtonMarkup}\n\t\t\t</div>\n\n\t\t\t<div className=\"flex flex-1 flex-col overflow-hidden\">\n\t\t\t\t<Link to={`/entities/audio-items/${slug}`}>{name}</Link>\n\n\t\t\t\t<div className=\"flex flex-row flex-wrap text-sm mt-1 mb-1\">\n\t\t\t\t\tTags:\n\t\t\t\t\t{sortedTags.map((tag, index) => {\n\t\t\t\t\t\tconst objectEntity = TagService.getObjectEntity(tag);\n\t\t\t\t\t\tif (!objectEntity) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={index} className=\"ml-1 whitespace-pre\">\n\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(objectEntity)}>\n\t\t\t\t\t\t\t\t\t{objectEntity.name}\n\t\t\t\t\t\t\t\t\t{objectEntity.entityType === EntityType.Tune\n\t\t\t\t\t\t\t\t\t\t? ` (${(objectEntity as Tune).type})`\n\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t{index !== sortedTags.length - 1 && \", \"}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<AddTagButton entity={audioItem} className=\"ml-2\" />\n\t\t\t\t\t{tagsAsSubject?.length > 0 && (\n\t\t\t\t\t\t<div className=\"flex ml-1\">\n\t\t\t\t\t\t\t<span className=\"text-gray-500 mr-1\">/</span>\n\t\t\t\t\t\t\t<EditTagsButton entity={audioItem} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{description && (\n\t\t\t\t\t<div className=\"text-gray-500 text-sm\">{description}</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"border-t border-gray-200 mt-2 pt-1 w-full flex flex-row justify-between items-center\">\n\t\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\t\t<ViewCommentsButton audioItem={audioItem} />\n\n\t\t\t\t\t\t<div className=\"ml-2\">\n\t\t\t\t\t\t\t<SaveItemButton audioItem={audioItem} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Menu>\n\t\t\t\t\t\t{!isTakenDown && <RequestTakedownButton entity={audioItem} />}\n\t\t\t\t\t</Menu>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AudioItemCompact;\n", "import React, { useRef, useEffect, useState, useCallback } from \"react\";\n\n// Menu is a simple overlay menu that displays whatever menu items are passed to\n// it as children. For example, you can use it like:\n//\n// <Menu>\n//\t <span onClick={doSomething}>Option 1</span>\n//\t <span onClick={doSomethingElse}>Option 2</span>\n// </Menu>\n\ninterface Props {\n\tchildren: React.ReactNode | React.ReactNode[];\n}\n\nconst Menu = ({ children }: Props) => {\n\tconst containerRef = useRef<HTMLDivElement>();\n\n\tconst [shouldOpenLeft, setShouldOpenLeft] = useState(true);\n\tconst [isOpen, setIsOpen] = useState(false);\n\n\tuseEffect(() => {\n\t\tconst container = containerRef.current;\n\t\tif (container) {\n\t\t\tconst { x } = container.getBoundingClientRect();\n\t\t\tif (x < 200) {\n\t\t\t\tsetShouldOpenLeft(false);\n\t\t\t}\n\t\t}\n\t}, []);\n\n\tconst onIconClicked = useCallback((event) => {\n\t\tevent.stopPropagation();\n\t\tsetIsOpen(true);\n\t}, []);\n\n\tconst onBackgroundClicked = useCallback((event) => {\n\t\tevent.stopPropagation();\n\t\tsetIsOpen(false);\n\t}, []);\n\n\tconst childrenAsArray = Array.isArray(children) ? children : [children];\n\n\tif (!children) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className=\"relative\" ref={containerRef}>\n\t\t\t<button\n\t\t\t\tclassName=\"btn-secondary\"\n\t\t\t\tonClick={onIconClicked}\n\t\t\t\taria-label={isOpen ? \"Close Menu\" : \"Show Menu\"}\n\t\t\t>\n\t\t\t\t<i className=\"material-icons\">expand_more</i>\n\t\t\t</button>\n\n\t\t\t{isOpen && (\n\t\t\t\t<>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"fixed top-0 right-0 bottom-0 left-0\"\n\t\t\t\t\t\tonClick={onBackgroundClicked}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<ul\n\t\t\t\t\t\tclassName={`absolute top-9 ${\n\t\t\t\t\t\t\tshouldOpenLeft ? \"right-0 text-right\" : \"left-0 text-left\"\n\t\t\t\t\t\t} flex flex-col bg-white rounded shadow-xl`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{childrenAsArray.map((child, index) => (\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tclassName={`cursor-pointer first:rounded-t last:rounded-b text-sm text-gray-500 font-bold whitespace-nowrap hover:bg-gray-200 ${\n\t\t\t\t\t\t\t\t\tindex === 0 ? \"hover:rounded-t\" : \"\"\n\t\t\t\t\t\t\t\t} ${\n\t\t\t\t\t\t\t\t\tindex === childrenAsArray.length - 1 ? \"hover:rounded-b\" : \"\"\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{child}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default Menu;\n", "import { useCallback, useState, useMemo } from \"react\";\nimport { useQuery, gql } from \"@apollo/client\";\nimport type { TakedownRequest } from \"@prisma/client\";\n\nimport type { Entity, EntityType } from \"~/types\";\nimport { isPendingTakedownRequest, isApprovedTakedownRequest } from \"~/types\";\nimport useRequireLogin from \"~/hooks/useRequireLogin\";\nimport EntityService from \"~/services/Entity\";\nimport { TakedownRequestFragments } from \"~/fragments\";\n\nimport Modal from \"~/components/Modal\";\nimport CreateTakedownRequestForm from \"~/components/CreateTakedownRequestForm\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport DateTimeService from \"~/services/DateTime\";\nimport useAudioItem from \"~/hooks/useAudioItem\";\n\nconst TAKEDOWN_REQUESTS_FOR_ENTITY = gql`\n\tquery TakedownRequestsForEntity($input: TakedownRequestsForEntityInput!) {\n\t\ttakedownRequestsForEntity(input: $input) {\n\t\t\t...TakedownRequestWithoutEntity\n\t\t}\n\t}\n\t${TakedownRequestFragments.takedownRequestWithoutEntity}\n`;\n\ninterface QueryData {\n\ttakedownRequestsForEntity: TakedownRequest[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\tentityType: EntityType;\n\t\tentityId: string;\n\t};\n}\ninterface Props {\n\tentity: Entity;\n\tonTakedownRequestCreated?: (takedownRequest: TakedownRequest) => void;\n}\n\nconst RequestTakedownButton = ({ entity, onTakedownRequestCreated }: Props) => {\n\tconst { currentUser, requireLogin } = useRequireLogin();\n\n\tconst [modalIsVisible, setModalIsVisible] = useState(false);\n\tconst closeModal = useCallback(() => setModalIsVisible(false), []);\n\n\tconst { loading, data, error, refetch } = useQuery<QueryData, QueryVariables>(\n\t\tTAKEDOWN_REQUESTS_FOR_ENTITY,\n\t\t{\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tentityType: entity.entityType,\n\t\t\t\t\tentityId: entity.id,\n\t\t\t\t},\n\t\t\t},\n\t\t\tskip: !modalIsVisible,\n\t\t}\n\t);\n\tconst takedownRequests = data?.takedownRequestsForEntity ?? [];\n\n\tconst onButtonClicked = useCallback(async () => {\n\t\tif (!currentUser) {\n\t\t\tconst redirectTo = EntityService.makeHrefForView(entity);\n\t\t\tawait requireLogin({ redirectTo });\n\t\t} else {\n\t\t\tsetModalIsVisible(true);\n\t\t}\n\t}, [currentUser, entity, requireLogin]);\n\n\tconst onSuccess = useCallback(\n\t\tasync (takedownRequest: TakedownRequest) => {\n\t\t\ttry {\n\t\t\t\tawait refetch();\n\t\t\t\tif (onTakedownRequestCreated) {\n\t\t\t\t\tawait onTakedownRequestCreated(takedownRequest);\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\t//\n\t\t\t}\n\t\t},\n\t\t[refetch, onTakedownRequestCreated]\n\t);\n\n\tconst modalContent = useMemo(() => {\n\t\tconst pendingTakedown = takedownRequests.find(isPendingTakedownRequest);\n\t\tconst approvedTakedown = takedownRequests.find(isApprovedTakedownRequest);\n\n\t\tif (loading) {\n\t\t\treturn <LoadingBlock />;\n\t\t} else if (error) {\n\t\t\treturn (\n\t\t\t\t<div className=\"text-red-600\">Error fetching Takedown Request data</div>\n\t\t\t);\n\t\t} else if (approvedTakedown) {\n\t\t\treturn (\n\t\t\t\t<div className=\"text-gray-500\">\n\t\t\t\t\tThis {entity.entityType} has an <strong>approved</strong>{\" \"}\n\t\t\t\t\t{approvedTakedown.type} Takedown Request last updated{\" \"}\n\t\t\t\t\t{DateTimeService.formatDateYearTime(approvedTakedown.updatedAt)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else if (pendingTakedown) {\n\t\t\treturn (\n\t\t\t\t<div className=\"text-gray-500\">\n\t\t\t\t\tThis {entity.entityType} has a <strong>pending</strong>{\" \"}\n\t\t\t\t\t{pendingTakedown.type} Takedown Request last updated{\" \"}\n\t\t\t\t\t{DateTimeService.formatDateYearTime(pendingTakedown.updatedAt)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"text-gray-500 mb-5\">\n\t\t\t\t\tWe exist as a community resource, and as such we place the foremost\n\t\t\t\t\timportance on performers' rights and copyright. You can request a\n\t\t\t\t\ttakedown using this form. We will be in touch to verify details.\n\t\t\t\t</div>\n\n\t\t\t\t<CreateTakedownRequestForm entity={entity} onSuccess={onSuccess} />\n\t\t\t</>\n\t\t);\n\t}, [loading, error, takedownRequests, refetch, entity]);\n\n\treturn (\n\t\t<>\n\t\t\t<span\n\t\t\t\tclassName=\"rounded flex flex-row items-center p-2\"\n\t\t\t\tonClick={onButtonClicked}\n\t\t\t>\n\t\t\t\t<i className=\"material-icons mr-0.5\">report_problem</i>\n\t\t\t\tRequest Takedown\n\t\t\t</span>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Request Takedown\"\n\t\t\t\tisVisible={modalIsVisible}\n\t\t\t\tonClose={closeModal}\n\t\t\t>\n\t\t\t\t{modalContent}\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default RequestTakedownButton;\n", "import { useState, useCallback, useEffect } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { Entity, EntityType, TakedownRequest } from \"~/types\";\nimport { TakedownRequestType } from \"~/types\";\nimport { TakedownRequestFragments } from \"~/fragments\";\n\nconst CREATE_TAKEDOWN_REQUEST = gql`\n\tmutation CreateTakedownRequest($input: CreateTakedownRequestInput!) {\n\t\tcreateTakedownRequest(input: $input) {\n\t\t\t...TakedownRequestWithoutEntity\n\t\t}\n\t}\n\t${TakedownRequestFragments.takedownRequestWithoutEntity}\n`;\n\ninterface MutationData {\n\tcreateTakedownRequest: TakedownRequest;\n}\ninterface MutationVariables {\n\tinput: {\n\t\tentityType: EntityType;\n\t\tentityId: string;\n\t\ttype: TakedownRequestType;\n\t\tmessage: string;\n\t};\n}\ninterface Props {\n\tentity: Entity;\n\tonSuccess?: (takedownRequest: TakedownRequest) => void;\n}\n\nconst CreateTakedownRequestForm = ({ entity, onSuccess }: Props) => {\n\tconst defaultType = Object.keys(TakedownRequestType)[0];\n\tconst [type, setType] = useState(defaultType);\n\tconst [message, setMessage] = useState(\"\");\n\tconst [validationError, setValidationError] = useState(\"\");\n\n\tconst [createTakedownRequest, { loading, data, error }] = useMutation<\n\t\tMutationData,\n\t\tMutationVariables\n\t>(CREATE_TAKEDOWN_REQUEST, { errorPolicy: \"all\" });\n\n\tconst getLabelForType = (type: TakedownRequestType) => {\n\t\tswitch (TakedownRequestType[type]) {\n\t\t\tcase TakedownRequestType.Performer:\n\t\t\t\treturn \"I'm a performer in it\";\n\t\t\tcase TakedownRequestType.Copyright:\n\t\t\t\treturn \"I own the copyright\";\n\t\t\tdefault:\n\t\t\t\treturn type;\n\t\t}\n\t};\n\n\tconst onSubmitForm = useCallback(\n\t\t(event) => {\n\t\t\tevent.preventDefault();\n\t\t\tsetValidationError(\"\");\n\t\t\tif (!message) {\n\t\t\t\treturn setValidationError(\"Please include details about your request\");\n\t\t\t}\n\t\t\tconst input = {\n\t\t\t\tentityType: entity.entityType,\n\t\t\t\tentityId: entity.id,\n\t\t\t\ttype: type as TakedownRequestType,\n\t\t\t\tmessage,\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tcreateTakedownRequest({\n\t\t\t\t\tvariables: {\n\t\t\t\t\t\tinput,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t} catch {\n\t\t\t\t//\n\t\t\t}\n\t\t},\n\t\t[message, entity, type, createTakedownRequest]\n\t);\n\n\tuseEffect(() => {\n\t\tif (data?.createTakedownRequest?.id && onSuccess) {\n\t\t\tonSuccess(data.createTakedownRequest);\n\t\t}\n\t}, [data, onSuccess]);\n\n\treturn (\n\t\t<form className=\"flex flex-col items-start\" onSubmit={onSubmitForm}>\n\t\t\t<label htmlFor=\"select-type\" className=\"mb-2\">\n\t\t\t\tWhy are you requesting a takedown for this {entity.entityType}?\n\t\t\t</label>\n\t\t\t<select\n\t\t\t\tid=\"select-type\"\n\t\t\t\tclassName=\"mb-4\"\n\t\t\t\tvalue={type}\n\t\t\t\tonChange={(event) => setType(event.target.value as TakedownRequestType)}\n\t\t\t>\n\t\t\t\t{Object.keys(TakedownRequestType).map((type, index) => (\n\t\t\t\t\t<option value={type} key={index}>\n\t\t\t\t\t\t{getLabelForType(type as TakedownRequestType)}\n\t\t\t\t\t</option>\n\t\t\t\t))}\n\t\t\t</select>\n\n\t\t\t<textarea\n\t\t\t\tclassName=\"mb-4\"\n\t\t\t\tplaceholder=\"Please include as many details as you can...\"\n\t\t\t\tvalue={message}\n\t\t\t\tonChange={(event) => setMessage(event.target.value)}\n\t\t\t\trows={4}\n\t\t\t/>\n\n\t\t\t<input type=\"submit\" value=\"Submit\" disabled={loading} />\n\n\t\t\t{validationError && (\n\t\t\t\t<div className=\"mt-4 text-red-600\">{validationError}</div>\n\t\t\t)}\n\t\t\t{error && (\n\t\t\t\t<div className=\"mt-4 text-red-600\">\n\t\t\t\t\tError submitting Takedown Request. Please reload the page and try\n\t\t\t\t\tagain.\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</form>\n\t);\n};\n\nexport default CreateTakedownRequestForm;\n", "import { useCallback, useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport type { AudioItemWithRelations } from \"~/types\";\nimport { EntityStatus } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport TagService from \"~/services/Tag\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\n\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n\tclassName?: string;\n}\nconst AudioItemTextOnly = ({ audioItem, className }: Props) => {\n\tconst { name, slug, tagsAsSubject, status } = audioItem;\n\tconst isTakenDown = status === EntityStatus.TakenDown;\n\tconst sortedTags = useMemo(\n\t\t() => TagService.sort(tagsAsSubject),\n\t\t[tagsAsSubject]\n\t);\n\n\tconst { activeAudioItem, setActiveAudioItem } = usePlayerContext();\n\n\tconst onPlayPressed = useCallback(() => {\n\t\tsetActiveAudioItem(audioItem);\n\t}, [audioItem, setActiveAudioItem]);\n\n\tconst playButtonMarkup = useMemo(() => {\n\t\tconst audioItemIsInPlayer = activeAudioItem?.id === audioItem.id;\n\t\tif (isTakenDown) {\n\t\t\treturn <div className=\"text-gray-500\">Taken Down</div>;\n\t\t}\n\t\tif (audioItemIsInPlayer) {\n\t\t\treturn <div className=\"text-gray-500\">Playing</div>;\n\t\t}\n\t\treturn (\n\t\t\t<button\n\t\t\t\tstyle={{ lineHeight: 0 }}\n\t\t\t\tonClick={onPlayPressed}\n\t\t\t\taria-label=\"Play\"\n\t\t\t>\n\t\t\t\t<i className=\"material-icons text-teal-600 hover:text-teal-800\">\n\t\t\t\t\t<span className=\"text-3xl\">play_arrow</span>\n\t\t\t\t</i>\n\t\t\t</button>\n\t\t);\n\t}, [isTakenDown, activeAudioItem, audioItem, onPlayPressed]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-row justify-start items-start ${className ?? \"\"}`}\n\t\t>\n\t\t\t<div className=\"flex justify-center items-center w-14 mr-3\">\n\t\t\t\t{playButtonMarkup}\n\t\t\t</div>\n\n\t\t\t<div className=\"flex flex-1 flex-col overflow-hidden\">\n\t\t\t\t<Link to={`/entities/audio-items/${slug}`}>{name}</Link>\n\n\t\t\t\t<div className=\"flex flex-row flex-wrap text-sm mt-1 mb-1\">\n\t\t\t\t\t<span className=\"text-gray-500\">Tags:</span>\n\t\t\t\t\t{sortedTags.map((tag, index) => {\n\t\t\t\t\t\tconst objectEntity = TagService.getObjectEntity(tag);\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={index} className=\"ml-1 whitespace-pre\">\n\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(objectEntity)}>\n\t\t\t\t\t\t\t\t\t{objectEntity?.name}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t{index !== sortedTags.length - 1 && \", \"}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AudioItemTextOnly;\n", "import type { AudioItemWithRelations } from \"~/types\";\nimport { ViewAs } from \"~/types\";\n\nimport AudioItemCard from \"~/components/AudioItemCard\";\nimport AudioItemCompact from \"~/components/AudioItemCompact\";\nimport AudioItemTextOnly from \"~/components/AudioItemTextOnly\";\n\ninterface Props {\n\tviewAs?: ViewAs;\n\taudioItem: AudioItemWithRelations;\n\tshowTitle?: boolean;\n\tclassName?: string;\n}\n\n// AudioItem handles wrapping the different variants of AudioItem components. It\n// returns the variant requested in the `viewAs` prop. Default is Card.\nconst AudioItemComponent = ({\n\tviewAs,\n\taudioItem,\n\tshowTitle,\n\tclassName,\n}: Props) => {\n\tif (viewAs === ViewAs.Cards) {\n\t\treturn (\n\t\t\t<AudioItemCard\n\t\t\t\taudioItem={audioItem}\n\t\t\t\tshowTitle={showTitle}\n\t\t\t\tclassName={className}\n\t\t\t/>\n\t\t);\n\t} else if (viewAs === ViewAs.Compact) {\n\t\treturn <AudioItemCompact audioItem={audioItem} className={className} />;\n\t} else if (viewAs === ViewAs.List) {\n\t\treturn <AudioItemTextOnly audioItem={audioItem} className={className} />;\n\t} else {\n\t\treturn null;\n\t}\n};\n\nexport default AudioItemComponent;\n", "import { useQuery } from \"@apollo/client\";\nimport { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { AudioItem } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst AudioItemAbout = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { name, description, aliases, itmaAtomSlug } = data?.audioItem ?? {};\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - About`}>\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Audio Items\", href: \"/entities/audio-items\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/audio-items/${slug}` },\n\t\t\t\t\t\t\t{ label: \"About\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\t\t\t\t\t{itmaAtomSlug && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\t<div className=\"italic text-gray-500\">\n\t\t\t\t\t\t\t\tThis was sourced from ITMA's AtoM archive\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={`https://itma-atom.arkivum.net/index.php/${itmaAtomSlug}`}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView on AtoM <i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{description && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tDescription:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500 whitespace-pre\">\n\t\t\t\t\t\t\t\t{description}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{aliases && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tAliases:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{aliases}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<Link to={`/entities/audio-items/${slug}/edit`}>Edit</Link>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default AudioItemAbout;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { AudioItem } from \"types\";\nimport { EntityFragments } from \"~/fragments\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport RequireUser from \"~/components/RequireUser\";\nimport EditAudioItemForm from \"~/components/EditAudioItemForm\";\n\nconst AUDIO_ITEM_QUERY = gql`\n\tquery AudioItem($slug: String!) {\n\t\taudioItem(slug: $slug) {\n\t\t\t...AudioItem\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n`;\n\nconst EditAudioItem = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery<{ audioItem?: AudioItem }>(\n\t\tAUDIO_ITEM_QUERY,\n\t\t{\n\t\t\tvariables: { slug },\n\t\t\tskip: !slug,\n\t\t}\n\t);\n\n\tconst onEditSuccess = (audioItem: AudioItem) => {\n\t\tnavigate(`/entities/audio-items/${audioItem.slug}`);\n\t};\n\n\tlet statusMessage;\n\tif (!data && !error) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!data && error) {\n\t\tstatusMessage = `Error fetching AudioItem with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\tconst { audioItem } = data;\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Edit AudioItem: {audioItem.name}</h1>\n\t\t\t\t\t<EditAudioItemForm audioItem={audioItem} onSuccess={onEditSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default EditAudioItem;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\nimport type { AudioItem } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nconst UPDATE_AUDIO_ITEM_MUTATION = gql`\n\tmutation UpdateAudioItem($slug: String!, $input: UpdateAudioItemInput!) {\n\t\tupdateAudioItem(slug: $slug, input: $input) {\n\t\t\t...AudioItem\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n`;\ninterface UpdateAudioItemInput {\n\tslug: string;\n\tinput: {\n\t\tname?: string;\n\t\taliases?: string;\n\t\tdescription?: string;\n\t};\n}\ninterface Props {\n\taudioItem: AudioItem;\n\tonSuccess?: (audioItem: AudioItem) => void;\n}\nconst EditAudioItemForm = ({ audioItem, onSuccess }: Props) => {\n\tconst navigate = useNavigate();\n\n\tconst [updateAudioItem, { loading, error, data }] = useMutation<\n\t\t{ updateAudioItem: AudioItem },\n\t\tUpdateAudioItemInput\n\t>(UPDATE_AUDIO_ITEM_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\n\tconst [name, setName] = useState(audioItem.name);\n\tconst [aliases, setAliases] = useState(audioItem.aliases);\n\tconst [description, setDescription] = useState(audioItem.description);\n\n\tconst onUpdateAudioItem = (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tname,\n\t\t\taliases,\n\t\t\tdescription,\n\t\t};\n\t\tupdateAudioItem({ variables: { slug: audioItem.slug, input } });\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.updateAudioItem) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.updateAudioItem);\n\t\t\t}\n\t\t\twindow.alert(\"AudioItem updated successfully!\");\n\t\t}\n\t}, [data, navigate]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onUpdateAudioItem}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(event) => setName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this AudioItem. For example:{\" \"}\n\t\t\t\t\t\t<em>Finbarr and Brian, Finbarr '08 at Dolan's</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={10}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Save\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default EditAudioItemForm;\n", "import { useEffect } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nconst ViewAudioItemTags = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tuseEffect(() => {\n\t\tif (slug) {\n\t\t\tnavigate(`/entities/audio-items/${slug}`);\n\t\t}\n\t}, [navigate, slug]);\n\n\treturn null;\n};\n\nexport default ViewAudioItemTags;\n", "import { useEffect } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nconst ViewAudioItems = () => {\n\tconst navigate = useNavigate();\n\n\tuseEffect(() => {\n\t\tnavigate(\"/\");\n\t}, [navigate]);\n\n\treturn null;\n};\n\nexport default ViewAudioItems;\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\nimport type { Prisma, Collection } from \"@prisma/client\";\n\nimport { type AudioItemWithRelations, SortBy } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport Layout from \"~/components/Layout\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\ninterface LoaderData {\n\tcollection: Collection;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n}\n\nexport async function loader({\n\tparams,\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst { slug } = params;\n\tconst collection = await db.collection.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t});\n\tif (!collection) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this Collection\",\n\t\t});\n\t}\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst sortBy = searchParams.get(\"sortBy\") ?? SortBy.RecentlyTagged;\n\tconst audioItemsOrderBy: Prisma.Enumerable<Prisma.AudioItemOrderByWithRelationInput> =\n\t\tsortBy === SortBy.RecentlyTagged\n\t\t\t? { updatedAt: \"desc\" }\n\t\t\t: { createdAt: \"desc\" };\n\n\tconst [audioItems, totalAudioItems] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: true,\n\t\t\t},\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectCollectionId: collection.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\torderBy: audioItemsOrderBy,\n\t\t}),\n\t\tdb.audioItem.count({\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectCollectionId: collection.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t]);\n\treturn {\n\t\tcollection,\n\t\taudioItems,\n\t\ttotalAudioItems,\n\t};\n}\n\nconst ViewCollectionBySlug = () => {\n\tconst { collection, audioItems, totalAudioItems } =\n\t\tuseLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<ViewEntityAndAudioItems\n\t\t\t\tentity={collection}\n\t\t\t\taudioItems={audioItems}\n\t\t\t\ttotalAudioItems={totalAudioItems}\n\t\t\t/>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewCollectionBySlug;\n", "import { useRef } from \"react\";\nimport { Link, useLocation } from \"@remix-run/react\";\nimport { useInView } from \"react-intersection-observer\";\n\nimport type { AudioItemWithRelations, Entity } from \"~/types\";\nimport { ViewAs } from \"~/types\";\nimport useFilters from \"~/hooks/useFilters\";\nimport EntityService from \"~/services/Entity\";\n\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport AudioItem from \"~/components/AudioItem\";\n\ninterface Props {\n\tentity: Entity;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n\tclassName?: string;\n}\nconst ViewEntityAndAudioItems = ({\n\tentity,\n\taudioItems,\n\ttotalAudioItems,\n\tclassName,\n}: Props) => {\n\tconst { name } = entity ?? {};\n\n\tconst { ref: metadataRef, inView: metadataInView } = useInView({\n\t\tinitialInView: true,\n\t});\n\n\tconst { search } = useLocation();\n\tconst queryParams = new URLSearchParams(search);\n\tconst viewAs = queryParams.get(\"viewAs\") as ViewAs;\n\n\tconst { Filters, filtersProps } = useFilters({\n\t\ttotalItems: totalAudioItems,\n\t});\n\tconst filtersRef = useRef<HTMLDivElement>(null);\n\n\treturn (\n\t\t<div className={`flex flex-1 flex-col mb-8 ${className ?? \"\"}`}>\n\t\t\t{/* Initial metadata at top of page */}\n\t\t\t<div className=\"mb-6\" ref={metadataRef}>\n\t\t\t\t<Breadcrumb\n\t\t\t\t\titems={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: EntityService.makeReadableNamePlural(entity),\n\t\t\t\t\t\t\thref: EntityService.makeHrefForTopLevel(entity),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: name },\n\t\t\t\t\t]}\n\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t/>\n\t\t\t\t<div className=\"flex flex-row mb-6\">\n\t\t\t\t\t<span className=\"text-gray-500\">\n\t\t\t\t\t\t{totalAudioItems ?? \"\"} Audio Item{totalAudioItems === 1 ? \"\" : \"s\"}\n\t\t\t\t\t</span>\n\t\t\t\t\t<Link to={EntityService.makeHrefForAbout(entity)} className=\"ml-4\">\n\t\t\t\t\t\tAbout\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to={EntityService.makeHrefForTags(entity)} className=\"ml-4\">\n\t\t\t\t\t\tTags\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t\t{totalAudioItems > 0 && (\n\t\t\t\t\t<div ref={filtersRef}>\n\t\t\t\t\t\t<Filters {...filtersProps} />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{totalAudioItems > 0 &&\n\t\t\t\taudioItems.map((audioItem, index) => (\n\t\t\t\t\t<AudioItem\n\t\t\t\t\t\tviewAs={viewAs ?? ViewAs.Cards}\n\t\t\t\t\t\taudioItem={audioItem}\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tclassName={viewAs === ViewAs.List ? \"mb-4\" : \"mb-6\"}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\n\t\t\t{/* Fixed overlay metadata when scrolling. Render after AudioItems so it takes z-index precedence */}\n\t\t\t<div\n\t\t\t\tclassName={`${\n\t\t\t\t\tmetadataInView ? \"hidden\" : \"visible\"\n\t\t\t\t} fixed left-0 right-0 p-4 bg-gray-100 shadow-lg top-[48px]`}\n\t\t\t>\n\t\t\t\t{totalAudioItems > 0 && <Filters {...filtersProps} />}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default ViewEntityAndAudioItems;\n", "import type React from \"react\";\nimport { useCallback, useMemo } from \"react\";\nimport { useLocation, useNavigate } from \"@remix-run/react\";\n\nimport type { PerPage } from \"~/types\";\nimport { SortBy, ViewAs } from \"~/types\";\n\nimport type { Props as FiltersProps } from \"~/components/Filters\";\nimport Filters from \"~/components/Filters\";\n\ninterface Args {\n\ttotalItems?: number;\n\tdefaultPage?: number; // Starts at 1\n\tdefaultPerPage?: PerPage;\n\tdefaultSortBy?: SortBy;\n\tdefaultViewAs?: ViewAs;\n\tenableQueryParams?: boolean;\n}\ninterface ReturnValue {\n\tFilters: (props: FiltersProps) => React.ReactElement;\n\tfiltersProps: FiltersProps;\n\tpage?: number;\n\tperPage?: PerPage;\n\tsortBy?: SortBy;\n\tviewAs?: ViewAs;\n}\n\n// useFilters takes default values for sortBy and viewAs and returns the Filters\n// component along with props to pass to it, plus the current sortBy and\n// viewAs values.\nconst useFilters = ({\n\ttotalItems,\n\tdefaultPage = 1,\n\tdefaultPerPage = 20,\n\tdefaultSortBy = SortBy.RecentlyTagged,\n\tdefaultViewAs = ViewAs.Cards,\n}: Args = {}): ReturnValue => {\n\tconst navigate = useNavigate();\n\tconst { pathname, search } = useLocation();\n\tconst queryParams = new URLSearchParams(search);\n\n\t// Pull filter values from query params. If not set, use defaults.\n\tconst page = parseInt(queryParams.get(\"page\") ?? \"1\", 10) || defaultPage;\n\tconst perPage =\n\t\tparseInt(queryParams.get(\"perPage\") ?? \"20\", 10) || defaultPerPage;\n\tconst sortBy = (queryParams.get(\"sortBy\") as SortBy) ?? defaultSortBy;\n\tconst viewAs = (queryParams.get(\"viewAs\") as ViewAs) ?? defaultViewAs;\n\n\tconst updateQueryParams = useCallback(\n\t\t(paramsToUpdate: Record<string, string | null> = {}) => {\n\t\t\tconst queryParams = new URLSearchParams(search);\n\n\t\t\tconst paramNames = Object.keys(paramsToUpdate);\n\t\t\tparamNames.forEach((paramName) => {\n\t\t\t\tconst value = paramsToUpdate[paramName];\n\t\t\t\tif (value) {\n\t\t\t\t\tqueryParams.set(paramName, value);\n\t\t\t\t} else {\n\t\t\t\t\tqueryParams.delete(paramName);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn navigate(`${pathname}?${queryParams.toString()}`);\n\t\t},\n\t\t[navigate, pathname, search]\n\t);\n\n\tconst onChangePage = useCallback(\n\t\t(event: React.ChangeEvent<HTMLSelectElement>) =>\n\t\t\tupdateQueryParams({ page: event.target.value }),\n\t\t[updateQueryParams]\n\t);\n\tconst onChangePerPage = useCallback(\n\t\t(event: React.ChangeEvent<HTMLSelectElement>) =>\n\t\t\tupdateQueryParams({ perPage: event.target.value, page: \"1\" }),\n\t\t[updateQueryParams]\n\t);\n\tconst onChangeSortBy = useCallback(\n\t\t(event: React.ChangeEvent<HTMLSelectElement>) =>\n\t\t\tupdateQueryParams({ sortBy: event.target.value as SortBy }),\n\t\t[updateQueryParams]\n\t);\n\tconst onChangeViewAs = useCallback(\n\t\t(event: React.ChangeEvent<HTMLSelectElement>) =>\n\t\t\tupdateQueryParams({ viewAs: event.target.value as ViewAs }),\n\t\t[updateQueryParams]\n\t);\n\n\tconst returnValue = useMemo(\n\t\t() => ({\n\t\t\tFilters,\n\t\t\tfiltersProps: {\n\t\t\t\ttotalItems,\n\t\t\t\tpage,\n\t\t\t\tonChangePage,\n\t\t\t\tperPage,\n\t\t\t\tonChangePerPage,\n\t\t\t\tsortBy,\n\t\t\t\tonChangeSortBy,\n\t\t\t\tviewAs,\n\t\t\t\tonChangeViewAs,\n\t\t\t},\n\t\t\tpage,\n\t\t\tperPage,\n\t\t\tsortBy,\n\t\t\tviewAs,\n\t\t}),\n\t\t[\n\t\t\ttotalItems,\n\t\t\tpage,\n\t\t\tonChangePage,\n\t\t\tperPage,\n\t\t\tonChangePerPage,\n\t\t\tsortBy,\n\t\t\tonChangeSortBy,\n\t\t\tviewAs,\n\t\t\tonChangeViewAs,\n\t\t]\n\t);\n\n\treturn returnValue;\n};\n\nexport default useFilters;\n", "import React, { useMemo } from \"react\";\nimport { PerPage, SortBy, ViewAs } from \"~/types\";\n\nexport interface Props {\n\ttotalItems?: number;\n\tpage?: number;\n\tonChangePage?: (event: React.ChangeEvent<HTMLSelectElement>) => void;\n\tperPage?: PerPage;\n\tonChangePerPage?: (event: React.ChangeEvent<HTMLSelectElement>) => void;\n\tsortBy?: SortBy;\n\tonChangeSortBy?: (event: React.ChangeEvent<HTMLSelectElement>) => void;\n\tviewAs?: ViewAs;\n\tonChangeViewAs?: (event: React.ChangeEvent<HTMLSelectElement>) => void;\n\tclassName?: string;\n}\n\nconst Filters = ({\n\ttotalItems,\n\tpage,\n\tonChangePage,\n\tperPage,\n\tonChangePerPage,\n\tsortBy,\n\tonChangeSortBy,\n\tviewAs,\n\tonChangeViewAs,\n\tclassName,\n}: Props) => {\n\tconst shouldRenderPagination =\n\t\ttypeof totalItems === \"number\" &&\n\t\ttypeof page === \"number\" &&\n\t\tonChangePage &&\n\t\tperPage &&\n\t\tonChangePerPage;\n\tconst shouldRenderSortBy = sortBy && onChangeSortBy;\n\tconst shouldRenderViewAs = viewAs && onChangeViewAs;\n\n\tconst totalPages = useMemo<number>(() => {\n\t\tif (\n\t\t\ttypeof totalItems !== \"number\" ||\n\t\t\ttypeof perPage === \"undefined\" ||\n\t\t\ttotalItems === 0\n\t\t) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn Math.ceil(totalItems / perPage);\n\t}, [totalItems, perPage]);\n\n\tconst pageSelectOptions = useMemo(() => {\n\t\tconst output: React.ReactNode[] = [];\n\t\tlet i = 1;\n\t\twhile (i <= totalPages) {\n\t\t\toutput.push(\n\t\t\t\t<option value={i} key={i}>\n\t\t\t\t\t{i}\n\t\t\t\t</option>\n\t\t\t);\n\t\t\ti++;\n\t\t}\n\t\treturn output;\n\t}, [totalPages]);\n\n\tconst perPageOptions = useMemo(() => {\n\t\tconst output: React.ReactNode[] = [];\n\t\tfor (const value in PerPage) {\n\t\t\tif (isNaN(Number(value))) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\toutput.push(\n\t\t\t\t<option value={value} key={value}>\n\t\t\t\t\t{value}\n\t\t\t\t</option>\n\t\t\t);\n\t\t}\n\t\treturn output;\n\t}, []);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-col md:flex-row flex-wrap justify-start items-start md:items-center text-gray-500 ${\n\t\t\t\tclassName ?? \"\"\n\t\t\t}`}\n\t\t\tid=\"filters\"\n\t\t>\n\t\t\t{shouldRenderPagination && (\n\t\t\t\t<div\n\t\t\t\t\tclassName={`flex flex-row items-center mr-0 md:mb-0 ${\n\t\t\t\t\t\tshouldRenderSortBy || shouldRenderViewAs ? \"mb-4 md:mr-6\" : \"\"\n\t\t\t\t\t}`}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"mr-6\">\n\t\t\t\t\t\tPage{\" \"}\n\t\t\t\t\t\t<select value={page} onChange={onChangePage}>\n\t\t\t\t\t\t\t{pageSelectOptions}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t{totalPages ? ` of ${totalPages}` : \"\"}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<select value={perPage} onChange={onChangePerPage}>\n\t\t\t\t\t\t\t{perPageOptions}\n\t\t\t\t\t\t</select>{\" \"}\n\t\t\t\t\t\tper page\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{shouldRenderSortBy && (\n\t\t\t\t<div\n\t\t\t\t\tclassName={`flex flex-row items-center mr-0 md:mb-0 ${\n\t\t\t\t\t\tshouldRenderViewAs ? \"mb-4 md:mr-6\" : \"\"\n\t\t\t\t\t}`}\n\t\t\t\t>\n\t\t\t\t\tSort by\n\t\t\t\t\t<select className=\"ml-1\" value={sortBy} onChange={onChangeSortBy}>\n\t\t\t\t\t\t<option value={SortBy.RecentlyTagged}>Recently tagged</option>\n\t\t\t\t\t\t<option value={SortBy.RecentlyAdded}>Newest</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{shouldRenderViewAs && (\n\t\t\t\t<div className=\"flex flex-row items-center mr-0 md:mb-0\">\n\t\t\t\t\tView as\n\t\t\t\t\t<select className=\"ml-1\" value={viewAs} onChange={onChangeViewAs}>\n\t\t\t\t\t\t<option value={ViewAs.Cards}>Cards</option>\n\t\t\t\t\t\t<option value={ViewAs.Compact}>Compact</option>\n\t\t\t\t\t\t<option value={ViewAs.List}>List</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default Filters;\n", "import { useQuery } from \"@apollo/client\";\nimport { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Collection } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\n\nconst CollectionAbout = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { name, description, aliases, itmaAtomSlug } = data?.collection ?? {};\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - About`}>\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Collections\", href: \"/entities/collections\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/collections/${slug}` },\n\t\t\t\t\t\t\t{ label: \"About\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{itmaAtomSlug && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\t<div className=\"italic text-gray-500\">\n\t\t\t\t\t\t\t\tThis was sourced from ITMA's AtoM archive\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={`https://itma-atom.arkivum.net/index.php/${itmaAtomSlug}`}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView on AtoM <i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{description && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tDescription:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500 whitespace-pre-wrap\">\n\t\t\t\t\t\t\t\t{description}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{aliases && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tAliases:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{aliases}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<Link to={`/entities/collections/${slug}/edit`}>Edit</Link>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default CollectionAbout;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { Collection } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport RequireUser from \"~/components/RequireUser\";\nimport EditCollectionForm from \"~/components/EditCollectionForm\";\n\nconst COLLECTION_QUERY = gql`\n\tquery Collection($slug: String!) {\n\t\tcollection(slug: $slug) {\n\t\t\t...Collection\n\t\t}\n\t}\n\t${EntityFragments.collection}\n`;\n\nconst CollectionEdit = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery(COLLECTION_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\n\tconst onEditSuccess = (collection: Collection) => {\n\t\tnavigate(`/entities/collections/${collection.slug}/about`);\n\t};\n\n\tlet statusMessage;\n\tif (!data && !error) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!data && error) {\n\t\tstatusMessage = `Error fetching Collection with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\tconst { collection } = data;\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Edit Collection: {collection.name}</h1>\n\t\t\t\t\t<EditCollectionForm\n\t\t\t\t\t\tcollection={collection}\n\t\t\t\t\t\tonSuccess={onEditSuccess}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default CollectionEdit;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\nimport type { Collection } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nconst UPDATE_COLLECTION_MUTATION = gql`\n\tmutation UpdateCollection($slug: String!, $input: UpdateCollectionInput!) {\n\t\tupdateCollection(slug: $slug, input: $input) {\n\t\t\t...Collection\n\t\t}\n\t}\n\t${EntityFragments.collection}\n`;\ninterface UpdateCollectionVariables {\n\tslug: string;\n\tinput: {\n\t\taliases?: string;\n\t\tdescription?: string;\n\t};\n}\ninterface Props {\n\tcollection: Collection;\n\tonSuccess?: (collection: Collection) => void;\n}\nconst EditCollectionForm = ({ collection, onSuccess }: Props) => {\n\tconst navigate = useNavigate();\n\n\tconst [updateCollection, { loading, error, data }] = useMutation<\n\t\t{ updateCollection: Collection },\n\t\tUpdateCollectionVariables\n\t>(UPDATE_COLLECTION_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\n\tconst [name, setName] = useState(collection.name);\n\tconst [aliases, setAliases] = useState(collection.aliases);\n\tconst [description, setDescription] = useState(collection.description);\n\n\tconst onUpdateCollection = (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tname,\n\t\t\taliases,\n\t\t\tdescription,\n\t\t};\n\t\tupdateCollection({ variables: { slug: collection.slug, input } });\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.updateCollection) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.updateCollection);\n\t\t\t}\n\t\t\twindow.alert(\"Collection updated successfully!\");\n\t\t}\n\t}, [data, navigate]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onUpdateCollection}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(event) => setName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases ?? \"\"}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Collection. For example:{\" \"}\n\t\t\t\t\t\t<em>O'Neill's, 1000 Fiddle Tunes</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={10}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Save\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default EditCollectionForm;\n", "import { useQuery } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\nimport type { Collection } from \"@prisma/client\";\n\nimport TagService from \"~/services/Tag\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport TagWithRelationshipToObject from \"~/components/TagWithRelationshipToObject\";\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\n\nconst CollectionTags = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { collection } = data ?? {};\n\tconst { name, tags } = collection ?? {};\n\tconst sortedTags = TagService.sort(tags);\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - Tags`}>\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Collections\", href: \"/entities/collections\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/collections/${slug}` },\n\t\t\t\t\t\t\t{ label: \"Tags\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{sortedTags.map((tag, index) => (\n\t\t\t\t\t\t<TagWithRelationshipToObject\n\t\t\t\t\t\t\ttag={tag}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<AddTagButton entity={collection} onSuccess={refetch} />\n\t\t\t\t\t\t{sortedTags.length > 0 && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<span className=\"text-gray-500 px-2\">/</span>\n\t\t\t\t\t\t\t\t<EditTagsButton entity={collection} onSuccess={refetch} />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default CollectionTags;\n", "import { Link } from \"@remix-run/react\";\n\nimport { Tag } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport DateTimeService from \"~/services/DateTime\";\n\ninterface Props {\n\ttag: Tag;\n\tclassName?: string;\n}\n\n// TagWithRelationshipToObject renders a Tag in the format \"taught PERSON Billy\n// McComiskey\", displaying the relationship from the subject entity to an object\n// entity.\nconst TagWithRelationshipToObject = ({ tag, className }: Props) => {\n\tconst { relationship, objectEntity, subjectTimeMarkerSeconds } = tag;\n\n\tif (!objectEntity) {\n\t\treturn null;\n\t}\n\n\tconst shouldShowTimeMarker = typeof subjectTimeMarkerSeconds === \"number\";\n\n\treturn (\n\t\t<div className={`text-gray-500 ${className ?? \"\"}`}>\n\t\t\t<em>{relationship.name}</em>\n\t\t\t<br />\n\t\t\t<span className=\"uppercase text-sm\">{objectEntity.entityType}</span>\n\t\t\t<br />\n\t\t\t<Link to={EntityService.makeHrefForView(objectEntity)}>\n\t\t\t\t{objectEntity.name}\n\t\t\t</Link>\n\t\t\t<br />\n\t\t\t{typeof subjectTimeMarkerSeconds === \"number\" && (\n\t\t\t\t<em>\n\t\t\t\t\t{`at ${DateTimeService.formatSecondsAsDuration(\n\t\t\t\t\t\tsubjectTimeMarkerSeconds\n\t\t\t\t\t)}`}\n\t\t\t\t</em>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default TagWithRelationshipToObject;\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport { type Collection } from \"@prisma/client\";\n\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport { db } from \"~/utils/db.server\";\n\nexport function meta() {\n\treturn {\n\t\ttitle: \"Trad Archive - Collections\",\n\t};\n}\n\nexport function loader(): Promise<Collection[]> {\n\treturn db.collection.findMany({\n\t\torderBy: {\n\t\t\tname: \"asc\",\n\t\t},\n\t});\n}\n\nconst Collections = () => {\n\tconst collections = useLoaderData<Collection[]>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">Collections</h1>\n\t\t\t{collections.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No Collections found</div>\n\t\t\t)}\n\t\t\t{collections.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{collections.map((collection, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(collection)}>\n\t\t\t\t\t\t\t\t{collection.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default Collections;\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\nimport type { Prisma, Instrument } from \"@prisma/client\";\n\nimport { type AudioItemWithRelations, SortBy } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport Layout from \"~/components/Layout\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\ninterface LoaderData {\n\tinstrument: Instrument;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n}\n\nexport async function loader({\n\tparams,\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst { slug } = params;\n\tconst instrument = await db.instrument.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t});\n\tif (!instrument) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this Instrument\",\n\t\t});\n\t}\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst sortBy = searchParams.get(\"sortBy\") ?? SortBy.RecentlyTagged;\n\tconst audioItemsOrderBy: Prisma.Enumerable<Prisma.AudioItemOrderByWithRelationInput> =\n\t\tsortBy === SortBy.RecentlyTagged\n\t\t\t? { updatedAt: \"desc\" }\n\t\t\t: { createdAt: \"desc\" };\n\n\tconst [audioItems, totalAudioItems] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: true,\n\t\t\t},\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectInstrumentId: instrument.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\torderBy: audioItemsOrderBy,\n\t\t}),\n\t\tdb.audioItem.count({\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectInstrumentId: instrument.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t]);\n\treturn {\n\t\tinstrument,\n\t\taudioItems,\n\t\ttotalAudioItems,\n\t};\n}\n\nconst ViewInstrumentBySlug = () => {\n\tconst { instrument, audioItems, totalAudioItems } =\n\t\tuseLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<ViewEntityAndAudioItems\n\t\t\t\tentity={instrument}\n\t\t\t\taudioItems={audioItems}\n\t\t\t\ttotalAudioItems={totalAudioItems}\n\t\t\t/>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewInstrumentBySlug;\n", "import { useQuery } from \"@apollo/client\";\nimport { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Instrument } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst InstrumentAbout = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { name, description, aliases } = data?.instrument ?? {};\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - About`}>\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Instruments\", href: \"/entities/instruments\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/instruments/${slug}` },\n\t\t\t\t\t\t\t{ label: \"About\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\t\t\t\t\t{description && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tDescription:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500 whitespace-pre-wrap\">\n\t\t\t\t\t\t\t\t{description}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{aliases && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tAliases:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{aliases}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<Link to={`/entities/instruments/${slug}/edit`}>Edit</Link>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default InstrumentAbout;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { Instrument } from \"types\";\nimport { EntityFragments } from \"~/fragments\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport RequireUser from \"~/components/RequireUser\";\nimport EditInstrumentForm from \"~/components/EditInstrumentForm\";\n\nconst INSTRUMENT_QUERY = gql`\n\tquery Instrument($slug: String!) {\n\t\tinstrument(slug: $slug) {\n\t\t\t...Instrument\n\t\t}\n\t}\n\t${EntityFragments.instrument}\n`;\n\nconst EditInstrument = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery(INSTRUMENT_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\n\tconst onEditSuccess = (instrument: Instrument) => {\n\t\tnavigate(`/entities/instruments/${instrument.slug}`);\n\t};\n\n\tlet statusMessage;\n\tif (!data && !error) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!data && error) {\n\t\tstatusMessage = `Error fetching Instrument with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\tconst { instrument } = data;\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Edit Instrument: {instrument.name}</h1>\n\t\t\t\t\t<EditInstrumentForm\n\t\t\t\t\t\tinstrument={instrument}\n\t\t\t\t\t\tonSuccess={onEditSuccess}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default EditInstrument;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\nimport type { Instrument } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nconst UPDATE_INSTRUMENT_MUTATION = gql`\n\tmutation UpdateInstrument($slug: String!, $input: UpdateInstrumentInput!) {\n\t\tupdateInstrument(slug: $slug, input: $input) {\n\t\t\t...Instrument\n\t\t}\n\t}\n\t${EntityFragments.instrument}\n`;\ninterface UpdateInstrumentVariables {\n\tslug: string;\n\tinput: {\n\t\tname?: string;\n\t\taliases?: string;\n\t\tdescription?: string;\n\t};\n}\ninterface Props {\n\tinstrument: Instrument;\n\tonSuccess?: (instrument: Instrument) => void;\n}\nconst EditInstrumentForm = ({ instrument, onSuccess }: Props) => {\n\tconst navigate = useNavigate();\n\n\tconst [updateInstrument, { loading, error, data }] = useMutation<\n\t\t{ updateInstrument: Instrument },\n\t\tUpdateInstrumentVariables\n\t>(UPDATE_INSTRUMENT_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\n\tconst [name, setName] = useState(instrument.name);\n\tconst [aliases, setAliases] = useState(instrument.aliases);\n\tconst [description, setDescription] = useState(instrument.description);\n\n\tconst onUpdateInstrument = (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tname,\n\t\t\taliases,\n\t\t\tdescription,\n\t\t};\n\t\tupdateInstrument({ variables: { slug: instrument.slug, input } });\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.updateInstrument) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.updateInstrument);\n\t\t\t}\n\t\t\twindow.alert(\"Instrument updated successfully!\");\n\t\t}\n\t}, [data, navigate]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onUpdateInstrument}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(event) => setName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Instrument. For example:{\" \"}\n\t\t\t\t\t\t<em>Stomach Steinway, Squeezebox, Belly Organ</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={10}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Save\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default EditInstrumentForm;\n", "import { useQuery } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Instrument } from \"~/types\";\nimport TagService from \"~/services/Tag\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport TagWithRelationshipToObject from \"~/components/TagWithRelationshipToObject\";\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\n\nconst InstrumentTags = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { instrument } = data ?? {};\n\tconst { name, tags } = instrument ?? {};\n\tconst sortedTags = TagService.sort(tags);\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - Tags`}>\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Instruments\", href: \"/entities/instruments\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/instruments/${slug}` },\n\t\t\t\t\t\t\t{ label: \"Tags\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{sortedTags.map((tag, index) => (\n\t\t\t\t\t\t<TagWithRelationshipToObject\n\t\t\t\t\t\t\ttag={tag}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<AddTagButton entity={instrument} onSuccess={refetch} />\n\t\t\t\t\t\t{sortedTags.length > 0 && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<span className=\"text-gray-500 px-2\">/</span>\n\t\t\t\t\t\t\t\t<EditTagsButton entity={instrument} onSuccess={refetch} />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default InstrumentTags;\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport { type Instrument } from \"@prisma/client\";\n\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport { db } from \"~/utils/db.server\";\n\nexport function meta() {\n\treturn {\n\t\ttitle: \"Trad Archive - Instruments\",\n\t};\n}\n\nexport function loader(): Promise<Instrument[]> {\n\treturn db.instrument.findMany({\n\t\torderBy: {\n\t\t\tname: \"asc\",\n\t\t},\n\t});\n}\n\nconst Instruments = () => {\n\tconst instruments = useLoaderData<Instrument[]>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">Instruments</h1>\n\t\t\t{instruments.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No Instruments found</div>\n\t\t\t)}\n\t\t\t{instruments.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{instruments.map((instrument, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(instrument)}>\n\t\t\t\t\t\t\t\t{instrument.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default Instruments;\n", "import { Link } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport { Submission } from \"~/types\";\nimport { SubmissionFragments } from \"~/fragments\";\nimport DateTimeService from \"~/services/DateTime\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst SUBMISSIONS_FOR_CURRENT_USER = gql`\n\tquery SubmissionsForCurrentUser {\n\t\tsubmissionsForCurrentUser {\n\t\t\t...Submission\n\t\t}\n\t}\n\t${SubmissionFragments.submission}\n`;\n\ninterface SubmissionsData {\n\tsubmissionsForCurrentUser: Submission[];\n}\n\nconst Submissions = () => {\n\tconst { data, loading } = useQuery<SubmissionsData>(\n\t\tSUBMISSIONS_FOR_CURRENT_USER,\n\t\t{ fetchPolicy: \"cache-and-network\" }\n\t);\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<Breadcrumb\n\t\t\t\t\titems={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Account\",\n\t\t\t\t\t\t\thref: \"/account\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: \"Submissions\" },\n\t\t\t\t\t]}\n\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t/>\n\t\t\t\t<Link to=\"/account/submissions/new\">\n\t\t\t\t\t<a className=\"btn\">Create New</a>\n\t\t\t\t</Link>\n\n\t\t\t\t{!data && loading && <LoadingBlock className=\"mt-12\" />}\n\n\t\t\t\t{data && (\n\t\t\t\t\t<ul className=\"mt-12\">\n\t\t\t\t\t\t{data.submissionsForCurrentUser.map((s, index) => (\n\t\t\t\t\t\t\t<li className=\"mb-4\" key={index}>\n\t\t\t\t\t\t\t\t{DateTimeService.formatDateYearTime(s.createdAt, true)} (\n\t\t\t\t\t\t\t\t{s.materialTypes.join(\", \")}) - Status: {s.status}\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<span className=\"text-gray-500\">\n\t\t\t\t\t\t\t\t\t{`${s.description.substring(0, 200)}${\n\t\t\t\t\t\t\t\t\t\ts.description.length > 200 ? \"...\" : \"\"\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<Link to={`/account/submissions/${s.id}/upload`}>\n\t\t\t\t\t\t\t\t\tUpload More Files to This Submission\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t)}\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default Submissions;\n", "import { useNavigate } from \"@remix-run/react\";\nimport type { AudioItem } from \"types\";\n\nimport useAudioItems from \"~/hooks/useAudioItems\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireAdmin from \"~/components/RequireAdmin\";\nimport CreateAudioItemForm from \"~/components/CreateAudioItemForm\";\n\nconst NewAudioItem = () => {\n\tconst navigate = useNavigate();\n\tconst [_, { refetch }] = useAudioItems();\n\n\tconst onCreateSuccess = async (audioItem: AudioItem) => {\n\t\tawait refetch();\n\t\tnavigate(`/entities/audio-items/${audioItem.slug}`);\n\t};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireAdmin>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Create Audio Item</h1>\n\t\t\t\t\t<CreateAudioItemForm onSuccess={onCreateSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireAdmin>\n\t\t</Layout>\n\t);\n};\n\nexport default NewAudioItem;\n", "import { useEffect, useCallback, useState } from \"react\";\nimport type { LazyQueryHookOptions, LazyQueryResult } from \"@apollo/client\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\nimport type { AudioItem } from \"~/types\";\nimport { EntityStatus, SortBy } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nexport const AUDIO_ITEMS_QUERY = gql`\n\tquery AudioItems($input: AudioItemsInput!) {\n\t\taudioItems(input: $input) {\n\t\t\t...AudioItem\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n`;\n\ninterface QueryData {\n\taudioItems: AudioItem[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\ttake?: number;\n\t\tskip?: number;\n\t\tstatus?: EntityStatus;\n\t\tsortBy?: SortBy;\n\t};\n}\ninterface HookArgs {\n\tsortBy?: SortBy;\n\tresultsPerPage?: number;\n\tqueryOptions?: LazyQueryHookOptions<QueryData, QueryVariables>;\n}\n\nconst useAudioItems = ({\n\tsortBy = SortBy.RecentlyTagged,\n\tresultsPerPage = 10,\n\tqueryOptions = {},\n}: HookArgs = {}): [\n\tAudioItem[] | undefined,\n\tLazyQueryResult<QueryData, {}>,\n\t() => void\n] => {\n\tconst [skip, setSkip] = useState(0);\n\tconst [audioItems, setAudioItems] = useState<AudioItem[] | undefined>();\n\n\t// Reset values when sortBy changes\n\tuseEffect(() => {\n\t\tsetAudioItems(undefined);\n\t\tsetSkip(0);\n\t}, [sortBy]);\n\n\tconst [getAudioItems, audioItemsQuery] = useLazyQuery<\n\t\tQueryData,\n\t\tQueryVariables\n\t>(AUDIO_ITEMS_QUERY, {\n\t\tnotifyOnNetworkStatusChange: true,\n\t\t...queryOptions,\n\t});\n\tconst { data, fetchMore } = audioItemsQuery;\n\tuseEffect(() => {\n\t\t// Avoid bug with Apollo Client where it makes an extra network request\n\t\t// with original variables after `fetchMore` is called, thus leading to\n\t\t// `data` briefly being `undefined`.\n\t\t// https://github.com/apollographql/apollo-client/issues/6916\n\t\tif (data?.audioItems) {\n\t\t\tsetAudioItems(data.audioItems);\n\t\t}\n\t}, [data]);\n\n\tuseEffect(() => {\n\t\tgetAudioItems({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tsortBy,\n\t\t\t\t\ttake: resultsPerPage + skip,\n\t\t\t\t\tskip: 0,\n\t\t\t\t\tstatus: EntityStatus.Published,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}, [getAudioItems, resultsPerPage, sortBy, skip]);\n\n\tconst fetchNextPage = useCallback(async () => {\n\t\tconst numToSkip = audioItems?.length ?? 0;\n\t\tawait fetchMore({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tsortBy,\n\t\t\t\t\ttake: resultsPerPage,\n\t\t\t\t\tstatus: EntityStatus.Published,\n\t\t\t\t\tskip: numToSkip,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tsetSkip(numToSkip);\n\t}, [fetchMore, resultsPerPage, audioItems, sortBy]);\n\n\treturn [audioItems, audioItemsQuery, fetchNextPage];\n};\n\nexport default useAudioItems;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { AudioItem } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport EntityService from \"~/services/Entity\";\n\nconst CREATE_AUDIO_ITEM_MUTATION = gql`\n\tmutation CreateAudioItem($input: CreateAudioItemInput!) {\n\t\tcreateAudioItem(input: $input) {\n\t\t\t...AudioItem\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n`;\n\ninterface Props {\n\tonSuccess?: (audioItem: AudioItem) => void;\n}\ninterface CreateAudioItemInput {\n\tname: string;\n\turlSource: string;\n\tslug: string;\n\taliases?: string;\n\tdescription?: string;\n}\n\nconst CreateAudioItemForm = ({ onSuccess }: Props) => {\n\tconst [createAudioItem, { loading, error, data }] = useMutation<\n\t\t{ createAudioItem: AudioItem },\n\t\t{ input: CreateAudioItemInput }\n\t>(CREATE_AUDIO_ITEM_MUTATION, { errorPolicy: \"all\" });\n\n\tconst [name, setName] = useState(\"\");\n\tconst [urlSource, setUrlSource] = useState(\"\");\n\tconst [slug, setSlug] = useState(\"\");\n\tconst [aliases, setAliases] = useState(\"\");\n\tconst [description, setDescription] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tconst proposedSlug = EntityService.cleanSlug(name ?? \"\");\n\t\tsetSlug(proposedSlug);\n\t}, [name]);\n\n\tconst onCreateAudioItem = (event) => {\n\t\tevent.preventDefault();\n\t\tcreateAudioItem({\n\t\t\tvariables: { input: { name, urlSource, slug, aliases, description } },\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.createAudioItem) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.createAudioItem);\n\t\t\t}\n\t\t\twindow.alert(\"Audio Item created successfully!\");\n\t\t\tsetName(\"\");\n\t\t\tsetUrlSource(\"\");\n\t\t\tsetSlug(\"\");\n\t\t\tsetAliases(\"\");\n\t\t\tsetDescription(\"\");\n\t\t}\n\t}, [data]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onCreateAudioItem}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(event) => setName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"URL of Source File (ie. https://www.example.com/file.mp3)\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={urlSource}\n\t\t\t\t\t\tonChange={(event) => setUrlSource(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"URL slug (ie. finbarr-dwyer-live-at-dolans)\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={slug}\n\t\t\t\t\t\tonChange={(event) => setSlug(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tThis will be used for the URL of this AudioItem, for example{\" \"}\n\t\t\t\t\t\t{`https://trad-archive.com/entities/audio-items/${\n\t\t\t\t\t\t\tslug || \"finbarr-dwyer-live-at-dolans\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this AudioItem. For example:{\" \"}\n\t\t\t\t\t\t<em>Finbarr and Brian, Finbarr '08 at Dolan's</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={5}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Create\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600 mb-4\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default CreateAudioItemForm;\n", "import { useNavigate } from \"@remix-run/react\";\n\nimport type { Collection } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\nimport CreateCollectionForm from \"~/components/CreateCollectionForm\";\n\nconst NewCollection = () => {\n\tconst navigate = useNavigate();\n\n\tconst onCreateSuccess = (collection: Collection) => {\n\t\tnavigate(`/entities/collections/${collection.slug}`);\n\t};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Create Collection</h1>\n\t\t\t\t\t<CreateCollectionForm onSuccess={onCreateSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default NewCollection;\n", "import { useNavigate } from \"@remix-run/react\";\n\nimport type { Instrument } from \"types\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\nimport CreateInstrumentForm from \"~/components/CreateInstrumentForm\";\n\nconst NewInstrument = () => {\n\tconst navigate = useNavigate();\n\n\tconst onCreateSuccess = (instrument: Instrument) => {\n\t\tnavigate(`/entities/instruments/${instrument.slug}`);\n\t};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Create Instrument</h1>\n\t\t\t\t\t<CreateInstrumentForm onSuccess={onCreateSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default NewInstrument;\n", "import { useNavigate } from \"@remix-run/react\";\n\nimport { Submission } from \"~/types\";\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport CreateSubmissionForm from \"~/components/CreateSubmissionForm\";\n\nconst SubmissionsNew = () => {\n\tconst navigate = useNavigate();\n\n\tconst onCreateSuccess = (submission: Submission) => {\n\t\tnavigate(`/account/submissions/${submission.id}/upload`);\n\t};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<Breadcrumb\n\t\t\t\t\titems={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Account\",\n\t\t\t\t\t\t\thref: \"/account\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Submissions\",\n\t\t\t\t\t\t\thref: \"/account/submissions\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: \"Create a New Submission\" },\n\t\t\t\t\t]}\n\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t/>\n\t\t\t\t<div className=\"max-w-full md:max-w-xl\">\n\t\t\t\t\t<div className=\"mb-6 text-gray-500\">\n\t\t\t\t\t\tWelcome! Please use this page if you would like to submit material\n\t\t\t\t\t\tto be considered for acceptance into ITMA's permanent collection.\n\t\t\t\t\t\tSubmission is easy: just fill in the form below to provide\n\t\t\t\t\t\tinformation about the sound recordings, videos, photographs or\n\t\t\t\t\t\tdocuments you are sharing, then upload your files. Thank you for\n\t\t\t\t\t\tyour contribution.\n\t\t\t\t\t</div>\n\t\t\t\t\t<CreateSubmissionForm onSuccess={onCreateSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default SubmissionsNew;\n", "import { useState, useCallback, useEffect } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { Submission } from \"~/types\";\nimport { SubmissionMaterialType } from \"~/types\";\nimport { SubmissionFragments } from \"~/fragments\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\n\nimport Checkbox from \"~/components/Checkbox\";\n\nconst CREATE_SUBMISSION = gql`\n\tmutation CreateSubmission($input: CreateSubmissionInput!) {\n\t\tcreateSubmission(input: $input) {\n\t\t\t...Submission\n\t\t}\n\t}\n\t${SubmissionFragments.submission}\n`;\n\ninterface MutationData {\n\tcreateSubmission: Submission;\n}\ninterface MutationVariables {\n\tinput: {\n\t\tmaterialTypes: SubmissionMaterialType[];\n\t\tuserControlsCopyright: boolean;\n\t\tcopyrightDetails?: string;\n\t\tdescription?: string;\n\t};\n}\ninterface Props {\n\tonSuccess?: (submission: Submission) => void;\n}\n\nconst CreateSubmissionForm = ({ onSuccess }: Props) => {\n\tconst [currentUser] = useCurrentUser();\n\n\tconst [materialTypes, setMaterialTypes] = useState([]);\n\tconst [userControlsCopyright, setUserControlsCopyright] = useState(true);\n\tconst [copyrightDetails, setCopyrightDetails] = useState(\"\");\n\tconst [description, setDescription] = useState(\"\");\n\tconst [userGrantsPermissionToITMA, setUserGrantsPermissionToITMA] =\n\t\tuseState(false);\n\tconst [validationError, setValidationError] = useState(\"\");\n\n\tconst [createSubmission, { loading, data, error }] = useMutation<\n\t\tMutationData,\n\t\tMutationVariables\n\t>(CREATE_SUBMISSION, { errorPolicy: \"all\" });\n\n\tconst onMaterialTypeChecked = (\n\t\tmaterialType: SubmissionMaterialType,\n\t\tisChecked: boolean\n\t) => {\n\t\tif (isChecked) {\n\t\t\tsetMaterialTypes(materialTypes.concat(materialType));\n\t\t} else {\n\t\t\tsetMaterialTypes(materialTypes.filter((mt) => mt !== materialType));\n\t\t}\n\t};\n\n\tconst materialTypeIsChecked = (materialType: SubmissionMaterialType) => {\n\t\treturn materialTypes.includes(materialType);\n\t};\n\n\tconst onSubmitForm = (event) => {\n\t\tevent.preventDefault();\n\t\tsetValidationError(\"\");\n\t\tif (!userControlsCopyright && !copyrightDetails) {\n\t\t\tsetValidationError(\n\t\t\t\t\"Please provide details on who controls the copyright for these items\"\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tif (!description) {\n\t\t\tsetValidationError(\"Please describe the items you are submitting\");\n\t\t\treturn;\n\t\t}\n\t\tconst input = {\n\t\t\tmaterialTypes,\n\t\t\tuserControlsCopyright,\n\t\t\tcopyrightDetails,\n\t\t\tdescription,\n\t\t};\n\t\ttry {\n\t\t\tcreateSubmission({\n\t\t\t\tvariables: {\n\t\t\t\t\tinput,\n\t\t\t\t},\n\t\t\t});\n\t\t} catch {\n\t\t\t//\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.createSubmission?.id && onSuccess) {\n\t\t\tonSuccess(data.createSubmission);\n\t\t}\n\t}, [data, onSuccess]);\n\n\treturn (\n\t\t<form className=\"flex flex-col items-start\" onSubmit={onSubmitForm}>\n\t\t\t<div className=\"flex flex-col mb-5\">\n\t\t\t\t<div className=\"mb-2\">\n\t\t\t\t\tWhat types of material would you like to upload?\n\t\t\t\t</div>\n\t\t\t\t<Checkbox\n\t\t\t\t\tid=\"audio\"\n\t\t\t\t\tlabel=\"Audio\"\n\t\t\t\t\tchecked={materialTypeIsChecked(SubmissionMaterialType.Audio)}\n\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\tonMaterialTypeChecked(\n\t\t\t\t\t\t\tSubmissionMaterialType.Audio,\n\t\t\t\t\t\t\te.target.checked\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"mb-1\"\n\t\t\t\t/>\n\t\t\t\t<Checkbox\n\t\t\t\t\tid=\"video\"\n\t\t\t\t\tlabel=\"Video\"\n\t\t\t\t\tchecked={materialTypeIsChecked(SubmissionMaterialType.Video)}\n\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\tonMaterialTypeChecked(\n\t\t\t\t\t\t\tSubmissionMaterialType.Video,\n\t\t\t\t\t\t\te.target.checked\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"mb-1\"\n\t\t\t\t/>\n\t\t\t\t<Checkbox\n\t\t\t\t\tid=\"image\"\n\t\t\t\t\tlabel=\"Image\"\n\t\t\t\t\tchecked={materialTypeIsChecked(SubmissionMaterialType.Image)}\n\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\tonMaterialTypeChecked(\n\t\t\t\t\t\t\tSubmissionMaterialType.Image,\n\t\t\t\t\t\t\te.target.checked\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"mb-1\"\n\t\t\t\t/>\n\t\t\t\t<Checkbox\n\t\t\t\t\tid=\"document\"\n\t\t\t\t\tlabel=\"Document\"\n\t\t\t\t\tchecked={materialTypeIsChecked(SubmissionMaterialType.Document)}\n\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\tonMaterialTypeChecked(\n\t\t\t\t\t\t\tSubmissionMaterialType.Document,\n\t\t\t\t\t\t\te.target.checked\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"mb-1\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"mb-2\">Do you control the copyright for these items?</div>\n\t\t\t<select\n\t\t\t\tclassName=\"mb-6\"\n\t\t\t\tvalue={userControlsCopyright ? \"Yes\" : \"No\"}\n\t\t\t\tonChange={(event) =>\n\t\t\t\t\tsetUserControlsCopyright(event.target.value === \"Yes\" ? true : false)\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<option value={\"Yes\"}>Yes</option>\n\t\t\t\t<option value={\"No\"}>No</option>\n\t\t\t</select>\n\t\t\t{!userControlsCopyright && (\n\t\t\t\t<div className=\"mb-6\">\n\t\t\t\t\t<div className=\"mb-2\">\n\t\t\t\t\t\tWho controls the copyright? Are you donating on someone's behalf?\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\trows={3}\n\t\t\t\t\t\tvalue={copyrightDetails}\n\t\t\t\t\t\tonChange={(e) => setCopyrightDetails(e.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<div className=\"mb-2\">\n\t\t\t\tPlease describe this material:\n\t\t\t\t<br />\n\t\t\t\t- Who collected it?\n\t\t\t\t<br />- Who originally recorded it?\n\t\t\t\t<br />- Who is featured in these items?\n\t\t\t\t<br />- What are the recording dates?\n\t\t\t\t<br />- What are the recording locations?\n\t\t\t\t<br />- Any other comments you'd like to add?\n\t\t\t</div>\n\t\t\t<textarea\n\t\t\t\tclassName=\"mb-6\"\n\t\t\t\trows={12}\n\t\t\t\tvalue={description}\n\t\t\t\tonChange={(e) => setDescription(e.target.value)}\n\t\t\t/>\n\n\t\t\t<Checkbox\n\t\t\t\tclassName=\"mb-6\"\n\t\t\t\tchecked={userGrantsPermissionToITMA}\n\t\t\t\tlabel=\"By clicking this box, I consent to upload and give the digitised\n\t\t\tmaterial to the Irish Traditional Music Archive (Dublin, Ireland). ITMA\n\t\t\treserves the right to retain or delete at any time this material based on\n\t\t\tits collection policy.\"\n\t\t\t\tonChange={(e) => setUserGrantsPermissionToITMA(e.target.checked)}\n\t\t\t/>\n\n\t\t\t<input\n\t\t\t\ttype=\"submit\"\n\t\t\t\tvalue=\"Save and Continue to Upload\"\n\t\t\t\tdisabled={loading || !userGrantsPermissionToITMA}\n\t\t\t/>\n\n\t\t\t{validationError && (\n\t\t\t\t<div className=\"mt-4 text-red-600\">{validationError}</div>\n\t\t\t)}\n\t\t\t{error && (\n\t\t\t\t<div className=\"mt-4 text-red-600\">\n\t\t\t\t\tError saving Submission. Please reload the page and try again.\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<div className=\"text-gray-500 italic mt-6\">\n\t\t\t\tAs per ITMA's Data Protection policy the information provided on this\n\t\t\t\tform will not be used for any other purpose; it will be stored securely\n\t\t\t\tand will not be shared with any third parties.\n\t\t\t</div>\n\t\t</form>\n\t);\n};\n\nexport default CreateSubmissionForm;\n", "import { ChangeEventHandler } from \"react\";\n\ninterface Props {\n\tchecked: boolean;\n\tlabel: string;\n\tid?: string;\n\tonChange: ChangeEventHandler<HTMLInputElement>;\n\tclassName?: string;\n}\n\nconst Checkbox = ({ checked, label, id, onChange, className }: Props) => {\n\tconst inputId = id ?? `input_${Math.round(Math.random() * 100000)}`;\n\n\treturn (\n\t\t<div className={`flex flex-row items-top justify-start ${className ?? \"\"}`}>\n\t\t\t<input\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tchecked={checked}\n\t\t\t\tonChange={onChange}\n\t\t\t\tid={inputId}\n\t\t\t\tclassName=\"mt-1 mr-2\"\n\t\t\t/>\n\t\t\t<label htmlFor={inputId}>{label}</label>\n\t\t</div>\n\t);\n};\n\nexport default Checkbox;\n", "import { Link } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { Submission } from \"~/types\";\nimport { SubmissionFragments } from \"~/fragments\";\nimport DateTimeService from \"~/services/DateTime\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireAdmin from \"~/components/RequireAdmin\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst SUBMISSIONS = gql`\n\tquery Submissions($input: SubmissionsInput!) {\n\t\tsubmissions(input: $input) {\n\t\t\t...Submission\n\t\t}\n\t}\n\t${SubmissionFragments.submission}\n`;\n\ninterface SubmissionsData {\n\tsubmissions: Submission[];\n}\ninterface SubmissionsVars {\n\tinput: {\n\t\ttake?: number;\n\t\tskip?: number;\n\t};\n}\n\nconst AdminSubmissions = () => {\n\tconst { data, loading } = useQuery<SubmissionsData, SubmissionsVars>(\n\t\tSUBMISSIONS,\n\t\t{\n\t\t\tvariables: { input: { take: 100, skip: 0 } },\n\t\t\tfetchPolicy: \"cache-and-network\",\n\t\t}\n\t);\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireAdmin>\n\t\t\t\t<Breadcrumb\n\t\t\t\t\titems={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Admin\",\n\t\t\t\t\t\t\thref: \"/admin\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: \"Submissions\" },\n\t\t\t\t\t]}\n\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t/>\n\n\t\t\t\t{!data && loading && <LoadingBlock />}\n\n\t\t\t\t{data && (\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{data.submissions.map((s, index) => (\n\t\t\t\t\t\t\t<li className=\"mb-4\" key={index}>\n\t\t\t\t\t\t\t\t{DateTimeService.formatDateYearTime(s.createdAt, true)} (\n\t\t\t\t\t\t\t\t{s.materialTypes.join(\", \")}) - Status: {s.status}\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\tFrom {s.createdByUser.username} / {s.createdByUser.email}\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\tOwns copyright? {s.userControlsCopyright ? \"Yes\" : \"No\"}\n\t\t\t\t\t\t\t\t{s.copyrightDetails ? ` - ${s.copyrightDetails}` : \"\"}\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<span className=\"text-gray-500\">{s.description}</span>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<Link to={`/admin/submissions/${s.id}`}>View Files</Link>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t)}\n\t\t\t</RequireAdmin>\n\t\t</Layout>\n\t);\n};\n\nexport default AdminSubmissions;\n", "import { useEffect, useMemo } from \"react\";\nimport { useQuery, useMutation, gql } from \"@apollo/client\";\nimport compareDesc from \"date-fns/compareDesc\";\n\nimport { TakedownRequestFragments } from \"~/fragments\";\nimport {\n\tisApprovedTakedownRequest,\n\tisDeniedTakedownRequest,\n\tisPendingTakedownRequest,\n\tTakedownRequest,\n\tTakedownRequestStatus,\n} from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport DateTimeService from \"~/services/DateTime\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport RequireAdmin from \"~/components/RequireAdmin\";\n\nconst TAKEDOWN_REQUESTS = gql`\n\tquery TakedownRequests($input: TakedownRequestsInput!) {\n\t\ttakedownRequests(input: $input) {\n\t\t\t...TakedownRequest\n\t\t}\n\t}\n\t${TakedownRequestFragments.takedownRequest}\n`;\n\nconst UPDATE_TAKEDOWN_REQUEST_STATUS = gql`\n\tmutation UpdateTakedownRequestStatus(\n\t\t$input: UpdateTakedownRequestStatusInput!\n\t) {\n\t\tupdateTakedownRequestStatus(input: $input) {\n\t\t\t...TakedownRequest\n\t\t}\n\t}\n\t${TakedownRequestFragments.takedownRequest}\n`;\n\ninterface QueryData {\n\ttakedownRequests: TakedownRequest[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\ttake?: number;\n\t\tskip?: number;\n\t};\n}\ninterface MutationData {\n\tupdateTakedownRequestStatus: TakedownRequest;\n}\ninterface MutationVariables {\n\tinput: {\n\t\tid: string;\n\t\tstatus: TakedownRequestStatus;\n\t};\n}\n\nconst TakedownRequests = () => {\n\tconst {\n\t\tloading: takedownRequestsLoading,\n\t\tdata: takedownRequestsData,\n\t\terror: takedownRequestsError,\n\t} = useQuery<QueryData, QueryVariables>(TAKEDOWN_REQUESTS, {\n\t\t// Take a high number until we implement pagination\n\t\tvariables: { input: { take: 200, skip: 0 } },\n\t\tfetchPolicy: \"network-only\",\n\t});\n\n\tconst takedownRequests = useMemo(() => {\n\t\tif (!takedownRequestsData?.takedownRequests) {\n\t\t\treturn [];\n\t\t}\n\t\tconst sortedTakedownRequests = [...takedownRequestsData.takedownRequests];\n\t\tsortedTakedownRequests.sort((a, b) =>\n\t\t\tcompareDesc(new Date(a.createdAt), new Date(b.createdAt))\n\t\t);\n\t\treturn sortedTakedownRequests;\n\t}, [takedownRequestsData]);\n\n\tconst [\n\t\tupdateTakedownRequestStatus,\n\t\t{\n\t\t\tloading: updateTakedownRequestStatusLoading,\n\t\t\terror: updateTakedownRequestStatusError,\n\t\t},\n\t] = useMutation<MutationData, MutationVariables>(\n\t\tUPDATE_TAKEDOWN_REQUEST_STATUS,\n\t\t{ errorPolicy: \"all\" }\n\t);\n\n\tconst onApproveClicked = (id: string) => {\n\t\tupdateTakedownRequestStatus({\n\t\t\tvariables: { input: { id, status: TakedownRequestStatus.Approved } },\n\t\t});\n\t};\n\n\tconst onDenyClicked = (id: string) => {\n\t\tupdateTakedownRequestStatus({\n\t\t\tvariables: { input: { id, status: TakedownRequestStatus.Denied } },\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tif (updateTakedownRequestStatusError) {\n\t\t\twindow.alert(\n\t\t\t\t\"Error updating Takedown Request status. Please reload the page and try again.\"\n\t\t\t);\n\t\t}\n\t}, [updateTakedownRequestStatusError]);\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireAdmin>\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: \"Admin\",\n\t\t\t\t\t\t\t\thref: \"/admin\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ label: \"Takedown Requests\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{takedownRequestsLoading && <LoadingBlock />}\n\t\t\t\t\t{takedownRequestsError && (\n\t\t\t\t\t\t<div className=\"text-red-600\">\n\t\t\t\t\t\t\t{takedownRequestsError.graphQLErrors.join(\", \")}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{!takedownRequestsLoading &&\n\t\t\t\t\t\ttakedownRequests?.map((takedownRequest, index) => {\n\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tcreatedAt,\n\t\t\t\t\t\t\t\tcreatedByUser,\n\t\t\t\t\t\t\t\tentity,\n\t\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t} = takedownRequest;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className=\"mb-4\" key={index}>\n\t\t\t\t\t\t\t\t\tCreated {DateTimeService.formatDateYearTime(createdAt)} by{\" \"}\n\t\t\t\t\t\t\t\t\t{createdByUser.username}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\tEmail: {createdByUser.email}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\tEntity:{\" \"}\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={EntityService.makeHrefForView(entity)}\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{entity.name}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\tTakedown Type: {type}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\tMessage: {message}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\tStatus: {status}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t{isApprovedTakedownRequest(takedownRequest) && (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={updateTakedownRequestStatusLoading}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => onDenyClicked(id)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tDeny\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{isDeniedTakedownRequest(takedownRequest) && (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={updateTakedownRequestStatusLoading}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => onApproveClicked(id)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tApprove\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{isPendingTakedownRequest(takedownRequest) && (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text mr-4\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={updateTakedownRequestStatusLoading}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onApproveClicked(id)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tApprove\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={updateTakedownRequestStatusLoading}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onDenyClicked(id)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tDeny\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t</RequireAdmin>\n\t\t</Layout>\n\t);\n};\n\nexport default TakedownRequests;\n", "import { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { Submission } from \"~/types\";\nimport { SubmissionFragments } from \"~/fragments\";\nimport DateTimeService from \"~/services/DateTime\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireAdmin from \"~/components/RequireAdmin\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst SUBMISSION_WITH_FILES = gql`\n\tquery SubmissionWithFiles($id: String!) {\n\t\tsubmissionWithFiles(id: $id) {\n\t\t\tsubmission {\n\t\t\t\t...Submission\n\t\t\t}\n\t\t\tfiles {\n\t\t\t\tfilename\n\t\t\t\tpresignedDownloadUrl\n\t\t\t}\n\t\t}\n\t}\n\t${SubmissionFragments.submission}\n`;\n\ninterface SubmissionWithFilesData {\n\tsubmissionWithFiles: {\n\t\tsubmission: Submission;\n\t\tfiles: Array<{\n\t\t\tfilename: string;\n\t\t\tpresignedDownloadUrl: string;\n\t\t}>;\n\t};\n}\ninterface SubmissionWithFilesVars {\n\tid: string;\n}\n\nconst AdminViewSubmissionById = () => {\n\tconst navigate = useNavigate();\n\tconst { id } = navigate.query;\n\tconst submissionId = typeof id === \"string\" ? id : undefined;\n\n\tconst { data, loading } = useQuery<\n\t\tSubmissionWithFilesData,\n\t\tSubmissionWithFilesVars\n\t>(SUBMISSION_WITH_FILES, {\n\t\tvariables: { id: submissionId },\n\t\tskip: !submissionId,\n\t\tfetchPolicy: \"cache-and-network\",\n\t});\n\tconst { submission, files } = data?.submissionWithFiles ?? {};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireAdmin>\n\t\t\t\t<Breadcrumb\n\t\t\t\t\titems={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Admin\",\n\t\t\t\t\t\t\thref: \"/admin\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: \"Submissions\", href: \"/admin/submissions\" },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: submission\n\t\t\t\t\t\t\t\t? `${DateTimeService.formatDateYearTime(\n\t\t\t\t\t\t\t\t\t\tsubmission.createdAt,\n\t\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t  )} from ${submission.createdByUser.username}`\n\t\t\t\t\t\t\t\t: \"View Submission\",\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t/>\n\n\t\t\t\t{files && (\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{files.map((f, index) => (\n\t\t\t\t\t\t\t<li className=\"flex flex-row\" key={index}>\n\t\t\t\t\t\t\t\t<div className=\"pr-2\">{f.filename}</div>\n\t\t\t\t\t\t\t\t<Link to={f.presignedDownloadUrl}>\n\t\t\t\t\t\t\t\t\t<a target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\tView<i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t)}\n\n\t\t\t\t{!files && loading && <LoadingBlock className=\"mt-8\" />}\n\t\t\t</RequireAdmin>\n\t\t</Layout>\n\t);\n};\n\nexport default AdminViewSubmissionById;\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\nimport type { Prisma, Person } from \"@prisma/client\";\n\nimport { type AudioItemWithRelations, SortBy } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport Layout from \"~/components/Layout\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\ninterface LoaderData {\n\tperson: Person;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n}\n\nexport async function loader({\n\tparams,\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst { slug } = params;\n\tconst person = await db.person.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t});\n\tif (!person) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this Person\",\n\t\t});\n\t}\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst sortBy = searchParams.get(\"sortBy\") ?? SortBy.RecentlyTagged;\n\tconst audioItemsOrderBy: Prisma.Enumerable<Prisma.AudioItemOrderByWithRelationInput> =\n\t\tsortBy === SortBy.RecentlyTagged\n\t\t\t? { updatedAt: \"desc\" }\n\t\t\t: { createdAt: \"desc\" };\n\n\tconst [audioItems, totalAudioItems] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: true,\n\t\t\t},\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectPersonId: person.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\torderBy: audioItemsOrderBy,\n\t\t}),\n\t\tdb.audioItem.count({\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectPersonId: person.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t]);\n\treturn {\n\t\tperson,\n\t\taudioItems,\n\t\ttotalAudioItems,\n\t};\n}\n\nconst ViewPersonBySlug = () => {\n\tconst { person, audioItems, totalAudioItems } = useLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<ViewEntityAndAudioItems\n\t\t\t\tentity={person}\n\t\t\t\taudioItems={audioItems}\n\t\t\t\ttotalAudioItems={totalAudioItems}\n\t\t\t/>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewPersonBySlug;\n", "import { useQuery } from \"@apollo/client\";\nimport { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Person } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst PersonAbout = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { name, description, aliases } = data?.person ?? {};\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - About`}>\n\t\t\t{isLoading && <LoadingBlock />}\n\t\t\t{error && <div className=\"text-red-500\">{error.message}</div>}\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"People\", href: \"/entities/people\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/people/${slug}` },\n\t\t\t\t\t\t\t{ label: \"About\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\t\t\t\t\t{description && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tDescription:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500 whitespace-pre-wrap\">\n\t\t\t\t\t\t\t\t{description}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{aliases && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tAliases:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{aliases}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<Link to={`/entities/people/${slug}/edit`}>Edit</Link>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default PersonAbout;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { Person } from \"types\";\nimport { EntityFragments } from \"~/fragments\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport RequireUser from \"~/components/RequireUser\";\nimport EditPersonForm from \"~/components/EditPersonForm\";\n\nconst PERSON_QUERY = gql`\n\tquery Person($slug: String!) {\n\t\tperson(slug: $slug) {\n\t\t\t...Person\n\t\t}\n\t}\n\t${EntityFragments.person}\n`;\n\nconst EditPerson = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery(PERSON_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\n\tconst onEditSuccess = (person: Person) => {\n\t\tnavigate(`/entities/people/${person.slug}`);\n\t};\n\n\tlet statusMessage;\n\tif (!data && !error) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!data && error) {\n\t\tstatusMessage = `Error fetching Person with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\tconst { person } = data;\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Edit Person: {person.name}</h1>\n\t\t\t\t\t<EditPersonForm person={person} onSuccess={onEditSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default EditPerson;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\nimport type { Person } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nconst UPDATE_PERSON_MUTATION = gql`\n\tmutation UpdatePerson($slug: String!, $input: UpdatePersonInput!) {\n\t\tupdatePerson(slug: $slug, input: $input) {\n\t\t\t...Person\n\t\t}\n\t}\n\t${EntityFragments.person}\n`;\ninterface UpdatePersonVariables {\n\tslug: string;\n\tinput: {\n\t\taliases?: string;\n\t\tdescription?: string;\n\t\tfirstName: string;\n\t\tmiddleName?: string;\n\t\tlastName: string;\n\t};\n}\ninterface Props {\n\tperson: Person;\n\tonSuccess?: (person: Person) => void;\n}\nconst EditPersonForm = ({ person, onSuccess }: Props) => {\n\tconst navigate = useNavigate();\n\n\tconst [updatePerson, { loading, error, data }] = useMutation<\n\t\t{ updatePerson: Person },\n\t\tUpdatePersonVariables\n\t>(UPDATE_PERSON_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\n\tconst [firstName, setFirstName] = useState(person.firstName);\n\tconst [middleName, setMiddleName] = useState(person.middleName);\n\tconst [lastName, setLastName] = useState(person.lastName);\n\tconst [aliases, setAliases] = useState(person.aliases);\n\tconst [description, setDescription] = useState(person.description);\n\n\tconst onUpdatePerson = (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tfirstName,\n\t\t\tmiddleName,\n\t\t\tlastName,\n\t\t\taliases,\n\t\t\tdescription,\n\t\t};\n\t\tupdatePerson({ variables: { slug: person.slug, input } });\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.updatePerson) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.updatePerson);\n\t\t\t}\n\t\t\twindow.alert(\"Person updated successfully!\");\n\t\t}\n\t}, [data, navigate]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onUpdatePerson}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"First name\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={firstName}\n\t\t\t\t\t\tonChange={(event) => setFirstName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Middle name (optional)\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={middleName}\n\t\t\t\t\t\tonChange={(event) => setMiddleName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Last name\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={lastName}\n\t\t\t\t\t\tonChange={(event) => setLastName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Person. For example:{\" \"}\n\t\t\t\t\t\t<em>Tony D, The Tradfather, Tony from the County Calamari</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={10}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Save\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default EditPersonForm;\n", "import { useQuery } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Person } from \"~/types\";\nimport TagService from \"~/services/Tag\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport TagWithRelationshipToObject from \"~/components/TagWithRelationshipToObject\";\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\n\nconst PersonTags = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { name, tags } = person ?? {};\n\tconst sortedTags = TagService.sort(tags);\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - Tags`}>\n\t\t\t{isLoading && <LoadingBlock />}\n\t\t\t{error && <div className=\"text-red-500\">{error.message}</div>}\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"People\", href: \"/entities/people\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/people/${slug}` },\n\t\t\t\t\t\t\t{ label: \"Tags\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{sortedTags.map((tag, index) => (\n\t\t\t\t\t\t<TagWithRelationshipToObject\n\t\t\t\t\t\t\ttag={tag}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<AddTagButton entity={person} onSuccess={refetch} />\n\t\t\t\t\t\t{sortedTags.length > 0 && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<span className=\"text-gray-500 px-2\">/</span>\n\t\t\t\t\t\t\t\t<EditTagsButton entity={person} onSuccess={refetch} />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default PersonTags;\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport { type Person } from \"@prisma/client\";\n\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport { db } from \"~/utils/db.server\";\n\nexport function meta() {\n\treturn {\n\t\ttitle: \"Trad Archive - People\",\n\t};\n}\n\nexport function loader(): Promise<Person[]> {\n\treturn db.person.findMany({\n\t\torderBy: {\n\t\t\tname: \"asc\",\n\t\t},\n\t});\n}\n\nconst People = () => {\n\tconst people = useLoaderData<Person[]>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">People</h1>\n\t\t\t{people.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No People found</div>\n\t\t\t)}\n\t\t\t{people.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{people.map((person, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(person)}>\n\t\t\t\t\t\t\t\t{person.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default People;\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\nimport type { Prisma, Place } from \"@prisma/client\";\n\nimport { type AudioItemWithRelations, SortBy } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport Layout from \"~/components/Layout\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\ninterface LoaderData {\n\tplace: Place;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n}\n\nexport async function loader({\n\tparams,\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst { slug } = params;\n\tconst place = await db.place.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t});\n\tif (!place) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this Place\",\n\t\t});\n\t}\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst sortBy = searchParams.get(\"sortBy\") ?? SortBy.RecentlyTagged;\n\tconst audioItemsOrderBy: Prisma.Enumerable<Prisma.AudioItemOrderByWithRelationInput> =\n\t\tsortBy === SortBy.RecentlyTagged\n\t\t\t? { updatedAt: \"desc\" }\n\t\t\t: { createdAt: \"desc\" };\n\n\tconst [audioItems, totalAudioItems] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: true,\n\t\t\t},\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectPlaceId: place.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\torderBy: audioItemsOrderBy,\n\t\t}),\n\t\tdb.audioItem.count({\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectPlaceId: place.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t]);\n\treturn {\n\t\tplace,\n\t\taudioItems,\n\t\ttotalAudioItems,\n\t};\n}\n\nconst ViewPlaceBySlug = () => {\n\tconst { place, audioItems, totalAudioItems } = useLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<ViewEntityAndAudioItems\n\t\t\t\tentity={place}\n\t\t\t\taudioItems={audioItems}\n\t\t\t\ttotalAudioItems={totalAudioItems}\n\t\t\t/>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewPlaceBySlug;\n", "import { useQuery } from \"@apollo/client\";\nimport { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Place } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst PlaceAbout = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { name, description, aliases, latitude, longitude } = data?.place ?? {};\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - About`}>\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Places\", href: \"/entities/places\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/places/${slug}` },\n\t\t\t\t\t\t\t{ label: \"About\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\t\t\t\t\t{description && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tDescription:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500 whitespace-pre-wrap\">\n\t\t\t\t\t\t\t\t{description}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{aliases && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tAliases:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{aliases}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{latitude && longitude && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tLatitude and Longitude:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">\n\t\t\t\t\t\t\t\t{latitude},{longitude}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={`https://www.google.com/maps/@?api=1&map_action=map&zoom=12&center=${latitude},${longitude}`}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView on Map <i className=\"material-icons text-base\">launch</i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<Link to={`/entities/places/${slug}/edit`}>Edit</Link>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default PlaceAbout;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { Place } from \"types\";\nimport { EntityFragments } from \"~/fragments\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport RequireUser from \"~/components/RequireUser\";\nimport EditPlaceForm from \"~/components/EditPlaceForm\";\n\nconst PLACE_QUERY = gql`\n\tquery Place($slug: String!) {\n\t\tplace(slug: $slug) {\n\t\t\t...Place\n\t\t}\n\t}\n\t${EntityFragments.place}\n`;\n\nconst EditPlace = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery(PLACE_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\n\tconst onEditSuccess = (place: Place) => {\n\t\tnavigate(`/entities/places/${place.slug}`);\n\t};\n\n\tlet statusMessage;\n\tif (!data && !error) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!data && error) {\n\t\tstatusMessage = `Error fetching Place with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\tconst { place } = data;\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Edit Place: {place.name}</h1>\n\t\t\t\t\t<EditPlaceForm place={place} onSuccess={onEditSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default EditPlace;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\nimport type { Place } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nconst UPDATE_PLACE_MUTATION = gql`\n\tmutation UpdatePlace($slug: String!, $input: UpdatePlaceInput!) {\n\t\tupdatePlace(slug: $slug, input: $input) {\n\t\t\t...Place\n\t\t}\n\t}\n\t${EntityFragments.place}\n`;\ninterface UpdatePlaceVariables {\n\tslug: string;\n\tinput: {\n\t\taliases?: string;\n\t\tdescription?: string;\n\t\tlatitude?: number;\n\t\tlongitude?: number;\n\t};\n}\ninterface Props {\n\tplace: Place;\n\tonSuccess?: (place: Place) => void;\n}\nconst EditPlaceForm = ({ place, onSuccess }: Props) => {\n\tconst navigate = useNavigate();\n\n\tconst [updatePlace, { loading, error, data }] = useMutation<\n\t\t{ updatePlace: Place },\n\t\tUpdatePlaceVariables\n\t>(UPDATE_PLACE_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\n\tconst [name, setName] = useState(place.name);\n\tconst [aliases, setAliases] = useState(place.aliases);\n\tconst [latitude, setLatitude] = useState(place.latitude.toString());\n\tconst [longitude, setLongitude] = useState(place.longitude.toString());\n\tconst [description, setDescription] = useState(place.description);\n\n\tconst onUpdatePlace = (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tname,\n\t\t\taliases,\n\t\t\tlatitude: parseFloat(latitude),\n\t\t\tlongitude: parseFloat(longitude),\n\t\t\tdescription,\n\t\t};\n\t\tupdatePlace({ variables: { slug: place.slug, input } });\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.updatePlace) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.updatePlace);\n\t\t\t}\n\t\t\twindow.alert(\"Place updated successfully!\");\n\t\t}\n\t}, [data, navigate]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onUpdatePlace}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(event) => setName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Place. For example:{\" \"}\n\t\t\t\t\t\t<em>Gaillimh, The City of Tribes</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Latitude\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={latitude}\n\t\t\t\t\t\tonChange={(event) => setLatitude(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Longitude\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={longitude}\n\t\t\t\t\t\tonChange={(event) => setLongitude(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tTo view the current latitude and longitude coordinates, visit{\" \"}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={`https://www.google.com/maps/@?api=1&map_action=map&zoom=12&center=${latitude},${longitude}`}\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{latitude},{longitude} on Google Maps (will open in new tab)\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t. To pick new coordinates, right-click on the exact location you'd\n\t\t\t\t\t\tlike, and you'll see numbers like \"53.2838294,-9.1888286\". Click to\n\t\t\t\t\t\tcopy them to your clipboard. The first one is latitude, and the\n\t\t\t\t\t\tsecond is longitude.\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={10}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Save\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default EditPlaceForm;\n", "import { useQuery } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Place } from \"~/types\";\nimport TagService from \"~/services/Tag\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport TagWithRelationshipToObject from \"~/components/TagWithRelationshipToObject\";\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\n\nconst PlaceTags = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { place } = data ?? {};\n\tconst { name, tags } = place ?? {};\n\tconst sortedTags = TagService.sort(tags);\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - Tags`}>\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Places\", href: \"/entities/places\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/places/${slug}` },\n\t\t\t\t\t\t\t{ label: \"Tags\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{sortedTags.map((tag, index) => (\n\t\t\t\t\t\t<TagWithRelationshipToObject\n\t\t\t\t\t\t\ttag={tag}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<AddTagButton entity={place} onSuccess={refetch} />\n\t\t\t\t\t\t{sortedTags.length > 0 && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<span className=\"text-gray-500 px-2\">/</span>\n\t\t\t\t\t\t\t\t<EditTagsButton entity={place} onSuccess={refetch} />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default PlaceTags;\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport { type Place } from \"@prisma/client\";\n\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport { db } from \"~/utils/db.server\";\n\nexport function meta() {\n\treturn {\n\t\ttitle: \"Trad Archive - Places\",\n\t};\n}\n\nexport function loader(): Promise<Place[]> {\n\treturn db.place.findMany({\n\t\torderBy: {\n\t\t\tname: \"asc\",\n\t\t},\n\t});\n}\n\nconst Places = () => {\n\tconst places = useLoaderData<Place[]>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">Places</h1>\n\t\t\t{places.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No Places found</div>\n\t\t\t)}\n\t\t\t{places.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{places.map((place, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(place)}>\n\t\t\t\t\t\t\t\t{place.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default Places;\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\nimport type { Prisma, Tune } from \"@prisma/client\";\n\nimport { type AudioItemWithRelations, SortBy } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport Layout from \"~/components/Layout\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\ninterface LoaderData {\n\ttune: Tune;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n}\n\nexport async function loader({\n\tparams,\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst { slug } = params;\n\tconst tune = await db.tune.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t});\n\tif (!tune) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this Tune\",\n\t\t});\n\t}\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst sortBy = searchParams.get(\"sortBy\") ?? SortBy.RecentlyTagged;\n\tconst audioItemsOrderBy: Prisma.Enumerable<Prisma.AudioItemOrderByWithRelationInput> =\n\t\tsortBy === SortBy.RecentlyTagged\n\t\t\t? { updatedAt: \"desc\" }\n\t\t\t: { createdAt: \"desc\" };\n\n\tconst [audioItems, totalAudioItems] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: true,\n\t\t\t},\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectTuneId: tune.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\torderBy: audioItemsOrderBy,\n\t\t}),\n\t\tdb.audioItem.count({\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectTuneId: tune.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t]);\n\treturn {\n\t\ttune,\n\t\taudioItems,\n\t\ttotalAudioItems,\n\t};\n}\n\nconst ViewTuneBySlug = () => {\n\tconst { tune, audioItems, totalAudioItems } = useLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<ViewEntityAndAudioItems\n\t\t\t\tentity={tune}\n\t\t\t\taudioItems={audioItems}\n\t\t\t\ttotalAudioItems={totalAudioItems}\n\t\t\t/>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewTuneBySlug;\n", "import { useQuery } from \"@apollo/client\";\nimport { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Tune } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst TuneAbout = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { name, aliases, theSessionTuneId, type, meter, mode, abc } =\n\t\tdata?.tune ?? {};\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - About`}>\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Tunes\", href: \"/entities/tunes\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/tunes/${slug}` },\n\t\t\t\t\t\t\t{ label: \"About\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\t\t\t\t\t{theSessionTuneId && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\t<div className=\"italic text-gray-500\">\n\t\t\t\t\t\t\t\tWe source all of our Tune data from a wonderful community\n\t\t\t\t\t\t\t\tproject called The Session.\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={`https://thesession.org/tunes/${theSessionTuneId}`}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView or Edit This Tune on The Session{\" \"}\n\t\t\t\t\t\t\t\t<i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{aliases && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tAliases:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{aliases}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{type && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tType:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{type}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{meter && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tMeter:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{meter}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{mode && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tMode:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{mode}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{abc && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tABC:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{abc}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<Link to={`/entities/tunes/${slug}/edit`}>Edit</Link>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default TuneAbout;\n", "import { useQuery } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Tune } from \"~/types\";\nimport TagService from \"~/services/Tag\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport TagWithRelationshipToObject from \"~/components/TagWithRelationshipToObject\";\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\n\nconst TuneTags = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { tune } = data ?? {};\n\tconst { name, tags } = tune ?? {};\n\tconst sortedTags = TagService.sort(tags);\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - Tags`}>\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Tunes\", href: \"/entities/tunes\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/tunes/${slug}` },\n\t\t\t\t\t\t\t{ label: \"Tags\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{sortedTags.map((tag, index) => (\n\t\t\t\t\t\t<TagWithRelationshipToObject\n\t\t\t\t\t\t\ttag={tag}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<AddTagButton entity={tune} onSuccess={refetch} />\n\t\t\t\t\t\t{sortedTags.length > 0 && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<span className=\"text-gray-500 px-2\">/</span>\n\t\t\t\t\t\t\t\t<EditTagsButton entity={tune} onSuccess={refetch} />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default TuneTags;\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport { type DataFunctionArgs } from \"@remix-run/node\";\nimport { type Tune } from \"@prisma/client\";\n\nimport EntityService from \"~/services/Entity\";\nimport useFilters from \"~/hooks/useFilters\";\n\nimport Layout from \"~/components/Layout\";\nimport { db } from \"~/utils/db.server\";\n\nexport function meta() {\n\treturn {\n\t\ttitle: \"Trad Archive - Tunes\",\n\t};\n}\n\nconst PER_PAGE = 100;\n\ninterface LoaderData {\n\ttunes: Tune[];\n\ttotalTunes: number;\n}\n\nexport async function loader({\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst url = new URL(request.url);\n\tconst params = new URLSearchParams(url.search);\n\tconst page = Number(params.get(\"page\") ?? 1);\n\tconst perPage = Number(params.get(\"perPage\") ?? PER_PAGE);\n\n\tconst [tunes, totalTunes] = await Promise.all([\n\t\tdb.tune.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\torderBy: {\n\t\t\t\tname: \"asc\",\n\t\t\t},\n\t\t}),\n\t\tdb.tune.count(),\n\t]);\n\n\treturn {\n\t\ttunes,\n\t\ttotalTunes,\n\t};\n}\n\nconst Tunes = () => {\n\tconst { tunes, totalTunes } = useLoaderData<LoaderData>();\n\n\tconst { Filters, filtersProps } = useFilters({\n\t\ttotalItems: totalTunes,\n\t\tdefaultPerPage: PER_PAGE,\n\t});\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1>Tunes</h1>\n\t\t\t<Filters\n\t\t\t\t{...filtersProps}\n\t\t\t\tsortBy={undefined}\n\t\t\t\tviewAs={undefined}\n\t\t\t\tclassName=\"sticky left-0 right-0 py-4 bg-gray-100 top-[48px] mb-6\"\n\t\t\t/>\n\n\t\t\t{tunes.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No Tunes found</div>\n\t\t\t)}\n\t\t\t{tunes.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{tunes.map((tune, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(tune)}>{tune.name}</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default Tunes;\n", "import {\n\ttype ActionFunction,\n\ttype LoaderFunction,\n\tjson,\n\tredirect,\n} from \"@remix-run/node\";\nimport {\n\tLink,\n\tuseLoaderData,\n\tuseTransition,\n\tuseSearchParams,\n} from \"@remix-run/react\";\nimport bcrypt from \"bcryptjs\";\nimport isAfter from \"date-fns/isAfter\";\n\nimport { db } from \"~/utils/db.server\";\nimport { getSession, commitSession } from \"~/sessions.server\";\nimport Layout from \"~/components/Layout\";\n\ninterface LoaderData {\n\tvalidationError: string | null;\n\terror: string | null;\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst validationError = session.get(\"validationError\") || null;\n\tlet error: string | null = null;\n\n\tconst url = new URL(request.url);\n\tconst params = url.searchParams;\n\tconst userEmail = params.get(\"userEmail\") ?? \"\";\n\tconst tokenUnhashed = params.get(\"tokenUnhashed\") ?? \"\";\n\n\tconst user = await db.user.findUnique({ where: { email: userEmail } });\n\tif (!user || !user.autoLoginTokenHashed || !user.autoLoginTokenExpiry) {\n\t\treturn redirect(\"/reset-password\");\n\t}\n\n\t// Check token. If valid, set user on session and redirect to homepage.\n\tconst tokenIsMatch = await bcrypt.compare(\n\t\ttokenUnhashed,\n\t\tuser.autoLoginTokenHashed\n\t);\n\tconst expiryIsValid = isAfter(\n\t\tnew Date(user.autoLoginTokenExpiry),\n\t\tnew Date()\n\t);\n\tif (!tokenIsMatch || !expiryIsValid) {\n\t\terror =\n\t\t\t\"Reset password link is invalid or expired. Please request another one.\";\n\t}\n\n\treturn json(\n\t\t{ validationError, error },\n\t\t{\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t}\n\t);\n};\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst { searchParams } = new URL(request.url);\n\n\tconst formData = await request.formData();\n\tconst email = String(formData.get(\"email\") ?? \"\");\n\tconst password = String(formData.get(\"password\") ?? \"\");\n\tconst passwordConfirm = String(formData.get(\"password_confirm\") ?? \"\");\n\tif (password !== passwordConfirm) {\n\t\tsession.flash(\"validationError\", \"Passwords don't match\");\n\t\treturn redirect(`/choose-new-password?${searchParams.toString()}`, {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\tconst user = await db.user.findUnique({ where: { email } });\n\tif (!user) {\n\t\treturn redirect(\"/reset-password\");\n\t}\n\n\t// Update the user in DB, set in session cookie, and redirect to homepage\n\tconst newPasswordHashed = bcrypt.hashSync(password, 10);\n\tawait db.user.update({\n\t\twhere: { email },\n\t\tdata: {\n\t\t\tpasswordHashed: newPasswordHashed,\n\t\t\tautoLoginTokenHashed: null,\n\t\t\tautoLoginTokenExpiry: null,\n\t\t},\n\t});\n\tsession.set(\"userId\", user.id);\n\treturn redirect(\"/\", {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport default function ChooseNewPassword() {\n\tconst transition = useTransition();\n\tconst { error, validationError } = useLoaderData<LoaderData>();\n\tconst [searchParams] = useSearchParams();\n\tconst email = searchParams.get(\"userEmail\") ?? \"\";\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">Choose a new password</h1>\n\n\t\t\t{error ? (\n\t\t\t\t<div>\n\t\t\t\t\t<p className=\"text-red-600 mb-6\">{error}</p>\n\t\t\t\t\t<Link to=\"/reset-password\">Reset Password</Link>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<div className=\"flex flex-col align-start max-w-xs\">\n\t\t\t\t\t<form method=\"post\" className=\"space-y-4 mb-6\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tplaceholder=\"New password\"\n\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tplaceholder=\"New password (again)\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tname=\"password_confirm\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input type=\"hidden\" name=\"email\" value={email} />\n\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tclassName=\"btn w-auto\"\n\t\t\t\t\t\t\tdisabled={transition.state === \"submitting\"}\n\t\t\t\t\t\t\tvalue=\"Save\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</form>\n\n\t\t\t\t\t{validationError && (\n\t\t\t\t\t\t<div className=\"text-red-600\">{validationError}</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Layout>\n\t);\n}\n", "import { useNavigate } from \"@remix-run/react\";\n\nimport type { Person } from \"types\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\nimport CreatePersonForm from \"~/components/CreatePersonForm\";\n\nconst NewPerson = () => {\n\tconst navigate = useNavigate();\n\n\tconst onCreateSuccess = (person: Person) => {\n\t\tnavigate(`/entities/people/${person.slug}`);\n\t};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Create Person</h1>\n\t\t\t\t\t<CreatePersonForm onSuccess={onCreateSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default NewPerson;\n", "import { useNavigate } from \"@remix-run/react\";\n\nimport type { Place } from \"types\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\nimport CreatePlaceForm from \"~/components/CreatePlaceForm\";\n\nconst NewPlace = () => {\n\tconst navigate = useNavigate();\n\n\tconst onCreateSuccess = (place: Place) => {\n\t\tnavigate(`/entities/places/${place.slug}`);\n\t};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Create Place</h1>\n\t\t\t\t\t<CreatePlaceForm onSuccess={onCreateSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default NewPlace;\n", "import { useState, useEffect } from \"react\";\nimport { gql, useMutation } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Entity, Person, VerificationRequest } from \"~/types\";\nimport { EntityType, isPerson, CopyrightPermissionStatus } from \"~/types\";\nimport { VerificationRequestFragments } from \"~/fragments\";\nimport useVerificationRequestsForCurrentUser from \"~/hooks/useVerificationRequestsForCurrentUser\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\nimport SearchEntities from \"~/components/SearchEntities\";\nimport LoadingCircle from \"~/components/LoadingCircle\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\n\nconst CREATE_PRESIGNED_UPLOAD_URL_MUTATION = gql`\n\tmutation CreatePresignedUploadUrl($filename: String!) {\n\t\tcreatePresignedUploadUrlForVerificationImage(filename: $filename) {\n\t\t\timageS3Key\n\t\t\tpresignedUploadUrl\n\t\t}\n\t}\n`;\nconst CREATE_VERIFICATION_REQUEST_MUTATION = gql`\n\tmutation CreateVerificationRequest($input: CreateVerificationRequestInput!) {\n\t\tcreateVerificationRequest(input: $input) {\n\t\t\t...VerificationRequest\n\t\t}\n\t}\n\t${VerificationRequestFragments.verificationRequest}\n`;\n\ninterface CreatePresignedUploadUrlMutationData {\n\tcreatePresignedUploadUrlForVerificationImage: {\n\t\timageS3Key: string;\n\t\tpresignedUploadUrl: string;\n\t};\n}\ninterface CreatePresignedUploadUrlMutationVars {\n\tfilename: string;\n}\ninterface CreateVerificationRequestMutationData {\n\tcreateVerificationRequest: VerificationRequest;\n}\ninterface CreateVerificationRequestMutationVars {\n\tinput: {\n\t\tpersonId: string;\n\t\timageS3Key: string;\n\t\tcopyrightPermissionStatus: CopyrightPermissionStatus;\n\t};\n}\n\nconst AccountVerify = () => {\n\tconst navigate = useNavigate();\n\tconst [\n\t\t_,\n\t\t{\n\t\t\trefetch: refetchVerificationRequestsForCurrentUser,\n\t\t\tloading: refetchVerificationRequestsIsLoading,\n\t\t},\n\t] = useVerificationRequestsForCurrentUser();\n\n\tconst [personEntity, setPersonEntity] = useState<Person | undefined>();\n\tconst [imageFile, setImageFile] = useState<File>();\n\tconst [imageFileObjectUrl, setImageFileObjectUrl] = useState<\n\t\tstring | undefined\n\t>();\n\tconst [copyrightPermissionIsGranted, setCopyrightPermissionIsGranted] =\n\t\tuseState(false);\n\tconst [formIsSubmitting, setFormIsSubmitting] = useState(false);\n\n\tconst [createPresignedUploadUrl] = useMutation<\n\t\tCreatePresignedUploadUrlMutationData,\n\t\tCreatePresignedUploadUrlMutationVars\n\t>(CREATE_PRESIGNED_UPLOAD_URL_MUTATION, { errorPolicy: \"all\" });\n\n\tconst [createVerificationRequest] = useMutation<\n\t\tCreateVerificationRequestMutationData,\n\t\tCreateVerificationRequestMutationVars\n\t>(CREATE_VERIFICATION_REQUEST_MUTATION, { errorPolicy: \"all\" });\n\n\tconst onSelectEntity = (entity: Entity) => {\n\t\tif (isPerson(entity)) {\n\t\t\tsetPersonEntity(entity);\n\t\t}\n\t};\n\n\tconst onImageFileChanged = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tif (!event.target.files?.length) {\n\t\t\treturn;\n\t\t}\n\t\tconst selectedFile = event.target.files[0];\n\t\tsetImageFile(selectedFile);\n\t\tconst objectUrl = URL.createObjectURL(selectedFile);\n\t\tsetImageFileObjectUrl(objectUrl);\n\t};\n\t// Clear the existing object URL whenever it changes\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (imageFileObjectUrl) {\n\t\t\t\tURL.revokeObjectURL(imageFileObjectUrl);\n\t\t\t}\n\t\t};\n\t}, [imageFileObjectUrl]);\n\n\tconst requiredFieldsAreSet =\n\t\tpersonEntity && imageFile && copyrightPermissionIsGranted;\n\n\tconst onSubmitClicked = async () => {\n\t\tif (!requiredFieldsAreSet) {\n\t\t\treturn window.alert(\"Please fill out all the fields\");\n\t\t}\n\t\tsetFormIsSubmitting(true);\n\t\ttry {\n\t\t\t// Create a presigned upload URL for the image\n\t\t\tconst response = await createPresignedUploadUrl({\n\t\t\t\tvariables: { filename: imageFile.name },\n\t\t\t});\n\t\t\tconst { imageS3Key, presignedUploadUrl } =\n\t\t\t\tresponse.data.createPresignedUploadUrlForVerificationImage;\n\t\t\t// Upload the image\n\t\t\tawait fetch(presignedUploadUrl, { method: \"PUT\", body: imageFile });\n\t\t\t// Then create the VerificationRequest\n\t\t\tconst { data } = await createVerificationRequest({\n\t\t\t\tvariables: {\n\t\t\t\t\tinput: {\n\t\t\t\t\t\tpersonId: personEntity.id,\n\t\t\t\t\t\timageS3Key,\n\t\t\t\t\t\tcopyrightPermissionStatus:\n\t\t\t\t\t\t\tCopyrightPermissionStatus.FullNonCommercialGranted,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t\tif (!data.createVerificationRequest) {\n\t\t\t\tthrow new Error();\n\t\t\t}\n\t\t\t// Refetch the Verification Requests for current user and navigate to\n\t\t\t// their Account page\n\t\t\tawait refetchVerificationRequestsForCurrentUser();\n\t\t\tsetFormIsSubmitting(false);\n\t\t\tnavigate(\"/account\");\n\t\t} catch {\n\t\t\tsetFormIsSubmitting(false);\n\t\t\twindow.alert(\n\t\t\t\t\"Error submitting verification request. Please reload and try again.\"\n\t\t\t);\n\t\t}\n\t};\n\n\tconst shouldPromptToChoosePerson =\n\t\t!personEntity && imageFile && copyrightPermissionIsGranted;\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<Breadcrumb\n\t\t\t\t\titems={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Account\",\n\t\t\t\t\t\t\thref: \"/account\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: \"Verify Your Account\" },\n\t\t\t\t\t]}\n\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t/>\n\t\t\t\t<div className=\"mb-8 text-gray-500\">\n\t\t\t\t\tThis enables you to link your user account with a Person tag. For\n\t\t\t\t\texample, let's say you are Michael Coleman; you can link your user\n\t\t\t\t\taccount to the \"Michael Coleman\" tag on the site. You'll get a\n\t\t\t\t\tverified badge next to your username, and you'll be able to\n\t\t\t\t\timmediately take down any content that you're tagged in, if you want\n\t\t\t\t\tto. Verification is free and will be done by ITMA staff.\n\t\t\t\t</div>\n\n\t\t\t\t{!personEntity ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"mb-2\">\n\t\t\t\t\t\t\tSearch for your name and click on the Person if found. If it\n\t\t\t\t\t\t\tdoesn't exist yet, go ahead and create a new one.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex flex-col max-w-xs\">\n\t\t\t\t\t\t\t<SearchEntities\n\t\t\t\t\t\t\t\tclassName=\"mb-8\"\n\t\t\t\t\t\t\t\tentityTypes={[EntityType.Person]}\n\t\t\t\t\t\t\t\ttake={15}\n\t\t\t\t\t\t\t\tonSelect={onSelectEntity}\n\t\t\t\t\t\t\t\tonNewEntityCreated={onSelectEntity}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"mb-8\">\n\t\t\t\t\t\t<div className=\"mb-2 font-bold\">You have selected:</div>\n\t\t\t\t\t\t{personEntity.firstName} {personEntity.lastName}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"btn-text ml-2\"\n\t\t\t\t\t\t\tonClick={() => setPersonEntity(undefined)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tClear\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"mb-8\">\n\t\t\t\t\t<div className=\"mb-2\">\n\t\t\t\t\t\tPlease attach a photo proving your identity (utility bill, ID, etc;\n\t\t\t\t\t\twill be deleted after verification):\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\taccept=\".png,.jpeg,.jpg\"\n\t\t\t\t\t\tonChange={onImageFileChanged}\n\t\t\t\t\t\tclassName=\"block\"\n\t\t\t\t\t/>\n\t\t\t\t\t{imageFileObjectUrl && (\n\t\t\t\t\t\t<img src={imageFileObjectUrl} className=\"h-48 mt-4\" />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"mb-2\">\n\t\t\t\t\tDo you give the Irish Traditional Music Archive (ITMA) permission to\n\t\t\t\t\tmake recordings of you publicly available for non-commercial use,\n\t\t\t\t\tgiven that you can take them down at any time?\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mb-8 flex flex-row items-center justify-start\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tid=\"copyright-permission\"\n\t\t\t\t\t\tchecked={copyrightPermissionIsGranted}\n\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\tsetCopyrightPermissionIsGranted(event.target.checked)\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor=\"copyright-permission\" className=\"ml-2\">\n\t\t\t\t\t\tYes, I give permission\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\n\t\t\t\t{refetchVerificationRequestsIsLoading || formIsSubmitting ? (\n\t\t\t\t\t<LoadingCircle />\n\t\t\t\t) : (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn\"\n\t\t\t\t\t\tonClick={onSubmitClicked}\n\t\t\t\t\t\tdisabled={!requiredFieldsAreSet}\n\t\t\t\t\t>\n\t\t\t\t\t\tSubmit\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\n\t\t\t\t{shouldPromptToChoosePerson && (\n\t\t\t\t\t<div className=\"text-red-600 mt-6\">Please select a Person above</div>\n\t\t\t\t)}\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default AccountVerify;\n", "import { useEffect } from \"react\";\nimport type { LazyQueryResult } from \"@apollo/client\";\nimport { gql, useLazyQuery } from \"@apollo/client\";\n\nimport { VerificationRequestFragments } from \"~/fragments\";\nimport type { VerificationRequest } from \"~/types\";\n\nconst VERIFICATION_REQUESTS_FOR_CURRENT_USER_QUERY = gql`\n\tquery VerificationRequestsForCurrentUser {\n\t\tverificationRequestsForCurrentUser {\n\t\t\t...VerificationRequest\n\t\t}\n\t}\n\t${VerificationRequestFragments.verificationRequest}\n`;\n\ninterface QueryData {\n\tverificationRequestsForCurrentUser: VerificationRequest[];\n}\n\nconst useVerificationRequestsForCurrentUser = (): [\n\tVerificationRequest[] | undefined,\n\tLazyQueryResult<QueryData, {}>\n] => {\n\tconst [makeQuery, query] = useLazyQuery<QueryData>(\n\t\tVERIFICATION_REQUESTS_FOR_CURRENT_USER_QUERY\n\t);\n\n\tuseEffect(() => {\n\t\tmakeQuery();\n\t}, [makeQuery]);\n\n\tconst verificationRequests = query?.data?.verificationRequestsForCurrentUser;\n\n\treturn [verificationRequests, query];\n};\n\nexport default useVerificationRequestsForCurrentUser;\n", "import {\n\ttype ActionFunction,\n\ttype LoaderFunction,\n\tjson,\n\tredirect,\n} from \"@remix-run/node\";\nimport { Link, useLoaderData, useTransition } from \"@remix-run/react\";\nimport sendgrid from \"@sendgrid/mail\";\nimport bcrypt from \"bcryptjs\";\nimport { v4 as uuid } from \"uuid\";\nimport addMinutes from \"date-fns/addMinutes\";\n\nimport { db } from \"~/utils/db.server\";\nimport { getSession, commitSession } from \"~/sessions.server\";\nimport Layout from \"~/components/Layout\";\n\ninterface LoaderData {\n\terror: string | null;\n\tconfirmation: string | null;\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst error = session.get(\"error\") || null;\n\tconst confirmation = session.get(\"confirmation\") || null;\n\treturn json(\n\t\t{ error, confirmation },\n\t\t{\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t}\n\t);\n};\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst formData = await request.formData();\n\tconst email = String(formData.get(\"email\") ?? \"\");\n\n\tconst user = await db.user.findUnique({ where: { email } });\n\tif (!user) {\n\t\tsession.flash(\"error\", \"Could not find a user with that email\");\n\t\treturn redirect(\"/reset-password\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\t// create an auto-login token for the user and save hashed version in DB\n\tconst autoLoginTokenUnhashed = uuid();\n\tconst autoLoginTokenHashed = await bcrypt.hash(autoLoginTokenUnhashed, 10);\n\tconst autoLoginTokenExpiry = addMinutes(new Date(), 10);\n\tawait db.user.update({\n\t\twhere: { id: user.id },\n\t\tdata: { autoLoginTokenHashed, autoLoginTokenExpiry },\n\t});\n\n\t// email a link with unhashed auto-login token to the user\n\tsendgrid.setApiKey(process.env.SENDGRID_API_KEY ?? \"\");\n\n\tconst params = new URLSearchParams({\n\t\ttokenUnhashed: autoLoginTokenUnhashed,\n\t\tuserEmail: email,\n\t});\n\tconst origin = new URL(request.url).origin;\n\tconst url = `${origin}/choose-new-password?${params.toString()}`;\n\n\tconst data = {\n\t\tto: user.email,\n\t\tfrom: \"no-reply@tradarchive.com\",\n\t\tsubject: \"Reset your password for Trad Archive\",\n\t\ttext: `Hi ${user.username}, click this link to reset your password for Trad Archive: ${url} . This link will be valid for the next 10 minutes. If you didn't request this, you can ignore this email.`,\n\t\thtml: `\n\t\t\tHi ${user.username},\n\t\t\t<br /><br />\n\t\t\t<a href=\"${url}\">Click here to reset your password for Trad Archive</a>\n\t\t\t<br /><br />\n\t\t\tThis link will be valid for the next 10 minutes.\n\t\t\t<br /><br />\n\t\t\t- - -\n\t\t\t<br /><br />\n\t\t\tIf it doesn't work, copy and paste this URL into your browser:\n\t\t\t<br /><br />\n\t\t\t<em>${url}</em>\n\t\t`,\n\t};\n\n\tawait sendgrid.send(data);\n\n\tsession.flash(\n\t\t\"confirmation\",\n\t\t\"Check your email for a link to reset your password\"\n\t);\n\treturn redirect(\"/reset-password\", {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport default function ResetPassword() {\n\tconst transition = useTransition();\n\tconst { error, confirmation } = useLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-4\">Reset your password</h1>\n\n\t\t\t{confirmation ? (\n\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\t<i className=\"material-icons mr-1\">mail_outline</i>\n\t\t\t\t\t{confirmation}\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<p className=\"text-gray-500 mb-4\">\n\t\t\t\t\t\tWe'll send you an email with a link to reset your password.\n\t\t\t\t\t</p>\n\t\t\t\t\t<div className=\"flex flex-col align-start max-w-xs\">\n\t\t\t\t\t\t<form method=\"post\" className=\"space-y-4 mb-6\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tclassName=\"btn w-auto\"\n\t\t\t\t\t\t\t\tdisabled={transition.state === \"submitting\"}\n\t\t\t\t\t\t\t\tvalue=\"Send Email\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</form>\n\n\t\t\t\t\t\t{error && <div className=\"text-red-600 mb-6\">{error}</div>}\n\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<Link to=\"/login\">Go Back</Link>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n}\n", "import { Link } from \"@remix-run/react\";\nimport type { LoaderFunction } from \"@remix-run/node\";\nimport { json, redirect } from \"@remix-run/node\";\nimport type { User } from \"@prisma/client\";\n\nimport Layout from \"~/components/Layout\";\nimport { getSession } from \"~/sessions.server\";\nimport { db } from \"~/utils/db.server\";\n\ninterface LoaderData {\n\tcurrentUser: User;\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst currentUserId = String(session.get(\"userId\") ?? \"\");\n\tconst currentUser = await db.user.findUnique({\n\t\twhere: { id: currentUserId },\n\t});\n\tif (!currentUser) {\n\t\tconst params = new URLSearchParams();\n\t\tparams.set(\"redirectTo\", \"/account\");\n\t\treturn redirect(`/login?${params.toString()}`);\n\t}\n\treturn json<LoaderData>({ currentUser });\n};\n\nexport default function AccountHome() {\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">Account</h1>\n\t\t\t<div className=\"flex flex-col space-y-2\">\n\t\t\t\t<Link to=\"/reset-password\">Change Password</Link>\n\t\t\t\t<Link to=\"/logout\">Log Out </Link>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n", "import { Link } from \"@remix-run/react\";\nimport Layout from \"~/components/Layout\";\nimport RequireAdmin from \"~/components/RequireAdmin\";\n\nconst AdminHome = () => {\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireAdmin>\n\t\t\t\t<>\n\t\t\t\t\t<h1 className=\"mb-4\">Admin</h1>\n\t\t\t\t\t<Link to=\"/admin/verification-requests\">\n\t\t\t\t\t\t<a className=\"block mb-2\">Manage Verification Requests</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/admin/takedown-requests\">\n\t\t\t\t\t\t<a className=\"block mb-2\">Manage Takedown Requests</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/admin/submissions\">\n\t\t\t\t\t\t<a className=\"block mb-6\">Manage Submissions</a>\n\t\t\t\t\t</Link>\n\n\t\t\t\t\t<Link to=\"/entities/audio-items/new\">\n\t\t\t\t\t\t<a className=\"block mb-2\">Create Audio Item</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/people/new\">\n\t\t\t\t\t\t<a className=\"block mb-2\">Create Person</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/instruments/new\">\n\t\t\t\t\t\t<a className=\"block mb-2\">Create Instrument</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/places/new\">\n\t\t\t\t\t\t<a className=\"block mb-2\">Create Place</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/collections/new\">\n\t\t\t\t\t\t<a className=\"block mb-2\">Create Collection</a>\n\t\t\t\t\t</Link>\n\t\t\t\t</>\n\t\t\t</RequireAdmin>\n\t\t</Layout>\n\t);\n};\n\nexport default AdminHome;\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport {\n\ttype ActionFunction,\n\tjson,\n\tredirect,\n\ttype LoaderFunction,\n} from \"@remix-run/node\";\n\nimport useFilters from \"~/hooks/useFilters\";\nimport { type AudioItemWithRelations, ViewAs } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport { getSession } from \"~/sessions.server\";\n\nimport Layout from \"~/components/Layout\";\nimport AudioItem from \"~/components/AudioItem\";\n\ninterface LoaderData {\n\taudioItems: AudioItemWithRelations[];\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\n\tconst { pathname, searchParams } = new URL(request.url);\n\tconst redirectParams = new URLSearchParams({\n\t\tredirectTo: pathname,\n\t});\n\tif (!userId) {\n\t\treturn redirect(`/login?${redirectParams.toString()}`);\n\t}\n\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst audioItems = await db.audioItem.findMany({\n\t\twhere: {\n\t\t\tsavedItems: {\n\t\t\t\tsome: {\n\t\t\t\t\tuserId,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tinclude: {\n\t\t\ttagsAsSubject: {\n\t\t\t\tinclude: {\n\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\tobjectTune: true,\n\t\t\t\t\trelationship: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\tcreatedByUser: true,\n\t\t\tupdatedByUser: true,\n\t\t\tcomments: {\n\t\t\t\tinclude: {\n\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t},\n\t\t\t\torderBy: {\n\t\t\t\t\tcreatedAt: \"asc\",\n\t\t\t\t},\n\t\t\t},\n\t\t\tsavedItems: {\n\t\t\t\twhere: {\n\t\t\t\t\tuserId,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tskip: (page - 1) * perPage,\n\t\ttake: perPage,\n\t});\n\n\treturn json<LoaderData>({ audioItems });\n};\n\ninterface ActionData {\n\terror?: string;\n\tok: boolean;\n}\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\tconst referer = String(request.headers.get(\"referer\") ?? \"\");\n\tconst redirectParams = new URLSearchParams({\n\t\tredirectTo: referer ? new URL(referer).pathname : \"/\",\n\t});\n\tif (!userId) {\n\t\treturn redirect(`/login?${redirectParams.toString()}`);\n\t}\n\n\tconst formData = await request.formData();\n\tconst audioItemId = String(formData.get(\"audioItemId\") ?? \"\");\n\tconst existing = await db.savedItem.findUnique({\n\t\twhere: {\n\t\t\tuserId_audioItemId: {\n\t\t\t\tuserId,\n\t\t\t\taudioItemId,\n\t\t\t},\n\t\t},\n\t});\n\tif (existing) {\n\t\tawait db.savedItem.delete({ where: { id: existing.id } });\n\t} else {\n\t\tawait db.savedItem.create({ data: { userId, audioItemId } });\n\t}\n\treturn json<ActionData>({ ok: true }, { status: 200 });\n};\n\nexport default function SavedItems() {\n\tconst { audioItems } = useLoaderData<LoaderData>();\n\n\tconst { Filters, filtersProps, viewAs } = useFilters({\n\t\tdefaultViewAs: ViewAs.List,\n\t});\n\n\treturn (\n\t\t<Layout>\n\t\t\t<div className=\"flex flex-col\">\n\t\t\t\t<h1 className=\"mb-6\">Saved Items</h1>\n\n\t\t\t\t{audioItems.length > 0 && (\n\t\t\t\t\t<Filters {...filtersProps} className=\"mb-6\" />\n\t\t\t\t)}\n\n\t\t\t\t{audioItems.length === 0 && (\n\t\t\t\t\t<div className=\"text-gray-500\">\n\t\t\t\t\t\tNothing saved yet - try browsing some{\" \"}\n\t\t\t\t\t\t<Link to=\"/\">Audio Items</Link>!\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{audioItems.map((audioItem, index) => (\n\t\t\t\t\t<AudioItem\n\t\t\t\t\t\tviewAs={viewAs}\n\t\t\t\t\t\taudioItem={audioItem}\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tclassName={viewAs === ViewAs.List ? \"mb-4\" : \"mb-6\"}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { LoaderFunction } from \"@remix-run/node\";\nimport { json } from \"@remix-run/node\";\n\nimport DateTimeService from \"~/services/DateTime\";\nimport { db } from \"~/utils/db.server\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport type { User } from \"@prisma/client\";\n\ninterface LoaderData {\n\tuser: User;\n}\n\nexport const loader: LoaderFunction = async ({ params }) => {\n\tconst user = await db.user.findUnique({ where: { id: params.id } });\n\tif (!user) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find a user with this ID\",\n\t\t});\n\t}\n\treturn json<LoaderData>({ user });\n};\n\nconst ViewUserById = () => {\n\tconst { user } = useLoaderData<LoaderData>();\n\tconst { username, createdAt } = user;\n\n\treturn (\n\t\t<Layout>\n\t\t\t<div className=\"flex flex-col-reverse md:flex-row\">\n\t\t\t\t<div className=\"flex flex-1 flex-col pb-8\">\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t\titems={[{ label: \"Users\" }, { label: username }]}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div className=\"flex-col mb-8\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tAccount Created:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">\n\t\t\t\t\t\t\t\t{DateTimeService.formatDateYear(createdAt)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewUserById;\n", "import { type Comment } from \"@prisma/client\";\nimport { type ActionFunction, json, redirect } from \"@remix-run/node\";\nimport { getSession } from \"~/sessions.server\";\nimport { db } from \"~/utils/db.server\";\n\ninterface ActionData {\n\terror?: string;\n\tcomment?: Comment;\n}\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\tconst referer = String(request.headers.get(\"referer\") ?? \"\");\n\n\tconst redirectTo = encodeURIComponent(\n\t\treferer ? new URL(referer).pathname : \"/\"\n\t);\n\tif (!userId) {\n\t\treturn redirect(`/login?redirectTo=${redirectTo}`);\n\t}\n\n\tconst formData = await request.formData();\n\tconst text = String(formData.get(\"text\") ?? \"\");\n\tconst parentAudioItemId = String(formData.get(\"parentAudioItemId\") ?? \"\");\n\tlet error;\n\tif (!text) {\n\t\terror = \"Comment cannot be empty\";\n\t} else if (!parentAudioItemId) {\n\t\terror = \"Parent audio item ID not defined\";\n\t}\n\tif (error) {\n\t\treturn json<ActionData>({ error }, { status: 400 });\n\t}\n\tconst comment = await db.comment.create({\n\t\tdata: {\n\t\t\ttext,\n\t\t\tparentAudioItemId,\n\t\t\tcreatedByUserId: userId,\n\t\t},\n\t});\n\treturn json<ActionData>({ comment }, { status: 201 });\n};\n", "import type { LoaderFunction } from \"@remix-run/node\";\nimport { redirect } from \"@remix-run/node\";\nimport { getSession, destroySession } from \"~/sessions.server\";\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\treturn redirect(\"/login\", {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await destroySession(session),\n\t\t},\n\t});\n};\n", "import {\n\tuseLocation,\n\tLink,\n\tuseLoaderData,\n\tuseTransition,\n} from \"@remix-run/react\";\nimport bcrypt from \"bcryptjs\";\n\nimport Layout from \"~/components/Layout\";\nimport type { ActionFunction, LoaderFunction } from \"@remix-run/node\";\nimport { redirect, json } from \"@remix-run/node\";\nimport { commitSession, getSession } from \"~/sessions.server\";\nimport { db } from \"~/utils/db.server\";\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst url = new URL(request.url);\n\tconst redirectTo = url.searchParams.get(\"redirectTo\");\n\tif (session.has(\"userId\")) {\n\t\treturn redirect(redirectTo || \"/\");\n\t}\n\n\tconst data = { error: session.get(\"error\") };\n\treturn json(data, {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst url = new URL(request.url);\n\tconst redirectTo = url.searchParams.get(\"redirectTo\");\n\n\tconst formData = await request.formData();\n\tconst email = String(formData.get(\"email\") ?? \"\");\n\tconst fullName = String(formData.get(\"full_name\") ?? \"\");\n\tconst password = String(formData.get(\"password\") ?? \"\");\n\tconst passwordConfirm = String(formData.get(\"password_confirm\") ?? \"\");\n\n\t// Check for an existing user with this email\n\tconst user = await db.user.findUnique({ where: { email } });\n\tif (user) {\n\t\tsession.flash(\n\t\t\t\"error\",\n\t\t\t\"There is already a user with this email address. Try logging in?\"\n\t\t);\n\t\treturn redirect(\"/signup\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\t// Validate inputs\n\tconst emailValidityRegex = new RegExp(\n\t\t/^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i\n\t);\n\tconst emailIsValid = emailValidityRegex.test(email);\n\tif (!emailIsValid) {\n\t\tsession.flash(\"error\", \"Email is not valid\");\n\t\treturn redirect(\"/signup\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\tconst fullNameIsValid = fullName.split(\" \").length >= 2;\n\tif (!fullNameIsValid) {\n\t\tsession.flash(\"error\", \"Please enter your full name\");\n\t\treturn redirect(\"/signup\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\tconst passwordsMatch = password === passwordConfirm;\n\tif (!passwordsMatch) {\n\t\tsession.flash(\"error\", \"Passwords don't match\");\n\t\treturn redirect(\"/signup\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\tconst passwordIsValid = password.length >= 8;\n\tif (!passwordIsValid) {\n\t\tsession.flash(\"error\", \"Password must be at least 8 characters long\");\n\t\treturn redirect(\"/signup\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\t// Everything is valid - create the user and set it in a cookie\n\tconst passwordHashed = bcrypt.hashSync(password, 10);\n\tconst newUser = await db.user.create({\n\t\tdata: {\n\t\t\temail,\n\t\t\tusername: fullName,\n\t\t\tpasswordHashed,\n\t\t},\n\t});\n\tsession.set(\"userId\", newUser.id);\n\treturn redirect(redirectTo || \"/\", {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport default function SignUp() {\n\tconst { error } = useLoaderData();\n\tconst { state } = useTransition();\n\n\tconst { search } = useLocation();\n\tconst params = new URLSearchParams(search);\n\tconst redirectTo = params.get(\"redirectTo\");\n\n\tconst logInLinkQueryParams = new URLSearchParams(\n\t\tredirectTo ? { redirectTo } : undefined\n\t);\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">\n\t\t\t\t{redirectTo ? \"Create an account to continue\" : \"Create your account\"}\n\t\t\t</h1>\n\t\t\t<div className=\"flex flex-col align-start max-w-xs\">\n\t\t\t\t<form method=\"post\" className=\"space-y-4 mb-6\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\tplaceholder=\"Your email\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"full_name\"\n\t\t\t\t\t\tplaceholder=\"Your full name\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tplaceholder=\"Choose a password\"\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tname=\"password_confirm\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tplaceholder=\"Password (again)\"\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={state === \"submitting\"}\n\t\t\t\t\t\tvalue=\"Sign Up\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\n\t\t\t\t{error && <div className=\"text-red-600 mb-6\">{error}</div>}\n\n\t\t\t\t<div>\n\t\t\t\t\tAlready have an account?{\" \"}\n\t\t\t\t\t<Link to={`/login?${logInLinkQueryParams.toString()}`}>Log in</Link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n", "import { useEffect, useCallback, useState } from \"react\";\nimport { Link, useLoaderData, useLocation } from \"@remix-run/react\";\nimport { type DataFunctionArgs } from \"@remix-run/node\";\nimport { type SavedItem } from \"@prisma/client\";\n\nimport type {\n\tCollectionWithRelations,\n\tCommentWithRelations,\n\tAudioItemWithRelations,\n} from \"~/types\";\nimport { ViewAs } from \"~/types\";\nimport useFilters from \"~/hooks/useFilters\";\nimport EntityService from \"~/services/Entity\";\nimport LocalStorageService from \"~/services/LocalStorage\";\nimport { db } from \"~/utils/db.server\";\nimport { getSession } from \"~/sessions.server\";\n\nimport Layout from \"~/components/Layout\";\nimport ProjectIntro from \"~/components/ProjectIntro\";\nimport AudioItemComponent from \"~/components/AudioItem\";\n\ninterface LoaderData {\n\taudioItems: AudioItemWithRelations[];\n\tcollections: CollectionWithRelations[];\n\tcomments: CommentWithRelations[];\n\tnumAudioItemsAllTime: number;\n\tnumTagsAllTime: number;\n\tnumCommentsAllTime: number;\n}\n\nexport async function loader({\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst [\n\t\taudioItems,\n\t\tcollections,\n\t\tcomments,\n\t\tnumAudioItemsAllTime,\n\t\tnumTagsAllTime,\n\t\tnumCommentsAllTime,\n\t] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\tskip: (page - 1) * perPage,\n\t\t\ttake: perPage,\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t\torderBy: {\n\t\t\t\t\t\tcreatedAt: \"asc\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: {\n\t\t\t\t\twhere: {\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\torderBy: {\n\t\t\t\tupdatedAt: \"desc\",\n\t\t\t},\n\t\t}),\n\t\tdb.collection.findMany({\n\t\t\ttake: 5,\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: true,\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t},\n\t\t\torderBy: {\n\t\t\t\tcreatedAt: \"desc\",\n\t\t\t},\n\t\t}),\n\t\tdb.comment.findMany({\n\t\t\ttake: 6,\n\t\t\tinclude: {\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tparentAudioItem: true,\n\t\t\t},\n\t\t\torderBy: {\n\t\t\t\tcreatedAt: \"desc\",\n\t\t\t},\n\t\t}),\n\t\tdb.audioItem.count(),\n\t\tdb.tag.count(),\n\t\tdb.comment.count(),\n\t]);\n\n\treturn {\n\t\taudioItems,\n\t\tcollections,\n\t\tcomments,\n\t\tnumAudioItemsAllTime,\n\t\tnumTagsAllTime,\n\t\tnumCommentsAllTime,\n\t};\n}\n\nexport default function Home() {\n\tconst {\n\t\taudioItems,\n\t\tcollections,\n\t\tcomments,\n\t\tnumAudioItemsAllTime,\n\t\tnumTagsAllTime,\n\t\tnumCommentsAllTime,\n\t} = useLoaderData<LoaderData>();\n\tconst { search } = useLocation();\n\tconst viewAs =\n\t\t(new URLSearchParams(search).get(\"viewAs\") as ViewAs) ?? ViewAs.Cards;\n\n\tconst { Filters, filtersProps } = useFilters({\n\t\ttotalItems: numAudioItemsAllTime,\n\t});\n\n\t// Due to static rendering, we need to check localStorage for intro status\n\t// after client-side hydration.\n\tconst [shouldShowIntro, setShouldShowIntro] = useState(false);\n\tuseEffect(() => {\n\t\tif (LocalStorageService.getItem(\"SHOULD_SHOW_INTRO\") !== \"false\") {\n\t\t\tsetShouldShowIntro(true);\n\t\t}\n\t}, []);\n\tconst onCloseIntro = useCallback(() => {\n\t\tLocalStorageService.setItem(\"SHOULD_SHOW_INTRO\", \"false\");\n\t\tsetShouldShowIntro(false);\n\t}, []);\n\n\treturn (\n\t\t<Layout>\n\t\t\t{shouldShowIntro && (\n\t\t\t\t<ProjectIntro\n\t\t\t\t\tclassName=\"mb-8 md:mt-4 md:mb-12\"\n\t\t\t\t\tonClose={onCloseIntro}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t<div className=\"flex flex-col md:flex-row\">\n\t\t\t\t<div className=\"flex flex-1 flex-col pb-8\">\n\t\t\t\t\t<h1>Explore</h1>\n\n\t\t\t\t\t<Filters\n\t\t\t\t\t\t{...filtersProps}\n\t\t\t\t\t\tviewAs={undefined}\n\t\t\t\t\t\tsortBy={undefined}\n\t\t\t\t\t\tclassName=\"sticky left-0 right-0 py-4 px-4 -ml-4 -mr-4 bg-gray-100 top-[48px] mb-2 z-10\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{audioItems.map((audioItem, index) => (\n\t\t\t\t\t\t<AudioItemComponent\n\t\t\t\t\t\t\tviewAs={viewAs}\n\t\t\t\t\t\t\taudioItem={audioItem}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName={viewAs === ViewAs.List ? \"mb-4\" : \"mb-6\"}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"flex flex-col items-start md:ml-8 md:pl-8 md:w-1/4 md:border-l md:border-gray-300\">\n\t\t\t\t\t<h3 className=\"mb-4\">Browse</h3>\n\t\t\t\t\t<Link to=\"/entities/people\" className=\"mb-2\">\n\t\t\t\t\t\tPeople\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/instruments\" className=\"mb-2\">\n\t\t\t\t\t\tInstruments\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/places\" className=\"mb-2\">\n\t\t\t\t\t\tPlaces\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/tunes\" className=\"mb-2\">\n\t\t\t\t\t\tTunes\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/collections\" className=\"mb-2\">\n\t\t\t\t\t\tCollections\n\t\t\t\t\t</Link>\n\n\t\t\t\t\t<h3 className=\"mt-6 mb-4\">Stats</h3>\n\t\t\t\t\t<span className=\"mb-2 text-gray-500\">\n\t\t\t\t\t\t{numAudioItemsAllTime} Audio Items\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className=\"mb-2 text-gray-500\">{numTagsAllTime} Tags</span>\n\t\t\t\t\t<span className=\"mb-2 text-gray-500\">\n\t\t\t\t\t\t{numCommentsAllTime} Comments\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<h3 className=\"mt-6 mb-4\">Latest Collections</h3>\n\t\t\t\t\t{collections.map((collection, index) => {\n\t\t\t\t\t\tconst { name } = collection;\n\t\t\t\t\t\tif (!name) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"mb-2 text-gray-500\" key={index}>\n\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(collection)}>\n\t\t\t\t\t\t\t\t\t{collection.name}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\n\t\t\t\t\t<h3 className=\"mt-6 mb-4\">Latest Features + Fixes</h3>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\thref=\"https://github.com/dgurns/trad-archive/pulls?q=is%3Apr+is%3Amerged+sort%3Aupdated-desc\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t>\n\t\t\t\t\t\tView on GitHub{\" \"}\n\t\t\t\t\t\t<i className=\"material-icons\">\n\t\t\t\t\t\t\t<span className=\"text-sm\">launch</span>\n\t\t\t\t\t\t</i>\n\t\t\t\t\t</a>\n\n\t\t\t\t\t<h3 className=\"mt-6 mb-4\">Latest Comments</h3>\n\t\t\t\t\t{comments.map((comment, index) => {\n\t\t\t\t\t\tconst { createdByUser, parentAudioItem, text } = comment;\n\t\t\t\t\t\tif (!createdByUser || !parentAudioItem) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"mb-4 text-gray-500\" key={index}>\n\t\t\t\t\t\t\t\t<div className=\" mb-1\">\n\t\t\t\t\t\t\t\t\t<Link to={`/users/${createdByUser.id}`}>\n\t\t\t\t\t\t\t\t\t\t{createdByUser.username}\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t{` commented on `}\n\t\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(parentAudioItem)}>\n\t\t\t\t\t\t\t\t\t\t{parentAudioItem.name}\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t{\":\"}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"whitespace-pre-line text-sm\">{text}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n", "const localStorageIsAvailable =\n\ttypeof window !== \"undefined\" && window?.localStorage;\n\nconst setItem = (key: string, value: string) => {\n\tif (localStorageIsAvailable) {\n\t\twindow.localStorage.setItem(key, value);\n\t}\n};\nconst getItem = (key: string): string | null | undefined => {\n\tif (localStorageIsAvailable) {\n\t\treturn window.localStorage.getItem(key);\n\t}\n\treturn undefined;\n};\n\nconst LocalStorageService = {\n\tsetItem,\n\tgetItem,\n};\nexport default LocalStorageService;\n", "interface Props {\n\tclassName?: string;\n\tonClose?: () => void;\n}\n\nconst ProjectIntro = ({ className, onClose }: Props) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-col flex-grow bg-gray-200 rounded p-4 pl-16 lg:pl-20 relative ${\n\t\t\t\tclassName ?? \"\"\n\t\t\t}`}\n\t\t>\n\t\t\t<img\n\t\t\t\tsrc=\"/logo-square.png\"\n\t\t\t\tclassName=\"absolute top-5 -left-1 lg:-left-8 w-12 lg:w-20 -rotate-12\"\n\t\t\t/>\n\t\t\t<strong>Welcome!</strong>\n\t\t\t<br />\n\t\t\tTrad Archive is an open source experiment by the Irish Traditional Music\n\t\t\tArchive and Dan Gurney.\n\t\t\t<br />\n\t\t\t<br />\n\t\t\tYou can...\n\t\t\t<br />\n\t\t\t<ul className=\"list-disc list-inside\">\n\t\t\t\t<li>Listen to previously unreleased archival recordings</li>\n\t\t\t\t<li>\n\t\t\t\t\tHelp by tagging each recording with People, Places, Tunes,\n\t\t\t\t\tInstruments, and Collections\n\t\t\t\t</li>\n\t\t\t\t<li>Save favorites to listen later</li>\n\t\t\t</ul>\n\t\t\t<button className=\"absolute top-2 right-2 btn-icon\" onClick={onClose}>\n\t\t\t\t<i className=\"material-icons\">close</i>\n\t\t\t</button>\n\t\t</div>\n\t);\n};\n\nexport default ProjectIntro;\n", "import {\n\tuseLocation,\n\tLink,\n\tuseLoaderData,\n\tuseTransition,\n} from \"@remix-run/react\";\nimport type { ActionFunction, LoaderFunction } from \"@remix-run/node\";\nimport { redirect, json } from \"@remix-run/node\";\nimport bcrypt from \"bcryptjs\";\n\nimport { db } from \"~/utils/db.server\";\nimport { getSession, commitSession } from \"~/sessions.server\";\nimport Layout from \"~/components/Layout\";\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst url = new URL(request.url);\n\tconst redirectTo = url.searchParams.get(\"redirectTo\");\n\tif (session.has(\"userId\")) {\n\t\treturn redirect(redirectTo || \"/\");\n\t}\n\n\tconst data = { error: session.get(\"error\") };\n\treturn json(data, {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst url = new URL(request.url);\n\tconst redirectTo = url.searchParams.get(\"redirectTo\");\n\n\tconst formData = await request.formData();\n\tconst email = String(formData.get(\"email\") ?? \"\");\n\tconst password = String(formData.get(\"password\") ?? \"\");\n\n\tconst user = await db.user.findUnique({ where: { email } });\n\tif (!user) {\n\t\tsession.flash(\"error\", \"Could not find a user with this email\");\n\t\treturn redirect(\"/login\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\tif (!user.passwordHashed) {\n\t\tsession.flash(\n\t\t\t\"error\",\n\t\t\t\"This user does not have a password. TODO: Redirect to /reset-password page\"\n\t\t);\n\t\treturn redirect(\"/login\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\tconst passwordIsValid = bcrypt.compareSync(password, user.passwordHashed);\n\tif (!passwordIsValid) {\n\t\tsession.flash(\"error\", \"Incorrect password\");\n\t\treturn redirect(\"/login\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\t// Email and password are valid; set the userId in a session cookie and\n\t// redirect\n\tsession.set(\"userId\", user.id);\n\treturn redirect(redirectTo || \"/\", {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport default function Login() {\n\tconst { error } = useLoaderData();\n\tconst transition = useTransition();\n\n\tconst { search } = useLocation();\n\tconst params = new URLSearchParams(search);\n\tconst redirectTo = params.get(\"redirectTo\");\n\n\tconst signUpLinkQueryParams = new URLSearchParams(\n\t\tredirectTo ? { redirectTo } : undefined\n\t);\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">\n\t\t\t\tLog in to {redirectTo ? \"continue\" : \"Trad Archive\"}\n\t\t\t</h1>\n\t\t\t<div className=\"flex flex-col align-start max-w-xs\">\n\t\t\t\t<form method=\"post\" className=\"space-y-4 mb-6\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn w-auto\"\n\t\t\t\t\t\tdisabled={transition.state === \"submitting\"}\n\t\t\t\t\t\tvalue=\"Log In\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\n\t\t\t\t{error && <div className=\"text-red-600 mb-6\">{error}</div>}\n\n\t\t\t\t<p className=\"mb-2\">\n\t\t\t\t\tDon't have an account yet?{\" \"}\n\t\t\t\t\t<Link to={`/signup?${signUpLinkQueryParams.toString()}`}>\n\t\t\t\t\t\tSign Up\n\t\t\t\t\t</Link>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<Link to=\"/reset-password\">Reset Password</Link>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n", "export default {'version':'9fbf201f','entry':{'module':'/build/entry.client-4RBPKCCT.js','imports':['/build/_shared/chunk-LNAVFCVS.js','/build/_shared/chunk-SDLOU3B7.js']},'routes':{'root':{'id':'root','parentId':undefined,'path':'','index':undefined,'caseSensitive':undefined,'module':'/build/root-FWBSESBH.js','imports':['/build/_shared/chunk-ZLRWE4NK.js','/build/_shared/chunk-CTKWVKRM.js','/build/_shared/chunk-NU77PT47.js','/build/_shared/chunk-IJKWYIRN.js','/build/_shared/chunk-SUYZ22VD.js','/build/_shared/chunk-DTCN5V7D.js','/build/_shared/chunk-BB7ERBFN.js','/build/_shared/chunk-PQJWRTRS.js','/build/_shared/chunk-YQUMRRE2.js','/build/_shared/chunk-J2Q2VMPQ.js','/build/_shared/chunk-7WPGMELB.js','/build/_shared/chunk-4LYIPK7T.js','/build/_shared/chunk-PKPMHHR6.js','/build/_shared/chunk-C3OOQRN4.js','/build/_shared/chunk-37OVOBH6.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':true,'hasErrorBoundary':true},'routes/account/index':{'id':'routes/account/index','parentId':'root','path':'account','index':true,'caseSensitive':undefined,'module':'/build/routes/account/index-5BQXLM4I.js','imports':['/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/account/submissions/[id]/upload':{'id':'routes/account/submissions/[id]/upload','parentId':'root','path':'account/submissions/id/upload','index':undefined,'caseSensitive':undefined,'module':'/build/routes/account/submissions/[id]/upload-NNC6UZJH.js','imports':['/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-PS2F4ESJ.js','/build/_shared/chunk-BTICP3C7.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/account/submissions/index':{'id':'routes/account/submissions/index','parentId':'root','path':'account/submissions','index':true,'caseSensitive':undefined,'module':'/build/routes/account/submissions/index-O4YMFIZJ.js','imports':['/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-PS2F4ESJ.js','/build/_shared/chunk-BTICP3C7.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/account/submissions/new':{'id':'routes/account/submissions/new','parentId':'root','path':'account/submissions/new','index':undefined,'caseSensitive':undefined,'module':'/build/routes/account/submissions/new-LSZ3SH53.js','imports':['/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-PS2F4ESJ.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/account/verify':{'id':'routes/account/verify','parentId':'root','path':'account/verify','index':undefined,'caseSensitive':undefined,'module':'/build/routes/account/verify-FFVMNHC6.js','imports':['/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-PS2F4ESJ.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/admin/index':{'id':'routes/admin/index','parentId':'root','path':'admin','index':true,'caseSensitive':undefined,'module':'/build/routes/admin/index-HLMX7G4H.js','imports':['/build/_shared/chunk-KF4KFTG7.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/admin/submissions/[id]':{'id':'routes/admin/submissions/[id]','parentId':'root','path':'admin/submissions/id','index':undefined,'caseSensitive':undefined,'module':'/build/routes/admin/submissions/[id]-3DLGL2ZK.js','imports':['/build/_shared/chunk-KF4KFTG7.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-BTICP3C7.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/admin/submissions/index':{'id':'routes/admin/submissions/index','parentId':'root','path':'admin/submissions','index':true,'caseSensitive':undefined,'module':'/build/routes/admin/submissions/index-KADR2DXQ.js','imports':['/build/_shared/chunk-KF4KFTG7.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-BTICP3C7.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/admin/takedown-requests':{'id':'routes/admin/takedown-requests','parentId':'root','path':'admin/takedown-requests','index':undefined,'caseSensitive':undefined,'module':'/build/routes/admin/takedown-requests-XFC7PYOU.js','imports':['/build/_shared/chunk-KF4KFTG7.js','/build/_shared/chunk-7NJMRZQR.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-BTICP3C7.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/admin/verification-requests':{'id':'routes/admin/verification-requests','parentId':'root','path':'admin/verification-requests','index':undefined,'caseSensitive':undefined,'module':'/build/routes/admin/verification-requests-7WJME7QS.js','imports':['/build/_shared/chunk-KF4KFTG7.js','/build/_shared/chunk-7NJMRZQR.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-BTICP3C7.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/choose-new-password':{'id':'routes/choose-new-password','parentId':'root','path':'choose-new-password','index':undefined,'caseSensitive':undefined,'module':'/build/routes/choose-new-password-DRVQWS7G.js','imports':['/build/_shared/chunk-K64X6GTJ.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/comments':{'id':'routes/comments','parentId':'root','path':'comments','index':undefined,'caseSensitive':undefined,'module':'/build/routes/comments-5P3ESY7C.js','imports':undefined,'hasAction':true,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/$slug':{'id':'routes/entities/audio-items/$slug','parentId':'root','path':'entities/audio-items/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/$slug-HFNBUAMT.js','imports':['/build/_shared/chunk-TF3UQF2D.js','/build/_shared/chunk-YA6G7YED.js','/build/_shared/chunk-7NJMRZQR.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-BTICP3C7.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/$slug/about':{'id':'routes/entities/audio-items/$slug/about','parentId':'routes/entities/audio-items/$slug','path':'about','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/$slug/about-Q3HPH7KW.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/$slug/edit':{'id':'routes/entities/audio-items/$slug/edit','parentId':'routes/entities/audio-items/$slug','path':'edit','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/$slug/edit-44OCY5IS.js','imports':['/build/_shared/chunk-PS2F4ESJ.js','/build/_shared/chunk-PKPMHHR6.js','/build/_shared/chunk-C3OOQRN4.js','/build/_shared/chunk-37OVOBH6.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/$slug/tags':{'id':'routes/entities/audio-items/$slug/tags','parentId':'routes/entities/audio-items/$slug','path':'tags','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/$slug/tags-AGNIMGTX.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/index':{'id':'routes/entities/audio-items/index','parentId':'root','path':'entities/audio-items','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/index-IWNJVVXR.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/new':{'id':'routes/entities/audio-items/new','parentId':'root','path':'entities/audio-items/new','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/new-5ENJLP5X.js','imports':['/build/_shared/chunk-KF4KFTG7.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/random':{'id':'routes/entities/audio-items/random','parentId':'root','path':'entities/audio-items/random','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/random-5WJTYHAU.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/collections/$slug':{'id':'routes/entities/collections/$slug','parentId':'root','path':'entities/collections/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/collections/$slug-HFBODBRE.js','imports':['/build/_shared/chunk-VB3DWVNO.js','/build/_shared/chunk-ADLM5W3T.js','/build/_shared/chunk-TF3UQF2D.js','/build/_shared/chunk-YA6G7YED.js','/build/_shared/chunk-7NJMRZQR.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-BTICP3C7.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/collections/$slug/about':{'id':'routes/entities/collections/$slug/about','parentId':'routes/entities/collections/$slug','path':'about','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/collections/$slug/about-TTYF4YNB.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/collections/$slug/edit':{'id':'routes/entities/collections/$slug/edit','parentId':'routes/entities/collections/$slug','path':'edit','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/collections/$slug/edit-4Q6P7DVB.js','imports':['/build/_shared/chunk-PS2F4ESJ.js','/build/_shared/chunk-PKPMHHR6.js','/build/_shared/chunk-C3OOQRN4.js','/build/_shared/chunk-37OVOBH6.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/collections/$slug/tags':{'id':'routes/entities/collections/$slug/tags','parentId':'routes/entities/collections/$slug','path':'tags','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/collections/$slug/tags-PD6FTNRO.js','imports':['/build/_shared/chunk-7OY7H2TI.js','/build/_shared/chunk-CTKWVKRM.js','/build/_shared/chunk-NU77PT47.js','/build/_shared/chunk-IJKWYIRN.js','/build/_shared/chunk-SUYZ22VD.js','/build/_shared/chunk-DTCN5V7D.js','/build/_shared/chunk-BB7ERBFN.js','/build/_shared/chunk-YQUMRRE2.js','/build/_shared/chunk-J2Q2VMPQ.js','/build/_shared/chunk-7WPGMELB.js','/build/_shared/chunk-4LYIPK7T.js','/build/_shared/chunk-PKPMHHR6.js','/build/_shared/chunk-C3OOQRN4.js','/build/_shared/chunk-37OVOBH6.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/collections/index':{'id':'routes/entities/collections/index','parentId':'root','path':'entities/collections','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/collections/index-QLKFCJWD.js','imports':['/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/collections/new':{'id':'routes/entities/collections/new','parentId':'root','path':'entities/collections/new','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/collections/new-EQ6J44JH.js','imports':['/build/_shared/chunk-PS2F4ESJ.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/instruments/$slug':{'id':'routes/entities/instruments/$slug','parentId':'root','path':'entities/instruments/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/instruments/$slug-KCGDQCLB.js','imports':['/build/_shared/chunk-VB3DWVNO.js','/build/_shared/chunk-ADLM5W3T.js','/build/_shared/chunk-TF3UQF2D.js','/build/_shared/chunk-YA6G7YED.js','/build/_shared/chunk-7NJMRZQR.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-BTICP3C7.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/instruments/$slug/about':{'id':'routes/entities/instruments/$slug/about','parentId':'routes/entities/instruments/$slug','path':'about','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/instruments/$slug/about-X6B2HCQD.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/instruments/$slug/edit':{'id':'routes/entities/instruments/$slug/edit','parentId':'routes/entities/instruments/$slug','path':'edit','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/instruments/$slug/edit-AOYINIV7.js','imports':['/build/_shared/chunk-PS2F4ESJ.js','/build/_shared/chunk-PKPMHHR6.js','/build/_shared/chunk-C3OOQRN4.js','/build/_shared/chunk-37OVOBH6.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/instruments/$slug/tags':{'id':'routes/entities/instruments/$slug/tags','parentId':'routes/entities/instruments/$slug','path':'tags','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/instruments/$slug/tags-UW5HRNK3.js','imports':['/build/_shared/chunk-7OY7H2TI.js','/build/_shared/chunk-CTKWVKRM.js','/build/_shared/chunk-NU77PT47.js','/build/_shared/chunk-IJKWYIRN.js','/build/_shared/chunk-SUYZ22VD.js','/build/_shared/chunk-DTCN5V7D.js','/build/_shared/chunk-BB7ERBFN.js','/build/_shared/chunk-YQUMRRE2.js','/build/_shared/chunk-J2Q2VMPQ.js','/build/_shared/chunk-7WPGMELB.js','/build/_shared/chunk-4LYIPK7T.js','/build/_shared/chunk-PKPMHHR6.js','/build/_shared/chunk-C3OOQRN4.js','/build/_shared/chunk-37OVOBH6.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/instruments/index':{'id':'routes/entities/instruments/index','parentId':'root','path':'entities/instruments','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/instruments/index-4N5QZTKV.js','imports':['/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/instruments/new':{'id':'routes/entities/instruments/new','parentId':'root','path':'entities/instruments/new','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/instruments/new-BGRYSEHD.js','imports':['/build/_shared/chunk-PS2F4ESJ.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/people/$slug':{'id':'routes/entities/people/$slug','parentId':'root','path':'entities/people/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/people/$slug-VXM4WI26.js','imports':['/build/_shared/chunk-VB3DWVNO.js','/build/_shared/chunk-ADLM5W3T.js','/build/_shared/chunk-TF3UQF2D.js','/build/_shared/chunk-YA6G7YED.js','/build/_shared/chunk-7NJMRZQR.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-BTICP3C7.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/people/$slug/about':{'id':'routes/entities/people/$slug/about','parentId':'routes/entities/people/$slug','path':'about','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/people/$slug/about-G4NCZ6M6.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/people/$slug/edit':{'id':'routes/entities/people/$slug/edit','parentId':'routes/entities/people/$slug','path':'edit','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/people/$slug/edit-WZAMEA43.js','imports':['/build/_shared/chunk-PS2F4ESJ.js','/build/_shared/chunk-PKPMHHR6.js','/build/_shared/chunk-C3OOQRN4.js','/build/_shared/chunk-37OVOBH6.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/people/$slug/tags':{'id':'routes/entities/people/$slug/tags','parentId':'routes/entities/people/$slug','path':'tags','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/people/$slug/tags-WHJNYAPB.js','imports':['/build/_shared/chunk-7OY7H2TI.js','/build/_shared/chunk-CTKWVKRM.js','/build/_shared/chunk-NU77PT47.js','/build/_shared/chunk-IJKWYIRN.js','/build/_shared/chunk-SUYZ22VD.js','/build/_shared/chunk-DTCN5V7D.js','/build/_shared/chunk-BB7ERBFN.js','/build/_shared/chunk-YQUMRRE2.js','/build/_shared/chunk-J2Q2VMPQ.js','/build/_shared/chunk-7WPGMELB.js','/build/_shared/chunk-4LYIPK7T.js','/build/_shared/chunk-PKPMHHR6.js','/build/_shared/chunk-C3OOQRN4.js','/build/_shared/chunk-37OVOBH6.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/people/index':{'id':'routes/entities/people/index','parentId':'root','path':'entities/people','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/people/index-NPPJOENE.js','imports':['/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/people/new':{'id':'routes/entities/people/new','parentId':'root','path':'entities/people/new','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/people/new-TTL447XH.js','imports':['/build/_shared/chunk-PS2F4ESJ.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/places/$slug':{'id':'routes/entities/places/$slug','parentId':'root','path':'entities/places/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/places/$slug-SOVP4F5W.js','imports':['/build/_shared/chunk-VB3DWVNO.js','/build/_shared/chunk-ADLM5W3T.js','/build/_shared/chunk-TF3UQF2D.js','/build/_shared/chunk-YA6G7YED.js','/build/_shared/chunk-7NJMRZQR.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-BTICP3C7.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/places/$slug/about':{'id':'routes/entities/places/$slug/about','parentId':'routes/entities/places/$slug','path':'about','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/places/$slug/about-LVSKERUP.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/places/$slug/edit':{'id':'routes/entities/places/$slug/edit','parentId':'routes/entities/places/$slug','path':'edit','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/places/$slug/edit-FF5ACGOJ.js','imports':['/build/_shared/chunk-PS2F4ESJ.js','/build/_shared/chunk-PKPMHHR6.js','/build/_shared/chunk-C3OOQRN4.js','/build/_shared/chunk-37OVOBH6.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/places/$slug/tags':{'id':'routes/entities/places/$slug/tags','parentId':'routes/entities/places/$slug','path':'tags','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/places/$slug/tags-3YUKMEXN.js','imports':['/build/_shared/chunk-7OY7H2TI.js','/build/_shared/chunk-CTKWVKRM.js','/build/_shared/chunk-NU77PT47.js','/build/_shared/chunk-IJKWYIRN.js','/build/_shared/chunk-SUYZ22VD.js','/build/_shared/chunk-DTCN5V7D.js','/build/_shared/chunk-BB7ERBFN.js','/build/_shared/chunk-YQUMRRE2.js','/build/_shared/chunk-J2Q2VMPQ.js','/build/_shared/chunk-7WPGMELB.js','/build/_shared/chunk-4LYIPK7T.js','/build/_shared/chunk-PKPMHHR6.js','/build/_shared/chunk-C3OOQRN4.js','/build/_shared/chunk-37OVOBH6.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/places/index':{'id':'routes/entities/places/index','parentId':'root','path':'entities/places','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/places/index-3JONDR7N.js','imports':['/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/places/new':{'id':'routes/entities/places/new','parentId':'root','path':'entities/places/new','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/places/new-HKNHVRTA.js','imports':['/build/_shared/chunk-PS2F4ESJ.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/tunes/$slug':{'id':'routes/entities/tunes/$slug','parentId':'root','path':'entities/tunes/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/tunes/$slug-DCYDYIHI.js','imports':['/build/_shared/chunk-VB3DWVNO.js','/build/_shared/chunk-ADLM5W3T.js','/build/_shared/chunk-TF3UQF2D.js','/build/_shared/chunk-YA6G7YED.js','/build/_shared/chunk-7NJMRZQR.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-BTICP3C7.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/tunes/$slug/about':{'id':'routes/entities/tunes/$slug/about','parentId':'routes/entities/tunes/$slug','path':'about','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/tunes/$slug/about-Q2AE3PFK.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/tunes/$slug/tags':{'id':'routes/entities/tunes/$slug/tags','parentId':'routes/entities/tunes/$slug','path':'tags','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/tunes/$slug/tags-4CVX5ZQI.js','imports':['/build/_shared/chunk-7OY7H2TI.js','/build/_shared/chunk-CTKWVKRM.js','/build/_shared/chunk-NU77PT47.js','/build/_shared/chunk-IJKWYIRN.js','/build/_shared/chunk-SUYZ22VD.js','/build/_shared/chunk-DTCN5V7D.js','/build/_shared/chunk-BB7ERBFN.js','/build/_shared/chunk-YQUMRRE2.js','/build/_shared/chunk-J2Q2VMPQ.js','/build/_shared/chunk-7WPGMELB.js','/build/_shared/chunk-4LYIPK7T.js','/build/_shared/chunk-PKPMHHR6.js','/build/_shared/chunk-C3OOQRN4.js','/build/_shared/chunk-37OVOBH6.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/tunes/index':{'id':'routes/entities/tunes/index','parentId':'root','path':'entities/tunes','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/tunes/index-ULFT7ZWE.js','imports':['/build/_shared/chunk-ADLM5W3T.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/index':{'id':'routes/index','parentId':'root','path':undefined,'index':true,'caseSensitive':undefined,'module':'/build/routes/index-2LVZFOAM.js','imports':['/build/_shared/chunk-ADLM5W3T.js','/build/_shared/chunk-TF3UQF2D.js','/build/_shared/chunk-YA6G7YED.js','/build/_shared/chunk-7NJMRZQR.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-BTICP3C7.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/login':{'id':'routes/login','parentId':'root','path':'login','index':undefined,'caseSensitive':undefined,'module':'/build/routes/login-3KB3C3GC.js','imports':['/build/_shared/chunk-K64X6GTJ.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/logout':{'id':'routes/logout','parentId':'root','path':'logout','index':undefined,'caseSensitive':undefined,'module':'/build/routes/logout-HAGAUS4Y.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/reset-password':{'id':'routes/reset-password','parentId':'root','path':'reset-password','index':undefined,'caseSensitive':undefined,'module':'/build/routes/reset-password-BSRKV2Z3.js','imports':['/build/_shared/chunk-K64X6GTJ.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/saved-items':{'id':'routes/saved-items','parentId':'root','path':'saved-items','index':undefined,'caseSensitive':undefined,'module':'/build/routes/saved-items-DUJJRYPJ.js','imports':['/build/_shared/chunk-ADLM5W3T.js','/build/_shared/chunk-TF3UQF2D.js','/build/_shared/chunk-YA6G7YED.js','/build/_shared/chunk-7NJMRZQR.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-BTICP3C7.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/signup':{'id':'routes/signup','parentId':'root','path':'signup','index':undefined,'caseSensitive':undefined,'module':'/build/routes/signup-SNT7Q2JV.js','imports':['/build/_shared/chunk-K64X6GTJ.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/users/$id':{'id':'routes/users/$id','parentId':'root','path':'users/:id','index':undefined,'caseSensitive':undefined,'module':'/build/routes/users/$id-6SXM6J4M.js','imports':['/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false}},'url':'/build/manifest-9FBF201F.js'};", "\nimport * as entryServer from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/entry.server.tsx\";\nimport * as route0 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/root.tsx\";\nimport * as route1 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/submissions/[id]/upload.tsx\";\nimport * as route2 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/verification-requests.tsx\";\nimport * as route3 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/random.tsx\";\nimport * as route4 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/$slug.tsx\";\nimport * as route5 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/$slug/about.tsx\";\nimport * as route6 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/$slug/edit.tsx\";\nimport * as route7 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/$slug/tags.tsx\";\nimport * as route8 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/index.tsx\";\nimport * as route9 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/$slug.tsx\";\nimport * as route10 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/$slug/about.tsx\";\nimport * as route11 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/$slug/edit.tsx\";\nimport * as route12 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/$slug/tags.tsx\";\nimport * as route13 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/index.tsx\";\nimport * as route14 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/$slug.tsx\";\nimport * as route15 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/$slug/about.tsx\";\nimport * as route16 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/$slug/edit.tsx\";\nimport * as route17 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/$slug/tags.tsx\";\nimport * as route18 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/index.tsx\";\nimport * as route19 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/submissions/index.tsx\";\nimport * as route20 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/new.tsx\";\nimport * as route21 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/new.tsx\";\nimport * as route22 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/new.tsx\";\nimport * as route23 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/submissions/new.tsx\";\nimport * as route24 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/submissions/index.tsx\";\nimport * as route25 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/takedown-requests.tsx\";\nimport * as route26 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/submissions/[id].tsx\";\nimport * as route27 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/$slug.tsx\";\nimport * as route28 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/$slug/about.tsx\";\nimport * as route29 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/$slug/edit.tsx\";\nimport * as route30 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/$slug/tags.tsx\";\nimport * as route31 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/index.tsx\";\nimport * as route32 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/$slug.tsx\";\nimport * as route33 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/$slug/about.tsx\";\nimport * as route34 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/$slug/edit.tsx\";\nimport * as route35 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/$slug/tags.tsx\";\nimport * as route36 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/index.tsx\";\nimport * as route37 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/$slug.tsx\";\nimport * as route38 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/$slug/about.tsx\";\nimport * as route39 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/$slug/tags.tsx\";\nimport * as route40 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/index.tsx\";\nimport * as route41 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/choose-new-password.tsx\";\nimport * as route42 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/new.tsx\";\nimport * as route43 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/new.tsx\";\nimport * as route44 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/verify.tsx\";\nimport * as route45 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/reset-password.tsx\";\nimport * as route46 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/index.tsx\";\nimport * as route47 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/index.tsx\";\nimport * as route48 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/saved-items.tsx\";\nimport * as route49 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/users/$id.tsx\";\nimport * as route50 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/comments.tsx\";\nimport * as route51 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/logout.tsx\";\nimport * as route52 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/signup.tsx\";\nimport * as route53 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/index.tsx\";\nimport * as route54 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/login.tsx\";\n  export { default as assets } from \"@remix-run/dev/assets-manifest\";\n  export const entry = { module: entryServer };\n  export const routes = {\n    \"root\": {\n      id: \"root\",\n      parentId: undefined,\n      path: \"\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route0\n    },\n  \"routes/account/submissions/[id]/upload\": {\n      id: \"routes/account/submissions/[id]/upload\",\n      parentId: \"root\",\n      path: \"account/submissions/id/upload\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route1\n    },\n  \"routes/admin/verification-requests\": {\n      id: \"routes/admin/verification-requests\",\n      parentId: \"root\",\n      path: \"admin/verification-requests\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route2\n    },\n  \"routes/entities/audio-items/random\": {\n      id: \"routes/entities/audio-items/random\",\n      parentId: \"root\",\n      path: \"entities/audio-items/random\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route3\n    },\n  \"routes/entities/audio-items/$slug\": {\n      id: \"routes/entities/audio-items/$slug\",\n      parentId: \"root\",\n      path: \"entities/audio-items/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route4\n    },\n  \"routes/entities/audio-items/$slug/about\": {\n      id: \"routes/entities/audio-items/$slug/about\",\n      parentId: \"routes/entities/audio-items/$slug\",\n      path: \"about\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route5\n    },\n  \"routes/entities/audio-items/$slug/edit\": {\n      id: \"routes/entities/audio-items/$slug/edit\",\n      parentId: \"routes/entities/audio-items/$slug\",\n      path: \"edit\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route6\n    },\n  \"routes/entities/audio-items/$slug/tags\": {\n      id: \"routes/entities/audio-items/$slug/tags\",\n      parentId: \"routes/entities/audio-items/$slug\",\n      path: \"tags\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route7\n    },\n  \"routes/entities/audio-items/index\": {\n      id: \"routes/entities/audio-items/index\",\n      parentId: \"root\",\n      path: \"entities/audio-items\",\n      index: true,\n      caseSensitive: undefined,\n      module: route8\n    },\n  \"routes/entities/collections/$slug\": {\n      id: \"routes/entities/collections/$slug\",\n      parentId: \"root\",\n      path: \"entities/collections/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route9\n    },\n  \"routes/entities/collections/$slug/about\": {\n      id: \"routes/entities/collections/$slug/about\",\n      parentId: \"routes/entities/collections/$slug\",\n      path: \"about\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route10\n    },\n  \"routes/entities/collections/$slug/edit\": {\n      id: \"routes/entities/collections/$slug/edit\",\n      parentId: \"routes/entities/collections/$slug\",\n      path: \"edit\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route11\n    },\n  \"routes/entities/collections/$slug/tags\": {\n      id: \"routes/entities/collections/$slug/tags\",\n      parentId: \"routes/entities/collections/$slug\",\n      path: \"tags\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route12\n    },\n  \"routes/entities/collections/index\": {\n      id: \"routes/entities/collections/index\",\n      parentId: \"root\",\n      path: \"entities/collections\",\n      index: true,\n      caseSensitive: undefined,\n      module: route13\n    },\n  \"routes/entities/instruments/$slug\": {\n      id: \"routes/entities/instruments/$slug\",\n      parentId: \"root\",\n      path: \"entities/instruments/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route14\n    },\n  \"routes/entities/instruments/$slug/about\": {\n      id: \"routes/entities/instruments/$slug/about\",\n      parentId: \"routes/entities/instruments/$slug\",\n      path: \"about\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route15\n    },\n  \"routes/entities/instruments/$slug/edit\": {\n      id: \"routes/entities/instruments/$slug/edit\",\n      parentId: \"routes/entities/instruments/$slug\",\n      path: \"edit\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route16\n    },\n  \"routes/entities/instruments/$slug/tags\": {\n      id: \"routes/entities/instruments/$slug/tags\",\n      parentId: \"routes/entities/instruments/$slug\",\n      path: \"tags\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route17\n    },\n  \"routes/entities/instruments/index\": {\n      id: \"routes/entities/instruments/index\",\n      parentId: \"root\",\n      path: \"entities/instruments\",\n      index: true,\n      caseSensitive: undefined,\n      module: route18\n    },\n  \"routes/account/submissions/index\": {\n      id: \"routes/account/submissions/index\",\n      parentId: \"root\",\n      path: \"account/submissions\",\n      index: true,\n      caseSensitive: undefined,\n      module: route19\n    },\n  \"routes/entities/audio-items/new\": {\n      id: \"routes/entities/audio-items/new\",\n      parentId: \"root\",\n      path: \"entities/audio-items/new\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route20\n    },\n  \"routes/entities/collections/new\": {\n      id: \"routes/entities/collections/new\",\n      parentId: \"root\",\n      path: \"entities/collections/new\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route21\n    },\n  \"routes/entities/instruments/new\": {\n      id: \"routes/entities/instruments/new\",\n      parentId: \"root\",\n      path: \"entities/instruments/new\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route22\n    },\n  \"routes/account/submissions/new\": {\n      id: \"routes/account/submissions/new\",\n      parentId: \"root\",\n      path: \"account/submissions/new\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route23\n    },\n  \"routes/admin/submissions/index\": {\n      id: \"routes/admin/submissions/index\",\n      parentId: \"root\",\n      path: \"admin/submissions\",\n      index: true,\n      caseSensitive: undefined,\n      module: route24\n    },\n  \"routes/admin/takedown-requests\": {\n      id: \"routes/admin/takedown-requests\",\n      parentId: \"root\",\n      path: \"admin/takedown-requests\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route25\n    },\n  \"routes/admin/submissions/[id]\": {\n      id: \"routes/admin/submissions/[id]\",\n      parentId: \"root\",\n      path: \"admin/submissions/id\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route26\n    },\n  \"routes/entities/people/$slug\": {\n      id: \"routes/entities/people/$slug\",\n      parentId: \"root\",\n      path: \"entities/people/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route27\n    },\n  \"routes/entities/people/$slug/about\": {\n      id: \"routes/entities/people/$slug/about\",\n      parentId: \"routes/entities/people/$slug\",\n      path: \"about\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route28\n    },\n  \"routes/entities/people/$slug/edit\": {\n      id: \"routes/entities/people/$slug/edit\",\n      parentId: \"routes/entities/people/$slug\",\n      path: \"edit\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route29\n    },\n  \"routes/entities/people/$slug/tags\": {\n      id: \"routes/entities/people/$slug/tags\",\n      parentId: \"routes/entities/people/$slug\",\n      path: \"tags\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route30\n    },\n  \"routes/entities/people/index\": {\n      id: \"routes/entities/people/index\",\n      parentId: \"root\",\n      path: \"entities/people\",\n      index: true,\n      caseSensitive: undefined,\n      module: route31\n    },\n  \"routes/entities/places/$slug\": {\n      id: \"routes/entities/places/$slug\",\n      parentId: \"root\",\n      path: \"entities/places/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route32\n    },\n  \"routes/entities/places/$slug/about\": {\n      id: \"routes/entities/places/$slug/about\",\n      parentId: \"routes/entities/places/$slug\",\n      path: \"about\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route33\n    },\n  \"routes/entities/places/$slug/edit\": {\n      id: \"routes/entities/places/$slug/edit\",\n      parentId: \"routes/entities/places/$slug\",\n      path: \"edit\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route34\n    },\n  \"routes/entities/places/$slug/tags\": {\n      id: \"routes/entities/places/$slug/tags\",\n      parentId: \"routes/entities/places/$slug\",\n      path: \"tags\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route35\n    },\n  \"routes/entities/places/index\": {\n      id: \"routes/entities/places/index\",\n      parentId: \"root\",\n      path: \"entities/places\",\n      index: true,\n      caseSensitive: undefined,\n      module: route36\n    },\n  \"routes/entities/tunes/$slug\": {\n      id: \"routes/entities/tunes/$slug\",\n      parentId: \"root\",\n      path: \"entities/tunes/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route37\n    },\n  \"routes/entities/tunes/$slug/about\": {\n      id: \"routes/entities/tunes/$slug/about\",\n      parentId: \"routes/entities/tunes/$slug\",\n      path: \"about\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route38\n    },\n  \"routes/entities/tunes/$slug/tags\": {\n      id: \"routes/entities/tunes/$slug/tags\",\n      parentId: \"routes/entities/tunes/$slug\",\n      path: \"tags\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route39\n    },\n  \"routes/entities/tunes/index\": {\n      id: \"routes/entities/tunes/index\",\n      parentId: \"root\",\n      path: \"entities/tunes\",\n      index: true,\n      caseSensitive: undefined,\n      module: route40\n    },\n  \"routes/choose-new-password\": {\n      id: \"routes/choose-new-password\",\n      parentId: \"root\",\n      path: \"choose-new-password\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route41\n    },\n  \"routes/entities/people/new\": {\n      id: \"routes/entities/people/new\",\n      parentId: \"root\",\n      path: \"entities/people/new\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route42\n    },\n  \"routes/entities/places/new\": {\n      id: \"routes/entities/places/new\",\n      parentId: \"root\",\n      path: \"entities/places/new\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route43\n    },\n  \"routes/account/verify\": {\n      id: \"routes/account/verify\",\n      parentId: \"root\",\n      path: \"account/verify\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route44\n    },\n  \"routes/reset-password\": {\n      id: \"routes/reset-password\",\n      parentId: \"root\",\n      path: \"reset-password\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route45\n    },\n  \"routes/account/index\": {\n      id: \"routes/account/index\",\n      parentId: \"root\",\n      path: \"account\",\n      index: true,\n      caseSensitive: undefined,\n      module: route46\n    },\n  \"routes/admin/index\": {\n      id: \"routes/admin/index\",\n      parentId: \"root\",\n      path: \"admin\",\n      index: true,\n      caseSensitive: undefined,\n      module: route47\n    },\n  \"routes/saved-items\": {\n      id: \"routes/saved-items\",\n      parentId: \"root\",\n      path: \"saved-items\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route48\n    },\n  \"routes/users/$id\": {\n      id: \"routes/users/$id\",\n      parentId: \"root\",\n      path: \"users/:id\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route49\n    },\n  \"routes/comments\": {\n      id: \"routes/comments\",\n      parentId: \"root\",\n      path: \"comments\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route50\n    },\n  \"routes/logout\": {\n      id: \"routes/logout\",\n      parentId: \"root\",\n      path: \"logout\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route51\n    },\n  \"routes/signup\": {\n      id: \"routes/signup\",\n      parentId: \"root\",\n      path: \"signup\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route52\n    },\n  \"routes/index\": {\n      id: \"routes/index\",\n      parentId: \"root\",\n      path: undefined,\n      index: true,\n      caseSensitive: undefined,\n      module: route53\n    },\n  \"routes/login\": {\n      id: \"routes/login\",\n      parentId: \"root\",\n      path: \"login\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route54\n    }\n  };"],
  "mappings": "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",
  "names": []
}
