{
  "version": 3,
  "sources": ["../node_modules/@remix-run/dev/compiler/shims/react.ts", "../node_modules/ts-invariant/lib/invariant.js", "../node_modules/@apollo/client/utilities/globals/maybe.js", "../node_modules/@apollo/client/utilities/globals/global.js", "../node_modules/@apollo/client/utilities/globals/DEV.js", "../node_modules/@apollo/client/utilities/globals/fix-graphql.js", "../node_modules/@apollo/client/utilities/globals/index.js", "../node_modules/zen-observable-ts/index.cjs", "../node_modules/@apollo/client/utilities/graphql/directives.js", "../node_modules/@apollo/client/utilities/graphql/fragments.js", "../node_modules/@apollo/client/utilities/common/objects.js", "../node_modules/@apollo/client/utilities/graphql/storeUtils.js", "../node_modules/@apollo/client/utilities/graphql/getFromAST.js", "../node_modules/@apollo/client/utilities/common/filterInPlace.js", "../node_modules/@apollo/client/utilities/graphql/transform.js", "../node_modules/@apollo/client/utilities/common/mergeDeep.js", "../node_modules/@apollo/client/utilities/policies/pagination.js", "../node_modules/@apollo/client/utilities/common/cloneDeep.js", "../node_modules/@apollo/client/utilities/common/maybeDeepFreeze.js", "../node_modules/@apollo/client/utilities/observables/iteration.js", "../node_modules/@apollo/client/utilities/observables/asyncMap.js", "../node_modules/@apollo/client/utilities/common/canUse.js", "../node_modules/@apollo/client/utilities/observables/subclassing.js", "../node_modules/@apollo/client/utilities/observables/Concast.js", "../node_modules/@apollo/client/utilities/common/arrays.js", "../node_modules/@apollo/client/utilities/common/errorHandling.js", "../node_modules/@apollo/client/utilities/common/compact.js", "../node_modules/@apollo/client/utilities/common/makeUniqueId.js", "../node_modules/@apollo/client/utilities/common/stringifyForDisplay.js", "../node_modules/@apollo/client/utilities/common/mergeOptions.js", "../node_modules/@apollo/client/link/utils/fromError.js", "../node_modules/@apollo/client/link/utils/toPromise.js", "../node_modules/@apollo/client/link/utils/fromPromise.js", "../node_modules/@apollo/client/link/utils/throwServerError.js", "../node_modules/@apollo/client/link/utils/validateOperation.js", "../node_modules/@apollo/client/link/utils/createOperation.js", "../node_modules/@apollo/client/link/utils/transformOperation.js", "../node_modules/@apollo/client/link/core/ApolloLink.js", "../node_modules/@apollo/client/link/core/empty.js", "../node_modules/@apollo/client/link/core/from.js", "../node_modules/@apollo/client/link/core/split.js", "../node_modules/@apollo/client/link/core/concat.js", "../node_modules/@apollo/client/link/core/execute.js", "../node_modules/@apollo/client/link/http/parseAndCheckHttpResponse.js", "../node_modules/@apollo/client/link/http/serializeFetchParameter.js", "../node_modules/@apollo/client/link/http/selectHttpOptionsAndBody.js", "../node_modules/@apollo/client/link/http/checkFetcher.js", "../node_modules/@apollo/client/link/http/createSignalIfSupported.js", "../node_modules/@apollo/client/link/http/selectURI.js", "../node_modules/@apollo/client/link/http/rewriteURIForGET.js", "../node_modules/@apollo/client/link/http/createHttpLink.js", "../node_modules/@apollo/client/link/http/HttpLink.js", "../node_modules/@apollo/client/cache/core/cache.js", "../node_modules/@apollo/client/cache/core/types/Cache.js", "../node_modules/@apollo/client/cache/core/types/common.js", "../node_modules/@apollo/client/cache/inmemory/helpers.js", "../node_modules/@apollo/client/cache/inmemory/entityStore.js", "../node_modules/@apollo/client/cache/inmemory/object-canon.js", "../node_modules/@apollo/client/cache/inmemory/readFromStore.js", "../node_modules/@apollo/client/cache/inmemory/reactiveVars.js", "../node_modules/@apollo/client/cache/inmemory/key-extractor.js", "../node_modules/@apollo/client/cache/inmemory/policies.js", "../node_modules/@apollo/client/cache/inmemory/writeToStore.js", "../node_modules/@apollo/client/cache/inmemory/inMemoryCache.js", "../node_modules/@apollo/client/errors/index.js", "../node_modules/@apollo/client/version.js", "../node_modules/@apollo/client/core/networkStatus.js", "../node_modules/@apollo/client/core/ObservableQuery.js", "../node_modules/@apollo/client/core/LocalState.js", "../node_modules/@apollo/client/core/QueryInfo.js", "../node_modules/@apollo/client/core/QueryManager.js", "../node_modules/@apollo/client/core/ApolloClient.js", "../node_modules/@apollo/client/core/index.js", "../node_modules/@apollo/client/react/context/ApolloContext.js", "../node_modules/@apollo/client/react/context/ApolloConsumer.js", "../node_modules/@apollo/client/react/context/ApolloProvider.js", "../node_modules/@apollo/client/react/parser/index.js", "../node_modules/@apollo/client/react/hooks/useApolloClient.js", "../node_modules/@apollo/client/react/hooks/useSyncExternalStore.js", "../node_modules/@apollo/client/react/hooks/useQuery.js", "../node_modules/@apollo/client/react/hooks/useLazyQuery.js", "../node_modules/@apollo/client/react/hooks/useMutation.js", "../node_modules/@apollo/client/react/hooks/useSubscription.js", "../node_modules/@apollo/client/react/hooks/useReactiveVar.js", "../node_modules/@apollo/client/react/react.cjs", "../node_modules/@apollo/client/main.cjs", "<stdin>", "server-entry-module:@remix-run/dev/server-build", "../app/entry.server.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/root.tsx", "../app/apolloClient.ts", "../app/components/PlayerContextProvider.tsx", "../app/components/Player.tsx", "../app/hooks/usePlayerContext.ts", "../app/types/index.ts", "../app/components/AudioPlayer.tsx", "../app/components/Header.tsx", "../app/hooks/useCurrentUser.ts", "../app/fragments/index.ts", "../app/services/User.ts", "../app/services/Entity.ts", "../app/components/Modal.tsx", "../app/components/SearchEntities.tsx", "../app/components/LoadingCircle.tsx", "../app/components/CreateNewEntities.tsx", "../app/hooks/useRequireLogin.ts", "../app/components/CreatePersonForm.tsx", "../app/components/CreateInstrumentForm.tsx", "../app/components/CreatePlaceForm.tsx", "../app/components/CreateCollectionForm.tsx", "../app/components/Footer.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/submissions/[id]/upload.tsx", "../app/components/Layout.tsx", "../app/components/RequireUser.tsx", "../app/components/Breadcrumb.tsx", "../app/components/LoadingBlock.tsx", "../app/components/FileUploader.tsx", "../app/services/DateTime.ts", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/verification-requests.tsx", "../app/components/RequireAdmin.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/[slug].tsx", "../app/components/AudioItem.tsx", "../app/components/AudioItemCard.tsx", "../app/components/Tags.tsx", "../app/services/Tag.ts", "../app/components/AddTagButton.tsx", "../app/components/CreateTagForm.tsx", "../app/hooks/useTags.ts", "../app/components/SelectRelationship.tsx", "../app/components/TimestampInput.tsx", "../app/components/EditTagsButton.tsx", "../app/components/Menu.tsx", "../app/components/SaveItemButton.tsx", "../app/hooks/useAudioItem.ts", "../app/hooks/useSavedItemsForUser.ts", "../app/components/ViewCommentsButton.tsx", "../app/components/CreateCommentForm.tsx", "../app/hooks/useComments.ts", "../app/components/TimeMarkers.tsx", "../app/components/RequestTakedownButton.tsx", "../app/components/CreateTakedownRequestForm.tsx", "../app/components/AudioItemCompact.tsx", "../app/components/AudioItemTextOnly.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/[slug]/about.tsx", "../app/routes/entities/audio-items/[slug].tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/[slug]/edit.tsx", "../app/components/EditAudioItemForm.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/[slug]/tags.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/random.tsx", "../app/hooks/useAudioItemRandom.ts", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/[slug].tsx", "../app/components/ViewEntityAndAudioItems.tsx", "../app/hooks/useAudioItemsTaggedWithEntity.ts", "../app/hooks/useFilters.ts", "../app/hooks/useQueryParams.ts", "../app/components/Filters.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/[slug]/about.tsx", "../app/routes/entities/collections/[slug].tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/[slug]/edit.tsx", "../app/components/EditCollectionForm.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/[slug]/tags.tsx", "../app/components/TagWithRelationshipToObject.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/[slug].tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/[slug]/about.tsx", "../app/routes/entities/instruments/[slug].tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/[slug]/edit.tsx", "../app/components/EditInstrumentForm.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/[slug]/tags.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/index.tsx", "../app/hooks/useCollections.ts", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/index.tsx", "../app/hooks/useInstruments.ts", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/submissions/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/new.tsx", "../app/hooks/useAudioItems.ts", "../app/components/CreateAudioItemForm.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/new.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/new.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/submissions/new.tsx", "../app/components/CreateSubmissionForm.tsx", "../app/components/Checkbox.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/submissions/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/takedown-requests.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/submissions/[id].tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/[slug].tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/[slug]/about.tsx", "../app/routes/entities/people/[slug].tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/[slug]/edit.tsx", "../app/components/EditPersonForm.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/[slug]/tags.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/[slug].tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/[slug]/about.tsx", "../app/routes/entities/places/[slug].tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/[slug]/edit.tsx", "../app/components/EditPlaceForm.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/[slug]/tags.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/index.tsx", "../app/hooks/usePeople.ts", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/index.tsx", "../app/hooks/usePlaces.ts", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/[slug].tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/[slug]/about.tsx", "../app/routes/entities/tunes/[slug].tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/[slug]/tags.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/index.tsx", "../app/hooks/useTunes.ts", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/new.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/new.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/verify.tsx", "../app/hooks/useVerificationRequestsForCurrentUser.ts", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/saved-items.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/auto-login.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/users/[id].tsx", "../app/hooks/useAudioItemsCreatedByUser.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/logout.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/signup.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/index.tsx", "../app/services/Comment.ts", "../app/services/LocalStorage.ts", "../app/components/ProjectIntro.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/login.tsx", "server-assets-manifest:@remix-run/dev/assets-manifest"],
  "sourcesContent": ["// eslint-disable-next-line import/no-extraneous-dependencies\nimport * as React from \"react\";\nexport { React };\n", "import { __extends } from \"tslib\";\nvar genericMessage = \"Invariant Violation\";\nvar _a = Object.setPrototypeOf, setPrototypeOf = _a === void 0 ? function (obj, proto) {\n    obj.__proto__ = proto;\n    return obj;\n} : _a;\nvar InvariantError = /** @class */ (function (_super) {\n    __extends(InvariantError, _super);\n    function InvariantError(message) {\n        if (message === void 0) { message = genericMessage; }\n        var _this = _super.call(this, typeof message === \"number\"\n            ? genericMessage + \": \" + message + \" (see https://github.com/apollographql/invariant-packages)\"\n            : message) || this;\n        _this.framesToPop = 1;\n        _this.name = genericMessage;\n        setPrototypeOf(_this, InvariantError.prototype);\n        return _this;\n    }\n    return InvariantError;\n}(Error));\nexport { InvariantError };\nexport function invariant(condition, message) {\n    if (!condition) {\n        throw new InvariantError(message);\n    }\n}\nvar verbosityLevels = [\"debug\", \"log\", \"warn\", \"error\", \"silent\"];\nvar verbosityLevel = verbosityLevels.indexOf(\"log\");\nfunction wrapConsoleMethod(name) {\n    return function () {\n        if (verbosityLevels.indexOf(name) >= verbosityLevel) {\n            // Default to console.log if this host environment happens not to provide\n            // all the console.* methods we need.\n            var method = console[name] || console.log;\n            return method.apply(console, arguments);\n        }\n    };\n}\n(function (invariant) {\n    invariant.debug = wrapConsoleMethod(\"debug\");\n    invariant.log = wrapConsoleMethod(\"log\");\n    invariant.warn = wrapConsoleMethod(\"warn\");\n    invariant.error = wrapConsoleMethod(\"error\");\n})(invariant || (invariant = {}));\nexport function setVerbosity(level) {\n    var old = verbosityLevels[verbosityLevel];\n    verbosityLevel = Math.max(0, verbosityLevels.indexOf(level));\n    return old;\n}\nexport default invariant;\n//# sourceMappingURL=invariant.js.map", "export function maybe(thunk) {\n    try {\n        return thunk();\n    }\n    catch (_a) { }\n}\n//# sourceMappingURL=maybe.js.map", "import { maybe } from \"./maybe\";\nexport default (maybe(function () { return globalThis; }) ||\n    maybe(function () { return window; }) ||\n    maybe(function () { return self; }) ||\n    maybe(function () { return global; }) ||\n    maybe(function () { return maybe.constructor(\"return this\")(); }));\n//# sourceMappingURL=global.js.map", "import global from \"./global\";\nimport { maybe } from \"./maybe\";\nvar __ = \"__\";\nvar GLOBAL_KEY = [__, __].join(\"DEV\");\nfunction getDEV() {\n    try {\n        return Boolean(__DEV__);\n    }\n    catch (_a) {\n        Object.defineProperty(global, GLOBAL_KEY, {\n            value: maybe(function () { return process.env.NODE_ENV; }) !== \"production\",\n            enumerable: false,\n            configurable: true,\n            writable: true,\n        });\n        return global[GLOBAL_KEY];\n    }\n}\nexport default getDEV();\n//# sourceMappingURL=DEV.js.map", "import { remove } from 'ts-invariant/process';\nimport { Source } from 'graphql';\nexport function removeTemporaryGlobals() {\n    return typeof Source === \"function\" ? remove() : remove();\n}\n//# sourceMappingURL=fix-graphql.js.map", "import { invariant, InvariantError } from \"ts-invariant\";\nimport DEV from \"./DEV\";\nexport { DEV };\nexport function checkDEV() {\n    __DEV__ ? invariant(\"boolean\" === typeof DEV, DEV) : invariant(\"boolean\" === typeof DEV, 36);\n}\nimport { removeTemporaryGlobals } from \"./fix-graphql\";\nremoveTemporaryGlobals();\nexport { maybe } from \"./maybe\";\nexport { default as global } from \"./global\";\nexport { invariant, InvariantError };\ncheckDEV();\n//# sourceMappingURL=index.js.map", "exports.Observable = require(\"zen-observable/index.js\");\n", "import { invariant } from '../globals';\nimport { visit, } from 'graphql';\nexport function shouldInclude(_a, variables) {\n    var directives = _a.directives;\n    if (!directives || !directives.length) {\n        return true;\n    }\n    return getInclusionDirectives(directives).every(function (_a) {\n        var directive = _a.directive, ifArgument = _a.ifArgument;\n        var evaledValue = false;\n        if (ifArgument.value.kind === 'Variable') {\n            evaledValue = variables && variables[ifArgument.value.name.value];\n            __DEV__ ? invariant(evaledValue !== void 0, \"Invalid variable referenced in @\".concat(directive.name.value, \" directive.\")) : invariant(evaledValue !== void 0, 37);\n        }\n        else {\n            evaledValue = ifArgument.value.value;\n        }\n        return directive.name.value === 'skip' ? !evaledValue : evaledValue;\n    });\n}\nexport function getDirectiveNames(root) {\n    var names = [];\n    visit(root, {\n        Directive: function (node) {\n            names.push(node.name.value);\n        },\n    });\n    return names;\n}\nexport function hasDirectives(names, root) {\n    return getDirectiveNames(root).some(function (name) { return names.indexOf(name) > -1; });\n}\nexport function hasClientExports(document) {\n    return (document &&\n        hasDirectives(['client'], document) &&\n        hasDirectives(['export'], document));\n}\nfunction isInclusionDirective(_a) {\n    var value = _a.name.value;\n    return value === 'skip' || value === 'include';\n}\nexport function getInclusionDirectives(directives) {\n    var result = [];\n    if (directives && directives.length) {\n        directives.forEach(function (directive) {\n            if (!isInclusionDirective(directive))\n                return;\n            var directiveArguments = directive.arguments;\n            var directiveName = directive.name.value;\n            __DEV__ ? invariant(directiveArguments && directiveArguments.length === 1, \"Incorrect number of arguments for the @\".concat(directiveName, \" directive.\")) : invariant(directiveArguments && directiveArguments.length === 1, 38);\n            var ifArgument = directiveArguments[0];\n            __DEV__ ? invariant(ifArgument.name && ifArgument.name.value === 'if', \"Invalid argument for the @\".concat(directiveName, \" directive.\")) : invariant(ifArgument.name && ifArgument.name.value === 'if', 39);\n            var ifValue = ifArgument.value;\n            __DEV__ ? invariant(ifValue &&\n                (ifValue.kind === 'Variable' || ifValue.kind === 'BooleanValue'), \"Argument for the @\".concat(directiveName, \" directive must be a variable or a boolean value.\")) : invariant(ifValue &&\n                (ifValue.kind === 'Variable' || ifValue.kind === 'BooleanValue'), 40);\n            result.push({ directive: directive, ifArgument: ifArgument });\n        });\n    }\n    return result;\n}\n//# sourceMappingURL=directives.js.map", "import { __assign, __spreadArray } from \"tslib\";\nimport { invariant, InvariantError } from '../globals';\nexport function getFragmentQueryDocument(document, fragmentName) {\n    var actualFragmentName = fragmentName;\n    var fragments = [];\n    document.definitions.forEach(function (definition) {\n        if (definition.kind === 'OperationDefinition') {\n            throw __DEV__ ? new InvariantError(\"Found a \".concat(definition.operation, \" operation\").concat(definition.name ? \" named '\".concat(definition.name.value, \"'\") : '', \". \") +\n                'No operations are allowed when using a fragment as a query. Only fragments are allowed.') : new InvariantError(41);\n        }\n        if (definition.kind === 'FragmentDefinition') {\n            fragments.push(definition);\n        }\n    });\n    if (typeof actualFragmentName === 'undefined') {\n        __DEV__ ? invariant(fragments.length === 1, \"Found \".concat(fragments.length, \" fragments. `fragmentName` must be provided when there is not exactly 1 fragment.\")) : invariant(fragments.length === 1, 42);\n        actualFragmentName = fragments[0].name.value;\n    }\n    var query = __assign(__assign({}, document), { definitions: __spreadArray([\n            {\n                kind: 'OperationDefinition',\n                operation: 'query',\n                selectionSet: {\n                    kind: 'SelectionSet',\n                    selections: [\n                        {\n                            kind: 'FragmentSpread',\n                            name: {\n                                kind: 'Name',\n                                value: actualFragmentName,\n                            },\n                        },\n                    ],\n                },\n            }\n        ], document.definitions, true) });\n    return query;\n}\nexport function createFragmentMap(fragments) {\n    if (fragments === void 0) { fragments = []; }\n    var symTable = {};\n    fragments.forEach(function (fragment) {\n        symTable[fragment.name.value] = fragment;\n    });\n    return symTable;\n}\nexport function getFragmentFromSelection(selection, fragmentMap) {\n    switch (selection.kind) {\n        case 'InlineFragment':\n            return selection;\n        case 'FragmentSpread': {\n            var fragment = fragmentMap && fragmentMap[selection.name.value];\n            __DEV__ ? invariant(fragment, \"No fragment named \".concat(selection.name.value, \".\")) : invariant(fragment, 43);\n            return fragment;\n        }\n        default:\n            return null;\n    }\n}\n//# sourceMappingURL=fragments.js.map", "export function isNonNullObject(obj) {\n    return obj !== null && typeof obj === 'object';\n}\n//# sourceMappingURL=objects.js.map", "import { InvariantError } from '../globals';\nimport { isNonNullObject } from '../common/objects';\nimport { getFragmentFromSelection } from './fragments';\nexport function makeReference(id) {\n    return { __ref: String(id) };\n}\nexport function isReference(obj) {\n    return Boolean(obj && typeof obj === 'object' && typeof obj.__ref === 'string');\n}\nexport function isDocumentNode(value) {\n    return (isNonNullObject(value) &&\n        value.kind === \"Document\" &&\n        Array.isArray(value.definitions));\n}\nfunction isStringValue(value) {\n    return value.kind === 'StringValue';\n}\nfunction isBooleanValue(value) {\n    return value.kind === 'BooleanValue';\n}\nfunction isIntValue(value) {\n    return value.kind === 'IntValue';\n}\nfunction isFloatValue(value) {\n    return value.kind === 'FloatValue';\n}\nfunction isVariable(value) {\n    return value.kind === 'Variable';\n}\nfunction isObjectValue(value) {\n    return value.kind === 'ObjectValue';\n}\nfunction isListValue(value) {\n    return value.kind === 'ListValue';\n}\nfunction isEnumValue(value) {\n    return value.kind === 'EnumValue';\n}\nfunction isNullValue(value) {\n    return value.kind === 'NullValue';\n}\nexport function valueToObjectRepresentation(argObj, name, value, variables) {\n    if (isIntValue(value) || isFloatValue(value)) {\n        argObj[name.value] = Number(value.value);\n    }\n    else if (isBooleanValue(value) || isStringValue(value)) {\n        argObj[name.value] = value.value;\n    }\n    else if (isObjectValue(value)) {\n        var nestedArgObj_1 = {};\n        value.fields.map(function (obj) {\n            return valueToObjectRepresentation(nestedArgObj_1, obj.name, obj.value, variables);\n        });\n        argObj[name.value] = nestedArgObj_1;\n    }\n    else if (isVariable(value)) {\n        var variableValue = (variables || {})[value.name.value];\n        argObj[name.value] = variableValue;\n    }\n    else if (isListValue(value)) {\n        argObj[name.value] = value.values.map(function (listValue) {\n            var nestedArgArrayObj = {};\n            valueToObjectRepresentation(nestedArgArrayObj, name, listValue, variables);\n            return nestedArgArrayObj[name.value];\n        });\n    }\n    else if (isEnumValue(value)) {\n        argObj[name.value] = value.value;\n    }\n    else if (isNullValue(value)) {\n        argObj[name.value] = null;\n    }\n    else {\n        throw __DEV__ ? new InvariantError(\"The inline argument \\\"\".concat(name.value, \"\\\" of kind \\\"\").concat(value.kind, \"\\\"\") +\n            'is not supported. Use variables instead of inline arguments to ' +\n            'overcome this limitation.') : new InvariantError(52);\n    }\n}\nexport function storeKeyNameFromField(field, variables) {\n    var directivesObj = null;\n    if (field.directives) {\n        directivesObj = {};\n        field.directives.forEach(function (directive) {\n            directivesObj[directive.name.value] = {};\n            if (directive.arguments) {\n                directive.arguments.forEach(function (_a) {\n                    var name = _a.name, value = _a.value;\n                    return valueToObjectRepresentation(directivesObj[directive.name.value], name, value, variables);\n                });\n            }\n        });\n    }\n    var argObj = null;\n    if (field.arguments && field.arguments.length) {\n        argObj = {};\n        field.arguments.forEach(function (_a) {\n            var name = _a.name, value = _a.value;\n            return valueToObjectRepresentation(argObj, name, value, variables);\n        });\n    }\n    return getStoreKeyName(field.name.value, argObj, directivesObj);\n}\nvar KNOWN_DIRECTIVES = [\n    'connection',\n    'include',\n    'skip',\n    'client',\n    'rest',\n    'export',\n];\nexport var getStoreKeyName = Object.assign(function (fieldName, args, directives) {\n    if (args &&\n        directives &&\n        directives['connection'] &&\n        directives['connection']['key']) {\n        if (directives['connection']['filter'] &&\n            directives['connection']['filter'].length > 0) {\n            var filterKeys = directives['connection']['filter']\n                ? directives['connection']['filter']\n                : [];\n            filterKeys.sort();\n            var filteredArgs_1 = {};\n            filterKeys.forEach(function (key) {\n                filteredArgs_1[key] = args[key];\n            });\n            return \"\".concat(directives['connection']['key'], \"(\").concat(stringify(filteredArgs_1), \")\");\n        }\n        else {\n            return directives['connection']['key'];\n        }\n    }\n    var completeFieldName = fieldName;\n    if (args) {\n        var stringifiedArgs = stringify(args);\n        completeFieldName += \"(\".concat(stringifiedArgs, \")\");\n    }\n    if (directives) {\n        Object.keys(directives).forEach(function (key) {\n            if (KNOWN_DIRECTIVES.indexOf(key) !== -1)\n                return;\n            if (directives[key] && Object.keys(directives[key]).length) {\n                completeFieldName += \"@\".concat(key, \"(\").concat(stringify(directives[key]), \")\");\n            }\n            else {\n                completeFieldName += \"@\".concat(key);\n            }\n        });\n    }\n    return completeFieldName;\n}, {\n    setStringify: function (s) {\n        var previous = stringify;\n        stringify = s;\n        return previous;\n    },\n});\nvar stringify = function defaultStringify(value) {\n    return JSON.stringify(value, stringifyReplacer);\n};\nfunction stringifyReplacer(_key, value) {\n    if (isNonNullObject(value) && !Array.isArray(value)) {\n        value = Object.keys(value).sort().reduce(function (copy, key) {\n            copy[key] = value[key];\n            return copy;\n        }, {});\n    }\n    return value;\n}\nexport function argumentsObjectFromField(field, variables) {\n    if (field.arguments && field.arguments.length) {\n        var argObj_1 = {};\n        field.arguments.forEach(function (_a) {\n            var name = _a.name, value = _a.value;\n            return valueToObjectRepresentation(argObj_1, name, value, variables);\n        });\n        return argObj_1;\n    }\n    return null;\n}\nexport function resultKeyNameFromField(field) {\n    return field.alias ? field.alias.value : field.name.value;\n}\nexport function getTypenameFromResult(result, selectionSet, fragmentMap) {\n    if (typeof result.__typename === 'string') {\n        return result.__typename;\n    }\n    for (var _i = 0, _a = selectionSet.selections; _i < _a.length; _i++) {\n        var selection = _a[_i];\n        if (isField(selection)) {\n            if (selection.name.value === '__typename') {\n                return result[resultKeyNameFromField(selection)];\n            }\n        }\n        else {\n            var typename = getTypenameFromResult(result, getFragmentFromSelection(selection, fragmentMap).selectionSet, fragmentMap);\n            if (typeof typename === 'string') {\n                return typename;\n            }\n        }\n    }\n}\nexport function isField(selection) {\n    return selection.kind === 'Field';\n}\nexport function isInlineFragment(selection) {\n    return selection.kind === 'InlineFragment';\n}\n//# sourceMappingURL=storeUtils.js.map", "import { invariant, InvariantError } from '../globals';\nimport { valueToObjectRepresentation } from './storeUtils';\nexport function checkDocument(doc) {\n    __DEV__ ? invariant(doc && doc.kind === 'Document', \"Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a \\\"gql\\\" tag? http://docs.apollostack.com/apollo-client/core.html#gql\") : invariant(doc && doc.kind === 'Document', 44);\n    var operations = doc.definitions\n        .filter(function (d) { return d.kind !== 'FragmentDefinition'; })\n        .map(function (definition) {\n        if (definition.kind !== 'OperationDefinition') {\n            throw __DEV__ ? new InvariantError(\"Schema type definitions not allowed in queries. Found: \\\"\".concat(definition.kind, \"\\\"\")) : new InvariantError(45);\n        }\n        return definition;\n    });\n    __DEV__ ? invariant(operations.length <= 1, \"Ambiguous GraphQL document: contains \".concat(operations.length, \" operations\")) : invariant(operations.length <= 1, 46);\n    return doc;\n}\nexport function getOperationDefinition(doc) {\n    checkDocument(doc);\n    return doc.definitions.filter(function (definition) { return definition.kind === 'OperationDefinition'; })[0];\n}\nexport function getOperationName(doc) {\n    return (doc.definitions\n        .filter(function (definition) {\n        return definition.kind === 'OperationDefinition' && definition.name;\n    })\n        .map(function (x) { return x.name.value; })[0] || null);\n}\nexport function getFragmentDefinitions(doc) {\n    return doc.definitions.filter(function (definition) { return definition.kind === 'FragmentDefinition'; });\n}\nexport function getQueryDefinition(doc) {\n    var queryDef = getOperationDefinition(doc);\n    __DEV__ ? invariant(queryDef && queryDef.operation === 'query', 'Must contain a query definition.') : invariant(queryDef && queryDef.operation === 'query', 47);\n    return queryDef;\n}\nexport function getFragmentDefinition(doc) {\n    __DEV__ ? invariant(doc.kind === 'Document', \"Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a \\\"gql\\\" tag? http://docs.apollostack.com/apollo-client/core.html#gql\") : invariant(doc.kind === 'Document', 48);\n    __DEV__ ? invariant(doc.definitions.length <= 1, 'Fragment must have exactly one definition.') : invariant(doc.definitions.length <= 1, 49);\n    var fragmentDef = doc.definitions[0];\n    __DEV__ ? invariant(fragmentDef.kind === 'FragmentDefinition', 'Must be a fragment definition.') : invariant(fragmentDef.kind === 'FragmentDefinition', 50);\n    return fragmentDef;\n}\nexport function getMainDefinition(queryDoc) {\n    checkDocument(queryDoc);\n    var fragmentDefinition;\n    for (var _i = 0, _a = queryDoc.definitions; _i < _a.length; _i++) {\n        var definition = _a[_i];\n        if (definition.kind === 'OperationDefinition') {\n            var operation = definition.operation;\n            if (operation === 'query' ||\n                operation === 'mutation' ||\n                operation === 'subscription') {\n                return definition;\n            }\n        }\n        if (definition.kind === 'FragmentDefinition' && !fragmentDefinition) {\n            fragmentDefinition = definition;\n        }\n    }\n    if (fragmentDefinition) {\n        return fragmentDefinition;\n    }\n    throw __DEV__ ? new InvariantError('Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment.') : new InvariantError(51);\n}\nexport function getDefaultValues(definition) {\n    var defaultValues = Object.create(null);\n    var defs = definition && definition.variableDefinitions;\n    if (defs && defs.length) {\n        defs.forEach(function (def) {\n            if (def.defaultValue) {\n                valueToObjectRepresentation(defaultValues, def.variable.name, def.defaultValue);\n            }\n        });\n    }\n    return defaultValues;\n}\n//# sourceMappingURL=getFromAST.js.map", "export function filterInPlace(array, test, context) {\n    var target = 0;\n    array.forEach(function (elem, i) {\n        if (test.call(this, elem, i, array)) {\n            array[target++] = elem;\n        }\n    }, context);\n    array.length = target;\n    return array;\n}\n//# sourceMappingURL=filterInPlace.js.map", "import { __assign, __spreadArray } from \"tslib\";\nimport { invariant } from '../globals';\nimport { visit, } from 'graphql';\nimport { checkDocument, getOperationDefinition, getFragmentDefinition, getFragmentDefinitions, getMainDefinition, } from './getFromAST';\nimport { filterInPlace } from '../common/filterInPlace';\nimport { isField, isInlineFragment } from './storeUtils';\nimport { createFragmentMap, } from './fragments';\nvar TYPENAME_FIELD = {\n    kind: 'Field',\n    name: {\n        kind: 'Name',\n        value: '__typename',\n    },\n};\nfunction isEmpty(op, fragments) {\n    return op.selectionSet.selections.every(function (selection) {\n        return selection.kind === 'FragmentSpread' &&\n            isEmpty(fragments[selection.name.value], fragments);\n    });\n}\nfunction nullIfDocIsEmpty(doc) {\n    return isEmpty(getOperationDefinition(doc) || getFragmentDefinition(doc), createFragmentMap(getFragmentDefinitions(doc)))\n        ? null\n        : doc;\n}\nfunction getDirectiveMatcher(directives) {\n    return function directiveMatcher(directive) {\n        return directives.some(function (dir) {\n            return (dir.name && dir.name === directive.name.value) ||\n                (dir.test && dir.test(directive));\n        });\n    };\n}\nexport function removeDirectivesFromDocument(directives, doc) {\n    var variablesInUse = Object.create(null);\n    var variablesToRemove = [];\n    var fragmentSpreadsInUse = Object.create(null);\n    var fragmentSpreadsToRemove = [];\n    var modifiedDoc = nullIfDocIsEmpty(visit(doc, {\n        Variable: {\n            enter: function (node, _key, parent) {\n                if (parent.kind !== 'VariableDefinition') {\n                    variablesInUse[node.name.value] = true;\n                }\n            },\n        },\n        Field: {\n            enter: function (node) {\n                if (directives && node.directives) {\n                    var shouldRemoveField = directives.some(function (directive) { return directive.remove; });\n                    if (shouldRemoveField &&\n                        node.directives &&\n                        node.directives.some(getDirectiveMatcher(directives))) {\n                        if (node.arguments) {\n                            node.arguments.forEach(function (arg) {\n                                if (arg.value.kind === 'Variable') {\n                                    variablesToRemove.push({\n                                        name: arg.value.name.value,\n                                    });\n                                }\n                            });\n                        }\n                        if (node.selectionSet) {\n                            getAllFragmentSpreadsFromSelectionSet(node.selectionSet).forEach(function (frag) {\n                                fragmentSpreadsToRemove.push({\n                                    name: frag.name.value,\n                                });\n                            });\n                        }\n                        return null;\n                    }\n                }\n            },\n        },\n        FragmentSpread: {\n            enter: function (node) {\n                fragmentSpreadsInUse[node.name.value] = true;\n            },\n        },\n        Directive: {\n            enter: function (node) {\n                if (getDirectiveMatcher(directives)(node)) {\n                    return null;\n                }\n            },\n        },\n    }));\n    if (modifiedDoc &&\n        filterInPlace(variablesToRemove, function (v) { return !!v.name && !variablesInUse[v.name]; }).length) {\n        modifiedDoc = removeArgumentsFromDocument(variablesToRemove, modifiedDoc);\n    }\n    if (modifiedDoc &&\n        filterInPlace(fragmentSpreadsToRemove, function (fs) { return !!fs.name && !fragmentSpreadsInUse[fs.name]; })\n            .length) {\n        modifiedDoc = removeFragmentSpreadFromDocument(fragmentSpreadsToRemove, modifiedDoc);\n    }\n    return modifiedDoc;\n}\nexport var addTypenameToDocument = Object.assign(function (doc) {\n    return visit(doc, {\n        SelectionSet: {\n            enter: function (node, _key, parent) {\n                if (parent &&\n                    parent.kind === 'OperationDefinition') {\n                    return;\n                }\n                var selections = node.selections;\n                if (!selections) {\n                    return;\n                }\n                var skip = selections.some(function (selection) {\n                    return (isField(selection) &&\n                        (selection.name.value === '__typename' ||\n                            selection.name.value.lastIndexOf('__', 0) === 0));\n                });\n                if (skip) {\n                    return;\n                }\n                var field = parent;\n                if (isField(field) &&\n                    field.directives &&\n                    field.directives.some(function (d) { return d.name.value === 'export'; })) {\n                    return;\n                }\n                return __assign(__assign({}, node), { selections: __spreadArray(__spreadArray([], selections, true), [TYPENAME_FIELD], false) });\n            },\n        },\n    });\n}, {\n    added: function (field) {\n        return field === TYPENAME_FIELD;\n    },\n});\nvar connectionRemoveConfig = {\n    test: function (directive) {\n        var willRemove = directive.name.value === 'connection';\n        if (willRemove) {\n            if (!directive.arguments ||\n                !directive.arguments.some(function (arg) { return arg.name.value === 'key'; })) {\n                __DEV__ && invariant.warn('Removing an @connection directive even though it does not have a key. ' +\n                    'You may want to use the key parameter to specify a store key.');\n            }\n        }\n        return willRemove;\n    },\n};\nexport function removeConnectionDirectiveFromDocument(doc) {\n    return removeDirectivesFromDocument([connectionRemoveConfig], checkDocument(doc));\n}\nfunction hasDirectivesInSelectionSet(directives, selectionSet, nestedCheck) {\n    if (nestedCheck === void 0) { nestedCheck = true; }\n    return (!!selectionSet &&\n        selectionSet.selections &&\n        selectionSet.selections.some(function (selection) {\n            return hasDirectivesInSelection(directives, selection, nestedCheck);\n        }));\n}\nfunction hasDirectivesInSelection(directives, selection, nestedCheck) {\n    if (nestedCheck === void 0) { nestedCheck = true; }\n    if (!isField(selection)) {\n        return true;\n    }\n    if (!selection.directives) {\n        return false;\n    }\n    return (selection.directives.some(getDirectiveMatcher(directives)) ||\n        (nestedCheck &&\n            hasDirectivesInSelectionSet(directives, selection.selectionSet, nestedCheck)));\n}\nfunction getArgumentMatcher(config) {\n    return function argumentMatcher(argument) {\n        return config.some(function (aConfig) {\n            return argument.value &&\n                argument.value.kind === 'Variable' &&\n                argument.value.name &&\n                (aConfig.name === argument.value.name.value ||\n                    (aConfig.test && aConfig.test(argument)));\n        });\n    };\n}\nexport function removeArgumentsFromDocument(config, doc) {\n    var argMatcher = getArgumentMatcher(config);\n    return nullIfDocIsEmpty(visit(doc, {\n        OperationDefinition: {\n            enter: function (node) {\n                return __assign(__assign({}, node), { variableDefinitions: node.variableDefinitions ? node.variableDefinitions.filter(function (varDef) {\n                        return !config.some(function (arg) { return arg.name === varDef.variable.name.value; });\n                    }) : [] });\n            },\n        },\n        Field: {\n            enter: function (node) {\n                var shouldRemoveField = config.some(function (argConfig) { return argConfig.remove; });\n                if (shouldRemoveField) {\n                    var argMatchCount_1 = 0;\n                    if (node.arguments) {\n                        node.arguments.forEach(function (arg) {\n                            if (argMatcher(arg)) {\n                                argMatchCount_1 += 1;\n                            }\n                        });\n                    }\n                    if (argMatchCount_1 === 1) {\n                        return null;\n                    }\n                }\n            },\n        },\n        Argument: {\n            enter: function (node) {\n                if (argMatcher(node)) {\n                    return null;\n                }\n            },\n        },\n    }));\n}\nexport function removeFragmentSpreadFromDocument(config, doc) {\n    function enter(node) {\n        if (config.some(function (def) { return def.name === node.name.value; })) {\n            return null;\n        }\n    }\n    return nullIfDocIsEmpty(visit(doc, {\n        FragmentSpread: { enter: enter },\n        FragmentDefinition: { enter: enter },\n    }));\n}\nfunction getAllFragmentSpreadsFromSelectionSet(selectionSet) {\n    var allFragments = [];\n    selectionSet.selections.forEach(function (selection) {\n        if ((isField(selection) || isInlineFragment(selection)) &&\n            selection.selectionSet) {\n            getAllFragmentSpreadsFromSelectionSet(selection.selectionSet).forEach(function (frag) { return allFragments.push(frag); });\n        }\n        else if (selection.kind === 'FragmentSpread') {\n            allFragments.push(selection);\n        }\n    });\n    return allFragments;\n}\nexport function buildQueryFromSelectionSet(document) {\n    var definition = getMainDefinition(document);\n    var definitionOperation = definition.operation;\n    if (definitionOperation === 'query') {\n        return document;\n    }\n    var modifiedDoc = visit(document, {\n        OperationDefinition: {\n            enter: function (node) {\n                return __assign(__assign({}, node), { operation: 'query' });\n            },\n        },\n    });\n    return modifiedDoc;\n}\nexport function removeClientSetsFromDocument(document) {\n    checkDocument(document);\n    var modifiedDoc = removeDirectivesFromDocument([\n        {\n            test: function (directive) { return directive.name.value === 'client'; },\n            remove: true,\n        },\n    ], document);\n    if (modifiedDoc) {\n        modifiedDoc = visit(modifiedDoc, {\n            FragmentDefinition: {\n                enter: function (node) {\n                    if (node.selectionSet) {\n                        var isTypenameOnly = node.selectionSet.selections.every(function (selection) {\n                            return isField(selection) && selection.name.value === '__typename';\n                        });\n                        if (isTypenameOnly) {\n                            return null;\n                        }\n                    }\n                },\n            },\n        });\n    }\n    return modifiedDoc;\n}\n//# sourceMappingURL=transform.js.map", "import { __assign, __spreadArray } from \"tslib\";\nimport { isNonNullObject } from \"./objects\";\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nexport function mergeDeep() {\n    var sources = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        sources[_i] = arguments[_i];\n    }\n    return mergeDeepArray(sources);\n}\nexport function mergeDeepArray(sources) {\n    var target = sources[0] || {};\n    var count = sources.length;\n    if (count > 1) {\n        var merger = new DeepMerger();\n        for (var i = 1; i < count; ++i) {\n            target = merger.merge(target, sources[i]);\n        }\n    }\n    return target;\n}\nvar defaultReconciler = function (target, source, property) {\n    return this.merge(target[property], source[property]);\n};\nvar DeepMerger = (function () {\n    function DeepMerger(reconciler) {\n        if (reconciler === void 0) { reconciler = defaultReconciler; }\n        this.reconciler = reconciler;\n        this.isObject = isNonNullObject;\n        this.pastCopies = new Set();\n    }\n    DeepMerger.prototype.merge = function (target, source) {\n        var _this = this;\n        var context = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            context[_i - 2] = arguments[_i];\n        }\n        if (isNonNullObject(source) && isNonNullObject(target)) {\n            Object.keys(source).forEach(function (sourceKey) {\n                if (hasOwnProperty.call(target, sourceKey)) {\n                    var targetValue = target[sourceKey];\n                    if (source[sourceKey] !== targetValue) {\n                        var result = _this.reconciler.apply(_this, __spreadArray([target, source, sourceKey], context, false));\n                        if (result !== targetValue) {\n                            target = _this.shallowCopyForMerge(target);\n                            target[sourceKey] = result;\n                        }\n                    }\n                }\n                else {\n                    target = _this.shallowCopyForMerge(target);\n                    target[sourceKey] = source[sourceKey];\n                }\n            });\n            return target;\n        }\n        return source;\n    };\n    DeepMerger.prototype.shallowCopyForMerge = function (value) {\n        if (isNonNullObject(value)) {\n            if (!this.pastCopies.has(value)) {\n                if (Array.isArray(value)) {\n                    value = value.slice(0);\n                }\n                else {\n                    value = __assign({ __proto__: Object.getPrototypeOf(value) }, value);\n                }\n                this.pastCopies.add(value);\n            }\n        }\n        return value;\n    };\n    return DeepMerger;\n}());\nexport { DeepMerger };\n//# sourceMappingURL=mergeDeep.js.map", "import { __assign, __rest as __rest_1, __spreadArray } from \"tslib\";\nimport { __rest } from \"tslib\";\nimport { mergeDeep } from '../common/mergeDeep';\nexport function concatPagination(keyArgs) {\n    if (keyArgs === void 0) { keyArgs = false; }\n    return {\n        keyArgs: keyArgs,\n        merge: function (existing, incoming) {\n            return existing ? __spreadArray(__spreadArray([], existing, true), incoming, true) : incoming;\n        },\n    };\n}\nexport function offsetLimitPagination(keyArgs) {\n    if (keyArgs === void 0) { keyArgs = false; }\n    return {\n        keyArgs: keyArgs,\n        merge: function (existing, incoming, _a) {\n            var args = _a.args;\n            var merged = existing ? existing.slice(0) : [];\n            if (incoming) {\n                if (args) {\n                    var _b = args.offset, offset = _b === void 0 ? 0 : _b;\n                    for (var i = 0; i < incoming.length; ++i) {\n                        merged[offset + i] = incoming[i];\n                    }\n                }\n                else {\n                    merged.push.apply(merged, incoming);\n                }\n            }\n            return merged;\n        },\n    };\n}\nexport function relayStylePagination(keyArgs) {\n    if (keyArgs === void 0) { keyArgs = false; }\n    return {\n        keyArgs: keyArgs,\n        read: function (existing, _a) {\n            var canRead = _a.canRead, readField = _a.readField;\n            if (!existing)\n                return existing;\n            var edges = [];\n            var firstEdgeCursor = \"\";\n            var lastEdgeCursor = \"\";\n            existing.edges.forEach(function (edge) {\n                if (canRead(readField(\"node\", edge))) {\n                    edges.push(edge);\n                    if (edge.cursor) {\n                        firstEdgeCursor = firstEdgeCursor || edge.cursor || \"\";\n                        lastEdgeCursor = edge.cursor || lastEdgeCursor;\n                    }\n                }\n            });\n            var _b = existing.pageInfo || {}, startCursor = _b.startCursor, endCursor = _b.endCursor;\n            return __assign(__assign({}, getExtras(existing)), { edges: edges, pageInfo: __assign(__assign({}, existing.pageInfo), { startCursor: startCursor || firstEdgeCursor, endCursor: endCursor || lastEdgeCursor }) });\n        },\n        merge: function (existing, incoming, _a) {\n            var args = _a.args, isReference = _a.isReference, readField = _a.readField;\n            if (!existing) {\n                existing = makeEmptyData();\n            }\n            if (!incoming) {\n                return existing;\n            }\n            var incomingEdges = incoming.edges ? incoming.edges.map(function (edge) {\n                if (isReference(edge = __assign({}, edge))) {\n                    edge.cursor = readField(\"cursor\", edge);\n                }\n                return edge;\n            }) : [];\n            if (incoming.pageInfo) {\n                var pageInfo_1 = incoming.pageInfo;\n                var startCursor = pageInfo_1.startCursor, endCursor = pageInfo_1.endCursor;\n                var firstEdge = incomingEdges[0];\n                var lastEdge = incomingEdges[incomingEdges.length - 1];\n                if (firstEdge && startCursor) {\n                    firstEdge.cursor = startCursor;\n                }\n                if (lastEdge && endCursor) {\n                    lastEdge.cursor = endCursor;\n                }\n                var firstCursor = firstEdge && firstEdge.cursor;\n                if (firstCursor && !startCursor) {\n                    incoming = mergeDeep(incoming, {\n                        pageInfo: {\n                            startCursor: firstCursor,\n                        },\n                    });\n                }\n                var lastCursor = lastEdge && lastEdge.cursor;\n                if (lastCursor && !endCursor) {\n                    incoming = mergeDeep(incoming, {\n                        pageInfo: {\n                            endCursor: lastCursor,\n                        },\n                    });\n                }\n            }\n            var prefix = existing.edges;\n            var suffix = [];\n            if (args && args.after) {\n                var index = prefix.findIndex(function (edge) { return edge.cursor === args.after; });\n                if (index >= 0) {\n                    prefix = prefix.slice(0, index + 1);\n                }\n            }\n            else if (args && args.before) {\n                var index = prefix.findIndex(function (edge) { return edge.cursor === args.before; });\n                suffix = index < 0 ? prefix : prefix.slice(index);\n                prefix = [];\n            }\n            else if (incoming.edges) {\n                prefix = [];\n            }\n            var edges = __spreadArray(__spreadArray(__spreadArray([], prefix, true), incomingEdges, true), suffix, true);\n            var pageInfo = __assign(__assign({}, incoming.pageInfo), existing.pageInfo);\n            if (incoming.pageInfo) {\n                var _b = incoming.pageInfo, hasPreviousPage = _b.hasPreviousPage, hasNextPage = _b.hasNextPage, startCursor = _b.startCursor, endCursor = _b.endCursor, extras = __rest_1(_b, [\"hasPreviousPage\", \"hasNextPage\", \"startCursor\", \"endCursor\"]);\n                Object.assign(pageInfo, extras);\n                if (!prefix.length) {\n                    if (void 0 !== hasPreviousPage)\n                        pageInfo.hasPreviousPage = hasPreviousPage;\n                    if (void 0 !== startCursor)\n                        pageInfo.startCursor = startCursor;\n                }\n                if (!suffix.length) {\n                    if (void 0 !== hasNextPage)\n                        pageInfo.hasNextPage = hasNextPage;\n                    if (void 0 !== endCursor)\n                        pageInfo.endCursor = endCursor;\n                }\n            }\n            return __assign(__assign(__assign({}, getExtras(existing)), getExtras(incoming)), { edges: edges, pageInfo: pageInfo });\n        },\n    };\n}\nvar getExtras = function (obj) { return __rest(obj, notExtras); };\nvar notExtras = [\"edges\", \"pageInfo\"];\nfunction makeEmptyData() {\n    return {\n        edges: [],\n        pageInfo: {\n            hasPreviousPage: false,\n            hasNextPage: true,\n            startCursor: \"\",\n            endCursor: \"\",\n        },\n    };\n}\n//# sourceMappingURL=pagination.js.map", "var toString = Object.prototype.toString;\nexport function cloneDeep(value) {\n    return cloneDeepHelper(value);\n}\nfunction cloneDeepHelper(val, seen) {\n    switch (toString.call(val)) {\n        case \"[object Array]\": {\n            seen = seen || new Map;\n            if (seen.has(val))\n                return seen.get(val);\n            var copy_1 = val.slice(0);\n            seen.set(val, copy_1);\n            copy_1.forEach(function (child, i) {\n                copy_1[i] = cloneDeepHelper(child, seen);\n            });\n            return copy_1;\n        }\n        case \"[object Object]\": {\n            seen = seen || new Map;\n            if (seen.has(val))\n                return seen.get(val);\n            var copy_2 = Object.create(Object.getPrototypeOf(val));\n            seen.set(val, copy_2);\n            Object.keys(val).forEach(function (key) {\n                copy_2[key] = cloneDeepHelper(val[key], seen);\n            });\n            return copy_2;\n        }\n        default:\n            return val;\n    }\n}\n//# sourceMappingURL=cloneDeep.js.map", "import '../globals';\nimport { isNonNullObject } from './objects';\nfunction deepFreeze(value) {\n    var workSet = new Set([value]);\n    workSet.forEach(function (obj) {\n        if (isNonNullObject(obj) && shallowFreeze(obj) === obj) {\n            Object.getOwnPropertyNames(obj).forEach(function (name) {\n                if (isNonNullObject(obj[name]))\n                    workSet.add(obj[name]);\n            });\n        }\n    });\n    return value;\n}\nfunction shallowFreeze(obj) {\n    if (__DEV__ && !Object.isFrozen(obj)) {\n        try {\n            Object.freeze(obj);\n        }\n        catch (e) {\n            if (e instanceof TypeError)\n                return null;\n            throw e;\n        }\n    }\n    return obj;\n}\nexport function maybeDeepFreeze(obj) {\n    if (__DEV__) {\n        deepFreeze(obj);\n    }\n    return obj;\n}\n//# sourceMappingURL=maybeDeepFreeze.js.map", "export function iterateObserversSafely(observers, method, argument) {\n    var observersWithMethod = [];\n    observers.forEach(function (obs) { return obs[method] && observersWithMethod.push(obs); });\n    observersWithMethod.forEach(function (obs) { return obs[method](argument); });\n}\n//# sourceMappingURL=iteration.js.map", "import { Observable } from \"./Observable\";\nexport function asyncMap(observable, mapFn, catchFn) {\n    return new Observable(function (observer) {\n        var next = observer.next, error = observer.error, complete = observer.complete;\n        var activeCallbackCount = 0;\n        var completed = false;\n        var promiseQueue = {\n            then: function (callback) {\n                return new Promise(function (resolve) { return resolve(callback()); });\n            },\n        };\n        function makeCallback(examiner, delegate) {\n            if (examiner) {\n                return function (arg) {\n                    ++activeCallbackCount;\n                    var both = function () { return examiner(arg); };\n                    promiseQueue = promiseQueue.then(both, both).then(function (result) {\n                        --activeCallbackCount;\n                        next && next.call(observer, result);\n                        if (completed) {\n                            handler.complete();\n                        }\n                    }, function (error) {\n                        --activeCallbackCount;\n                        throw error;\n                    }).catch(function (caught) {\n                        error && error.call(observer, caught);\n                    });\n                };\n            }\n            else {\n                return function (arg) { return delegate && delegate.call(observer, arg); };\n            }\n        }\n        var handler = {\n            next: makeCallback(mapFn, next),\n            error: makeCallback(catchFn, error),\n            complete: function () {\n                completed = true;\n                if (!activeCallbackCount) {\n                    complete && complete.call(observer);\n                }\n            },\n        };\n        var sub = observable.subscribe(handler);\n        return function () { return sub.unsubscribe(); };\n    });\n}\n//# sourceMappingURL=asyncMap.js.map", "import { maybe } from \"../globals\";\nexport var canUseWeakMap = typeof WeakMap === 'function' &&\n    maybe(function () { return navigator.product; }) !== 'ReactNative';\nexport var canUseWeakSet = typeof WeakSet === 'function';\nexport var canUseSymbol = typeof Symbol === 'function' &&\n    typeof Symbol.for === 'function';\nexport var canUseDOM = typeof maybe(function () { return window.document.createElement; }) === \"function\";\nvar usingJSDOM = maybe(function () { return navigator.userAgent.indexOf(\"jsdom\") >= 0; }) || false;\nexport var canUseLayoutEffect = canUseDOM && !usingJSDOM;\n//# sourceMappingURL=canUse.js.map", "import { Observable } from \"./Observable\";\nimport { canUseSymbol } from \"../common/canUse\";\nexport function fixObservableSubclass(subclass) {\n    function set(key) {\n        Object.defineProperty(subclass, key, { value: Observable });\n    }\n    if (canUseSymbol && Symbol.species) {\n        set(Symbol.species);\n    }\n    set(\"@@species\");\n    return subclass;\n}\n//# sourceMappingURL=subclassing.js.map", "import { __extends } from \"tslib\";\nimport { Observable } from \"./Observable\";\nimport { iterateObserversSafely } from \"./iteration\";\nimport { fixObservableSubclass } from \"./subclassing\";\nfunction isPromiseLike(value) {\n    return value && typeof value.then === \"function\";\n}\nvar Concast = (function (_super) {\n    __extends(Concast, _super);\n    function Concast(sources) {\n        var _this = _super.call(this, function (observer) {\n            _this.addObserver(observer);\n            return function () { return _this.removeObserver(observer); };\n        }) || this;\n        _this.observers = new Set();\n        _this.addCount = 0;\n        _this.promise = new Promise(function (resolve, reject) {\n            _this.resolve = resolve;\n            _this.reject = reject;\n        });\n        _this.handlers = {\n            next: function (result) {\n                if (_this.sub !== null) {\n                    _this.latest = [\"next\", result];\n                    iterateObserversSafely(_this.observers, \"next\", result);\n                }\n            },\n            error: function (error) {\n                var sub = _this.sub;\n                if (sub !== null) {\n                    if (sub)\n                        setTimeout(function () { return sub.unsubscribe(); });\n                    _this.sub = null;\n                    _this.latest = [\"error\", error];\n                    _this.reject(error);\n                    iterateObserversSafely(_this.observers, \"error\", error);\n                }\n            },\n            complete: function () {\n                var sub = _this.sub;\n                if (sub !== null) {\n                    var value = _this.sources.shift();\n                    if (!value) {\n                        if (sub)\n                            setTimeout(function () { return sub.unsubscribe(); });\n                        _this.sub = null;\n                        if (_this.latest &&\n                            _this.latest[0] === \"next\") {\n                            _this.resolve(_this.latest[1]);\n                        }\n                        else {\n                            _this.resolve();\n                        }\n                        iterateObserversSafely(_this.observers, \"complete\");\n                    }\n                    else if (isPromiseLike(value)) {\n                        value.then(function (obs) { return _this.sub = obs.subscribe(_this.handlers); });\n                    }\n                    else {\n                        _this.sub = value.subscribe(_this.handlers);\n                    }\n                }\n            },\n        };\n        _this.cancel = function (reason) {\n            _this.reject(reason);\n            _this.sources = [];\n            _this.handlers.complete();\n        };\n        _this.promise.catch(function (_) { });\n        if (typeof sources === \"function\") {\n            sources = [new Observable(sources)];\n        }\n        if (isPromiseLike(sources)) {\n            sources.then(function (iterable) { return _this.start(iterable); }, _this.handlers.error);\n        }\n        else {\n            _this.start(sources);\n        }\n        return _this;\n    }\n    Concast.prototype.start = function (sources) {\n        if (this.sub !== void 0)\n            return;\n        this.sources = Array.from(sources);\n        this.handlers.complete();\n    };\n    Concast.prototype.deliverLastMessage = function (observer) {\n        if (this.latest) {\n            var nextOrError = this.latest[0];\n            var method = observer[nextOrError];\n            if (method) {\n                method.call(observer, this.latest[1]);\n            }\n            if (this.sub === null &&\n                nextOrError === \"next\" &&\n                observer.complete) {\n                observer.complete();\n            }\n        }\n    };\n    Concast.prototype.addObserver = function (observer) {\n        if (!this.observers.has(observer)) {\n            this.deliverLastMessage(observer);\n            this.observers.add(observer);\n            ++this.addCount;\n        }\n    };\n    Concast.prototype.removeObserver = function (observer, quietly) {\n        if (this.observers.delete(observer) &&\n            --this.addCount < 1 &&\n            !quietly) {\n            this.handlers.complete();\n        }\n    };\n    Concast.prototype.cleanup = function (callback) {\n        var _this = this;\n        var called = false;\n        var once = function () {\n            if (!called) {\n                called = true;\n                _this.observers.delete(observer);\n                callback();\n            }\n        };\n        var observer = {\n            next: once,\n            error: once,\n            complete: once,\n        };\n        var count = this.addCount;\n        this.addObserver(observer);\n        this.addCount = count;\n    };\n    return Concast;\n}(Observable));\nexport { Concast };\nfixObservableSubclass(Concast);\n//# sourceMappingURL=Concast.js.map", "export function isNonEmptyArray(value) {\n    return Array.isArray(value) && value.length > 0;\n}\n//# sourceMappingURL=arrays.js.map", "export function graphQLResultHasError(result) {\n    return (result.errors && result.errors.length > 0) || false;\n}\n//# sourceMappingURL=errorHandling.js.map", "export function compact() {\n    var objects = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        objects[_i] = arguments[_i];\n    }\n    var result = Object.create(null);\n    objects.forEach(function (obj) {\n        if (!obj)\n            return;\n        Object.keys(obj).forEach(function (key) {\n            var value = obj[key];\n            if (value !== void 0) {\n                result[key] = value;\n            }\n        });\n    });\n    return result;\n}\n//# sourceMappingURL=compact.js.map", "var prefixCounts = new Map();\nexport function makeUniqueId(prefix) {\n    var count = prefixCounts.get(prefix) || 1;\n    prefixCounts.set(prefix, count + 1);\n    return \"\".concat(prefix, \":\").concat(count, \":\").concat(Math.random().toString(36).slice(2));\n}\n//# sourceMappingURL=makeUniqueId.js.map", "import { makeUniqueId } from \"./makeUniqueId\";\nexport function stringifyForDisplay(value) {\n    var undefId = makeUniqueId(\"stringifyForDisplay\");\n    return JSON.stringify(value, function (key, value) {\n        return value === void 0 ? undefId : value;\n    }).split(JSON.stringify(undefId)).join(\"<undefined>\");\n}\n//# sourceMappingURL=stringifyForDisplay.js.map", "import { __assign } from \"tslib\";\nimport { compact } from \"./compact\";\nexport function mergeOptions(defaults, options) {\n    return compact(defaults, options, options.variables && {\n        variables: __assign(__assign({}, (defaults && defaults.variables)), options.variables),\n    });\n}\n//# sourceMappingURL=mergeOptions.js.map", "import { Observable } from '../../utilities';\nexport function fromError(errorValue) {\n    return new Observable(function (observer) {\n        observer.error(errorValue);\n    });\n}\n//# sourceMappingURL=fromError.js.map", "import { invariant } from '../../utilities/globals';\nexport function toPromise(observable) {\n    var completed = false;\n    return new Promise(function (resolve, reject) {\n        observable.subscribe({\n            next: function (data) {\n                if (completed) {\n                    __DEV__ && invariant.warn(\"Promise Wrapper does not support multiple results from Observable\");\n                }\n                else {\n                    completed = true;\n                    resolve(data);\n                }\n            },\n            error: reject,\n        });\n    });\n}\n//# sourceMappingURL=toPromise.js.map", "import { Observable } from '../../utilities';\nexport function fromPromise(promise) {\n    return new Observable(function (observer) {\n        promise\n            .then(function (value) {\n            observer.next(value);\n            observer.complete();\n        })\n            .catch(observer.error.bind(observer));\n    });\n}\n//# sourceMappingURL=fromPromise.js.map", "export var throwServerError = function (response, result, message) {\n    var error = new Error(message);\n    error.name = 'ServerError';\n    error.response = response;\n    error.statusCode = response.status;\n    error.result = result;\n    throw error;\n};\n//# sourceMappingURL=throwServerError.js.map", "import { InvariantError } from '../../utilities/globals';\nexport function validateOperation(operation) {\n    var OPERATION_FIELDS = [\n        'query',\n        'operationName',\n        'variables',\n        'extensions',\n        'context',\n    ];\n    for (var _i = 0, _a = Object.keys(operation); _i < _a.length; _i++) {\n        var key = _a[_i];\n        if (OPERATION_FIELDS.indexOf(key) < 0) {\n            throw __DEV__ ? new InvariantError(\"illegal argument: \".concat(key)) : new InvariantError(24);\n        }\n    }\n    return operation;\n}\n//# sourceMappingURL=validateOperation.js.map", "import { __assign } from \"tslib\";\nexport function createOperation(starting, operation) {\n    var context = __assign({}, starting);\n    var setContext = function (next) {\n        if (typeof next === 'function') {\n            context = __assign(__assign({}, context), next(context));\n        }\n        else {\n            context = __assign(__assign({}, context), next);\n        }\n    };\n    var getContext = function () { return (__assign({}, context)); };\n    Object.defineProperty(operation, 'setContext', {\n        enumerable: false,\n        value: setContext,\n    });\n    Object.defineProperty(operation, 'getContext', {\n        enumerable: false,\n        value: getContext,\n    });\n    return operation;\n}\n//# sourceMappingURL=createOperation.js.map", "import { getOperationName } from '../../utilities';\nexport function transformOperation(operation) {\n    var transformedOperation = {\n        variables: operation.variables || {},\n        extensions: operation.extensions || {},\n        operationName: operation.operationName,\n        query: operation.query,\n    };\n    if (!transformedOperation.operationName) {\n        transformedOperation.operationName =\n            typeof transformedOperation.query !== 'string'\n                ? getOperationName(transformedOperation.query) || undefined\n                : '';\n    }\n    return transformedOperation;\n}\n//# sourceMappingURL=transformOperation.js.map", "import { __extends } from \"tslib\";\nimport { InvariantError, invariant } from '../../utilities/globals';\nimport { Observable } from '../../utilities';\nimport { validateOperation, createOperation, transformOperation, } from '../utils';\nfunction passthrough(op, forward) {\n    return (forward ? forward(op) : Observable.of());\n}\nfunction toLink(handler) {\n    return typeof handler === 'function' ? new ApolloLink(handler) : handler;\n}\nfunction isTerminating(link) {\n    return link.request.length <= 1;\n}\nvar LinkError = (function (_super) {\n    __extends(LinkError, _super);\n    function LinkError(message, link) {\n        var _this = _super.call(this, message) || this;\n        _this.link = link;\n        return _this;\n    }\n    return LinkError;\n}(Error));\nvar ApolloLink = (function () {\n    function ApolloLink(request) {\n        if (request)\n            this.request = request;\n    }\n    ApolloLink.empty = function () {\n        return new ApolloLink(function () { return Observable.of(); });\n    };\n    ApolloLink.from = function (links) {\n        if (links.length === 0)\n            return ApolloLink.empty();\n        return links.map(toLink).reduce(function (x, y) { return x.concat(y); });\n    };\n    ApolloLink.split = function (test, left, right) {\n        var leftLink = toLink(left);\n        var rightLink = toLink(right || new ApolloLink(passthrough));\n        if (isTerminating(leftLink) && isTerminating(rightLink)) {\n            return new ApolloLink(function (operation) {\n                return test(operation)\n                    ? leftLink.request(operation) || Observable.of()\n                    : rightLink.request(operation) || Observable.of();\n            });\n        }\n        else {\n            return new ApolloLink(function (operation, forward) {\n                return test(operation)\n                    ? leftLink.request(operation, forward) || Observable.of()\n                    : rightLink.request(operation, forward) || Observable.of();\n            });\n        }\n    };\n    ApolloLink.execute = function (link, operation) {\n        return (link.request(createOperation(operation.context, transformOperation(validateOperation(operation)))) || Observable.of());\n    };\n    ApolloLink.concat = function (first, second) {\n        var firstLink = toLink(first);\n        if (isTerminating(firstLink)) {\n            __DEV__ && invariant.warn(new LinkError(\"You are calling concat on a terminating link, which will have no effect\", firstLink));\n            return firstLink;\n        }\n        var nextLink = toLink(second);\n        if (isTerminating(nextLink)) {\n            return new ApolloLink(function (operation) {\n                return firstLink.request(operation, function (op) { return nextLink.request(op) || Observable.of(); }) || Observable.of();\n            });\n        }\n        else {\n            return new ApolloLink(function (operation, forward) {\n                return (firstLink.request(operation, function (op) {\n                    return nextLink.request(op, forward) || Observable.of();\n                }) || Observable.of());\n            });\n        }\n    };\n    ApolloLink.prototype.split = function (test, left, right) {\n        return this.concat(ApolloLink.split(test, left, right || new ApolloLink(passthrough)));\n    };\n    ApolloLink.prototype.concat = function (next) {\n        return ApolloLink.concat(this, next);\n    };\n    ApolloLink.prototype.request = function (operation, forward) {\n        throw __DEV__ ? new InvariantError('request is not implemented') : new InvariantError(19);\n    };\n    ApolloLink.prototype.onError = function (error, observer) {\n        if (observer && observer.error) {\n            observer.error(error);\n            return false;\n        }\n        throw error;\n    };\n    ApolloLink.prototype.setOnError = function (fn) {\n        this.onError = fn;\n        return this;\n    };\n    return ApolloLink;\n}());\nexport { ApolloLink };\n//# sourceMappingURL=ApolloLink.js.map", "import { ApolloLink } from './ApolloLink';\nexport var empty = ApolloLink.empty;\n//# sourceMappingURL=empty.js.map", "import { ApolloLink } from './ApolloLink';\nexport var from = ApolloLink.from;\n//# sourceMappingURL=from.js.map", "import { ApolloLink } from './ApolloLink';\nexport var split = ApolloLink.split;\n//# sourceMappingURL=split.js.map", "import { ApolloLink } from './ApolloLink';\nexport var concat = ApolloLink.concat;\n//# sourceMappingURL=concat.js.map", "import { ApolloLink } from './ApolloLink';\nexport var execute = ApolloLink.execute;\n//# sourceMappingURL=execute.js.map", "import { throwServerError } from '../utils';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nexport function parseAndCheckHttpResponse(operations) {\n    return function (response) { return response\n        .text()\n        .then(function (bodyText) {\n        try {\n            return JSON.parse(bodyText);\n        }\n        catch (err) {\n            var parseError = err;\n            parseError.name = 'ServerParseError';\n            parseError.response = response;\n            parseError.statusCode = response.status;\n            parseError.bodyText = bodyText;\n            throw parseError;\n        }\n    })\n        .then(function (result) {\n        if (response.status >= 300) {\n            throwServerError(response, result, \"Response not successful: Received status code \".concat(response.status));\n        }\n        if (!Array.isArray(result) &&\n            !hasOwnProperty.call(result, 'data') &&\n            !hasOwnProperty.call(result, 'errors')) {\n            throwServerError(response, result, \"Server response was missing for query '\".concat(Array.isArray(operations)\n                ? operations.map(function (op) { return op.operationName; })\n                : operations.operationName, \"'.\"));\n        }\n        return result;\n    }); };\n}\n//# sourceMappingURL=parseAndCheckHttpResponse.js.map", "import { InvariantError } from '../../utilities/globals';\nexport var serializeFetchParameter = function (p, label) {\n    var serialized;\n    try {\n        serialized = JSON.stringify(p);\n    }\n    catch (e) {\n        var parseError = __DEV__ ? new InvariantError(\"Network request failed. \".concat(label, \" is not serializable: \").concat(e.message)) : new InvariantError(21);\n        parseError.parseError = e;\n        throw parseError;\n    }\n    return serialized;\n};\n//# sourceMappingURL=serializeFetchParameter.js.map", "import { __assign, __spreadArray } from \"tslib\";\nimport { print } from 'graphql';\n;\nvar defaultHttpOptions = {\n    includeQuery: true,\n    includeExtensions: false,\n};\nvar defaultHeaders = {\n    accept: '*/*',\n    'content-type': 'application/json',\n};\nvar defaultOptions = {\n    method: 'POST',\n};\nexport var fallbackHttpConfig = {\n    http: defaultHttpOptions,\n    headers: defaultHeaders,\n    options: defaultOptions,\n};\nexport var defaultPrinter = function (ast, printer) { return printer(ast); };\nexport function selectHttpOptionsAndBody(operation, fallbackConfig) {\n    var configs = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        configs[_i - 2] = arguments[_i];\n    }\n    configs.unshift(fallbackConfig);\n    return selectHttpOptionsAndBodyInternal.apply(void 0, __spreadArray([operation,\n        defaultPrinter], configs, false));\n}\nexport function selectHttpOptionsAndBodyInternal(operation, printer) {\n    var configs = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        configs[_i - 2] = arguments[_i];\n    }\n    var options = {};\n    var http = {};\n    configs.forEach(function (config) {\n        options = __assign(__assign(__assign({}, options), config.options), { headers: __assign(__assign({}, options.headers), headersToLowerCase(config.headers)) });\n        if (config.credentials) {\n            options.credentials = config.credentials;\n        }\n        http = __assign(__assign({}, http), config.http);\n    });\n    var operationName = operation.operationName, extensions = operation.extensions, variables = operation.variables, query = operation.query;\n    var body = { operationName: operationName, variables: variables };\n    if (http.includeExtensions)\n        body.extensions = extensions;\n    if (http.includeQuery)\n        body.query = printer(query, print);\n    return {\n        options: options,\n        body: body,\n    };\n}\n;\nfunction headersToLowerCase(headers) {\n    if (headers) {\n        var normalized_1 = Object.create(null);\n        Object.keys(Object(headers)).forEach(function (name) {\n            normalized_1[name.toLowerCase()] = headers[name];\n        });\n        return normalized_1;\n    }\n    return headers;\n}\n//# sourceMappingURL=selectHttpOptionsAndBody.js.map", "import { InvariantError } from '../../utilities/globals';\nexport var checkFetcher = function (fetcher) {\n    if (!fetcher && typeof fetch === 'undefined') {\n        throw __DEV__ ? new InvariantError(\"\\n\\\"fetch\\\" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:\\n\\nimport fetch from 'cross-fetch';\\nimport { ApolloClient, HttpLink } from '@apollo/client';\\nconst client = new ApolloClient({\\n  link: new HttpLink({ uri: '/graphql', fetch })\\n});\\n    \") : new InvariantError(20);\n    }\n};\n//# sourceMappingURL=checkFetcher.js.map", "export var createSignalIfSupported = function () {\n    if (typeof AbortController === 'undefined')\n        return { controller: false, signal: false };\n    var controller = new AbortController();\n    var signal = controller.signal;\n    return { controller: controller, signal: signal };\n};\n//# sourceMappingURL=createSignalIfSupported.js.map", "export var selectURI = function (operation, fallbackURI) {\n    var context = operation.getContext();\n    var contextURI = context.uri;\n    if (contextURI) {\n        return contextURI;\n    }\n    else if (typeof fallbackURI === 'function') {\n        return fallbackURI(operation);\n    }\n    else {\n        return fallbackURI || '/graphql';\n    }\n};\n//# sourceMappingURL=selectURI.js.map", "import { serializeFetchParameter } from './serializeFetchParameter';\nexport function rewriteURIForGET(chosenURI, body) {\n    var queryParams = [];\n    var addQueryParam = function (key, value) {\n        queryParams.push(\"\".concat(key, \"=\").concat(encodeURIComponent(value)));\n    };\n    if ('query' in body) {\n        addQueryParam('query', body.query);\n    }\n    if (body.operationName) {\n        addQueryParam('operationName', body.operationName);\n    }\n    if (body.variables) {\n        var serializedVariables = void 0;\n        try {\n            serializedVariables = serializeFetchParameter(body.variables, 'Variables map');\n        }\n        catch (parseError) {\n            return { parseError: parseError };\n        }\n        addQueryParam('variables', serializedVariables);\n    }\n    if (body.extensions) {\n        var serializedExtensions = void 0;\n        try {\n            serializedExtensions = serializeFetchParameter(body.extensions, 'Extensions map');\n        }\n        catch (parseError) {\n            return { parseError: parseError };\n        }\n        addQueryParam('extensions', serializedExtensions);\n    }\n    var fragment = '', preFragment = chosenURI;\n    var fragmentStart = chosenURI.indexOf('#');\n    if (fragmentStart !== -1) {\n        fragment = chosenURI.substr(fragmentStart);\n        preFragment = chosenURI.substr(0, fragmentStart);\n    }\n    var queryParamsPrefix = preFragment.indexOf('?') === -1 ? '?' : '&';\n    var newURI = preFragment + queryParamsPrefix + queryParams.join('&') + fragment;\n    return { newURI: newURI };\n}\n//# sourceMappingURL=rewriteURIForGET.js.map", "import { __assign, __rest } from \"tslib\";\nimport '../../utilities/globals';\nimport { visit } from 'graphql';\nimport { ApolloLink } from '../core';\nimport { Observable } from '../../utilities';\nimport { serializeFetchParameter } from './serializeFetchParameter';\nimport { selectURI } from './selectURI';\nimport { parseAndCheckHttpResponse } from './parseAndCheckHttpResponse';\nimport { checkFetcher } from './checkFetcher';\nimport { selectHttpOptionsAndBodyInternal, defaultPrinter, fallbackHttpConfig } from './selectHttpOptionsAndBody';\nimport { createSignalIfSupported } from './createSignalIfSupported';\nimport { rewriteURIForGET } from './rewriteURIForGET';\nimport { fromError } from '../utils';\nimport { maybe } from '../../utilities';\nvar backupFetch = maybe(function () { return fetch; });\nexport var createHttpLink = function (linkOptions) {\n    if (linkOptions === void 0) { linkOptions = {}; }\n    var _a = linkOptions.uri, uri = _a === void 0 ? '/graphql' : _a, preferredFetch = linkOptions.fetch, _b = linkOptions.print, print = _b === void 0 ? defaultPrinter : _b, includeExtensions = linkOptions.includeExtensions, useGETForQueries = linkOptions.useGETForQueries, _c = linkOptions.includeUnusedVariables, includeUnusedVariables = _c === void 0 ? false : _c, requestOptions = __rest(linkOptions, [\"uri\", \"fetch\", \"print\", \"includeExtensions\", \"useGETForQueries\", \"includeUnusedVariables\"]);\n    if (__DEV__) {\n        checkFetcher(preferredFetch || backupFetch);\n    }\n    var linkConfig = {\n        http: { includeExtensions: includeExtensions },\n        options: requestOptions.fetchOptions,\n        credentials: requestOptions.credentials,\n        headers: requestOptions.headers,\n    };\n    return new ApolloLink(function (operation) {\n        var chosenURI = selectURI(operation, uri);\n        var context = operation.getContext();\n        var clientAwarenessHeaders = {};\n        if (context.clientAwareness) {\n            var _a = context.clientAwareness, name_1 = _a.name, version = _a.version;\n            if (name_1) {\n                clientAwarenessHeaders['apollographql-client-name'] = name_1;\n            }\n            if (version) {\n                clientAwarenessHeaders['apollographql-client-version'] = version;\n            }\n        }\n        var contextHeaders = __assign(__assign({}, clientAwarenessHeaders), context.headers);\n        var contextConfig = {\n            http: context.http,\n            options: context.fetchOptions,\n            credentials: context.credentials,\n            headers: contextHeaders,\n        };\n        var _b = selectHttpOptionsAndBodyInternal(operation, print, fallbackHttpConfig, linkConfig, contextConfig), options = _b.options, body = _b.body;\n        if (body.variables && !includeUnusedVariables) {\n            var unusedNames_1 = new Set(Object.keys(body.variables));\n            visit(operation.query, {\n                Variable: function (node, _key, parent) {\n                    if (parent && parent.kind !== 'VariableDefinition') {\n                        unusedNames_1.delete(node.name.value);\n                    }\n                },\n            });\n            if (unusedNames_1.size) {\n                body.variables = __assign({}, body.variables);\n                unusedNames_1.forEach(function (name) {\n                    delete body.variables[name];\n                });\n            }\n        }\n        var controller;\n        if (!options.signal) {\n            var _c = createSignalIfSupported(), _controller = _c.controller, signal = _c.signal;\n            controller = _controller;\n            if (controller)\n                options.signal = signal;\n        }\n        var definitionIsMutation = function (d) {\n            return d.kind === 'OperationDefinition' && d.operation === 'mutation';\n        };\n        if (useGETForQueries &&\n            !operation.query.definitions.some(definitionIsMutation)) {\n            options.method = 'GET';\n        }\n        if (options.method === 'GET') {\n            var _d = rewriteURIForGET(chosenURI, body), newURI = _d.newURI, parseError = _d.parseError;\n            if (parseError) {\n                return fromError(parseError);\n            }\n            chosenURI = newURI;\n        }\n        else {\n            try {\n                options.body = serializeFetchParameter(body, 'Payload');\n            }\n            catch (parseError) {\n                return fromError(parseError);\n            }\n        }\n        return new Observable(function (observer) {\n            var currentFetch = preferredFetch || maybe(function () { return fetch; }) || backupFetch;\n            currentFetch(chosenURI, options)\n                .then(function (response) {\n                operation.setContext({ response: response });\n                return response;\n            })\n                .then(parseAndCheckHttpResponse(operation))\n                .then(function (result) {\n                observer.next(result);\n                observer.complete();\n                return result;\n            })\n                .catch(function (err) {\n                if (err.name === 'AbortError')\n                    return;\n                if (err.result && err.result.errors && err.result.data) {\n                    observer.next(err.result);\n                }\n                observer.error(err);\n            });\n            return function () {\n                if (controller)\n                    controller.abort();\n            };\n        });\n    });\n};\n//# sourceMappingURL=createHttpLink.js.map", "import { __extends } from \"tslib\";\nimport { ApolloLink } from '../core';\nimport { createHttpLink } from './createHttpLink';\nvar HttpLink = (function (_super) {\n    __extends(HttpLink, _super);\n    function HttpLink(options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, createHttpLink(options).request) || this;\n        _this.options = options;\n        return _this;\n    }\n    return HttpLink;\n}(ApolloLink));\nexport { HttpLink };\n//# sourceMappingURL=HttpLink.js.map", "import { __assign, __rest } from \"tslib\";\nimport { wrap } from 'optimism';\nimport { getFragmentQueryDocument, } from '../../utilities';\nvar ApolloCache = (function () {\n    function ApolloCache() {\n        this.getFragmentDoc = wrap(getFragmentQueryDocument);\n    }\n    ApolloCache.prototype.batch = function (options) {\n        var _this = this;\n        var optimisticId = typeof options.optimistic === \"string\" ? options.optimistic :\n            options.optimistic === false ? null : void 0;\n        var updateResult;\n        this.performTransaction(function () { return updateResult = options.update(_this); }, optimisticId);\n        return updateResult;\n    };\n    ApolloCache.prototype.recordOptimisticTransaction = function (transaction, optimisticId) {\n        this.performTransaction(transaction, optimisticId);\n    };\n    ApolloCache.prototype.transformDocument = function (document) {\n        return document;\n    };\n    ApolloCache.prototype.identify = function (object) {\n        return;\n    };\n    ApolloCache.prototype.gc = function () {\n        return [];\n    };\n    ApolloCache.prototype.modify = function (options) {\n        return false;\n    };\n    ApolloCache.prototype.transformForLink = function (document) {\n        return document;\n    };\n    ApolloCache.prototype.readQuery = function (options, optimistic) {\n        if (optimistic === void 0) { optimistic = !!options.optimistic; }\n        return this.read(__assign(__assign({}, options), { rootId: options.id || 'ROOT_QUERY', optimistic: optimistic }));\n    };\n    ApolloCache.prototype.readFragment = function (options, optimistic) {\n        if (optimistic === void 0) { optimistic = !!options.optimistic; }\n        return this.read(__assign(__assign({}, options), { query: this.getFragmentDoc(options.fragment, options.fragmentName), rootId: options.id, optimistic: optimistic }));\n    };\n    ApolloCache.prototype.writeQuery = function (_a) {\n        var id = _a.id, data = _a.data, options = __rest(_a, [\"id\", \"data\"]);\n        return this.write(Object.assign(options, {\n            dataId: id || 'ROOT_QUERY',\n            result: data,\n        }));\n    };\n    ApolloCache.prototype.writeFragment = function (_a) {\n        var id = _a.id, data = _a.data, fragment = _a.fragment, fragmentName = _a.fragmentName, options = __rest(_a, [\"id\", \"data\", \"fragment\", \"fragmentName\"]);\n        return this.write(Object.assign(options, {\n            query: this.getFragmentDoc(fragment, fragmentName),\n            dataId: id,\n            result: data,\n        }));\n    };\n    ApolloCache.prototype.updateQuery = function (options, update) {\n        return this.batch({\n            update: function (cache) {\n                var value = cache.readQuery(options);\n                var data = update(value);\n                if (data === void 0 || data === null)\n                    return value;\n                cache.writeQuery(__assign(__assign({}, options), { data: data }));\n                return data;\n            },\n        });\n    };\n    ApolloCache.prototype.updateFragment = function (options, update) {\n        return this.batch({\n            update: function (cache) {\n                var value = cache.readFragment(options);\n                var data = update(value);\n                if (data === void 0 || data === null)\n                    return value;\n                cache.writeFragment(__assign(__assign({}, options), { data: data }));\n                return data;\n            },\n        });\n    };\n    return ApolloCache;\n}());\nexport { ApolloCache };\n//# sourceMappingURL=cache.js.map", "export var Cache;\n(function (Cache) {\n})(Cache || (Cache = {}));\n//# sourceMappingURL=Cache.js.map", "var MissingFieldError = (function () {\n    function MissingFieldError(message, path, query, variables) {\n        this.message = message;\n        this.path = path;\n        this.query = query;\n        this.variables = variables;\n    }\n    return MissingFieldError;\n}());\nexport { MissingFieldError };\n//# sourceMappingURL=common.js.map", "import { isReference, isField, DeepMerger, resultKeyNameFromField, shouldInclude, isNonNullObject, compact, } from '../../utilities';\nexport var hasOwn = Object.prototype.hasOwnProperty;\nexport function defaultDataIdFromObject(_a, context) {\n    var __typename = _a.__typename, id = _a.id, _id = _a._id;\n    if (typeof __typename === \"string\") {\n        if (context) {\n            context.keyObject =\n                id !== void 0 ? { id: id } :\n                    _id !== void 0 ? { _id: _id } :\n                        void 0;\n        }\n        if (id === void 0)\n            id = _id;\n        if (id !== void 0) {\n            return \"\".concat(__typename, \":\").concat((typeof id === \"number\" ||\n                typeof id === \"string\") ? id : JSON.stringify(id));\n        }\n    }\n}\nvar defaultConfig = {\n    dataIdFromObject: defaultDataIdFromObject,\n    addTypename: true,\n    resultCaching: true,\n    canonizeResults: false,\n};\nexport function normalizeConfig(config) {\n    return compact(defaultConfig, config);\n}\nexport function shouldCanonizeResults(config) {\n    var value = config.canonizeResults;\n    return value === void 0 ? defaultConfig.canonizeResults : value;\n}\nexport function getTypenameFromStoreObject(store, objectOrReference) {\n    return isReference(objectOrReference)\n        ? store.get(objectOrReference.__ref, \"__typename\")\n        : objectOrReference && objectOrReference.__typename;\n}\nexport var TypeOrFieldNameRegExp = /^[_a-z][_0-9a-z]*/i;\nexport function fieldNameFromStoreName(storeFieldName) {\n    var match = storeFieldName.match(TypeOrFieldNameRegExp);\n    return match ? match[0] : storeFieldName;\n}\nexport function selectionSetMatchesResult(selectionSet, result, variables) {\n    if (isNonNullObject(result)) {\n        return isArray(result)\n            ? result.every(function (item) { return selectionSetMatchesResult(selectionSet, item, variables); })\n            : selectionSet.selections.every(function (field) {\n                if (isField(field) && shouldInclude(field, variables)) {\n                    var key = resultKeyNameFromField(field);\n                    return hasOwn.call(result, key) &&\n                        (!field.selectionSet ||\n                            selectionSetMatchesResult(field.selectionSet, result[key], variables));\n                }\n                return true;\n            });\n    }\n    return false;\n}\nexport function storeValueIsStoreObject(value) {\n    return isNonNullObject(value) &&\n        !isReference(value) &&\n        !isArray(value);\n}\nexport function makeProcessedFieldsMerger() {\n    return new DeepMerger;\n}\nexport var isArray = function (a) { return Array.isArray(a); };\n//# sourceMappingURL=helpers.js.map", "import { __assign, __extends, __rest } from \"tslib\";\nimport { invariant } from '../../utilities/globals';\nimport { dep } from 'optimism';\nimport { equal } from '@wry/equality';\nimport { Trie } from '@wry/trie';\nimport { isReference, makeReference, DeepMerger, maybeDeepFreeze, canUseWeakMap, isNonNullObject, } from '../../utilities';\nimport { hasOwn, fieldNameFromStoreName } from './helpers';\nvar DELETE = Object.create(null);\nvar delModifier = function () { return DELETE; };\nvar INVALIDATE = Object.create(null);\nvar EntityStore = (function () {\n    function EntityStore(policies, group) {\n        var _this = this;\n        this.policies = policies;\n        this.group = group;\n        this.data = Object.create(null);\n        this.rootIds = Object.create(null);\n        this.refs = Object.create(null);\n        this.getFieldValue = function (objectOrReference, storeFieldName) { return maybeDeepFreeze(isReference(objectOrReference)\n            ? _this.get(objectOrReference.__ref, storeFieldName)\n            : objectOrReference && objectOrReference[storeFieldName]); };\n        this.canRead = function (objOrRef) {\n            return isReference(objOrRef)\n                ? _this.has(objOrRef.__ref)\n                : typeof objOrRef === \"object\";\n        };\n        this.toReference = function (objOrIdOrRef, mergeIntoStore) {\n            if (typeof objOrIdOrRef === \"string\") {\n                return makeReference(objOrIdOrRef);\n            }\n            if (isReference(objOrIdOrRef)) {\n                return objOrIdOrRef;\n            }\n            var id = _this.policies.identify(objOrIdOrRef)[0];\n            if (id) {\n                var ref = makeReference(id);\n                if (mergeIntoStore) {\n                    _this.merge(id, objOrIdOrRef);\n                }\n                return ref;\n            }\n        };\n    }\n    EntityStore.prototype.toObject = function () {\n        return __assign({}, this.data);\n    };\n    EntityStore.prototype.has = function (dataId) {\n        return this.lookup(dataId, true) !== void 0;\n    };\n    EntityStore.prototype.get = function (dataId, fieldName) {\n        this.group.depend(dataId, fieldName);\n        if (hasOwn.call(this.data, dataId)) {\n            var storeObject = this.data[dataId];\n            if (storeObject && hasOwn.call(storeObject, fieldName)) {\n                return storeObject[fieldName];\n            }\n        }\n        if (fieldName === \"__typename\" &&\n            hasOwn.call(this.policies.rootTypenamesById, dataId)) {\n            return this.policies.rootTypenamesById[dataId];\n        }\n        if (this instanceof Layer) {\n            return this.parent.get(dataId, fieldName);\n        }\n    };\n    EntityStore.prototype.lookup = function (dataId, dependOnExistence) {\n        if (dependOnExistence)\n            this.group.depend(dataId, \"__exists\");\n        if (hasOwn.call(this.data, dataId)) {\n            return this.data[dataId];\n        }\n        if (this instanceof Layer) {\n            return this.parent.lookup(dataId, dependOnExistence);\n        }\n        if (this.policies.rootTypenamesById[dataId]) {\n            return Object.create(null);\n        }\n    };\n    EntityStore.prototype.merge = function (older, newer) {\n        var _this = this;\n        var dataId;\n        if (isReference(older))\n            older = older.__ref;\n        if (isReference(newer))\n            newer = newer.__ref;\n        var existing = typeof older === \"string\"\n            ? this.lookup(dataId = older)\n            : older;\n        var incoming = typeof newer === \"string\"\n            ? this.lookup(dataId = newer)\n            : newer;\n        if (!incoming)\n            return;\n        __DEV__ ? invariant(typeof dataId === \"string\", \"store.merge expects a string ID\") : invariant(typeof dataId === \"string\", 1);\n        var merged = new DeepMerger(storeObjectReconciler).merge(existing, incoming);\n        this.data[dataId] = merged;\n        if (merged !== existing) {\n            delete this.refs[dataId];\n            if (this.group.caching) {\n                var fieldsToDirty_1 = Object.create(null);\n                if (!existing)\n                    fieldsToDirty_1.__exists = 1;\n                Object.keys(incoming).forEach(function (storeFieldName) {\n                    if (!existing || existing[storeFieldName] !== merged[storeFieldName]) {\n                        fieldsToDirty_1[storeFieldName] = 1;\n                        var fieldName = fieldNameFromStoreName(storeFieldName);\n                        if (fieldName !== storeFieldName &&\n                            !_this.policies.hasKeyArgs(merged.__typename, fieldName)) {\n                            fieldsToDirty_1[fieldName] = 1;\n                        }\n                        if (merged[storeFieldName] === void 0 && !(_this instanceof Layer)) {\n                            delete merged[storeFieldName];\n                        }\n                    }\n                });\n                if (fieldsToDirty_1.__typename &&\n                    !(existing && existing.__typename) &&\n                    this.policies.rootTypenamesById[dataId] === merged.__typename) {\n                    delete fieldsToDirty_1.__typename;\n                }\n                Object.keys(fieldsToDirty_1).forEach(function (fieldName) { return _this.group.dirty(dataId, fieldName); });\n            }\n        }\n    };\n    EntityStore.prototype.modify = function (dataId, fields) {\n        var _this = this;\n        var storeObject = this.lookup(dataId);\n        if (storeObject) {\n            var changedFields_1 = Object.create(null);\n            var needToMerge_1 = false;\n            var allDeleted_1 = true;\n            var sharedDetails_1 = {\n                DELETE: DELETE,\n                INVALIDATE: INVALIDATE,\n                isReference: isReference,\n                toReference: this.toReference,\n                canRead: this.canRead,\n                readField: function (fieldNameOrOptions, from) { return _this.policies.readField(typeof fieldNameOrOptions === \"string\" ? {\n                    fieldName: fieldNameOrOptions,\n                    from: from || makeReference(dataId),\n                } : fieldNameOrOptions, { store: _this }); },\n            };\n            Object.keys(storeObject).forEach(function (storeFieldName) {\n                var fieldName = fieldNameFromStoreName(storeFieldName);\n                var fieldValue = storeObject[storeFieldName];\n                if (fieldValue === void 0)\n                    return;\n                var modify = typeof fields === \"function\"\n                    ? fields\n                    : fields[storeFieldName] || fields[fieldName];\n                if (modify) {\n                    var newValue = modify === delModifier ? DELETE :\n                        modify(maybeDeepFreeze(fieldValue), __assign(__assign({}, sharedDetails_1), { fieldName: fieldName, storeFieldName: storeFieldName, storage: _this.getStorage(dataId, storeFieldName) }));\n                    if (newValue === INVALIDATE) {\n                        _this.group.dirty(dataId, storeFieldName);\n                    }\n                    else {\n                        if (newValue === DELETE)\n                            newValue = void 0;\n                        if (newValue !== fieldValue) {\n                            changedFields_1[storeFieldName] = newValue;\n                            needToMerge_1 = true;\n                            fieldValue = newValue;\n                        }\n                    }\n                }\n                if (fieldValue !== void 0) {\n                    allDeleted_1 = false;\n                }\n            });\n            if (needToMerge_1) {\n                this.merge(dataId, changedFields_1);\n                if (allDeleted_1) {\n                    if (this instanceof Layer) {\n                        this.data[dataId] = void 0;\n                    }\n                    else {\n                        delete this.data[dataId];\n                    }\n                    this.group.dirty(dataId, \"__exists\");\n                }\n                return true;\n            }\n        }\n        return false;\n    };\n    EntityStore.prototype.delete = function (dataId, fieldName, args) {\n        var _a;\n        var storeObject = this.lookup(dataId);\n        if (storeObject) {\n            var typename = this.getFieldValue(storeObject, \"__typename\");\n            var storeFieldName = fieldName && args\n                ? this.policies.getStoreFieldName({ typename: typename, fieldName: fieldName, args: args })\n                : fieldName;\n            return this.modify(dataId, storeFieldName ? (_a = {},\n                _a[storeFieldName] = delModifier,\n                _a) : delModifier);\n        }\n        return false;\n    };\n    EntityStore.prototype.evict = function (options, limit) {\n        var evicted = false;\n        if (options.id) {\n            if (hasOwn.call(this.data, options.id)) {\n                evicted = this.delete(options.id, options.fieldName, options.args);\n            }\n            if (this instanceof Layer && this !== limit) {\n                evicted = this.parent.evict(options, limit) || evicted;\n            }\n            if (options.fieldName || evicted) {\n                this.group.dirty(options.id, options.fieldName || \"__exists\");\n            }\n        }\n        return evicted;\n    };\n    EntityStore.prototype.clear = function () {\n        this.replace(null);\n    };\n    EntityStore.prototype.extract = function () {\n        var _this = this;\n        var obj = this.toObject();\n        var extraRootIds = [];\n        this.getRootIdSet().forEach(function (id) {\n            if (!hasOwn.call(_this.policies.rootTypenamesById, id)) {\n                extraRootIds.push(id);\n            }\n        });\n        if (extraRootIds.length) {\n            obj.__META = { extraRootIds: extraRootIds.sort() };\n        }\n        return obj;\n    };\n    EntityStore.prototype.replace = function (newData) {\n        var _this = this;\n        Object.keys(this.data).forEach(function (dataId) {\n            if (!(newData && hasOwn.call(newData, dataId))) {\n                _this.delete(dataId);\n            }\n        });\n        if (newData) {\n            var __META = newData.__META, rest_1 = __rest(newData, [\"__META\"]);\n            Object.keys(rest_1).forEach(function (dataId) {\n                _this.merge(dataId, rest_1[dataId]);\n            });\n            if (__META) {\n                __META.extraRootIds.forEach(this.retain, this);\n            }\n        }\n    };\n    EntityStore.prototype.retain = function (rootId) {\n        return this.rootIds[rootId] = (this.rootIds[rootId] || 0) + 1;\n    };\n    EntityStore.prototype.release = function (rootId) {\n        if (this.rootIds[rootId] > 0) {\n            var count = --this.rootIds[rootId];\n            if (!count)\n                delete this.rootIds[rootId];\n            return count;\n        }\n        return 0;\n    };\n    EntityStore.prototype.getRootIdSet = function (ids) {\n        if (ids === void 0) { ids = new Set(); }\n        Object.keys(this.rootIds).forEach(ids.add, ids);\n        if (this instanceof Layer) {\n            this.parent.getRootIdSet(ids);\n        }\n        else {\n            Object.keys(this.policies.rootTypenamesById).forEach(ids.add, ids);\n        }\n        return ids;\n    };\n    EntityStore.prototype.gc = function () {\n        var _this = this;\n        var ids = this.getRootIdSet();\n        var snapshot = this.toObject();\n        ids.forEach(function (id) {\n            if (hasOwn.call(snapshot, id)) {\n                Object.keys(_this.findChildRefIds(id)).forEach(ids.add, ids);\n                delete snapshot[id];\n            }\n        });\n        var idsToRemove = Object.keys(snapshot);\n        if (idsToRemove.length) {\n            var root_1 = this;\n            while (root_1 instanceof Layer)\n                root_1 = root_1.parent;\n            idsToRemove.forEach(function (id) { return root_1.delete(id); });\n        }\n        return idsToRemove;\n    };\n    EntityStore.prototype.findChildRefIds = function (dataId) {\n        if (!hasOwn.call(this.refs, dataId)) {\n            var found_1 = this.refs[dataId] = Object.create(null);\n            var root = this.data[dataId];\n            if (!root)\n                return found_1;\n            var workSet_1 = new Set([root]);\n            workSet_1.forEach(function (obj) {\n                if (isReference(obj)) {\n                    found_1[obj.__ref] = true;\n                }\n                if (isNonNullObject(obj)) {\n                    Object.keys(obj).forEach(function (key) {\n                        var child = obj[key];\n                        if (isNonNullObject(child)) {\n                            workSet_1.add(child);\n                        }\n                    });\n                }\n            });\n        }\n        return this.refs[dataId];\n    };\n    EntityStore.prototype.makeCacheKey = function () {\n        return this.group.keyMaker.lookupArray(arguments);\n    };\n    return EntityStore;\n}());\nexport { EntityStore };\nvar CacheGroup = (function () {\n    function CacheGroup(caching, parent) {\n        if (parent === void 0) { parent = null; }\n        this.caching = caching;\n        this.parent = parent;\n        this.d = null;\n        this.resetCaching();\n    }\n    CacheGroup.prototype.resetCaching = function () {\n        this.d = this.caching ? dep() : null;\n        this.keyMaker = new Trie(canUseWeakMap);\n    };\n    CacheGroup.prototype.depend = function (dataId, storeFieldName) {\n        if (this.d) {\n            this.d(makeDepKey(dataId, storeFieldName));\n            var fieldName = fieldNameFromStoreName(storeFieldName);\n            if (fieldName !== storeFieldName) {\n                this.d(makeDepKey(dataId, fieldName));\n            }\n            if (this.parent) {\n                this.parent.depend(dataId, storeFieldName);\n            }\n        }\n    };\n    CacheGroup.prototype.dirty = function (dataId, storeFieldName) {\n        if (this.d) {\n            this.d.dirty(makeDepKey(dataId, storeFieldName), storeFieldName === \"__exists\" ? \"forget\" : \"setDirty\");\n        }\n    };\n    return CacheGroup;\n}());\nfunction makeDepKey(dataId, storeFieldName) {\n    return storeFieldName + '#' + dataId;\n}\nexport function maybeDependOnExistenceOfEntity(store, entityId) {\n    if (supportsResultCaching(store)) {\n        store.group.depend(entityId, \"__exists\");\n    }\n}\n(function (EntityStore) {\n    var Root = (function (_super) {\n        __extends(Root, _super);\n        function Root(_a) {\n            var policies = _a.policies, _b = _a.resultCaching, resultCaching = _b === void 0 ? true : _b, seed = _a.seed;\n            var _this = _super.call(this, policies, new CacheGroup(resultCaching)) || this;\n            _this.stump = new Stump(_this);\n            _this.storageTrie = new Trie(canUseWeakMap);\n            if (seed)\n                _this.replace(seed);\n            return _this;\n        }\n        Root.prototype.addLayer = function (layerId, replay) {\n            return this.stump.addLayer(layerId, replay);\n        };\n        Root.prototype.removeLayer = function () {\n            return this;\n        };\n        Root.prototype.getStorage = function () {\n            return this.storageTrie.lookupArray(arguments);\n        };\n        return Root;\n    }(EntityStore));\n    EntityStore.Root = Root;\n})(EntityStore || (EntityStore = {}));\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer(id, parent, replay, group) {\n        var _this = _super.call(this, parent.policies, group) || this;\n        _this.id = id;\n        _this.parent = parent;\n        _this.replay = replay;\n        _this.group = group;\n        replay(_this);\n        return _this;\n    }\n    Layer.prototype.addLayer = function (layerId, replay) {\n        return new Layer(layerId, this, replay, this.group);\n    };\n    Layer.prototype.removeLayer = function (layerId) {\n        var _this = this;\n        var parent = this.parent.removeLayer(layerId);\n        if (layerId === this.id) {\n            if (this.group.caching) {\n                Object.keys(this.data).forEach(function (dataId) {\n                    var ownStoreObject = _this.data[dataId];\n                    var parentStoreObject = parent[\"lookup\"](dataId);\n                    if (!parentStoreObject) {\n                        _this.delete(dataId);\n                    }\n                    else if (!ownStoreObject) {\n                        _this.group.dirty(dataId, \"__exists\");\n                        Object.keys(parentStoreObject).forEach(function (storeFieldName) {\n                            _this.group.dirty(dataId, storeFieldName);\n                        });\n                    }\n                    else if (ownStoreObject !== parentStoreObject) {\n                        Object.keys(ownStoreObject).forEach(function (storeFieldName) {\n                            if (!equal(ownStoreObject[storeFieldName], parentStoreObject[storeFieldName])) {\n                                _this.group.dirty(dataId, storeFieldName);\n                            }\n                        });\n                    }\n                });\n            }\n            return parent;\n        }\n        if (parent === this.parent)\n            return this;\n        return parent.addLayer(this.id, this.replay);\n    };\n    Layer.prototype.toObject = function () {\n        return __assign(__assign({}, this.parent.toObject()), this.data);\n    };\n    Layer.prototype.findChildRefIds = function (dataId) {\n        var fromParent = this.parent.findChildRefIds(dataId);\n        return hasOwn.call(this.data, dataId) ? __assign(__assign({}, fromParent), _super.prototype.findChildRefIds.call(this, dataId)) : fromParent;\n    };\n    Layer.prototype.getStorage = function () {\n        var p = this.parent;\n        while (p.parent)\n            p = p.parent;\n        return p.getStorage.apply(p, arguments);\n    };\n    return Layer;\n}(EntityStore));\nvar Stump = (function (_super) {\n    __extends(Stump, _super);\n    function Stump(root) {\n        return _super.call(this, \"EntityStore.Stump\", root, function () { }, new CacheGroup(root.group.caching, root.group)) || this;\n    }\n    Stump.prototype.removeLayer = function () {\n        return this;\n    };\n    Stump.prototype.merge = function () {\n        return this.parent.merge.apply(this.parent, arguments);\n    };\n    return Stump;\n}(Layer));\nfunction storeObjectReconciler(existingObject, incomingObject, property) {\n    var existingValue = existingObject[property];\n    var incomingValue = incomingObject[property];\n    return equal(existingValue, incomingValue) ? existingValue : incomingValue;\n}\nexport function supportsResultCaching(store) {\n    return !!(store instanceof EntityStore && store.group.caching);\n}\n//# sourceMappingURL=entityStore.js.map", "import { __assign } from \"tslib\";\nimport \"../../utilities/globals\";\nimport { Trie } from \"@wry/trie\";\nimport { canUseWeakMap, canUseWeakSet, isNonNullObject as isObjectOrArray, } from \"../../utilities\";\nimport { isArray } from \"./helpers\";\nfunction shallowCopy(value) {\n    if (isObjectOrArray(value)) {\n        return isArray(value)\n            ? value.slice(0)\n            : __assign({ __proto__: Object.getPrototypeOf(value) }, value);\n    }\n    return value;\n}\nvar ObjectCanon = (function () {\n    function ObjectCanon() {\n        this.known = new (canUseWeakSet ? WeakSet : Set)();\n        this.pool = new Trie(canUseWeakMap);\n        this.passes = new WeakMap();\n        this.keysByJSON = new Map();\n        this.empty = this.admit({});\n    }\n    ObjectCanon.prototype.isKnown = function (value) {\n        return isObjectOrArray(value) && this.known.has(value);\n    };\n    ObjectCanon.prototype.pass = function (value) {\n        if (isObjectOrArray(value)) {\n            var copy = shallowCopy(value);\n            this.passes.set(copy, value);\n            return copy;\n        }\n        return value;\n    };\n    ObjectCanon.prototype.admit = function (value) {\n        var _this = this;\n        if (isObjectOrArray(value)) {\n            var original = this.passes.get(value);\n            if (original)\n                return original;\n            var proto = Object.getPrototypeOf(value);\n            switch (proto) {\n                case Array.prototype: {\n                    if (this.known.has(value))\n                        return value;\n                    var array = value.map(this.admit, this);\n                    var node = this.pool.lookupArray(array);\n                    if (!node.array) {\n                        this.known.add(node.array = array);\n                        if (__DEV__) {\n                            Object.freeze(array);\n                        }\n                    }\n                    return node.array;\n                }\n                case null:\n                case Object.prototype: {\n                    if (this.known.has(value))\n                        return value;\n                    var proto_1 = Object.getPrototypeOf(value);\n                    var array_1 = [proto_1];\n                    var keys = this.sortedKeys(value);\n                    array_1.push(keys.json);\n                    var firstValueIndex_1 = array_1.length;\n                    keys.sorted.forEach(function (key) {\n                        array_1.push(_this.admit(value[key]));\n                    });\n                    var node = this.pool.lookupArray(array_1);\n                    if (!node.object) {\n                        var obj_1 = node.object = Object.create(proto_1);\n                        this.known.add(obj_1);\n                        keys.sorted.forEach(function (key, i) {\n                            obj_1[key] = array_1[firstValueIndex_1 + i];\n                        });\n                        if (__DEV__) {\n                            Object.freeze(obj_1);\n                        }\n                    }\n                    return node.object;\n                }\n            }\n        }\n        return value;\n    };\n    ObjectCanon.prototype.sortedKeys = function (obj) {\n        var keys = Object.keys(obj);\n        var node = this.pool.lookupArray(keys);\n        if (!node.keys) {\n            keys.sort();\n            var json = JSON.stringify(keys);\n            if (!(node.keys = this.keysByJSON.get(json))) {\n                this.keysByJSON.set(json, node.keys = { sorted: keys, json: json });\n            }\n        }\n        return node.keys;\n    };\n    return ObjectCanon;\n}());\nexport { ObjectCanon };\nexport var canonicalStringify = Object.assign(function (value) {\n    if (isObjectOrArray(value)) {\n        if (stringifyCanon === void 0) {\n            resetCanonicalStringify();\n        }\n        var canonical = stringifyCanon.admit(value);\n        var json = stringifyCache.get(canonical);\n        if (json === void 0) {\n            stringifyCache.set(canonical, json = JSON.stringify(canonical));\n        }\n        return json;\n    }\n    return JSON.stringify(value);\n}, {\n    reset: resetCanonicalStringify,\n});\nvar stringifyCanon;\nvar stringifyCache;\nfunction resetCanonicalStringify() {\n    stringifyCanon = new ObjectCanon;\n    stringifyCache = new (canUseWeakMap ? WeakMap : Map)();\n}\n//# sourceMappingURL=object-canon.js.map", "import { __assign } from \"tslib\";\nimport { invariant } from '../../utilities/globals';\nimport { wrap } from 'optimism';\nimport { isField, resultKeyNameFromField, isReference, makeReference, createFragmentMap, shouldInclude, addTypenameToDocument, getDefaultValues, getFragmentDefinitions, getMainDefinition, getQueryDefinition, getFragmentFromSelection, maybeDeepFreeze, mergeDeepArray, DeepMerger, isNonNullObject, canUseWeakMap, compact, } from '../../utilities';\nimport { maybeDependOnExistenceOfEntity, supportsResultCaching } from './entityStore';\nimport { getTypenameFromStoreObject, isArray, shouldCanonizeResults } from './helpers';\nimport { MissingFieldError } from '../core/types/common';\nimport { canonicalStringify, ObjectCanon } from './object-canon';\n;\nfunction execSelectionSetKeyArgs(options) {\n    return [\n        options.selectionSet,\n        options.objectOrReference,\n        options.context,\n        options.context.canonizeResults,\n    ];\n}\nvar StoreReader = (function () {\n    function StoreReader(config) {\n        var _this = this;\n        this.knownResults = new (canUseWeakMap ? WeakMap : Map)();\n        this.config = compact(config, {\n            addTypename: config.addTypename !== false,\n            canonizeResults: shouldCanonizeResults(config),\n        });\n        this.canon = config.canon || new ObjectCanon;\n        this.executeSelectionSet = wrap(function (options) {\n            var _a;\n            var canonizeResults = options.context.canonizeResults;\n            var peekArgs = execSelectionSetKeyArgs(options);\n            peekArgs[3] = !canonizeResults;\n            var other = (_a = _this.executeSelectionSet).peek.apply(_a, peekArgs);\n            if (other) {\n                if (canonizeResults) {\n                    return __assign(__assign({}, other), { result: _this.canon.admit(other.result) });\n                }\n                return other;\n            }\n            maybeDependOnExistenceOfEntity(options.context.store, options.enclosingRef.__ref);\n            return _this.execSelectionSetImpl(options);\n        }, {\n            max: this.config.resultCacheMaxSize,\n            keyArgs: execSelectionSetKeyArgs,\n            makeCacheKey: function (selectionSet, parent, context, canonizeResults) {\n                if (supportsResultCaching(context.store)) {\n                    return context.store.makeCacheKey(selectionSet, isReference(parent) ? parent.__ref : parent, context.varString, canonizeResults);\n                }\n            }\n        });\n        this.executeSubSelectedArray = wrap(function (options) {\n            maybeDependOnExistenceOfEntity(options.context.store, options.enclosingRef.__ref);\n            return _this.execSubSelectedArrayImpl(options);\n        }, {\n            max: this.config.resultCacheMaxSize,\n            makeCacheKey: function (_a) {\n                var field = _a.field, array = _a.array, context = _a.context;\n                if (supportsResultCaching(context.store)) {\n                    return context.store.makeCacheKey(field, array, context.varString);\n                }\n            }\n        });\n    }\n    StoreReader.prototype.resetCanon = function () {\n        this.canon = new ObjectCanon;\n    };\n    StoreReader.prototype.diffQueryAgainstStore = function (_a) {\n        var store = _a.store, query = _a.query, _b = _a.rootId, rootId = _b === void 0 ? 'ROOT_QUERY' : _b, variables = _a.variables, _c = _a.returnPartialData, returnPartialData = _c === void 0 ? true : _c, _d = _a.canonizeResults, canonizeResults = _d === void 0 ? this.config.canonizeResults : _d;\n        var policies = this.config.cache.policies;\n        variables = __assign(__assign({}, getDefaultValues(getQueryDefinition(query))), variables);\n        var rootRef = makeReference(rootId);\n        var execResult = this.executeSelectionSet({\n            selectionSet: getMainDefinition(query).selectionSet,\n            objectOrReference: rootRef,\n            enclosingRef: rootRef,\n            context: {\n                store: store,\n                query: query,\n                policies: policies,\n                variables: variables,\n                varString: canonicalStringify(variables),\n                canonizeResults: canonizeResults,\n                fragmentMap: createFragmentMap(getFragmentDefinitions(query)),\n            },\n        });\n        var missing;\n        if (execResult.missing) {\n            missing = [new MissingFieldError(firstMissing(execResult.missing), execResult.missing, query, variables)];\n            if (!returnPartialData) {\n                throw missing[0];\n            }\n        }\n        return {\n            result: execResult.result,\n            complete: !missing,\n            missing: missing,\n        };\n    };\n    StoreReader.prototype.isFresh = function (result, parent, selectionSet, context) {\n        if (supportsResultCaching(context.store) &&\n            this.knownResults.get(result) === selectionSet) {\n            var latest = this.executeSelectionSet.peek(selectionSet, parent, context, this.canon.isKnown(result));\n            if (latest && result === latest.result) {\n                return true;\n            }\n        }\n        return false;\n    };\n    StoreReader.prototype.execSelectionSetImpl = function (_a) {\n        var _this = this;\n        var selectionSet = _a.selectionSet, objectOrReference = _a.objectOrReference, enclosingRef = _a.enclosingRef, context = _a.context;\n        if (isReference(objectOrReference) &&\n            !context.policies.rootTypenamesById[objectOrReference.__ref] &&\n            !context.store.has(objectOrReference.__ref)) {\n            return {\n                result: this.canon.empty,\n                missing: \"Dangling reference to missing \".concat(objectOrReference.__ref, \" object\"),\n            };\n        }\n        var variables = context.variables, policies = context.policies, store = context.store;\n        var typename = store.getFieldValue(objectOrReference, \"__typename\");\n        var objectsToMerge = [];\n        var missing;\n        var missingMerger = new DeepMerger();\n        if (this.config.addTypename &&\n            typeof typename === \"string\" &&\n            !policies.rootIdsByTypename[typename]) {\n            objectsToMerge.push({ __typename: typename });\n        }\n        function handleMissing(result, resultName) {\n            var _a;\n            if (result.missing) {\n                missing = missingMerger.merge(missing, (_a = {}, _a[resultName] = result.missing, _a));\n            }\n            return result.result;\n        }\n        var workSet = new Set(selectionSet.selections);\n        workSet.forEach(function (selection) {\n            var _a, _b;\n            if (!shouldInclude(selection, variables))\n                return;\n            if (isField(selection)) {\n                var fieldValue = policies.readField({\n                    fieldName: selection.name.value,\n                    field: selection,\n                    variables: context.variables,\n                    from: objectOrReference,\n                }, context);\n                var resultName = resultKeyNameFromField(selection);\n                if (fieldValue === void 0) {\n                    if (!addTypenameToDocument.added(selection)) {\n                        missing = missingMerger.merge(missing, (_a = {},\n                            _a[resultName] = \"Can't find field '\".concat(selection.name.value, \"' on \").concat(isReference(objectOrReference)\n                                ? objectOrReference.__ref + \" object\"\n                                : \"object \" + JSON.stringify(objectOrReference, null, 2)),\n                            _a));\n                    }\n                }\n                else if (isArray(fieldValue)) {\n                    fieldValue = handleMissing(_this.executeSubSelectedArray({\n                        field: selection,\n                        array: fieldValue,\n                        enclosingRef: enclosingRef,\n                        context: context,\n                    }), resultName);\n                }\n                else if (!selection.selectionSet) {\n                    if (context.canonizeResults) {\n                        fieldValue = _this.canon.pass(fieldValue);\n                    }\n                }\n                else if (fieldValue != null) {\n                    fieldValue = handleMissing(_this.executeSelectionSet({\n                        selectionSet: selection.selectionSet,\n                        objectOrReference: fieldValue,\n                        enclosingRef: isReference(fieldValue) ? fieldValue : enclosingRef,\n                        context: context,\n                    }), resultName);\n                }\n                if (fieldValue !== void 0) {\n                    objectsToMerge.push((_b = {}, _b[resultName] = fieldValue, _b));\n                }\n            }\n            else {\n                var fragment = getFragmentFromSelection(selection, context.fragmentMap);\n                if (fragment && policies.fragmentMatches(fragment, typename)) {\n                    fragment.selectionSet.selections.forEach(workSet.add, workSet);\n                }\n            }\n        });\n        var result = mergeDeepArray(objectsToMerge);\n        var finalResult = { result: result, missing: missing };\n        var frozen = context.canonizeResults\n            ? this.canon.admit(finalResult)\n            : maybeDeepFreeze(finalResult);\n        if (frozen.result) {\n            this.knownResults.set(frozen.result, selectionSet);\n        }\n        return frozen;\n    };\n    StoreReader.prototype.execSubSelectedArrayImpl = function (_a) {\n        var _this = this;\n        var field = _a.field, array = _a.array, enclosingRef = _a.enclosingRef, context = _a.context;\n        var missing;\n        var missingMerger = new DeepMerger();\n        function handleMissing(childResult, i) {\n            var _a;\n            if (childResult.missing) {\n                missing = missingMerger.merge(missing, (_a = {}, _a[i] = childResult.missing, _a));\n            }\n            return childResult.result;\n        }\n        if (field.selectionSet) {\n            array = array.filter(context.store.canRead);\n        }\n        array = array.map(function (item, i) {\n            if (item === null) {\n                return null;\n            }\n            if (isArray(item)) {\n                return handleMissing(_this.executeSubSelectedArray({\n                    field: field,\n                    array: item,\n                    enclosingRef: enclosingRef,\n                    context: context,\n                }), i);\n            }\n            if (field.selectionSet) {\n                return handleMissing(_this.executeSelectionSet({\n                    selectionSet: field.selectionSet,\n                    objectOrReference: item,\n                    enclosingRef: isReference(item) ? item : enclosingRef,\n                    context: context,\n                }), i);\n            }\n            if (__DEV__) {\n                assertSelectionSetForIdValue(context.store, field, item);\n            }\n            return item;\n        });\n        return {\n            result: context.canonizeResults ? this.canon.admit(array) : array,\n            missing: missing,\n        };\n    };\n    return StoreReader;\n}());\nexport { StoreReader };\nfunction firstMissing(tree) {\n    try {\n        JSON.stringify(tree, function (_, value) {\n            if (typeof value === \"string\")\n                throw value;\n            return value;\n        });\n    }\n    catch (result) {\n        return result;\n    }\n}\nfunction assertSelectionSetForIdValue(store, field, fieldValue) {\n    if (!field.selectionSet) {\n        var workSet_1 = new Set([fieldValue]);\n        workSet_1.forEach(function (value) {\n            if (isNonNullObject(value)) {\n                __DEV__ ? invariant(!isReference(value), \"Missing selection set for object of type \".concat(getTypenameFromStoreObject(store, value), \" returned for query field \").concat(field.name.value)) : invariant(!isReference(value), 5);\n                Object.values(value).forEach(workSet_1.add, workSet_1);\n            }\n        });\n    }\n}\n//# sourceMappingURL=readFromStore.js.map", "import { dep } from \"optimism\";\nimport { Slot } from \"@wry/context\";\nexport var cacheSlot = new Slot();\nvar cacheInfoMap = new WeakMap();\nfunction getCacheInfo(cache) {\n    var info = cacheInfoMap.get(cache);\n    if (!info) {\n        cacheInfoMap.set(cache, info = {\n            vars: new Set,\n            dep: dep(),\n        });\n    }\n    return info;\n}\nexport function forgetCache(cache) {\n    getCacheInfo(cache).vars.forEach(function (rv) { return rv.forgetCache(cache); });\n}\nexport function recallCache(cache) {\n    getCacheInfo(cache).vars.forEach(function (rv) { return rv.attachCache(cache); });\n}\nexport function makeVar(value) {\n    var caches = new Set();\n    var listeners = new Set();\n    var rv = function (newValue) {\n        if (arguments.length > 0) {\n            if (value !== newValue) {\n                value = newValue;\n                caches.forEach(function (cache) {\n                    getCacheInfo(cache).dep.dirty(rv);\n                    broadcast(cache);\n                });\n                var oldListeners = Array.from(listeners);\n                listeners.clear();\n                oldListeners.forEach(function (listener) { return listener(value); });\n            }\n        }\n        else {\n            var cache = cacheSlot.getValue();\n            if (cache) {\n                attach(cache);\n                getCacheInfo(cache).dep(rv);\n            }\n        }\n        return value;\n    };\n    rv.onNextChange = function (listener) {\n        listeners.add(listener);\n        return function () {\n            listeners.delete(listener);\n        };\n    };\n    var attach = rv.attachCache = function (cache) {\n        caches.add(cache);\n        getCacheInfo(cache).vars.add(rv);\n        return rv;\n    };\n    rv.forgetCache = function (cache) { return caches.delete(cache); };\n    return rv;\n}\nfunction broadcast(cache) {\n    if (cache.broadcastWatches) {\n        cache.broadcastWatches();\n    }\n}\n//# sourceMappingURL=reactiveVars.js.map", "import { invariant } from \"../../utilities/globals\";\nimport { argumentsObjectFromField, DeepMerger, isNonEmptyArray, isNonNullObject, } from \"../../utilities\";\nimport { hasOwn, isArray } from \"./helpers\";\nvar specifierInfoCache = Object.create(null);\nfunction lookupSpecifierInfo(spec) {\n    var cacheKey = JSON.stringify(spec);\n    return specifierInfoCache[cacheKey] ||\n        (specifierInfoCache[cacheKey] = Object.create(null));\n}\nexport function keyFieldsFnFromSpecifier(specifier) {\n    var info = lookupSpecifierInfo(specifier);\n    return info.keyFieldsFn || (info.keyFieldsFn = function (object, context) {\n        var extract = function (from, key) { return context.readField(key, from); };\n        var keyObject = context.keyObject = collectSpecifierPaths(specifier, function (schemaKeyPath) {\n            var extracted = extractKeyPath(context.storeObject, schemaKeyPath, extract);\n            if (extracted === void 0 &&\n                object !== context.storeObject &&\n                hasOwn.call(object, schemaKeyPath[0])) {\n                extracted = extractKeyPath(object, schemaKeyPath, extractKey);\n            }\n            __DEV__ ? invariant(extracted !== void 0, \"Missing field '\".concat(schemaKeyPath.join('.'), \"' while extracting keyFields from \").concat(JSON.stringify(object))) : invariant(extracted !== void 0, 2);\n            return extracted;\n        });\n        return \"\".concat(context.typename, \":\").concat(JSON.stringify(keyObject));\n    });\n}\nexport function keyArgsFnFromSpecifier(specifier) {\n    var info = lookupSpecifierInfo(specifier);\n    return info.keyArgsFn || (info.keyArgsFn = function (args, _a) {\n        var field = _a.field, variables = _a.variables, fieldName = _a.fieldName;\n        var collected = collectSpecifierPaths(specifier, function (keyPath) {\n            var firstKey = keyPath[0];\n            var firstChar = firstKey.charAt(0);\n            if (firstChar === \"@\") {\n                if (field && isNonEmptyArray(field.directives)) {\n                    var directiveName_1 = firstKey.slice(1);\n                    var d = field.directives.find(function (d) { return d.name.value === directiveName_1; });\n                    var directiveArgs = d && argumentsObjectFromField(d, variables);\n                    return directiveArgs && extractKeyPath(directiveArgs, keyPath.slice(1));\n                }\n                return;\n            }\n            if (firstChar === \"$\") {\n                var variableName = firstKey.slice(1);\n                if (variables && hasOwn.call(variables, variableName)) {\n                    var varKeyPath = keyPath.slice(0);\n                    varKeyPath[0] = variableName;\n                    return extractKeyPath(variables, varKeyPath);\n                }\n                return;\n            }\n            if (args) {\n                return extractKeyPath(args, keyPath);\n            }\n        });\n        var suffix = JSON.stringify(collected);\n        if (args || suffix !== \"{}\") {\n            fieldName += \":\" + suffix;\n        }\n        return fieldName;\n    });\n}\nexport function collectSpecifierPaths(specifier, extractor) {\n    var merger = new DeepMerger;\n    return getSpecifierPaths(specifier).reduce(function (collected, path) {\n        var _a;\n        var toMerge = extractor(path);\n        if (toMerge !== void 0) {\n            for (var i = path.length - 1; i >= 0; --i) {\n                toMerge = (_a = {}, _a[path[i]] = toMerge, _a);\n            }\n            collected = merger.merge(collected, toMerge);\n        }\n        return collected;\n    }, Object.create(null));\n}\nexport function getSpecifierPaths(spec) {\n    var info = lookupSpecifierInfo(spec);\n    if (!info.paths) {\n        var paths_1 = info.paths = [];\n        var currentPath_1 = [];\n        spec.forEach(function (s, i) {\n            if (isArray(s)) {\n                getSpecifierPaths(s).forEach(function (p) { return paths_1.push(currentPath_1.concat(p)); });\n                currentPath_1.length = 0;\n            }\n            else {\n                currentPath_1.push(s);\n                if (!isArray(spec[i + 1])) {\n                    paths_1.push(currentPath_1.slice(0));\n                    currentPath_1.length = 0;\n                }\n            }\n        });\n    }\n    return info.paths;\n}\nfunction extractKey(object, key) {\n    return object[key];\n}\nexport function extractKeyPath(object, path, extract) {\n    extract = extract || extractKey;\n    return normalize(path.reduce(function reducer(obj, key) {\n        return isArray(obj)\n            ? obj.map(function (child) { return reducer(child, key); })\n            : obj && extract(obj, key);\n    }, object));\n}\nfunction normalize(value) {\n    if (isNonNullObject(value)) {\n        if (isArray(value)) {\n            return value.map(normalize);\n        }\n        return collectSpecifierPaths(Object.keys(value).sort(), function (path) { return extractKeyPath(value, path); });\n    }\n    return value;\n}\n//# sourceMappingURL=key-extractor.js.map", "import { __assign, __rest } from \"tslib\";\nimport { invariant, InvariantError } from '../../utilities/globals';\nimport { storeKeyNameFromField, argumentsObjectFromField, isReference, getStoreKeyName, isNonNullObject, stringifyForDisplay, } from '../../utilities';\nimport { hasOwn, fieldNameFromStoreName, storeValueIsStoreObject, selectionSetMatchesResult, TypeOrFieldNameRegExp, defaultDataIdFromObject, isArray, } from './helpers';\nimport { cacheSlot } from './reactiveVars';\nimport { canonicalStringify } from './object-canon';\nimport { keyArgsFnFromSpecifier, keyFieldsFnFromSpecifier } from './key-extractor';\ngetStoreKeyName.setStringify(canonicalStringify);\nfunction argsFromFieldSpecifier(spec) {\n    return spec.args !== void 0 ? spec.args :\n        spec.field ? argumentsObjectFromField(spec.field, spec.variables) : null;\n}\nvar nullKeyFieldsFn = function () { return void 0; };\nvar simpleKeyArgsFn = function (_args, context) { return context.fieldName; };\nvar mergeTrueFn = function (existing, incoming, _a) {\n    var mergeObjects = _a.mergeObjects;\n    return mergeObjects(existing, incoming);\n};\nvar mergeFalseFn = function (_, incoming) { return incoming; };\nvar Policies = (function () {\n    function Policies(config) {\n        this.config = config;\n        this.typePolicies = Object.create(null);\n        this.toBeAdded = Object.create(null);\n        this.supertypeMap = new Map();\n        this.fuzzySubtypes = new Map();\n        this.rootIdsByTypename = Object.create(null);\n        this.rootTypenamesById = Object.create(null);\n        this.usingPossibleTypes = false;\n        this.config = __assign({ dataIdFromObject: defaultDataIdFromObject }, config);\n        this.cache = this.config.cache;\n        this.setRootTypename(\"Query\");\n        this.setRootTypename(\"Mutation\");\n        this.setRootTypename(\"Subscription\");\n        if (config.possibleTypes) {\n            this.addPossibleTypes(config.possibleTypes);\n        }\n        if (config.typePolicies) {\n            this.addTypePolicies(config.typePolicies);\n        }\n    }\n    Policies.prototype.identify = function (object, partialContext) {\n        var _a;\n        var policies = this;\n        var typename = partialContext && (partialContext.typename ||\n            ((_a = partialContext.storeObject) === null || _a === void 0 ? void 0 : _a.__typename)) || object.__typename;\n        if (typename === this.rootTypenamesById.ROOT_QUERY) {\n            return [\"ROOT_QUERY\"];\n        }\n        var storeObject = partialContext && partialContext.storeObject || object;\n        var context = __assign(__assign({}, partialContext), { typename: typename, storeObject: storeObject, readField: partialContext && partialContext.readField || function () {\n                var options = normalizeReadFieldOptions(arguments, storeObject);\n                return policies.readField(options, {\n                    store: policies.cache[\"data\"],\n                    variables: options.variables,\n                });\n            } });\n        var id;\n        var policy = typename && this.getTypePolicy(typename);\n        var keyFn = policy && policy.keyFn || this.config.dataIdFromObject;\n        while (keyFn) {\n            var specifierOrId = keyFn(object, context);\n            if (isArray(specifierOrId)) {\n                keyFn = keyFieldsFnFromSpecifier(specifierOrId);\n            }\n            else {\n                id = specifierOrId;\n                break;\n            }\n        }\n        id = id ? String(id) : void 0;\n        return context.keyObject ? [id, context.keyObject] : [id];\n    };\n    Policies.prototype.addTypePolicies = function (typePolicies) {\n        var _this = this;\n        Object.keys(typePolicies).forEach(function (typename) {\n            var _a = typePolicies[typename], queryType = _a.queryType, mutationType = _a.mutationType, subscriptionType = _a.subscriptionType, incoming = __rest(_a, [\"queryType\", \"mutationType\", \"subscriptionType\"]);\n            if (queryType)\n                _this.setRootTypename(\"Query\", typename);\n            if (mutationType)\n                _this.setRootTypename(\"Mutation\", typename);\n            if (subscriptionType)\n                _this.setRootTypename(\"Subscription\", typename);\n            if (hasOwn.call(_this.toBeAdded, typename)) {\n                _this.toBeAdded[typename].push(incoming);\n            }\n            else {\n                _this.toBeAdded[typename] = [incoming];\n            }\n        });\n    };\n    Policies.prototype.updateTypePolicy = function (typename, incoming) {\n        var _this = this;\n        var existing = this.getTypePolicy(typename);\n        var keyFields = incoming.keyFields, fields = incoming.fields;\n        function setMerge(existing, merge) {\n            existing.merge =\n                typeof merge === \"function\" ? merge :\n                    merge === true ? mergeTrueFn :\n                        merge === false ? mergeFalseFn :\n                            existing.merge;\n        }\n        setMerge(existing, incoming.merge);\n        existing.keyFn =\n            keyFields === false ? nullKeyFieldsFn :\n                isArray(keyFields) ? keyFieldsFnFromSpecifier(keyFields) :\n                    typeof keyFields === \"function\" ? keyFields :\n                        existing.keyFn;\n        if (fields) {\n            Object.keys(fields).forEach(function (fieldName) {\n                var existing = _this.getFieldPolicy(typename, fieldName, true);\n                var incoming = fields[fieldName];\n                if (typeof incoming === \"function\") {\n                    existing.read = incoming;\n                }\n                else {\n                    var keyArgs = incoming.keyArgs, read = incoming.read, merge = incoming.merge;\n                    existing.keyFn =\n                        keyArgs === false ? simpleKeyArgsFn :\n                            isArray(keyArgs) ? keyArgsFnFromSpecifier(keyArgs) :\n                                typeof keyArgs === \"function\" ? keyArgs :\n                                    existing.keyFn;\n                    if (typeof read === \"function\") {\n                        existing.read = read;\n                    }\n                    setMerge(existing, merge);\n                }\n                if (existing.read && existing.merge) {\n                    existing.keyFn = existing.keyFn || simpleKeyArgsFn;\n                }\n            });\n        }\n    };\n    Policies.prototype.setRootTypename = function (which, typename) {\n        if (typename === void 0) { typename = which; }\n        var rootId = \"ROOT_\" + which.toUpperCase();\n        var old = this.rootTypenamesById[rootId];\n        if (typename !== old) {\n            __DEV__ ? invariant(!old || old === which, \"Cannot change root \".concat(which, \" __typename more than once\")) : invariant(!old || old === which, 3);\n            if (old)\n                delete this.rootIdsByTypename[old];\n            this.rootIdsByTypename[typename] = rootId;\n            this.rootTypenamesById[rootId] = typename;\n        }\n    };\n    Policies.prototype.addPossibleTypes = function (possibleTypes) {\n        var _this = this;\n        this.usingPossibleTypes = true;\n        Object.keys(possibleTypes).forEach(function (supertype) {\n            _this.getSupertypeSet(supertype, true);\n            possibleTypes[supertype].forEach(function (subtype) {\n                _this.getSupertypeSet(subtype, true).add(supertype);\n                var match = subtype.match(TypeOrFieldNameRegExp);\n                if (!match || match[0] !== subtype) {\n                    _this.fuzzySubtypes.set(subtype, new RegExp(subtype));\n                }\n            });\n        });\n    };\n    Policies.prototype.getTypePolicy = function (typename) {\n        var _this = this;\n        if (!hasOwn.call(this.typePolicies, typename)) {\n            var policy_1 = this.typePolicies[typename] = Object.create(null);\n            policy_1.fields = Object.create(null);\n            var supertypes = this.supertypeMap.get(typename);\n            if (supertypes && supertypes.size) {\n                supertypes.forEach(function (supertype) {\n                    var _a = _this.getTypePolicy(supertype), fields = _a.fields, rest = __rest(_a, [\"fields\"]);\n                    Object.assign(policy_1, rest);\n                    Object.assign(policy_1.fields, fields);\n                });\n            }\n        }\n        var inbox = this.toBeAdded[typename];\n        if (inbox && inbox.length) {\n            inbox.splice(0).forEach(function (policy) {\n                _this.updateTypePolicy(typename, policy);\n            });\n        }\n        return this.typePolicies[typename];\n    };\n    Policies.prototype.getFieldPolicy = function (typename, fieldName, createIfMissing) {\n        if (typename) {\n            var fieldPolicies = this.getTypePolicy(typename).fields;\n            return fieldPolicies[fieldName] || (createIfMissing && (fieldPolicies[fieldName] = Object.create(null)));\n        }\n    };\n    Policies.prototype.getSupertypeSet = function (subtype, createIfMissing) {\n        var supertypeSet = this.supertypeMap.get(subtype);\n        if (!supertypeSet && createIfMissing) {\n            this.supertypeMap.set(subtype, supertypeSet = new Set());\n        }\n        return supertypeSet;\n    };\n    Policies.prototype.fragmentMatches = function (fragment, typename, result, variables) {\n        var _this = this;\n        if (!fragment.typeCondition)\n            return true;\n        if (!typename)\n            return false;\n        var supertype = fragment.typeCondition.name.value;\n        if (typename === supertype)\n            return true;\n        if (this.usingPossibleTypes &&\n            this.supertypeMap.has(supertype)) {\n            var typenameSupertypeSet = this.getSupertypeSet(typename, true);\n            var workQueue_1 = [typenameSupertypeSet];\n            var maybeEnqueue_1 = function (subtype) {\n                var supertypeSet = _this.getSupertypeSet(subtype, false);\n                if (supertypeSet &&\n                    supertypeSet.size &&\n                    workQueue_1.indexOf(supertypeSet) < 0) {\n                    workQueue_1.push(supertypeSet);\n                }\n            };\n            var needToCheckFuzzySubtypes = !!(result && this.fuzzySubtypes.size);\n            var checkingFuzzySubtypes = false;\n            for (var i = 0; i < workQueue_1.length; ++i) {\n                var supertypeSet = workQueue_1[i];\n                if (supertypeSet.has(supertype)) {\n                    if (!typenameSupertypeSet.has(supertype)) {\n                        if (checkingFuzzySubtypes) {\n                            __DEV__ && invariant.warn(\"Inferring subtype \".concat(typename, \" of supertype \").concat(supertype));\n                        }\n                        typenameSupertypeSet.add(supertype);\n                    }\n                    return true;\n                }\n                supertypeSet.forEach(maybeEnqueue_1);\n                if (needToCheckFuzzySubtypes &&\n                    i === workQueue_1.length - 1 &&\n                    selectionSetMatchesResult(fragment.selectionSet, result, variables)) {\n                    needToCheckFuzzySubtypes = false;\n                    checkingFuzzySubtypes = true;\n                    this.fuzzySubtypes.forEach(function (regExp, fuzzyString) {\n                        var match = typename.match(regExp);\n                        if (match && match[0] === typename) {\n                            maybeEnqueue_1(fuzzyString);\n                        }\n                    });\n                }\n            }\n        }\n        return false;\n    };\n    Policies.prototype.hasKeyArgs = function (typename, fieldName) {\n        var policy = this.getFieldPolicy(typename, fieldName, false);\n        return !!(policy && policy.keyFn);\n    };\n    Policies.prototype.getStoreFieldName = function (fieldSpec) {\n        var typename = fieldSpec.typename, fieldName = fieldSpec.fieldName;\n        var policy = this.getFieldPolicy(typename, fieldName, false);\n        var storeFieldName;\n        var keyFn = policy && policy.keyFn;\n        if (keyFn && typename) {\n            var context = {\n                typename: typename,\n                fieldName: fieldName,\n                field: fieldSpec.field || null,\n                variables: fieldSpec.variables,\n            };\n            var args = argsFromFieldSpecifier(fieldSpec);\n            while (keyFn) {\n                var specifierOrString = keyFn(args, context);\n                if (isArray(specifierOrString)) {\n                    keyFn = keyArgsFnFromSpecifier(specifierOrString);\n                }\n                else {\n                    storeFieldName = specifierOrString || fieldName;\n                    break;\n                }\n            }\n        }\n        if (storeFieldName === void 0) {\n            storeFieldName = fieldSpec.field\n                ? storeKeyNameFromField(fieldSpec.field, fieldSpec.variables)\n                : getStoreKeyName(fieldName, argsFromFieldSpecifier(fieldSpec));\n        }\n        if (storeFieldName === false) {\n            return fieldName;\n        }\n        return fieldName === fieldNameFromStoreName(storeFieldName)\n            ? storeFieldName\n            : fieldName + \":\" + storeFieldName;\n    };\n    Policies.prototype.readField = function (options, context) {\n        var objectOrReference = options.from;\n        if (!objectOrReference)\n            return;\n        var nameOrField = options.field || options.fieldName;\n        if (!nameOrField)\n            return;\n        if (options.typename === void 0) {\n            var typename = context.store.getFieldValue(objectOrReference, \"__typename\");\n            if (typename)\n                options.typename = typename;\n        }\n        var storeFieldName = this.getStoreFieldName(options);\n        var fieldName = fieldNameFromStoreName(storeFieldName);\n        var existing = context.store.getFieldValue(objectOrReference, storeFieldName);\n        var policy = this.getFieldPolicy(options.typename, fieldName, false);\n        var read = policy && policy.read;\n        if (read) {\n            var readOptions = makeFieldFunctionOptions(this, objectOrReference, options, context, context.store.getStorage(isReference(objectOrReference)\n                ? objectOrReference.__ref\n                : objectOrReference, storeFieldName));\n            return cacheSlot.withValue(this.cache, read, [existing, readOptions]);\n        }\n        return existing;\n    };\n    Policies.prototype.getReadFunction = function (typename, fieldName) {\n        var policy = this.getFieldPolicy(typename, fieldName, false);\n        return policy && policy.read;\n    };\n    Policies.prototype.getMergeFunction = function (parentTypename, fieldName, childTypename) {\n        var policy = this.getFieldPolicy(parentTypename, fieldName, false);\n        var merge = policy && policy.merge;\n        if (!merge && childTypename) {\n            policy = this.getTypePolicy(childTypename);\n            merge = policy && policy.merge;\n        }\n        return merge;\n    };\n    Policies.prototype.runMergeFunction = function (existing, incoming, _a, context, storage) {\n        var field = _a.field, typename = _a.typename, merge = _a.merge;\n        if (merge === mergeTrueFn) {\n            return makeMergeObjectsFunction(context.store)(existing, incoming);\n        }\n        if (merge === mergeFalseFn) {\n            return incoming;\n        }\n        if (context.overwrite) {\n            existing = void 0;\n        }\n        return merge(existing, incoming, makeFieldFunctionOptions(this, void 0, { typename: typename, fieldName: field.name.value, field: field, variables: context.variables }, context, storage || Object.create(null)));\n    };\n    return Policies;\n}());\nexport { Policies };\nfunction makeFieldFunctionOptions(policies, objectOrReference, fieldSpec, context, storage) {\n    var storeFieldName = policies.getStoreFieldName(fieldSpec);\n    var fieldName = fieldNameFromStoreName(storeFieldName);\n    var variables = fieldSpec.variables || context.variables;\n    var _a = context.store, toReference = _a.toReference, canRead = _a.canRead;\n    return {\n        args: argsFromFieldSpecifier(fieldSpec),\n        field: fieldSpec.field || null,\n        fieldName: fieldName,\n        storeFieldName: storeFieldName,\n        variables: variables,\n        isReference: isReference,\n        toReference: toReference,\n        storage: storage,\n        cache: policies.cache,\n        canRead: canRead,\n        readField: function () {\n            return policies.readField(normalizeReadFieldOptions(arguments, objectOrReference, context), context);\n        },\n        mergeObjects: makeMergeObjectsFunction(context.store),\n    };\n}\nexport function normalizeReadFieldOptions(readFieldArgs, objectOrReference, variables) {\n    var fieldNameOrOptions = readFieldArgs[0], from = readFieldArgs[1], argc = readFieldArgs.length;\n    var options;\n    if (typeof fieldNameOrOptions === \"string\") {\n        options = {\n            fieldName: fieldNameOrOptions,\n            from: argc > 1 ? from : objectOrReference,\n        };\n    }\n    else {\n        options = __assign({}, fieldNameOrOptions);\n        if (!hasOwn.call(options, \"from\")) {\n            options.from = objectOrReference;\n        }\n    }\n    if (__DEV__ && options.from === void 0) {\n        __DEV__ && invariant.warn(\"Undefined 'from' passed to readField with arguments \".concat(stringifyForDisplay(Array.from(readFieldArgs))));\n    }\n    if (void 0 === options.variables) {\n        options.variables = variables;\n    }\n    return options;\n}\nfunction makeMergeObjectsFunction(store) {\n    return function mergeObjects(existing, incoming) {\n        if (isArray(existing) || isArray(incoming)) {\n            throw __DEV__ ? new InvariantError(\"Cannot automatically merge arrays\") : new InvariantError(4);\n        }\n        if (isNonNullObject(existing) &&\n            isNonNullObject(incoming)) {\n            var eType = store.getFieldValue(existing, \"__typename\");\n            var iType = store.getFieldValue(incoming, \"__typename\");\n            var typesDiffer = eType && iType && eType !== iType;\n            if (typesDiffer) {\n                return incoming;\n            }\n            if (isReference(existing) &&\n                storeValueIsStoreObject(incoming)) {\n                store.merge(existing.__ref, incoming);\n                return existing;\n            }\n            if (storeValueIsStoreObject(existing) &&\n                isReference(incoming)) {\n                store.merge(existing, incoming.__ref);\n                return incoming;\n            }\n            if (storeValueIsStoreObject(existing) &&\n                storeValueIsStoreObject(incoming)) {\n                return __assign(__assign({}, existing), incoming);\n            }\n        }\n        return incoming;\n    };\n}\n//# sourceMappingURL=policies.js.map", "import { __assign } from \"tslib\";\nimport { invariant, InvariantError } from '../../utilities/globals';\nimport { equal } from '@wry/equality';\nimport { Trie } from '@wry/trie';\nimport { createFragmentMap, getFragmentFromSelection, getDefaultValues, getFragmentDefinitions, getOperationDefinition, getTypenameFromResult, makeReference, isField, resultKeyNameFromField, isReference, shouldInclude, cloneDeep, addTypenameToDocument, isNonEmptyArray, argumentsObjectFromField, } from '../../utilities';\nimport { makeProcessedFieldsMerger, fieldNameFromStoreName, storeValueIsStoreObject, isArray } from './helpers';\nimport { canonicalStringify } from './object-canon';\nimport { normalizeReadFieldOptions } from './policies';\n;\nfunction getContextFlavor(context, clientOnly, deferred) {\n    var key = \"\".concat(clientOnly).concat(deferred);\n    var flavored = context.flavors.get(key);\n    if (!flavored) {\n        context.flavors.set(key, flavored = (context.clientOnly === clientOnly &&\n            context.deferred === deferred) ? context : __assign(__assign({}, context), { clientOnly: clientOnly, deferred: deferred }));\n    }\n    return flavored;\n}\nvar StoreWriter = (function () {\n    function StoreWriter(cache, reader) {\n        this.cache = cache;\n        this.reader = reader;\n    }\n    StoreWriter.prototype.writeToStore = function (store, _a) {\n        var _this = this;\n        var query = _a.query, result = _a.result, dataId = _a.dataId, variables = _a.variables, overwrite = _a.overwrite;\n        var operationDefinition = getOperationDefinition(query);\n        var merger = makeProcessedFieldsMerger();\n        variables = __assign(__assign({}, getDefaultValues(operationDefinition)), variables);\n        var context = {\n            store: store,\n            written: Object.create(null),\n            merge: function (existing, incoming) {\n                return merger.merge(existing, incoming);\n            },\n            variables: variables,\n            varString: canonicalStringify(variables),\n            fragmentMap: createFragmentMap(getFragmentDefinitions(query)),\n            overwrite: !!overwrite,\n            incomingById: new Map,\n            clientOnly: false,\n            deferred: false,\n            flavors: new Map,\n        };\n        var ref = this.processSelectionSet({\n            result: result || Object.create(null),\n            dataId: dataId,\n            selectionSet: operationDefinition.selectionSet,\n            mergeTree: { map: new Map },\n            context: context,\n        });\n        if (!isReference(ref)) {\n            throw __DEV__ ? new InvariantError(\"Could not identify object \".concat(JSON.stringify(result))) : new InvariantError(6);\n        }\n        context.incomingById.forEach(function (_a, dataId) {\n            var storeObject = _a.storeObject, mergeTree = _a.mergeTree, fieldNodeSet = _a.fieldNodeSet;\n            var entityRef = makeReference(dataId);\n            if (mergeTree && mergeTree.map.size) {\n                var applied = _this.applyMerges(mergeTree, entityRef, storeObject, context);\n                if (isReference(applied)) {\n                    return;\n                }\n                storeObject = applied;\n            }\n            if (__DEV__ && !context.overwrite) {\n                var fieldsWithSelectionSets_1 = Object.create(null);\n                fieldNodeSet.forEach(function (field) {\n                    if (field.selectionSet) {\n                        fieldsWithSelectionSets_1[field.name.value] = true;\n                    }\n                });\n                var hasSelectionSet_1 = function (storeFieldName) {\n                    return fieldsWithSelectionSets_1[fieldNameFromStoreName(storeFieldName)] === true;\n                };\n                var hasMergeFunction_1 = function (storeFieldName) {\n                    var childTree = mergeTree && mergeTree.map.get(storeFieldName);\n                    return Boolean(childTree && childTree.info && childTree.info.merge);\n                };\n                Object.keys(storeObject).forEach(function (storeFieldName) {\n                    if (hasSelectionSet_1(storeFieldName) &&\n                        !hasMergeFunction_1(storeFieldName)) {\n                        warnAboutDataLoss(entityRef, storeObject, storeFieldName, context.store);\n                    }\n                });\n            }\n            store.merge(dataId, storeObject);\n        });\n        store.retain(ref.__ref);\n        return ref;\n    };\n    StoreWriter.prototype.processSelectionSet = function (_a) {\n        var _this = this;\n        var dataId = _a.dataId, result = _a.result, selectionSet = _a.selectionSet, context = _a.context, mergeTree = _a.mergeTree;\n        var policies = this.cache.policies;\n        var incoming = Object.create(null);\n        var typename = (dataId && policies.rootTypenamesById[dataId]) ||\n            getTypenameFromResult(result, selectionSet, context.fragmentMap) ||\n            (dataId && context.store.get(dataId, \"__typename\"));\n        if (\"string\" === typeof typename) {\n            incoming.__typename = typename;\n        }\n        var readField = function () {\n            var options = normalizeReadFieldOptions(arguments, incoming, context.variables);\n            if (isReference(options.from)) {\n                var info = context.incomingById.get(options.from.__ref);\n                if (info) {\n                    var result_1 = policies.readField(__assign(__assign({}, options), { from: info.storeObject }), context);\n                    if (result_1 !== void 0) {\n                        return result_1;\n                    }\n                }\n            }\n            return policies.readField(options, context);\n        };\n        var fieldNodeSet = new Set();\n        this.flattenFields(selectionSet, result, context, typename).forEach(function (context, field) {\n            var _a;\n            var resultFieldKey = resultKeyNameFromField(field);\n            var value = result[resultFieldKey];\n            fieldNodeSet.add(field);\n            if (value !== void 0) {\n                var storeFieldName = policies.getStoreFieldName({\n                    typename: typename,\n                    fieldName: field.name.value,\n                    field: field,\n                    variables: context.variables,\n                });\n                var childTree = getChildMergeTree(mergeTree, storeFieldName);\n                var incomingValue = _this.processFieldValue(value, field, field.selectionSet\n                    ? getContextFlavor(context, false, false)\n                    : context, childTree);\n                var childTypename = void 0;\n                if (field.selectionSet &&\n                    (isReference(incomingValue) ||\n                        storeValueIsStoreObject(incomingValue))) {\n                    childTypename = readField(\"__typename\", incomingValue);\n                }\n                var merge = policies.getMergeFunction(typename, field.name.value, childTypename);\n                if (merge) {\n                    childTree.info = {\n                        field: field,\n                        typename: typename,\n                        merge: merge,\n                    };\n                }\n                else {\n                    maybeRecycleChildMergeTree(mergeTree, storeFieldName);\n                }\n                incoming = context.merge(incoming, (_a = {},\n                    _a[storeFieldName] = incomingValue,\n                    _a));\n            }\n            else if (__DEV__ &&\n                !context.clientOnly &&\n                !context.deferred &&\n                !addTypenameToDocument.added(field) &&\n                !policies.getReadFunction(typename, field.name.value)) {\n                __DEV__ && invariant.error(\"Missing field '\".concat(resultKeyNameFromField(field), \"' while writing result \").concat(JSON.stringify(result, null, 2)).substring(0, 1000));\n            }\n        });\n        try {\n            var _b = policies.identify(result, {\n                typename: typename,\n                selectionSet: selectionSet,\n                fragmentMap: context.fragmentMap,\n                storeObject: incoming,\n                readField: readField,\n            }), id = _b[0], keyObject = _b[1];\n            dataId = dataId || id;\n            if (keyObject) {\n                incoming = context.merge(incoming, keyObject);\n            }\n        }\n        catch (e) {\n            if (!dataId)\n                throw e;\n        }\n        if (\"string\" === typeof dataId) {\n            var dataRef = makeReference(dataId);\n            var sets = context.written[dataId] || (context.written[dataId] = []);\n            if (sets.indexOf(selectionSet) >= 0)\n                return dataRef;\n            sets.push(selectionSet);\n            if (this.reader && this.reader.isFresh(result, dataRef, selectionSet, context)) {\n                return dataRef;\n            }\n            var previous_1 = context.incomingById.get(dataId);\n            if (previous_1) {\n                previous_1.storeObject = context.merge(previous_1.storeObject, incoming);\n                previous_1.mergeTree = mergeMergeTrees(previous_1.mergeTree, mergeTree);\n                fieldNodeSet.forEach(function (field) { return previous_1.fieldNodeSet.add(field); });\n            }\n            else {\n                context.incomingById.set(dataId, {\n                    storeObject: incoming,\n                    mergeTree: mergeTreeIsEmpty(mergeTree) ? void 0 : mergeTree,\n                    fieldNodeSet: fieldNodeSet,\n                });\n            }\n            return dataRef;\n        }\n        return incoming;\n    };\n    StoreWriter.prototype.processFieldValue = function (value, field, context, mergeTree) {\n        var _this = this;\n        if (!field.selectionSet || value === null) {\n            return __DEV__ ? cloneDeep(value) : value;\n        }\n        if (isArray(value)) {\n            return value.map(function (item, i) {\n                var value = _this.processFieldValue(item, field, context, getChildMergeTree(mergeTree, i));\n                maybeRecycleChildMergeTree(mergeTree, i);\n                return value;\n            });\n        }\n        return this.processSelectionSet({\n            result: value,\n            selectionSet: field.selectionSet,\n            context: context,\n            mergeTree: mergeTree,\n        });\n    };\n    StoreWriter.prototype.flattenFields = function (selectionSet, result, context, typename) {\n        if (typename === void 0) { typename = getTypenameFromResult(result, selectionSet, context.fragmentMap); }\n        var fieldMap = new Map();\n        var policies = this.cache.policies;\n        var limitingTrie = new Trie(false);\n        (function flatten(selectionSet, inheritedContext) {\n            var visitedNode = limitingTrie.lookup(selectionSet, inheritedContext.clientOnly, inheritedContext.deferred);\n            if (visitedNode.visited)\n                return;\n            visitedNode.visited = true;\n            selectionSet.selections.forEach(function (selection) {\n                if (!shouldInclude(selection, context.variables))\n                    return;\n                var clientOnly = inheritedContext.clientOnly, deferred = inheritedContext.deferred;\n                if (!(clientOnly && deferred) &&\n                    isNonEmptyArray(selection.directives)) {\n                    selection.directives.forEach(function (dir) {\n                        var name = dir.name.value;\n                        if (name === \"client\")\n                            clientOnly = true;\n                        if (name === \"defer\") {\n                            var args = argumentsObjectFromField(dir, context.variables);\n                            if (!args || args.if !== false) {\n                                deferred = true;\n                            }\n                        }\n                    });\n                }\n                if (isField(selection)) {\n                    var existing = fieldMap.get(selection);\n                    if (existing) {\n                        clientOnly = clientOnly && existing.clientOnly;\n                        deferred = deferred && existing.deferred;\n                    }\n                    fieldMap.set(selection, getContextFlavor(context, clientOnly, deferred));\n                }\n                else {\n                    var fragment = getFragmentFromSelection(selection, context.fragmentMap);\n                    if (fragment &&\n                        policies.fragmentMatches(fragment, typename, result, context.variables)) {\n                        flatten(fragment.selectionSet, getContextFlavor(context, clientOnly, deferred));\n                    }\n                }\n            });\n        })(selectionSet, context);\n        return fieldMap;\n    };\n    StoreWriter.prototype.applyMerges = function (mergeTree, existing, incoming, context, getStorageArgs) {\n        var _a;\n        var _this = this;\n        if (mergeTree.map.size && !isReference(incoming)) {\n            var e_1 = (!isArray(incoming) &&\n                (isReference(existing) || storeValueIsStoreObject(existing))) ? existing : void 0;\n            var i_1 = incoming;\n            if (e_1 && !getStorageArgs) {\n                getStorageArgs = [isReference(e_1) ? e_1.__ref : e_1];\n            }\n            var changedFields_1;\n            var getValue_1 = function (from, name) {\n                return isArray(from)\n                    ? (typeof name === \"number\" ? from[name] : void 0)\n                    : context.store.getFieldValue(from, String(name));\n            };\n            mergeTree.map.forEach(function (childTree, storeFieldName) {\n                var eVal = getValue_1(e_1, storeFieldName);\n                var iVal = getValue_1(i_1, storeFieldName);\n                if (void 0 === iVal)\n                    return;\n                if (getStorageArgs) {\n                    getStorageArgs.push(storeFieldName);\n                }\n                var aVal = _this.applyMerges(childTree, eVal, iVal, context, getStorageArgs);\n                if (aVal !== iVal) {\n                    changedFields_1 = changedFields_1 || new Map;\n                    changedFields_1.set(storeFieldName, aVal);\n                }\n                if (getStorageArgs) {\n                    invariant(getStorageArgs.pop() === storeFieldName);\n                }\n            });\n            if (changedFields_1) {\n                incoming = (isArray(i_1) ? i_1.slice(0) : __assign({}, i_1));\n                changedFields_1.forEach(function (value, name) {\n                    incoming[name] = value;\n                });\n            }\n        }\n        if (mergeTree.info) {\n            return this.cache.policies.runMergeFunction(existing, incoming, mergeTree.info, context, getStorageArgs && (_a = context.store).getStorage.apply(_a, getStorageArgs));\n        }\n        return incoming;\n    };\n    return StoreWriter;\n}());\nexport { StoreWriter };\nvar emptyMergeTreePool = [];\nfunction getChildMergeTree(_a, name) {\n    var map = _a.map;\n    if (!map.has(name)) {\n        map.set(name, emptyMergeTreePool.pop() || { map: new Map });\n    }\n    return map.get(name);\n}\nfunction mergeMergeTrees(left, right) {\n    if (left === right || !right || mergeTreeIsEmpty(right))\n        return left;\n    if (!left || mergeTreeIsEmpty(left))\n        return right;\n    var info = left.info && right.info ? __assign(__assign({}, left.info), right.info) : left.info || right.info;\n    var needToMergeMaps = left.map.size && right.map.size;\n    var map = needToMergeMaps ? new Map :\n        left.map.size ? left.map : right.map;\n    var merged = { info: info, map: map };\n    if (needToMergeMaps) {\n        var remainingRightKeys_1 = new Set(right.map.keys());\n        left.map.forEach(function (leftTree, key) {\n            merged.map.set(key, mergeMergeTrees(leftTree, right.map.get(key)));\n            remainingRightKeys_1.delete(key);\n        });\n        remainingRightKeys_1.forEach(function (key) {\n            merged.map.set(key, mergeMergeTrees(right.map.get(key), left.map.get(key)));\n        });\n    }\n    return merged;\n}\nfunction mergeTreeIsEmpty(tree) {\n    return !tree || !(tree.info || tree.map.size);\n}\nfunction maybeRecycleChildMergeTree(_a, name) {\n    var map = _a.map;\n    var childTree = map.get(name);\n    if (childTree && mergeTreeIsEmpty(childTree)) {\n        emptyMergeTreePool.push(childTree);\n        map.delete(name);\n    }\n}\nvar warnings = new Set();\nfunction warnAboutDataLoss(existingRef, incomingObj, storeFieldName, store) {\n    var getChild = function (objOrRef) {\n        var child = store.getFieldValue(objOrRef, storeFieldName);\n        return typeof child === \"object\" && child;\n    };\n    var existing = getChild(existingRef);\n    if (!existing)\n        return;\n    var incoming = getChild(incomingObj);\n    if (!incoming)\n        return;\n    if (isReference(existing))\n        return;\n    if (equal(existing, incoming))\n        return;\n    if (Object.keys(existing).every(function (key) { return store.getFieldValue(incoming, key) !== void 0; })) {\n        return;\n    }\n    var parentType = store.getFieldValue(existingRef, \"__typename\") ||\n        store.getFieldValue(incomingObj, \"__typename\");\n    var fieldName = fieldNameFromStoreName(storeFieldName);\n    var typeDotName = \"\".concat(parentType, \".\").concat(fieldName);\n    if (warnings.has(typeDotName))\n        return;\n    warnings.add(typeDotName);\n    var childTypenames = [];\n    if (!isArray(existing) &&\n        !isArray(incoming)) {\n        [existing, incoming].forEach(function (child) {\n            var typename = store.getFieldValue(child, \"__typename\");\n            if (typeof typename === \"string\" &&\n                !childTypenames.includes(typename)) {\n                childTypenames.push(typename);\n            }\n        });\n    }\n    __DEV__ && invariant.warn(\"Cache data may be lost when replacing the \".concat(fieldName, \" field of a \").concat(parentType, \" object.\\n\\nTo address this problem (which is not a bug in Apollo Client), \").concat(childTypenames.length\n        ? \"either ensure all objects of type \" +\n            childTypenames.join(\" and \") + \" have an ID or a custom merge function, or \"\n        : \"\", \"define a custom merge function for the \").concat(typeDotName, \" field, so InMemoryCache can safely merge these objects:\\n\\n  existing: \").concat(JSON.stringify(existing).slice(0, 1000), \"\\n  incoming: \").concat(JSON.stringify(incoming).slice(0, 1000), \"\\n\\nFor more information about these options, please refer to the documentation:\\n\\n  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers\\n  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects\\n\"));\n}\n//# sourceMappingURL=writeToStore.js.map", "import { __assign, __extends } from \"tslib\";\nimport { invariant } from '../../utilities/globals';\nimport './fixPolyfills';\nimport { wrap } from 'optimism';\nimport { equal } from '@wry/equality';\nimport { ApolloCache } from '../core/cache';\nimport { MissingFieldError } from '../core/types/common';\nimport { addTypenameToDocument, isReference, } from '../../utilities';\nimport { StoreReader } from './readFromStore';\nimport { StoreWriter } from './writeToStore';\nimport { EntityStore, supportsResultCaching } from './entityStore';\nimport { makeVar, forgetCache, recallCache } from './reactiveVars';\nimport { Policies } from './policies';\nimport { hasOwn, normalizeConfig, shouldCanonizeResults } from './helpers';\nimport { canonicalStringify } from './object-canon';\nvar InMemoryCache = (function (_super) {\n    __extends(InMemoryCache, _super);\n    function InMemoryCache(config) {\n        if (config === void 0) { config = {}; }\n        var _this = _super.call(this) || this;\n        _this.watches = new Set();\n        _this.typenameDocumentCache = new Map();\n        _this.makeVar = makeVar;\n        _this.txCount = 0;\n        _this.config = normalizeConfig(config);\n        _this.addTypename = !!_this.config.addTypename;\n        _this.policies = new Policies({\n            cache: _this,\n            dataIdFromObject: _this.config.dataIdFromObject,\n            possibleTypes: _this.config.possibleTypes,\n            typePolicies: _this.config.typePolicies,\n        });\n        _this.init();\n        return _this;\n    }\n    InMemoryCache.prototype.init = function () {\n        var rootStore = this.data = new EntityStore.Root({\n            policies: this.policies,\n            resultCaching: this.config.resultCaching,\n        });\n        this.optimisticData = rootStore.stump;\n        this.resetResultCache();\n    };\n    InMemoryCache.prototype.resetResultCache = function (resetResultIdentities) {\n        var _this = this;\n        var previousReader = this.storeReader;\n        this.storeWriter = new StoreWriter(this, this.storeReader = new StoreReader({\n            cache: this,\n            addTypename: this.addTypename,\n            resultCacheMaxSize: this.config.resultCacheMaxSize,\n            canonizeResults: shouldCanonizeResults(this.config),\n            canon: resetResultIdentities\n                ? void 0\n                : previousReader && previousReader.canon,\n        }));\n        this.maybeBroadcastWatch = wrap(function (c, options) {\n            return _this.broadcastWatch(c, options);\n        }, {\n            max: this.config.resultCacheMaxSize,\n            makeCacheKey: function (c) {\n                var store = c.optimistic ? _this.optimisticData : _this.data;\n                if (supportsResultCaching(store)) {\n                    var optimistic = c.optimistic, rootId = c.rootId, variables = c.variables;\n                    return store.makeCacheKey(c.query, c.callback, canonicalStringify({ optimistic: optimistic, rootId: rootId, variables: variables }));\n                }\n            }\n        });\n        new Set([\n            this.data.group,\n            this.optimisticData.group,\n        ]).forEach(function (group) { return group.resetCaching(); });\n    };\n    InMemoryCache.prototype.restore = function (data) {\n        this.init();\n        if (data)\n            this.data.replace(data);\n        return this;\n    };\n    InMemoryCache.prototype.extract = function (optimistic) {\n        if (optimistic === void 0) { optimistic = false; }\n        return (optimistic ? this.optimisticData : this.data).extract();\n    };\n    InMemoryCache.prototype.read = function (options) {\n        var _a = options.returnPartialData, returnPartialData = _a === void 0 ? false : _a;\n        try {\n            return this.storeReader.diffQueryAgainstStore(__assign(__assign({}, options), { store: options.optimistic ? this.optimisticData : this.data, config: this.config, returnPartialData: returnPartialData })).result || null;\n        }\n        catch (e) {\n            if (e instanceof MissingFieldError) {\n                return null;\n            }\n            throw e;\n        }\n    };\n    InMemoryCache.prototype.write = function (options) {\n        try {\n            ++this.txCount;\n            return this.storeWriter.writeToStore(this.data, options);\n        }\n        finally {\n            if (!--this.txCount && options.broadcast !== false) {\n                this.broadcastWatches();\n            }\n        }\n    };\n    InMemoryCache.prototype.modify = function (options) {\n        if (hasOwn.call(options, \"id\") && !options.id) {\n            return false;\n        }\n        var store = options.optimistic\n            ? this.optimisticData\n            : this.data;\n        try {\n            ++this.txCount;\n            return store.modify(options.id || \"ROOT_QUERY\", options.fields);\n        }\n        finally {\n            if (!--this.txCount && options.broadcast !== false) {\n                this.broadcastWatches();\n            }\n        }\n    };\n    InMemoryCache.prototype.diff = function (options) {\n        return this.storeReader.diffQueryAgainstStore(__assign(__assign({}, options), { store: options.optimistic ? this.optimisticData : this.data, rootId: options.id || \"ROOT_QUERY\", config: this.config }));\n    };\n    InMemoryCache.prototype.watch = function (watch) {\n        var _this = this;\n        if (!this.watches.size) {\n            recallCache(this);\n        }\n        this.watches.add(watch);\n        if (watch.immediate) {\n            this.maybeBroadcastWatch(watch);\n        }\n        return function () {\n            if (_this.watches.delete(watch) && !_this.watches.size) {\n                forgetCache(_this);\n            }\n            _this.maybeBroadcastWatch.forget(watch);\n        };\n    };\n    InMemoryCache.prototype.gc = function (options) {\n        canonicalStringify.reset();\n        var ids = this.optimisticData.gc();\n        if (options && !this.txCount) {\n            if (options.resetResultCache) {\n                this.resetResultCache(options.resetResultIdentities);\n            }\n            else if (options.resetResultIdentities) {\n                this.storeReader.resetCanon();\n            }\n        }\n        return ids;\n    };\n    InMemoryCache.prototype.retain = function (rootId, optimistic) {\n        return (optimistic ? this.optimisticData : this.data).retain(rootId);\n    };\n    InMemoryCache.prototype.release = function (rootId, optimistic) {\n        return (optimistic ? this.optimisticData : this.data).release(rootId);\n    };\n    InMemoryCache.prototype.identify = function (object) {\n        if (isReference(object))\n            return object.__ref;\n        try {\n            return this.policies.identify(object)[0];\n        }\n        catch (e) {\n            __DEV__ && invariant.warn(e);\n        }\n    };\n    InMemoryCache.prototype.evict = function (options) {\n        if (!options.id) {\n            if (hasOwn.call(options, \"id\")) {\n                return false;\n            }\n            options = __assign(__assign({}, options), { id: \"ROOT_QUERY\" });\n        }\n        try {\n            ++this.txCount;\n            return this.optimisticData.evict(options, this.data);\n        }\n        finally {\n            if (!--this.txCount && options.broadcast !== false) {\n                this.broadcastWatches();\n            }\n        }\n    };\n    InMemoryCache.prototype.reset = function (options) {\n        var _this = this;\n        this.init();\n        canonicalStringify.reset();\n        if (options && options.discardWatches) {\n            this.watches.forEach(function (watch) { return _this.maybeBroadcastWatch.forget(watch); });\n            this.watches.clear();\n            forgetCache(this);\n        }\n        else {\n            this.broadcastWatches();\n        }\n        return Promise.resolve();\n    };\n    InMemoryCache.prototype.removeOptimistic = function (idToRemove) {\n        var newOptimisticData = this.optimisticData.removeLayer(idToRemove);\n        if (newOptimisticData !== this.optimisticData) {\n            this.optimisticData = newOptimisticData;\n            this.broadcastWatches();\n        }\n    };\n    InMemoryCache.prototype.batch = function (options) {\n        var _this = this;\n        var update = options.update, _a = options.optimistic, optimistic = _a === void 0 ? true : _a, removeOptimistic = options.removeOptimistic, onWatchUpdated = options.onWatchUpdated;\n        var updateResult;\n        var perform = function (layer) {\n            var _a = _this, data = _a.data, optimisticData = _a.optimisticData;\n            ++_this.txCount;\n            if (layer) {\n                _this.data = _this.optimisticData = layer;\n            }\n            try {\n                return updateResult = update(_this);\n            }\n            finally {\n                --_this.txCount;\n                _this.data = data;\n                _this.optimisticData = optimisticData;\n            }\n        };\n        var alreadyDirty = new Set();\n        if (onWatchUpdated && !this.txCount) {\n            this.broadcastWatches(__assign(__assign({}, options), { onWatchUpdated: function (watch) {\n                    alreadyDirty.add(watch);\n                    return false;\n                } }));\n        }\n        if (typeof optimistic === 'string') {\n            this.optimisticData = this.optimisticData.addLayer(optimistic, perform);\n        }\n        else if (optimistic === false) {\n            perform(this.data);\n        }\n        else {\n            perform();\n        }\n        if (typeof removeOptimistic === \"string\") {\n            this.optimisticData = this.optimisticData.removeLayer(removeOptimistic);\n        }\n        if (onWatchUpdated && alreadyDirty.size) {\n            this.broadcastWatches(__assign(__assign({}, options), { onWatchUpdated: function (watch, diff) {\n                    var result = onWatchUpdated.call(this, watch, diff);\n                    if (result !== false) {\n                        alreadyDirty.delete(watch);\n                    }\n                    return result;\n                } }));\n            if (alreadyDirty.size) {\n                alreadyDirty.forEach(function (watch) { return _this.maybeBroadcastWatch.dirty(watch); });\n            }\n        }\n        else {\n            this.broadcastWatches(options);\n        }\n        return updateResult;\n    };\n    InMemoryCache.prototype.performTransaction = function (update, optimisticId) {\n        return this.batch({\n            update: update,\n            optimistic: optimisticId || (optimisticId !== null),\n        });\n    };\n    InMemoryCache.prototype.transformDocument = function (document) {\n        if (this.addTypename) {\n            var result = this.typenameDocumentCache.get(document);\n            if (!result) {\n                result = addTypenameToDocument(document);\n                this.typenameDocumentCache.set(document, result);\n                this.typenameDocumentCache.set(result, result);\n            }\n            return result;\n        }\n        return document;\n    };\n    InMemoryCache.prototype.broadcastWatches = function (options) {\n        var _this = this;\n        if (!this.txCount) {\n            this.watches.forEach(function (c) { return _this.maybeBroadcastWatch(c, options); });\n        }\n    };\n    InMemoryCache.prototype.broadcastWatch = function (c, options) {\n        var lastDiff = c.lastDiff;\n        var diff = this.diff(c);\n        if (options) {\n            if (c.optimistic &&\n                typeof options.optimistic === \"string\") {\n                diff.fromOptimisticTransaction = true;\n            }\n            if (options.onWatchUpdated &&\n                options.onWatchUpdated.call(this, c, diff, lastDiff) === false) {\n                return;\n            }\n        }\n        if (!lastDiff || !equal(lastDiff.result, diff.result)) {\n            c.callback(c.lastDiff = diff, lastDiff);\n        }\n    };\n    return InMemoryCache;\n}(ApolloCache));\nexport { InMemoryCache };\n//# sourceMappingURL=inMemoryCache.js.map", "import { __extends } from \"tslib\";\nimport '../utilities/globals';\nimport { isNonEmptyArray } from '../utilities';\nexport function isApolloError(err) {\n    return err.hasOwnProperty('graphQLErrors');\n}\nvar generateErrorMessage = function (err) {\n    var message = '';\n    if (isNonEmptyArray(err.graphQLErrors) || isNonEmptyArray(err.clientErrors)) {\n        var errors = (err.graphQLErrors || [])\n            .concat(err.clientErrors || []);\n        errors.forEach(function (error) {\n            var errorMessage = error\n                ? error.message\n                : 'Error message not found.';\n            message += \"\".concat(errorMessage, \"\\n\");\n        });\n    }\n    if (err.networkError) {\n        message += \"\".concat(err.networkError.message, \"\\n\");\n    }\n    message = message.replace(/\\n$/, '');\n    return message;\n};\nvar ApolloError = (function (_super) {\n    __extends(ApolloError, _super);\n    function ApolloError(_a) {\n        var graphQLErrors = _a.graphQLErrors, clientErrors = _a.clientErrors, networkError = _a.networkError, errorMessage = _a.errorMessage, extraInfo = _a.extraInfo;\n        var _this = _super.call(this, errorMessage) || this;\n        _this.graphQLErrors = graphQLErrors || [];\n        _this.clientErrors = clientErrors || [];\n        _this.networkError = networkError || null;\n        _this.message = errorMessage || generateErrorMessage(_this);\n        _this.extraInfo = extraInfo;\n        _this.__proto__ = ApolloError.prototype;\n        return _this;\n    }\n    return ApolloError;\n}(Error));\nexport { ApolloError };\n//# sourceMappingURL=index.js.map", "export var version = '3.6.7';\n//# sourceMappingURL=version.js.map", "export var NetworkStatus;\n(function (NetworkStatus) {\n    NetworkStatus[NetworkStatus[\"loading\"] = 1] = \"loading\";\n    NetworkStatus[NetworkStatus[\"setVariables\"] = 2] = \"setVariables\";\n    NetworkStatus[NetworkStatus[\"fetchMore\"] = 3] = \"fetchMore\";\n    NetworkStatus[NetworkStatus[\"refetch\"] = 4] = \"refetch\";\n    NetworkStatus[NetworkStatus[\"poll\"] = 6] = \"poll\";\n    NetworkStatus[NetworkStatus[\"ready\"] = 7] = \"ready\";\n    NetworkStatus[NetworkStatus[\"error\"] = 8] = \"error\";\n})(NetworkStatus || (NetworkStatus = {}));\nexport function isNetworkRequestInFlight(networkStatus) {\n    return networkStatus ? networkStatus < 7 : false;\n}\n//# sourceMappingURL=networkStatus.js.map", "import { __assign, __extends } from \"tslib\";\nimport { invariant } from '../utilities/globals';\nimport { equal } from '@wry/equality';\nimport { NetworkStatus, isNetworkRequestInFlight } from './networkStatus';\nimport { cloneDeep, compact, getOperationDefinition, Observable, iterateObserversSafely, isNonEmptyArray, fixObservableSubclass, getQueryDefinition, } from '../utilities';\nvar assign = Object.assign, hasOwnProperty = Object.hasOwnProperty;\nvar ObservableQuery = (function (_super) {\n    __extends(ObservableQuery, _super);\n    function ObservableQuery(_a) {\n        var queryManager = _a.queryManager, queryInfo = _a.queryInfo, options = _a.options;\n        var _this = _super.call(this, function (observer) {\n            try {\n                var subObserver = observer._subscription._observer;\n                if (subObserver && !subObserver.error) {\n                    subObserver.error = defaultSubscriptionObserverErrorCallback;\n                }\n            }\n            catch (_a) { }\n            var first = !_this.observers.size;\n            _this.observers.add(observer);\n            var last = _this.last;\n            if (last && last.error) {\n                observer.error && observer.error(last.error);\n            }\n            else if (last && last.result) {\n                observer.next && observer.next(last.result);\n            }\n            if (first) {\n                _this.reobserve().catch(function () { });\n            }\n            return function () {\n                if (_this.observers.delete(observer) && !_this.observers.size) {\n                    _this.tearDownQuery();\n                }\n            };\n        }) || this;\n        _this.observers = new Set();\n        _this.subscriptions = new Set();\n        _this.queryInfo = queryInfo;\n        _this.queryManager = queryManager;\n        _this.isTornDown = false;\n        var _b = queryManager.defaultOptions.watchQuery, _c = _b === void 0 ? {} : _b, _d = _c.fetchPolicy, defaultFetchPolicy = _d === void 0 ? \"cache-first\" : _d;\n        var _e = options.fetchPolicy, fetchPolicy = _e === void 0 ? defaultFetchPolicy : _e, _f = options.initialFetchPolicy, initialFetchPolicy = _f === void 0 ? (fetchPolicy === \"standby\" ? defaultFetchPolicy : fetchPolicy) : _f;\n        _this.options = __assign(__assign({}, options), { initialFetchPolicy: initialFetchPolicy, fetchPolicy: fetchPolicy });\n        _this.queryId = queryInfo.queryId || queryManager.generateQueryId();\n        var opDef = getOperationDefinition(_this.query);\n        _this.queryName = opDef && opDef.name && opDef.name.value;\n        return _this;\n    }\n    Object.defineProperty(ObservableQuery.prototype, \"query\", {\n        get: function () {\n            return this.queryManager.transform(this.options.query).document;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ObservableQuery.prototype, \"variables\", {\n        get: function () {\n            return this.options.variables;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ObservableQuery.prototype.result = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var observer = {\n                next: function (result) {\n                    resolve(result);\n                    _this.observers.delete(observer);\n                    if (!_this.observers.size) {\n                        _this.queryManager.removeQuery(_this.queryId);\n                    }\n                    setTimeout(function () {\n                        subscription.unsubscribe();\n                    }, 0);\n                },\n                error: reject,\n            };\n            var subscription = _this.subscribe(observer);\n        });\n    };\n    ObservableQuery.prototype.getCurrentResult = function (saveAsLastResult) {\n        if (saveAsLastResult === void 0) { saveAsLastResult = true; }\n        var lastResult = this.getLastResult(true);\n        var networkStatus = this.queryInfo.networkStatus ||\n            (lastResult && lastResult.networkStatus) ||\n            NetworkStatus.ready;\n        var result = __assign(__assign({}, lastResult), { loading: isNetworkRequestInFlight(networkStatus), networkStatus: networkStatus });\n        var _a = this.options.fetchPolicy, fetchPolicy = _a === void 0 ? \"cache-first\" : _a;\n        if (fetchPolicy === 'network-only' ||\n            fetchPolicy === 'no-cache' ||\n            fetchPolicy === 'standby' ||\n            this.queryManager.transform(this.options.query).hasForcedResolvers) {\n        }\n        else {\n            var diff = this.queryInfo.getDiff();\n            if (diff.complete || this.options.returnPartialData) {\n                result.data = diff.result;\n            }\n            if (equal(result.data, {})) {\n                result.data = void 0;\n            }\n            if (diff.complete) {\n                delete result.partial;\n                if (diff.complete &&\n                    result.networkStatus === NetworkStatus.loading &&\n                    (fetchPolicy === 'cache-first' ||\n                        fetchPolicy === 'cache-only')) {\n                    result.networkStatus = NetworkStatus.ready;\n                    result.loading = false;\n                }\n            }\n            else {\n                result.partial = true;\n            }\n            if (__DEV__ &&\n                !diff.complete &&\n                !this.options.partialRefetch &&\n                !result.loading &&\n                !result.data &&\n                !result.error) {\n                logMissingFieldErrors(diff.missing);\n            }\n        }\n        if (saveAsLastResult) {\n            this.updateLastResult(result);\n        }\n        return result;\n    };\n    ObservableQuery.prototype.isDifferentFromLastResult = function (newResult) {\n        return !this.last || !equal(this.last.result, newResult);\n    };\n    ObservableQuery.prototype.getLast = function (key, variablesMustMatch) {\n        var last = this.last;\n        if (last &&\n            last[key] &&\n            (!variablesMustMatch || equal(last.variables, this.variables))) {\n            return last[key];\n        }\n    };\n    ObservableQuery.prototype.getLastResult = function (variablesMustMatch) {\n        return this.getLast(\"result\", variablesMustMatch);\n    };\n    ObservableQuery.prototype.getLastError = function (variablesMustMatch) {\n        return this.getLast(\"error\", variablesMustMatch);\n    };\n    ObservableQuery.prototype.resetLastResults = function () {\n        delete this.last;\n        this.isTornDown = false;\n    };\n    ObservableQuery.prototype.resetQueryStoreErrors = function () {\n        this.queryManager.resetErrors(this.queryId);\n    };\n    ObservableQuery.prototype.refetch = function (variables) {\n        var _a;\n        var reobserveOptions = {\n            pollInterval: 0,\n        };\n        var fetchPolicy = this.options.fetchPolicy;\n        if (fetchPolicy === 'cache-and-network') {\n            reobserveOptions.fetchPolicy = fetchPolicy;\n        }\n        else if (fetchPolicy === 'no-cache') {\n            reobserveOptions.fetchPolicy = 'no-cache';\n        }\n        else {\n            reobserveOptions.fetchPolicy = 'network-only';\n        }\n        if (__DEV__ && variables && hasOwnProperty.call(variables, \"variables\")) {\n            var queryDef = getQueryDefinition(this.query);\n            var vars = queryDef.variableDefinitions;\n            if (!vars || !vars.some(function (v) { return v.variable.name.value === \"variables\"; })) {\n                __DEV__ && invariant.warn(\"Called refetch(\".concat(JSON.stringify(variables), \") for query \").concat(((_a = queryDef.name) === null || _a === void 0 ? void 0 : _a.value) || JSON.stringify(queryDef), \", which does not declare a $variables variable.\\nDid you mean to call refetch(variables) instead of refetch({ variables })?\"));\n            }\n        }\n        if (variables && !equal(this.options.variables, variables)) {\n            reobserveOptions.variables = this.options.variables = __assign(__assign({}, this.options.variables), variables);\n        }\n        this.queryInfo.resetLastWrite();\n        return this.reobserve(reobserveOptions, NetworkStatus.refetch);\n    };\n    ObservableQuery.prototype.fetchMore = function (fetchMoreOptions) {\n        var _this = this;\n        var combinedOptions = __assign(__assign({}, (fetchMoreOptions.query ? fetchMoreOptions : __assign(__assign(__assign(__assign({}, this.options), { query: this.query }), fetchMoreOptions), { variables: __assign(__assign({}, this.options.variables), fetchMoreOptions.variables) }))), { fetchPolicy: \"no-cache\" });\n        var qid = this.queryManager.generateQueryId();\n        var queryInfo = this.queryInfo;\n        var originalNetworkStatus = queryInfo.networkStatus;\n        queryInfo.networkStatus = NetworkStatus.fetchMore;\n        if (combinedOptions.notifyOnNetworkStatusChange) {\n            this.observe();\n        }\n        var updatedQuerySet = new Set();\n        return this.queryManager.fetchQuery(qid, combinedOptions, NetworkStatus.fetchMore).then(function (fetchMoreResult) {\n            _this.queryManager.removeQuery(qid);\n            if (queryInfo.networkStatus === NetworkStatus.fetchMore) {\n                queryInfo.networkStatus = originalNetworkStatus;\n            }\n            _this.queryManager.cache.batch({\n                update: function (cache) {\n                    var updateQuery = fetchMoreOptions.updateQuery;\n                    if (updateQuery) {\n                        cache.updateQuery({\n                            query: _this.query,\n                            variables: _this.variables,\n                            returnPartialData: true,\n                            optimistic: false,\n                        }, function (previous) { return updateQuery(previous, {\n                            fetchMoreResult: fetchMoreResult.data,\n                            variables: combinedOptions.variables,\n                        }); });\n                    }\n                    else {\n                        cache.writeQuery({\n                            query: combinedOptions.query,\n                            variables: combinedOptions.variables,\n                            data: fetchMoreResult.data,\n                        });\n                    }\n                },\n                onWatchUpdated: function (watch) {\n                    updatedQuerySet.add(watch.query);\n                },\n            });\n            return fetchMoreResult;\n        }).finally(function () {\n            if (!updatedQuerySet.has(_this.query)) {\n                reobserveCacheFirst(_this);\n            }\n        });\n    };\n    ObservableQuery.prototype.subscribeToMore = function (options) {\n        var _this = this;\n        var subscription = this.queryManager\n            .startGraphQLSubscription({\n            query: options.document,\n            variables: options.variables,\n            context: options.context,\n        })\n            .subscribe({\n            next: function (subscriptionData) {\n                var updateQuery = options.updateQuery;\n                if (updateQuery) {\n                    _this.updateQuery(function (previous, _a) {\n                        var variables = _a.variables;\n                        return updateQuery(previous, {\n                            subscriptionData: subscriptionData,\n                            variables: variables,\n                        });\n                    });\n                }\n            },\n            error: function (err) {\n                if (options.onError) {\n                    options.onError(err);\n                    return;\n                }\n                __DEV__ && invariant.error('Unhandled GraphQL subscription error', err);\n            },\n        });\n        this.subscriptions.add(subscription);\n        return function () {\n            if (_this.subscriptions.delete(subscription)) {\n                subscription.unsubscribe();\n            }\n        };\n    };\n    ObservableQuery.prototype.setOptions = function (newOptions) {\n        return this.reobserve(newOptions);\n    };\n    ObservableQuery.prototype.setVariables = function (variables) {\n        if (equal(this.variables, variables)) {\n            return this.observers.size\n                ? this.result()\n                : Promise.resolve();\n        }\n        this.options.variables = variables;\n        if (!this.observers.size) {\n            return Promise.resolve();\n        }\n        return this.reobserve({\n            fetchPolicy: this.options.initialFetchPolicy,\n            variables: variables,\n        }, NetworkStatus.setVariables);\n    };\n    ObservableQuery.prototype.updateQuery = function (mapFn) {\n        var queryManager = this.queryManager;\n        var result = queryManager.cache.diff({\n            query: this.options.query,\n            variables: this.variables,\n            returnPartialData: true,\n            optimistic: false,\n        }).result;\n        var newResult = mapFn(result, {\n            variables: this.variables,\n        });\n        if (newResult) {\n            queryManager.cache.writeQuery({\n                query: this.options.query,\n                data: newResult,\n                variables: this.variables,\n            });\n            queryManager.broadcastQueries();\n        }\n    };\n    ObservableQuery.prototype.startPolling = function (pollInterval) {\n        this.options.pollInterval = pollInterval;\n        this.updatePolling();\n    };\n    ObservableQuery.prototype.stopPolling = function () {\n        this.options.pollInterval = 0;\n        this.updatePolling();\n    };\n    ObservableQuery.prototype.applyNextFetchPolicy = function (reason, options) {\n        if (options.nextFetchPolicy) {\n            var _a = options.fetchPolicy, fetchPolicy = _a === void 0 ? \"cache-first\" : _a, _b = options.initialFetchPolicy, initialFetchPolicy = _b === void 0 ? fetchPolicy : _b;\n            if (typeof options.nextFetchPolicy === \"function\") {\n                options.fetchPolicy = options.nextFetchPolicy(fetchPolicy, {\n                    reason: reason,\n                    options: options,\n                    observable: this,\n                    initialFetchPolicy: initialFetchPolicy,\n                });\n            }\n            else if (reason === \"variables-changed\") {\n                options.fetchPolicy = initialFetchPolicy;\n            }\n            else {\n                options.fetchPolicy = options.nextFetchPolicy;\n            }\n        }\n        return options.fetchPolicy;\n    };\n    ObservableQuery.prototype.fetch = function (options, newNetworkStatus) {\n        this.queryManager.setObservableQuery(this);\n        return this.queryManager.fetchQueryObservable(this.queryId, options, newNetworkStatus);\n    };\n    ObservableQuery.prototype.updatePolling = function () {\n        var _this = this;\n        if (this.queryManager.ssrMode) {\n            return;\n        }\n        var _a = this, pollingInfo = _a.pollingInfo, pollInterval = _a.options.pollInterval;\n        if (!pollInterval) {\n            if (pollingInfo) {\n                clearTimeout(pollingInfo.timeout);\n                delete this.pollingInfo;\n            }\n            return;\n        }\n        if (pollingInfo &&\n            pollingInfo.interval === pollInterval) {\n            return;\n        }\n        __DEV__ ? invariant(pollInterval, 'Attempted to start a polling query without a polling interval.') : invariant(pollInterval, 10);\n        var info = pollingInfo || (this.pollingInfo = {});\n        info.interval = pollInterval;\n        var maybeFetch = function () {\n            if (_this.pollingInfo) {\n                if (!isNetworkRequestInFlight(_this.queryInfo.networkStatus)) {\n                    _this.reobserve({\n                        fetchPolicy: \"network-only\",\n                    }, NetworkStatus.poll).then(poll, poll);\n                }\n                else {\n                    poll();\n                }\n            }\n            ;\n        };\n        var poll = function () {\n            var info = _this.pollingInfo;\n            if (info) {\n                clearTimeout(info.timeout);\n                info.timeout = setTimeout(maybeFetch, info.interval);\n            }\n        };\n        poll();\n    };\n    ObservableQuery.prototype.updateLastResult = function (newResult, variables) {\n        if (variables === void 0) { variables = this.variables; }\n        this.last = __assign(__assign({}, this.last), { result: this.queryManager.assumeImmutableResults\n                ? newResult\n                : cloneDeep(newResult), variables: variables });\n        if (!isNonEmptyArray(newResult.errors)) {\n            delete this.last.error;\n        }\n        return this.last;\n    };\n    ObservableQuery.prototype.reobserve = function (newOptions, newNetworkStatus) {\n        var _this = this;\n        this.isTornDown = false;\n        var useDisposableConcast = newNetworkStatus === NetworkStatus.refetch ||\n            newNetworkStatus === NetworkStatus.fetchMore ||\n            newNetworkStatus === NetworkStatus.poll;\n        var oldVariables = this.options.variables;\n        var oldFetchPolicy = this.options.fetchPolicy;\n        var mergedOptions = compact(this.options, newOptions || {});\n        var options = useDisposableConcast\n            ? mergedOptions\n            : assign(this.options, mergedOptions);\n        if (!useDisposableConcast) {\n            this.updatePolling();\n            if (newOptions &&\n                newOptions.variables &&\n                !equal(newOptions.variables, oldVariables) &&\n                (!newOptions.fetchPolicy || newOptions.fetchPolicy === oldFetchPolicy)) {\n                this.applyNextFetchPolicy(\"variables-changed\", options);\n                if (newNetworkStatus === void 0) {\n                    newNetworkStatus = NetworkStatus.setVariables;\n                }\n            }\n        }\n        var variables = options.variables && __assign({}, options.variables);\n        var concast = this.fetch(options, newNetworkStatus);\n        var observer = {\n            next: function (result) {\n                _this.reportResult(result, variables);\n            },\n            error: function (error) {\n                _this.reportError(error, variables);\n            },\n        };\n        if (!useDisposableConcast) {\n            if (this.concast && this.observer) {\n                this.concast.removeObserver(this.observer, true);\n            }\n            this.concast = concast;\n            this.observer = observer;\n        }\n        concast.addObserver(observer);\n        return concast.promise;\n    };\n    ObservableQuery.prototype.observe = function () {\n        this.reportResult(this.getCurrentResult(false), this.variables);\n    };\n    ObservableQuery.prototype.reportResult = function (result, variables) {\n        var lastError = this.getLastError();\n        if (lastError || this.isDifferentFromLastResult(result)) {\n            if (lastError || !result.partial || this.options.returnPartialData) {\n                this.updateLastResult(result, variables);\n            }\n            iterateObserversSafely(this.observers, 'next', result);\n        }\n    };\n    ObservableQuery.prototype.reportError = function (error, variables) {\n        var errorResult = __assign(__assign({}, this.getLastResult()), { error: error, errors: error.graphQLErrors, networkStatus: NetworkStatus.error, loading: false });\n        this.updateLastResult(errorResult, variables);\n        iterateObserversSafely(this.observers, 'error', this.last.error = error);\n    };\n    ObservableQuery.prototype.hasObservers = function () {\n        return this.observers.size > 0;\n    };\n    ObservableQuery.prototype.tearDownQuery = function () {\n        if (this.isTornDown)\n            return;\n        if (this.concast && this.observer) {\n            this.concast.removeObserver(this.observer);\n            delete this.concast;\n            delete this.observer;\n        }\n        this.stopPolling();\n        this.subscriptions.forEach(function (sub) { return sub.unsubscribe(); });\n        this.subscriptions.clear();\n        this.queryManager.stopQuery(this.queryId);\n        this.observers.clear();\n        this.isTornDown = true;\n    };\n    return ObservableQuery;\n}(Observable));\nexport { ObservableQuery };\nfixObservableSubclass(ObservableQuery);\nexport function reobserveCacheFirst(obsQuery) {\n    var _a = obsQuery.options, fetchPolicy = _a.fetchPolicy, nextFetchPolicy = _a.nextFetchPolicy;\n    if (fetchPolicy === \"cache-and-network\" ||\n        fetchPolicy === \"network-only\") {\n        return obsQuery.reobserve({\n            fetchPolicy: \"cache-first\",\n            nextFetchPolicy: function () {\n                this.nextFetchPolicy = nextFetchPolicy;\n                if (typeof nextFetchPolicy === \"function\") {\n                    return nextFetchPolicy.apply(this, arguments);\n                }\n                return fetchPolicy;\n            },\n        });\n    }\n    return obsQuery.reobserve();\n}\nfunction defaultSubscriptionObserverErrorCallback(error) {\n    __DEV__ && invariant.error('Unhandled error', error.message, error.stack);\n}\nexport function logMissingFieldErrors(missing) {\n    if (__DEV__ && missing) {\n        __DEV__ && invariant.debug(\"Missing cache result fields: \".concat(JSON.stringify(missing)), missing);\n    }\n}\n//# sourceMappingURL=ObservableQuery.js.map", "import { __assign, __awaiter, __generator } from \"tslib\";\nimport { invariant } from '../utilities/globals';\nimport { visit, BREAK, } from 'graphql';\nimport { argumentsObjectFromField, buildQueryFromSelectionSet, createFragmentMap, getFragmentDefinitions, getMainDefinition, hasDirectives, isField, isInlineFragment, mergeDeep, mergeDeepArray, removeClientSetsFromDocument, resultKeyNameFromField, shouldInclude, } from '../utilities';\nimport { cacheSlot } from '../cache';\nvar LocalState = (function () {\n    function LocalState(_a) {\n        var cache = _a.cache, client = _a.client, resolvers = _a.resolvers, fragmentMatcher = _a.fragmentMatcher;\n        this.cache = cache;\n        if (client) {\n            this.client = client;\n        }\n        if (resolvers) {\n            this.addResolvers(resolvers);\n        }\n        if (fragmentMatcher) {\n            this.setFragmentMatcher(fragmentMatcher);\n        }\n    }\n    LocalState.prototype.addResolvers = function (resolvers) {\n        var _this = this;\n        this.resolvers = this.resolvers || {};\n        if (Array.isArray(resolvers)) {\n            resolvers.forEach(function (resolverGroup) {\n                _this.resolvers = mergeDeep(_this.resolvers, resolverGroup);\n            });\n        }\n        else {\n            this.resolvers = mergeDeep(this.resolvers, resolvers);\n        }\n    };\n    LocalState.prototype.setResolvers = function (resolvers) {\n        this.resolvers = {};\n        this.addResolvers(resolvers);\n    };\n    LocalState.prototype.getResolvers = function () {\n        return this.resolvers || {};\n    };\n    LocalState.prototype.runResolvers = function (_a) {\n        var document = _a.document, remoteResult = _a.remoteResult, context = _a.context, variables = _a.variables, _b = _a.onlyRunForcedResolvers, onlyRunForcedResolvers = _b === void 0 ? false : _b;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_c) {\n                if (document) {\n                    return [2, this.resolveDocument(document, remoteResult.data, context, variables, this.fragmentMatcher, onlyRunForcedResolvers).then(function (localResult) { return (__assign(__assign({}, remoteResult), { data: localResult.result })); })];\n                }\n                return [2, remoteResult];\n            });\n        });\n    };\n    LocalState.prototype.setFragmentMatcher = function (fragmentMatcher) {\n        this.fragmentMatcher = fragmentMatcher;\n    };\n    LocalState.prototype.getFragmentMatcher = function () {\n        return this.fragmentMatcher;\n    };\n    LocalState.prototype.clientQuery = function (document) {\n        if (hasDirectives(['client'], document)) {\n            if (this.resolvers) {\n                return document;\n            }\n        }\n        return null;\n    };\n    LocalState.prototype.serverQuery = function (document) {\n        return removeClientSetsFromDocument(document);\n    };\n    LocalState.prototype.prepareContext = function (context) {\n        var cache = this.cache;\n        return __assign(__assign({}, context), { cache: cache, getCacheKey: function (obj) {\n                return cache.identify(obj);\n            } });\n    };\n    LocalState.prototype.addExportedVariables = function (document, variables, context) {\n        if (variables === void 0) { variables = {}; }\n        if (context === void 0) { context = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (document) {\n                    return [2, this.resolveDocument(document, this.buildRootValueFromCache(document, variables) || {}, this.prepareContext(context), variables).then(function (data) { return (__assign(__assign({}, variables), data.exportedVariables)); })];\n                }\n                return [2, __assign({}, variables)];\n            });\n        });\n    };\n    LocalState.prototype.shouldForceResolvers = function (document) {\n        var forceResolvers = false;\n        visit(document, {\n            Directive: {\n                enter: function (node) {\n                    if (node.name.value === 'client' && node.arguments) {\n                        forceResolvers = node.arguments.some(function (arg) {\n                            return arg.name.value === 'always' &&\n                                arg.value.kind === 'BooleanValue' &&\n                                arg.value.value === true;\n                        });\n                        if (forceResolvers) {\n                            return BREAK;\n                        }\n                    }\n                },\n            },\n        });\n        return forceResolvers;\n    };\n    LocalState.prototype.buildRootValueFromCache = function (document, variables) {\n        return this.cache.diff({\n            query: buildQueryFromSelectionSet(document),\n            variables: variables,\n            returnPartialData: true,\n            optimistic: false,\n        }).result;\n    };\n    LocalState.prototype.resolveDocument = function (document, rootValue, context, variables, fragmentMatcher, onlyRunForcedResolvers) {\n        if (context === void 0) { context = {}; }\n        if (variables === void 0) { variables = {}; }\n        if (fragmentMatcher === void 0) { fragmentMatcher = function () { return true; }; }\n        if (onlyRunForcedResolvers === void 0) { onlyRunForcedResolvers = false; }\n        return __awaiter(this, void 0, void 0, function () {\n            var mainDefinition, fragments, fragmentMap, definitionOperation, defaultOperationType, _a, cache, client, execContext;\n            return __generator(this, function (_b) {\n                mainDefinition = getMainDefinition(document);\n                fragments = getFragmentDefinitions(document);\n                fragmentMap = createFragmentMap(fragments);\n                definitionOperation = mainDefinition\n                    .operation;\n                defaultOperationType = definitionOperation\n                    ? definitionOperation.charAt(0).toUpperCase() +\n                        definitionOperation.slice(1)\n                    : 'Query';\n                _a = this, cache = _a.cache, client = _a.client;\n                execContext = {\n                    fragmentMap: fragmentMap,\n                    context: __assign(__assign({}, context), { cache: cache, client: client }),\n                    variables: variables,\n                    fragmentMatcher: fragmentMatcher,\n                    defaultOperationType: defaultOperationType,\n                    exportedVariables: {},\n                    onlyRunForcedResolvers: onlyRunForcedResolvers,\n                };\n                return [2, this.resolveSelectionSet(mainDefinition.selectionSet, rootValue, execContext).then(function (result) { return ({\n                        result: result,\n                        exportedVariables: execContext.exportedVariables,\n                    }); })];\n            });\n        });\n    };\n    LocalState.prototype.resolveSelectionSet = function (selectionSet, rootValue, execContext) {\n        return __awaiter(this, void 0, void 0, function () {\n            var fragmentMap, context, variables, resultsToMerge, execute;\n            var _this = this;\n            return __generator(this, function (_a) {\n                fragmentMap = execContext.fragmentMap, context = execContext.context, variables = execContext.variables;\n                resultsToMerge = [rootValue];\n                execute = function (selection) { return __awaiter(_this, void 0, void 0, function () {\n                    var fragment, typeCondition;\n                    return __generator(this, function (_a) {\n                        if (!shouldInclude(selection, variables)) {\n                            return [2];\n                        }\n                        if (isField(selection)) {\n                            return [2, this.resolveField(selection, rootValue, execContext).then(function (fieldResult) {\n                                    var _a;\n                                    if (typeof fieldResult !== 'undefined') {\n                                        resultsToMerge.push((_a = {},\n                                            _a[resultKeyNameFromField(selection)] = fieldResult,\n                                            _a));\n                                    }\n                                })];\n                        }\n                        if (isInlineFragment(selection)) {\n                            fragment = selection;\n                        }\n                        else {\n                            fragment = fragmentMap[selection.name.value];\n                            __DEV__ ? invariant(fragment, \"No fragment named \".concat(selection.name.value)) : invariant(fragment, 9);\n                        }\n                        if (fragment && fragment.typeCondition) {\n                            typeCondition = fragment.typeCondition.name.value;\n                            if (execContext.fragmentMatcher(rootValue, typeCondition, context)) {\n                                return [2, this.resolveSelectionSet(fragment.selectionSet, rootValue, execContext).then(function (fragmentResult) {\n                                        resultsToMerge.push(fragmentResult);\n                                    })];\n                            }\n                        }\n                        return [2];\n                    });\n                }); };\n                return [2, Promise.all(selectionSet.selections.map(execute)).then(function () {\n                        return mergeDeepArray(resultsToMerge);\n                    })];\n            });\n        });\n    };\n    LocalState.prototype.resolveField = function (field, rootValue, execContext) {\n        return __awaiter(this, void 0, void 0, function () {\n            var variables, fieldName, aliasedFieldName, aliasUsed, defaultResult, resultPromise, resolverType, resolverMap, resolve;\n            var _this = this;\n            return __generator(this, function (_a) {\n                variables = execContext.variables;\n                fieldName = field.name.value;\n                aliasedFieldName = resultKeyNameFromField(field);\n                aliasUsed = fieldName !== aliasedFieldName;\n                defaultResult = rootValue[aliasedFieldName] || rootValue[fieldName];\n                resultPromise = Promise.resolve(defaultResult);\n                if (!execContext.onlyRunForcedResolvers ||\n                    this.shouldForceResolvers(field)) {\n                    resolverType = rootValue.__typename || execContext.defaultOperationType;\n                    resolverMap = this.resolvers && this.resolvers[resolverType];\n                    if (resolverMap) {\n                        resolve = resolverMap[aliasUsed ? fieldName : aliasedFieldName];\n                        if (resolve) {\n                            resultPromise = Promise.resolve(cacheSlot.withValue(this.cache, resolve, [\n                                rootValue,\n                                argumentsObjectFromField(field, variables),\n                                execContext.context,\n                                { field: field, fragmentMap: execContext.fragmentMap },\n                            ]));\n                        }\n                    }\n                }\n                return [2, resultPromise.then(function (result) {\n                        if (result === void 0) { result = defaultResult; }\n                        if (field.directives) {\n                            field.directives.forEach(function (directive) {\n                                if (directive.name.value === 'export' && directive.arguments) {\n                                    directive.arguments.forEach(function (arg) {\n                                        if (arg.name.value === 'as' && arg.value.kind === 'StringValue') {\n                                            execContext.exportedVariables[arg.value.value] = result;\n                                        }\n                                    });\n                                }\n                            });\n                        }\n                        if (!field.selectionSet) {\n                            return result;\n                        }\n                        if (result == null) {\n                            return result;\n                        }\n                        if (Array.isArray(result)) {\n                            return _this.resolveSubSelectedArray(field, result, execContext);\n                        }\n                        if (field.selectionSet) {\n                            return _this.resolveSelectionSet(field.selectionSet, result, execContext);\n                        }\n                    })];\n            });\n        });\n    };\n    LocalState.prototype.resolveSubSelectedArray = function (field, result, execContext) {\n        var _this = this;\n        return Promise.all(result.map(function (item) {\n            if (item === null) {\n                return null;\n            }\n            if (Array.isArray(item)) {\n                return _this.resolveSubSelectedArray(field, item, execContext);\n            }\n            if (field.selectionSet) {\n                return _this.resolveSelectionSet(field.selectionSet, item, execContext);\n            }\n        }));\n    };\n    return LocalState;\n}());\nexport { LocalState };\n//# sourceMappingURL=LocalState.js.map", "import { __assign } from \"tslib\";\nimport { equal } from \"@wry/equality\";\nimport { reobserveCacheFirst } from './ObservableQuery';\nimport { isNonEmptyArray, graphQLResultHasError, canUseWeakMap, } from '../utilities';\nimport { NetworkStatus, isNetworkRequestInFlight, } from './networkStatus';\n;\nvar destructiveMethodCounts = new (canUseWeakMap ? WeakMap : Map)();\nfunction wrapDestructiveCacheMethod(cache, methodName) {\n    var original = cache[methodName];\n    if (typeof original === \"function\") {\n        cache[methodName] = function () {\n            destructiveMethodCounts.set(cache, (destructiveMethodCounts.get(cache) + 1) % 1e15);\n            return original.apply(this, arguments);\n        };\n    }\n}\nfunction cancelNotifyTimeout(info) {\n    if (info[\"notifyTimeout\"]) {\n        clearTimeout(info[\"notifyTimeout\"]);\n        info[\"notifyTimeout\"] = void 0;\n    }\n}\nvar QueryInfo = (function () {\n    function QueryInfo(queryManager, queryId) {\n        if (queryId === void 0) { queryId = queryManager.generateQueryId(); }\n        this.queryId = queryId;\n        this.listeners = new Set();\n        this.document = null;\n        this.lastRequestId = 1;\n        this.subscriptions = new Set();\n        this.stopped = false;\n        this.dirty = false;\n        this.observableQuery = null;\n        var cache = this.cache = queryManager.cache;\n        if (!destructiveMethodCounts.has(cache)) {\n            destructiveMethodCounts.set(cache, 0);\n            wrapDestructiveCacheMethod(cache, \"evict\");\n            wrapDestructiveCacheMethod(cache, \"modify\");\n            wrapDestructiveCacheMethod(cache, \"reset\");\n        }\n    }\n    QueryInfo.prototype.init = function (query) {\n        var networkStatus = query.networkStatus || NetworkStatus.loading;\n        if (this.variables &&\n            this.networkStatus !== NetworkStatus.loading &&\n            !equal(this.variables, query.variables)) {\n            networkStatus = NetworkStatus.setVariables;\n        }\n        if (!equal(query.variables, this.variables)) {\n            this.lastDiff = void 0;\n        }\n        Object.assign(this, {\n            document: query.document,\n            variables: query.variables,\n            networkError: null,\n            graphQLErrors: this.graphQLErrors || [],\n            networkStatus: networkStatus,\n        });\n        if (query.observableQuery) {\n            this.setObservableQuery(query.observableQuery);\n        }\n        if (query.lastRequestId) {\n            this.lastRequestId = query.lastRequestId;\n        }\n        return this;\n    };\n    QueryInfo.prototype.reset = function () {\n        cancelNotifyTimeout(this);\n        this.lastDiff = void 0;\n        this.dirty = false;\n    };\n    QueryInfo.prototype.getDiff = function (variables) {\n        if (variables === void 0) { variables = this.variables; }\n        var options = this.getDiffOptions(variables);\n        if (this.lastDiff && equal(options, this.lastDiff.options)) {\n            return this.lastDiff.diff;\n        }\n        this.updateWatch(this.variables = variables);\n        var oq = this.observableQuery;\n        if (oq && oq.options.fetchPolicy === \"no-cache\") {\n            return { complete: false };\n        }\n        var diff = this.cache.diff(options);\n        this.updateLastDiff(diff, options);\n        return diff;\n    };\n    QueryInfo.prototype.updateLastDiff = function (diff, options) {\n        this.lastDiff = diff ? {\n            diff: diff,\n            options: options || this.getDiffOptions(),\n        } : void 0;\n    };\n    QueryInfo.prototype.getDiffOptions = function (variables) {\n        var _a;\n        if (variables === void 0) { variables = this.variables; }\n        return {\n            query: this.document,\n            variables: variables,\n            returnPartialData: true,\n            optimistic: true,\n            canonizeResults: (_a = this.observableQuery) === null || _a === void 0 ? void 0 : _a.options.canonizeResults,\n        };\n    };\n    QueryInfo.prototype.setDiff = function (diff) {\n        var _this = this;\n        var oldDiff = this.lastDiff && this.lastDiff.diff;\n        this.updateLastDiff(diff);\n        if (!this.dirty &&\n            !equal(oldDiff && oldDiff.result, diff && diff.result)) {\n            this.dirty = true;\n            if (!this.notifyTimeout) {\n                this.notifyTimeout = setTimeout(function () { return _this.notify(); }, 0);\n            }\n        }\n    };\n    QueryInfo.prototype.setObservableQuery = function (oq) {\n        var _this = this;\n        if (oq === this.observableQuery)\n            return;\n        if (this.oqListener) {\n            this.listeners.delete(this.oqListener);\n        }\n        this.observableQuery = oq;\n        if (oq) {\n            oq[\"queryInfo\"] = this;\n            this.listeners.add(this.oqListener = function () {\n                var diff = _this.getDiff();\n                if (diff.fromOptimisticTransaction) {\n                    oq[\"observe\"]();\n                }\n                else {\n                    reobserveCacheFirst(oq);\n                }\n            });\n        }\n        else {\n            delete this.oqListener;\n        }\n    };\n    QueryInfo.prototype.notify = function () {\n        var _this = this;\n        cancelNotifyTimeout(this);\n        if (this.shouldNotify()) {\n            this.listeners.forEach(function (listener) { return listener(_this); });\n        }\n        this.dirty = false;\n    };\n    QueryInfo.prototype.shouldNotify = function () {\n        if (!this.dirty || !this.listeners.size) {\n            return false;\n        }\n        if (isNetworkRequestInFlight(this.networkStatus) &&\n            this.observableQuery) {\n            var fetchPolicy = this.observableQuery.options.fetchPolicy;\n            if (fetchPolicy !== \"cache-only\" &&\n                fetchPolicy !== \"cache-and-network\") {\n                return false;\n            }\n        }\n        return true;\n    };\n    QueryInfo.prototype.stop = function () {\n        if (!this.stopped) {\n            this.stopped = true;\n            this.reset();\n            this.cancel();\n            this.cancel = QueryInfo.prototype.cancel;\n            this.subscriptions.forEach(function (sub) { return sub.unsubscribe(); });\n            var oq = this.observableQuery;\n            if (oq)\n                oq.stopPolling();\n        }\n    };\n    QueryInfo.prototype.cancel = function () { };\n    QueryInfo.prototype.updateWatch = function (variables) {\n        var _this = this;\n        if (variables === void 0) { variables = this.variables; }\n        var oq = this.observableQuery;\n        if (oq && oq.options.fetchPolicy === \"no-cache\") {\n            return;\n        }\n        var watchOptions = __assign(__assign({}, this.getDiffOptions(variables)), { watcher: this, callback: function (diff) { return _this.setDiff(diff); } });\n        if (!this.lastWatch ||\n            !equal(watchOptions, this.lastWatch)) {\n            this.cancel();\n            this.cancel = this.cache.watch(this.lastWatch = watchOptions);\n        }\n    };\n    QueryInfo.prototype.resetLastWrite = function () {\n        this.lastWrite = void 0;\n    };\n    QueryInfo.prototype.shouldWrite = function (result, variables) {\n        var lastWrite = this.lastWrite;\n        return !(lastWrite &&\n            lastWrite.dmCount === destructiveMethodCounts.get(this.cache) &&\n            equal(variables, lastWrite.variables) &&\n            equal(result.data, lastWrite.result.data));\n    };\n    QueryInfo.prototype.markResult = function (result, options, cacheWriteBehavior) {\n        var _this = this;\n        this.graphQLErrors = isNonEmptyArray(result.errors) ? result.errors : [];\n        this.reset();\n        if (options.fetchPolicy === 'no-cache') {\n            this.updateLastDiff({ result: result.data, complete: true }, this.getDiffOptions(options.variables));\n        }\n        else if (cacheWriteBehavior !== 0) {\n            if (shouldWriteResult(result, options.errorPolicy)) {\n                this.cache.performTransaction(function (cache) {\n                    if (_this.shouldWrite(result, options.variables)) {\n                        cache.writeQuery({\n                            query: _this.document,\n                            data: result.data,\n                            variables: options.variables,\n                            overwrite: cacheWriteBehavior === 1,\n                        });\n                        _this.lastWrite = {\n                            result: result,\n                            variables: options.variables,\n                            dmCount: destructiveMethodCounts.get(_this.cache),\n                        };\n                    }\n                    else {\n                        if (_this.lastDiff &&\n                            _this.lastDiff.diff.complete) {\n                            result.data = _this.lastDiff.diff.result;\n                            return;\n                        }\n                    }\n                    var diffOptions = _this.getDiffOptions(options.variables);\n                    var diff = cache.diff(diffOptions);\n                    if (!_this.stopped) {\n                        _this.updateWatch(options.variables);\n                    }\n                    _this.updateLastDiff(diff, diffOptions);\n                    if (diff.complete) {\n                        result.data = diff.result;\n                    }\n                });\n            }\n            else {\n                this.lastWrite = void 0;\n            }\n        }\n    };\n    QueryInfo.prototype.markReady = function () {\n        this.networkError = null;\n        return this.networkStatus = NetworkStatus.ready;\n    };\n    QueryInfo.prototype.markError = function (error) {\n        this.networkStatus = NetworkStatus.error;\n        this.lastWrite = void 0;\n        this.reset();\n        if (error.graphQLErrors) {\n            this.graphQLErrors = error.graphQLErrors;\n        }\n        if (error.networkError) {\n            this.networkError = error.networkError;\n        }\n        return error;\n    };\n    return QueryInfo;\n}());\nexport { QueryInfo };\nexport function shouldWriteResult(result, errorPolicy) {\n    if (errorPolicy === void 0) { errorPolicy = \"none\"; }\n    var ignoreErrors = errorPolicy === \"ignore\" ||\n        errorPolicy === \"all\";\n    var writeWithErrors = !graphQLResultHasError(result);\n    if (!writeWithErrors && ignoreErrors && result.data) {\n        writeWithErrors = true;\n    }\n    return writeWithErrors;\n}\n//# sourceMappingURL=QueryInfo.js.map", "import { __assign, __awaiter, __generator } from \"tslib\";\nimport { invariant, InvariantError } from '../utilities/globals';\nimport { equal } from '@wry/equality';\nimport { execute } from '../link/core';\nimport { canonicalStringify } from '../cache';\nimport { getDefaultValues, getOperationDefinition, getOperationName, hasClientExports, graphQLResultHasError, removeConnectionDirectiveFromDocument, canUseWeakMap, Observable, asyncMap, isNonEmptyArray, Concast, makeUniqueId, isDocumentNode, isNonNullObject, } from '../utilities';\nimport { ApolloError, isApolloError } from '../errors';\nimport { ObservableQuery, logMissingFieldErrors } from './ObservableQuery';\nimport { NetworkStatus, isNetworkRequestInFlight } from './networkStatus';\nimport { LocalState } from './LocalState';\nimport { QueryInfo, shouldWriteResult, } from './QueryInfo';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar QueryManager = (function () {\n    function QueryManager(_a) {\n        var cache = _a.cache, link = _a.link, defaultOptions = _a.defaultOptions, _b = _a.queryDeduplication, queryDeduplication = _b === void 0 ? false : _b, onBroadcast = _a.onBroadcast, _c = _a.ssrMode, ssrMode = _c === void 0 ? false : _c, _d = _a.clientAwareness, clientAwareness = _d === void 0 ? {} : _d, localState = _a.localState, assumeImmutableResults = _a.assumeImmutableResults;\n        this.clientAwareness = {};\n        this.queries = new Map();\n        this.fetchCancelFns = new Map();\n        this.transformCache = new (canUseWeakMap ? WeakMap : Map)();\n        this.queryIdCounter = 1;\n        this.requestIdCounter = 1;\n        this.mutationIdCounter = 1;\n        this.inFlightLinkObservables = new Map();\n        this.cache = cache;\n        this.link = link;\n        this.defaultOptions = defaultOptions || Object.create(null);\n        this.queryDeduplication = queryDeduplication;\n        this.clientAwareness = clientAwareness;\n        this.localState = localState || new LocalState({ cache: cache });\n        this.ssrMode = ssrMode;\n        this.assumeImmutableResults = !!assumeImmutableResults;\n        if ((this.onBroadcast = onBroadcast)) {\n            this.mutationStore = Object.create(null);\n        }\n    }\n    QueryManager.prototype.stop = function () {\n        var _this = this;\n        this.queries.forEach(function (_info, queryId) {\n            _this.stopQueryNoBroadcast(queryId);\n        });\n        this.cancelPendingFetches(__DEV__ ? new InvariantError('QueryManager stopped while query was in flight') : new InvariantError(11));\n    };\n    QueryManager.prototype.cancelPendingFetches = function (error) {\n        this.fetchCancelFns.forEach(function (cancel) { return cancel(error); });\n        this.fetchCancelFns.clear();\n    };\n    QueryManager.prototype.mutate = function (_a) {\n        var _b, _c;\n        var mutation = _a.mutation, variables = _a.variables, optimisticResponse = _a.optimisticResponse, updateQueries = _a.updateQueries, _d = _a.refetchQueries, refetchQueries = _d === void 0 ? [] : _d, _e = _a.awaitRefetchQueries, awaitRefetchQueries = _e === void 0 ? false : _e, updateWithProxyFn = _a.update, onQueryUpdated = _a.onQueryUpdated, _f = _a.fetchPolicy, fetchPolicy = _f === void 0 ? ((_b = this.defaultOptions.mutate) === null || _b === void 0 ? void 0 : _b.fetchPolicy) || \"network-only\" : _f, _g = _a.errorPolicy, errorPolicy = _g === void 0 ? ((_c = this.defaultOptions.mutate) === null || _c === void 0 ? void 0 : _c.errorPolicy) || \"none\" : _g, keepRootFields = _a.keepRootFields, context = _a.context;\n        return __awaiter(this, void 0, void 0, function () {\n            var mutationId, mutationStoreValue, self;\n            return __generator(this, function (_h) {\n                switch (_h.label) {\n                    case 0:\n                        __DEV__ ? invariant(mutation, 'mutation option is required. You must specify your GraphQL document in the mutation option.') : invariant(mutation, 12);\n                        __DEV__ ? invariant(fetchPolicy === 'network-only' ||\n                            fetchPolicy === 'no-cache', \"Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write.\") : invariant(fetchPolicy === 'network-only' ||\n                            fetchPolicy === 'no-cache', 13);\n                        mutationId = this.generateMutationId();\n                        mutation = this.transform(mutation).document;\n                        variables = this.getVariables(mutation, variables);\n                        if (!this.transform(mutation).hasClientExports) return [3, 2];\n                        return [4, this.localState.addExportedVariables(mutation, variables, context)];\n                    case 1:\n                        variables = (_h.sent());\n                        _h.label = 2;\n                    case 2:\n                        mutationStoreValue = this.mutationStore &&\n                            (this.mutationStore[mutationId] = {\n                                mutation: mutation,\n                                variables: variables,\n                                loading: true,\n                                error: null,\n                            });\n                        if (optimisticResponse) {\n                            this.markMutationOptimistic(optimisticResponse, {\n                                mutationId: mutationId,\n                                document: mutation,\n                                variables: variables,\n                                fetchPolicy: fetchPolicy,\n                                errorPolicy: errorPolicy,\n                                context: context,\n                                updateQueries: updateQueries,\n                                update: updateWithProxyFn,\n                                keepRootFields: keepRootFields,\n                            });\n                        }\n                        this.broadcastQueries();\n                        self = this;\n                        return [2, new Promise(function (resolve, reject) {\n                                return asyncMap(self.getObservableFromLink(mutation, __assign(__assign({}, context), { optimisticResponse: optimisticResponse }), variables, false), function (result) {\n                                    if (graphQLResultHasError(result) && errorPolicy === 'none') {\n                                        throw new ApolloError({\n                                            graphQLErrors: result.errors,\n                                        });\n                                    }\n                                    if (mutationStoreValue) {\n                                        mutationStoreValue.loading = false;\n                                        mutationStoreValue.error = null;\n                                    }\n                                    var storeResult = __assign({}, result);\n                                    if (typeof refetchQueries === \"function\") {\n                                        refetchQueries = refetchQueries(storeResult);\n                                    }\n                                    if (errorPolicy === 'ignore' &&\n                                        graphQLResultHasError(storeResult)) {\n                                        delete storeResult.errors;\n                                    }\n                                    return self.markMutationResult({\n                                        mutationId: mutationId,\n                                        result: storeResult,\n                                        document: mutation,\n                                        variables: variables,\n                                        fetchPolicy: fetchPolicy,\n                                        errorPolicy: errorPolicy,\n                                        context: context,\n                                        update: updateWithProxyFn,\n                                        updateQueries: updateQueries,\n                                        awaitRefetchQueries: awaitRefetchQueries,\n                                        refetchQueries: refetchQueries,\n                                        removeOptimistic: optimisticResponse ? mutationId : void 0,\n                                        onQueryUpdated: onQueryUpdated,\n                                        keepRootFields: keepRootFields,\n                                    });\n                                }).subscribe({\n                                    next: function (storeResult) {\n                                        self.broadcastQueries();\n                                        resolve(storeResult);\n                                    },\n                                    error: function (err) {\n                                        if (mutationStoreValue) {\n                                            mutationStoreValue.loading = false;\n                                            mutationStoreValue.error = err;\n                                        }\n                                        if (optimisticResponse) {\n                                            self.cache.removeOptimistic(mutationId);\n                                        }\n                                        self.broadcastQueries();\n                                        reject(err instanceof ApolloError ? err : new ApolloError({\n                                            networkError: err,\n                                        }));\n                                    },\n                                });\n                            })];\n                }\n            });\n        });\n    };\n    QueryManager.prototype.markMutationResult = function (mutation, cache) {\n        var _this = this;\n        if (cache === void 0) { cache = this.cache; }\n        var result = mutation.result;\n        var cacheWrites = [];\n        var skipCache = mutation.fetchPolicy === \"no-cache\";\n        if (!skipCache && shouldWriteResult(result, mutation.errorPolicy)) {\n            cacheWrites.push({\n                result: result.data,\n                dataId: 'ROOT_MUTATION',\n                query: mutation.document,\n                variables: mutation.variables,\n            });\n            var updateQueries_1 = mutation.updateQueries;\n            if (updateQueries_1) {\n                this.queries.forEach(function (_a, queryId) {\n                    var observableQuery = _a.observableQuery;\n                    var queryName = observableQuery && observableQuery.queryName;\n                    if (!queryName || !hasOwnProperty.call(updateQueries_1, queryName)) {\n                        return;\n                    }\n                    var updater = updateQueries_1[queryName];\n                    var _b = _this.queries.get(queryId), document = _b.document, variables = _b.variables;\n                    var _c = cache.diff({\n                        query: document,\n                        variables: variables,\n                        returnPartialData: true,\n                        optimistic: false,\n                    }), currentQueryResult = _c.result, complete = _c.complete;\n                    if (complete && currentQueryResult) {\n                        var nextQueryResult = updater(currentQueryResult, {\n                            mutationResult: result,\n                            queryName: document && getOperationName(document) || void 0,\n                            queryVariables: variables,\n                        });\n                        if (nextQueryResult) {\n                            cacheWrites.push({\n                                result: nextQueryResult,\n                                dataId: 'ROOT_QUERY',\n                                query: document,\n                                variables: variables,\n                            });\n                        }\n                    }\n                });\n            }\n        }\n        if (cacheWrites.length > 0 ||\n            mutation.refetchQueries ||\n            mutation.update ||\n            mutation.onQueryUpdated ||\n            mutation.removeOptimistic) {\n            var results_1 = [];\n            this.refetchQueries({\n                updateCache: function (cache) {\n                    if (!skipCache) {\n                        cacheWrites.forEach(function (write) { return cache.write(write); });\n                    }\n                    var update = mutation.update;\n                    if (update) {\n                        if (!skipCache) {\n                            var diff = cache.diff({\n                                id: \"ROOT_MUTATION\",\n                                query: _this.transform(mutation.document).asQuery,\n                                variables: mutation.variables,\n                                optimistic: false,\n                                returnPartialData: true,\n                            });\n                            if (diff.complete) {\n                                result = __assign(__assign({}, result), { data: diff.result });\n                            }\n                        }\n                        update(cache, result, {\n                            context: mutation.context,\n                            variables: mutation.variables,\n                        });\n                    }\n                    if (!skipCache && !mutation.keepRootFields) {\n                        cache.modify({\n                            id: 'ROOT_MUTATION',\n                            fields: function (value, _a) {\n                                var fieldName = _a.fieldName, DELETE = _a.DELETE;\n                                return fieldName === \"__typename\" ? value : DELETE;\n                            },\n                        });\n                    }\n                },\n                include: mutation.refetchQueries,\n                optimistic: false,\n                removeOptimistic: mutation.removeOptimistic,\n                onQueryUpdated: mutation.onQueryUpdated || null,\n            }).forEach(function (result) { return results_1.push(result); });\n            if (mutation.awaitRefetchQueries || mutation.onQueryUpdated) {\n                return Promise.all(results_1).then(function () { return result; });\n            }\n        }\n        return Promise.resolve(result);\n    };\n    QueryManager.prototype.markMutationOptimistic = function (optimisticResponse, mutation) {\n        var _this = this;\n        var data = typeof optimisticResponse === \"function\"\n            ? optimisticResponse(mutation.variables)\n            : optimisticResponse;\n        return this.cache.recordOptimisticTransaction(function (cache) {\n            try {\n                _this.markMutationResult(__assign(__assign({}, mutation), { result: { data: data } }), cache);\n            }\n            catch (error) {\n                __DEV__ && invariant.error(error);\n            }\n        }, mutation.mutationId);\n    };\n    QueryManager.prototype.fetchQuery = function (queryId, options, networkStatus) {\n        return this.fetchQueryObservable(queryId, options, networkStatus).promise;\n    };\n    QueryManager.prototype.getQueryStore = function () {\n        var store = Object.create(null);\n        this.queries.forEach(function (info, queryId) {\n            store[queryId] = {\n                variables: info.variables,\n                networkStatus: info.networkStatus,\n                networkError: info.networkError,\n                graphQLErrors: info.graphQLErrors,\n            };\n        });\n        return store;\n    };\n    QueryManager.prototype.resetErrors = function (queryId) {\n        var queryInfo = this.queries.get(queryId);\n        if (queryInfo) {\n            queryInfo.networkError = undefined;\n            queryInfo.graphQLErrors = [];\n        }\n    };\n    QueryManager.prototype.transform = function (document) {\n        var transformCache = this.transformCache;\n        if (!transformCache.has(document)) {\n            var transformed = this.cache.transformDocument(document);\n            var forLink = removeConnectionDirectiveFromDocument(this.cache.transformForLink(transformed));\n            var clientQuery = this.localState.clientQuery(transformed);\n            var serverQuery = forLink && this.localState.serverQuery(forLink);\n            var cacheEntry_1 = {\n                document: transformed,\n                hasClientExports: hasClientExports(transformed),\n                hasForcedResolvers: this.localState.shouldForceResolvers(transformed),\n                clientQuery: clientQuery,\n                serverQuery: serverQuery,\n                defaultVars: getDefaultValues(getOperationDefinition(transformed)),\n                asQuery: __assign(__assign({}, transformed), { definitions: transformed.definitions.map(function (def) {\n                        if (def.kind === \"OperationDefinition\" &&\n                            def.operation !== \"query\") {\n                            return __assign(__assign({}, def), { operation: \"query\" });\n                        }\n                        return def;\n                    }) })\n            };\n            var add = function (doc) {\n                if (doc && !transformCache.has(doc)) {\n                    transformCache.set(doc, cacheEntry_1);\n                }\n            };\n            add(document);\n            add(transformed);\n            add(clientQuery);\n            add(serverQuery);\n        }\n        return transformCache.get(document);\n    };\n    QueryManager.prototype.getVariables = function (document, variables) {\n        return __assign(__assign({}, this.transform(document).defaultVars), variables);\n    };\n    QueryManager.prototype.watchQuery = function (options) {\n        options = __assign(__assign({}, options), { variables: this.getVariables(options.query, options.variables) });\n        if (typeof options.notifyOnNetworkStatusChange === 'undefined') {\n            options.notifyOnNetworkStatusChange = false;\n        }\n        var queryInfo = new QueryInfo(this);\n        var observable = new ObservableQuery({\n            queryManager: this,\n            queryInfo: queryInfo,\n            options: options,\n        });\n        this.queries.set(observable.queryId, queryInfo);\n        queryInfo.init({\n            document: observable.query,\n            observableQuery: observable,\n            variables: observable.variables,\n        });\n        return observable;\n    };\n    QueryManager.prototype.query = function (options, queryId) {\n        var _this = this;\n        if (queryId === void 0) { queryId = this.generateQueryId(); }\n        __DEV__ ? invariant(options.query, 'query option is required. You must specify your GraphQL document ' +\n            'in the query option.') : invariant(options.query, 14);\n        __DEV__ ? invariant(options.query.kind === 'Document', 'You must wrap the query string in a \"gql\" tag.') : invariant(options.query.kind === 'Document', 15);\n        __DEV__ ? invariant(!options.returnPartialData, 'returnPartialData option only supported on watchQuery.') : invariant(!options.returnPartialData, 16);\n        __DEV__ ? invariant(!options.pollInterval, 'pollInterval option only supported on watchQuery.') : invariant(!options.pollInterval, 17);\n        return this.fetchQuery(queryId, options).finally(function () { return _this.stopQuery(queryId); });\n    };\n    QueryManager.prototype.generateQueryId = function () {\n        return String(this.queryIdCounter++);\n    };\n    QueryManager.prototype.generateRequestId = function () {\n        return this.requestIdCounter++;\n    };\n    QueryManager.prototype.generateMutationId = function () {\n        return String(this.mutationIdCounter++);\n    };\n    QueryManager.prototype.stopQueryInStore = function (queryId) {\n        this.stopQueryInStoreNoBroadcast(queryId);\n        this.broadcastQueries();\n    };\n    QueryManager.prototype.stopQueryInStoreNoBroadcast = function (queryId) {\n        var queryInfo = this.queries.get(queryId);\n        if (queryInfo)\n            queryInfo.stop();\n    };\n    QueryManager.prototype.clearStore = function (options) {\n        if (options === void 0) { options = {\n            discardWatches: true,\n        }; }\n        this.cancelPendingFetches(__DEV__ ? new InvariantError('Store reset while query was in flight (not completed in link chain)') : new InvariantError(18));\n        this.queries.forEach(function (queryInfo) {\n            if (queryInfo.observableQuery) {\n                queryInfo.networkStatus = NetworkStatus.loading;\n            }\n            else {\n                queryInfo.stop();\n            }\n        });\n        if (this.mutationStore) {\n            this.mutationStore = Object.create(null);\n        }\n        return this.cache.reset(options);\n    };\n    QueryManager.prototype.getObservableQueries = function (include) {\n        var _this = this;\n        if (include === void 0) { include = \"active\"; }\n        var queries = new Map();\n        var queryNamesAndDocs = new Map();\n        var legacyQueryOptions = new Set();\n        if (Array.isArray(include)) {\n            include.forEach(function (desc) {\n                if (typeof desc === \"string\") {\n                    queryNamesAndDocs.set(desc, false);\n                }\n                else if (isDocumentNode(desc)) {\n                    queryNamesAndDocs.set(_this.transform(desc).document, false);\n                }\n                else if (isNonNullObject(desc) && desc.query) {\n                    legacyQueryOptions.add(desc);\n                }\n            });\n        }\n        this.queries.forEach(function (_a, queryId) {\n            var oq = _a.observableQuery, document = _a.document;\n            if (oq) {\n                if (include === \"all\") {\n                    queries.set(queryId, oq);\n                    return;\n                }\n                var queryName = oq.queryName, fetchPolicy = oq.options.fetchPolicy;\n                if (fetchPolicy === \"standby\" ||\n                    (include === \"active\" && !oq.hasObservers())) {\n                    return;\n                }\n                if (include === \"active\" ||\n                    (queryName && queryNamesAndDocs.has(queryName)) ||\n                    (document && queryNamesAndDocs.has(document))) {\n                    queries.set(queryId, oq);\n                    if (queryName)\n                        queryNamesAndDocs.set(queryName, true);\n                    if (document)\n                        queryNamesAndDocs.set(document, true);\n                }\n            }\n        });\n        if (legacyQueryOptions.size) {\n            legacyQueryOptions.forEach(function (options) {\n                var queryId = makeUniqueId(\"legacyOneTimeQuery\");\n                var queryInfo = _this.getQuery(queryId).init({\n                    document: options.query,\n                    variables: options.variables,\n                });\n                var oq = new ObservableQuery({\n                    queryManager: _this,\n                    queryInfo: queryInfo,\n                    options: __assign(__assign({}, options), { fetchPolicy: \"network-only\" }),\n                });\n                invariant(oq.queryId === queryId);\n                queryInfo.setObservableQuery(oq);\n                queries.set(queryId, oq);\n            });\n        }\n        if (__DEV__ && queryNamesAndDocs.size) {\n            queryNamesAndDocs.forEach(function (included, nameOrDoc) {\n                if (!included) {\n                    __DEV__ && invariant.warn(\"Unknown query \".concat(typeof nameOrDoc === \"string\" ? \"named \" : \"\").concat(JSON.stringify(nameOrDoc, null, 2), \" requested in refetchQueries options.include array\"));\n                }\n            });\n        }\n        return queries;\n    };\n    QueryManager.prototype.reFetchObservableQueries = function (includeStandby) {\n        var _this = this;\n        if (includeStandby === void 0) { includeStandby = false; }\n        var observableQueryPromises = [];\n        this.getObservableQueries(includeStandby ? \"all\" : \"active\").forEach(function (observableQuery, queryId) {\n            var fetchPolicy = observableQuery.options.fetchPolicy;\n            observableQuery.resetLastResults();\n            if (includeStandby ||\n                (fetchPolicy !== \"standby\" &&\n                    fetchPolicy !== \"cache-only\")) {\n                observableQueryPromises.push(observableQuery.refetch());\n            }\n            _this.getQuery(queryId).setDiff(null);\n        });\n        this.broadcastQueries();\n        return Promise.all(observableQueryPromises);\n    };\n    QueryManager.prototype.setObservableQuery = function (observableQuery) {\n        this.getQuery(observableQuery.queryId).setObservableQuery(observableQuery);\n    };\n    QueryManager.prototype.startGraphQLSubscription = function (_a) {\n        var _this = this;\n        var query = _a.query, fetchPolicy = _a.fetchPolicy, errorPolicy = _a.errorPolicy, variables = _a.variables, _b = _a.context, context = _b === void 0 ? {} : _b;\n        query = this.transform(query).document;\n        variables = this.getVariables(query, variables);\n        var makeObservable = function (variables) {\n            return _this.getObservableFromLink(query, context, variables).map(function (result) {\n                if (fetchPolicy !== 'no-cache') {\n                    if (shouldWriteResult(result, errorPolicy)) {\n                        _this.cache.write({\n                            query: query,\n                            result: result.data,\n                            dataId: 'ROOT_SUBSCRIPTION',\n                            variables: variables,\n                        });\n                    }\n                    _this.broadcastQueries();\n                }\n                if (graphQLResultHasError(result)) {\n                    throw new ApolloError({\n                        graphQLErrors: result.errors,\n                    });\n                }\n                return result;\n            });\n        };\n        if (this.transform(query).hasClientExports) {\n            var observablePromise_1 = this.localState.addExportedVariables(query, variables, context).then(makeObservable);\n            return new Observable(function (observer) {\n                var sub = null;\n                observablePromise_1.then(function (observable) { return sub = observable.subscribe(observer); }, observer.error);\n                return function () { return sub && sub.unsubscribe(); };\n            });\n        }\n        return makeObservable(variables);\n    };\n    QueryManager.prototype.stopQuery = function (queryId) {\n        this.stopQueryNoBroadcast(queryId);\n        this.broadcastQueries();\n    };\n    QueryManager.prototype.stopQueryNoBroadcast = function (queryId) {\n        this.stopQueryInStoreNoBroadcast(queryId);\n        this.removeQuery(queryId);\n    };\n    QueryManager.prototype.removeQuery = function (queryId) {\n        this.fetchCancelFns.delete(queryId);\n        if (this.queries.has(queryId)) {\n            this.getQuery(queryId).stop();\n            this.queries.delete(queryId);\n        }\n    };\n    QueryManager.prototype.broadcastQueries = function () {\n        if (this.onBroadcast)\n            this.onBroadcast();\n        this.queries.forEach(function (info) { return info.notify(); });\n    };\n    QueryManager.prototype.getLocalState = function () {\n        return this.localState;\n    };\n    QueryManager.prototype.getObservableFromLink = function (query, context, variables, deduplication) {\n        var _this = this;\n        var _a;\n        if (deduplication === void 0) { deduplication = (_a = context === null || context === void 0 ? void 0 : context.queryDeduplication) !== null && _a !== void 0 ? _a : this.queryDeduplication; }\n        var observable;\n        var serverQuery = this.transform(query).serverQuery;\n        if (serverQuery) {\n            var _b = this, inFlightLinkObservables_1 = _b.inFlightLinkObservables, link = _b.link;\n            var operation = {\n                query: serverQuery,\n                variables: variables,\n                operationName: getOperationName(serverQuery) || void 0,\n                context: this.prepareContext(__assign(__assign({}, context), { forceFetch: !deduplication })),\n            };\n            context = operation.context;\n            if (deduplication) {\n                var byVariables_1 = inFlightLinkObservables_1.get(serverQuery) || new Map();\n                inFlightLinkObservables_1.set(serverQuery, byVariables_1);\n                var varJson_1 = canonicalStringify(variables);\n                observable = byVariables_1.get(varJson_1);\n                if (!observable) {\n                    var concast = new Concast([\n                        execute(link, operation)\n                    ]);\n                    byVariables_1.set(varJson_1, observable = concast);\n                    concast.cleanup(function () {\n                        if (byVariables_1.delete(varJson_1) &&\n                            byVariables_1.size < 1) {\n                            inFlightLinkObservables_1.delete(serverQuery);\n                        }\n                    });\n                }\n            }\n            else {\n                observable = new Concast([\n                    execute(link, operation)\n                ]);\n            }\n        }\n        else {\n            observable = new Concast([\n                Observable.of({ data: {} })\n            ]);\n            context = this.prepareContext(context);\n        }\n        var clientQuery = this.transform(query).clientQuery;\n        if (clientQuery) {\n            observable = asyncMap(observable, function (result) {\n                return _this.localState.runResolvers({\n                    document: clientQuery,\n                    remoteResult: result,\n                    context: context,\n                    variables: variables,\n                });\n            });\n        }\n        return observable;\n    };\n    QueryManager.prototype.getResultsFromLink = function (queryInfo, cacheWriteBehavior, options) {\n        var requestId = queryInfo.lastRequestId = this.generateRequestId();\n        return asyncMap(this.getObservableFromLink(queryInfo.document, options.context, options.variables), function (result) {\n            var hasErrors = isNonEmptyArray(result.errors);\n            if (requestId >= queryInfo.lastRequestId) {\n                if (hasErrors && options.errorPolicy === \"none\") {\n                    throw queryInfo.markError(new ApolloError({\n                        graphQLErrors: result.errors,\n                    }));\n                }\n                queryInfo.markResult(result, options, cacheWriteBehavior);\n                queryInfo.markReady();\n            }\n            var aqr = {\n                data: result.data,\n                loading: false,\n                networkStatus: NetworkStatus.ready,\n            };\n            if (hasErrors && options.errorPolicy !== \"ignore\") {\n                aqr.errors = result.errors;\n                aqr.networkStatus = NetworkStatus.error;\n            }\n            return aqr;\n        }, function (networkError) {\n            var error = isApolloError(networkError)\n                ? networkError\n                : new ApolloError({ networkError: networkError });\n            if (requestId >= queryInfo.lastRequestId) {\n                queryInfo.markError(error);\n            }\n            throw error;\n        });\n    };\n    QueryManager.prototype.fetchQueryObservable = function (queryId, options, networkStatus) {\n        var _this = this;\n        if (networkStatus === void 0) { networkStatus = NetworkStatus.loading; }\n        var query = this.transform(options.query).document;\n        var variables = this.getVariables(query, options.variables);\n        var queryInfo = this.getQuery(queryId);\n        var defaults = this.defaultOptions.watchQuery;\n        var _a = options.fetchPolicy, fetchPolicy = _a === void 0 ? defaults && defaults.fetchPolicy || \"cache-first\" : _a, _b = options.errorPolicy, errorPolicy = _b === void 0 ? defaults && defaults.errorPolicy || \"none\" : _b, _c = options.returnPartialData, returnPartialData = _c === void 0 ? false : _c, _d = options.notifyOnNetworkStatusChange, notifyOnNetworkStatusChange = _d === void 0 ? false : _d, _e = options.context, context = _e === void 0 ? {} : _e;\n        var normalized = Object.assign({}, options, {\n            query: query,\n            variables: variables,\n            fetchPolicy: fetchPolicy,\n            errorPolicy: errorPolicy,\n            returnPartialData: returnPartialData,\n            notifyOnNetworkStatusChange: notifyOnNetworkStatusChange,\n            context: context,\n        });\n        var fromVariables = function (variables) {\n            normalized.variables = variables;\n            return _this.fetchQueryByPolicy(queryInfo, normalized, networkStatus);\n        };\n        this.fetchCancelFns.set(queryId, function (reason) {\n            setTimeout(function () { return concast.cancel(reason); });\n        });\n        var concast = new Concast(this.transform(normalized.query).hasClientExports\n            ? this.localState.addExportedVariables(normalized.query, normalized.variables, normalized.context).then(fromVariables)\n            : fromVariables(normalized.variables));\n        concast.cleanup(function () {\n            _this.fetchCancelFns.delete(queryId);\n            if (queryInfo.observableQuery) {\n                queryInfo.observableQuery[\"applyNextFetchPolicy\"](\"after-fetch\", options);\n            }\n        });\n        return concast;\n    };\n    QueryManager.prototype.refetchQueries = function (_a) {\n        var _this = this;\n        var updateCache = _a.updateCache, include = _a.include, _b = _a.optimistic, optimistic = _b === void 0 ? false : _b, _c = _a.removeOptimistic, removeOptimistic = _c === void 0 ? optimistic ? makeUniqueId(\"refetchQueries\") : void 0 : _c, onQueryUpdated = _a.onQueryUpdated;\n        var includedQueriesById = new Map();\n        if (include) {\n            this.getObservableQueries(include).forEach(function (oq, queryId) {\n                includedQueriesById.set(queryId, {\n                    oq: oq,\n                    lastDiff: _this.getQuery(queryId).getDiff(),\n                });\n            });\n        }\n        var results = new Map;\n        if (updateCache) {\n            this.cache.batch({\n                update: updateCache,\n                optimistic: optimistic && removeOptimistic || false,\n                removeOptimistic: removeOptimistic,\n                onWatchUpdated: function (watch, diff, lastDiff) {\n                    var oq = watch.watcher instanceof QueryInfo &&\n                        watch.watcher.observableQuery;\n                    if (oq) {\n                        if (onQueryUpdated) {\n                            includedQueriesById.delete(oq.queryId);\n                            var result = onQueryUpdated(oq, diff, lastDiff);\n                            if (result === true) {\n                                result = oq.refetch();\n                            }\n                            if (result !== false) {\n                                results.set(oq, result);\n                            }\n                            return result;\n                        }\n                        if (onQueryUpdated !== null) {\n                            includedQueriesById.set(oq.queryId, { oq: oq, lastDiff: lastDiff, diff: diff });\n                        }\n                    }\n                },\n            });\n        }\n        if (includedQueriesById.size) {\n            includedQueriesById.forEach(function (_a, queryId) {\n                var oq = _a.oq, lastDiff = _a.lastDiff, diff = _a.diff;\n                var result;\n                if (onQueryUpdated) {\n                    if (!diff) {\n                        var info = oq[\"queryInfo\"];\n                        info.reset();\n                        diff = info.getDiff();\n                    }\n                    result = onQueryUpdated(oq, diff, lastDiff);\n                }\n                if (!onQueryUpdated || result === true) {\n                    result = oq.refetch();\n                }\n                if (result !== false) {\n                    results.set(oq, result);\n                }\n                if (queryId.indexOf(\"legacyOneTimeQuery\") >= 0) {\n                    _this.stopQueryNoBroadcast(queryId);\n                }\n            });\n        }\n        if (removeOptimistic) {\n            this.cache.removeOptimistic(removeOptimistic);\n        }\n        return results;\n    };\n    QueryManager.prototype.fetchQueryByPolicy = function (queryInfo, _a, networkStatus) {\n        var _this = this;\n        var query = _a.query, variables = _a.variables, fetchPolicy = _a.fetchPolicy, refetchWritePolicy = _a.refetchWritePolicy, errorPolicy = _a.errorPolicy, returnPartialData = _a.returnPartialData, context = _a.context, notifyOnNetworkStatusChange = _a.notifyOnNetworkStatusChange;\n        var oldNetworkStatus = queryInfo.networkStatus;\n        queryInfo.init({\n            document: this.transform(query).document,\n            variables: variables,\n            networkStatus: networkStatus,\n        });\n        var readCache = function () { return queryInfo.getDiff(variables); };\n        var resultsFromCache = function (diff, networkStatus) {\n            if (networkStatus === void 0) { networkStatus = queryInfo.networkStatus || NetworkStatus.loading; }\n            var data = diff.result;\n            if (__DEV__ &&\n                !returnPartialData &&\n                !equal(data, {})) {\n                logMissingFieldErrors(diff.missing);\n            }\n            var fromData = function (data) { return Observable.of(__assign({ data: data, loading: isNetworkRequestInFlight(networkStatus), networkStatus: networkStatus }, (diff.complete ? null : { partial: true }))); };\n            if (data && _this.transform(query).hasForcedResolvers) {\n                return _this.localState.runResolvers({\n                    document: query,\n                    remoteResult: { data: data },\n                    context: context,\n                    variables: variables,\n                    onlyRunForcedResolvers: true,\n                }).then(function (resolved) { return fromData(resolved.data || void 0); });\n            }\n            return fromData(data);\n        };\n        var cacheWriteBehavior = fetchPolicy === \"no-cache\" ? 0 :\n            (networkStatus === NetworkStatus.refetch &&\n                refetchWritePolicy !== \"merge\") ? 1\n                : 2;\n        var resultsFromLink = function () { return _this.getResultsFromLink(queryInfo, cacheWriteBehavior, {\n            variables: variables,\n            context: context,\n            fetchPolicy: fetchPolicy,\n            errorPolicy: errorPolicy,\n        }); };\n        var shouldNotify = notifyOnNetworkStatusChange &&\n            typeof oldNetworkStatus === \"number\" &&\n            oldNetworkStatus !== networkStatus &&\n            isNetworkRequestInFlight(networkStatus);\n        switch (fetchPolicy) {\n            default:\n            case \"cache-first\": {\n                var diff = readCache();\n                if (diff.complete) {\n                    return [\n                        resultsFromCache(diff, queryInfo.markReady()),\n                    ];\n                }\n                if (returnPartialData || shouldNotify) {\n                    return [\n                        resultsFromCache(diff),\n                        resultsFromLink(),\n                    ];\n                }\n                return [\n                    resultsFromLink(),\n                ];\n            }\n            case \"cache-and-network\": {\n                var diff = readCache();\n                if (diff.complete || returnPartialData || shouldNotify) {\n                    return [\n                        resultsFromCache(diff),\n                        resultsFromLink(),\n                    ];\n                }\n                return [\n                    resultsFromLink(),\n                ];\n            }\n            case \"cache-only\":\n                return [\n                    resultsFromCache(readCache(), queryInfo.markReady()),\n                ];\n            case \"network-only\":\n                if (shouldNotify) {\n                    return [\n                        resultsFromCache(readCache()),\n                        resultsFromLink(),\n                    ];\n                }\n                return [resultsFromLink()];\n            case \"no-cache\":\n                if (shouldNotify) {\n                    return [\n                        resultsFromCache(queryInfo.getDiff()),\n                        resultsFromLink(),\n                    ];\n                }\n                return [resultsFromLink()];\n            case \"standby\":\n                return [];\n        }\n    };\n    QueryManager.prototype.getQuery = function (queryId) {\n        if (queryId && !this.queries.has(queryId)) {\n            this.queries.set(queryId, new QueryInfo(this, queryId));\n        }\n        return this.queries.get(queryId);\n    };\n    QueryManager.prototype.prepareContext = function (context) {\n        if (context === void 0) { context = {}; }\n        var newContext = this.localState.prepareContext(context);\n        return __assign(__assign({}, newContext), { clientAwareness: this.clientAwareness });\n    };\n    return QueryManager;\n}());\nexport { QueryManager };\n//# sourceMappingURL=QueryManager.js.map", "import { __assign } from \"tslib\";\nimport { invariant, InvariantError } from '../utilities/globals';\nimport { ApolloLink, execute } from '../link/core';\nimport { version } from '../version';\nimport { HttpLink } from '../link/http';\nimport { QueryManager } from './QueryManager';\nimport { LocalState, } from './LocalState';\nvar hasSuggestedDevtools = false;\nimport { mergeOptions } from \"../utilities\";\nexport { mergeOptions };\nvar ApolloClient = (function () {\n    function ApolloClient(options) {\n        var _this = this;\n        this.resetStoreCallbacks = [];\n        this.clearStoreCallbacks = [];\n        var uri = options.uri, credentials = options.credentials, headers = options.headers, cache = options.cache, _a = options.ssrMode, ssrMode = _a === void 0 ? false : _a, _b = options.ssrForceFetchDelay, ssrForceFetchDelay = _b === void 0 ? 0 : _b, _c = options.connectToDevTools, connectToDevTools = _c === void 0 ? typeof window === 'object' &&\n            !window.__APOLLO_CLIENT__ &&\n            __DEV__ : _c, _d = options.queryDeduplication, queryDeduplication = _d === void 0 ? true : _d, defaultOptions = options.defaultOptions, _e = options.assumeImmutableResults, assumeImmutableResults = _e === void 0 ? false : _e, resolvers = options.resolvers, typeDefs = options.typeDefs, fragmentMatcher = options.fragmentMatcher, clientAwarenessName = options.name, clientAwarenessVersion = options.version;\n        var link = options.link;\n        if (!link) {\n            link = uri\n                ? new HttpLink({ uri: uri, credentials: credentials, headers: headers })\n                : ApolloLink.empty();\n        }\n        if (!cache) {\n            throw __DEV__ ? new InvariantError(\"To initialize Apollo Client, you must specify a 'cache' property \" +\n                \"in the options object. \\n\" +\n                \"For more information, please visit: https://go.apollo.dev/c/docs\") : new InvariantError(7);\n        }\n        this.link = link;\n        this.cache = cache;\n        this.disableNetworkFetches = ssrMode || ssrForceFetchDelay > 0;\n        this.queryDeduplication = queryDeduplication;\n        this.defaultOptions = defaultOptions || Object.create(null);\n        this.typeDefs = typeDefs;\n        if (ssrForceFetchDelay) {\n            setTimeout(function () { return (_this.disableNetworkFetches = false); }, ssrForceFetchDelay);\n        }\n        this.watchQuery = this.watchQuery.bind(this);\n        this.query = this.query.bind(this);\n        this.mutate = this.mutate.bind(this);\n        this.resetStore = this.resetStore.bind(this);\n        this.reFetchObservableQueries = this.reFetchObservableQueries.bind(this);\n        if (connectToDevTools && typeof window === 'object') {\n            window.__APOLLO_CLIENT__ = this;\n        }\n        if (!hasSuggestedDevtools && __DEV__) {\n            hasSuggestedDevtools = true;\n            if (typeof window !== 'undefined' &&\n                window.document &&\n                window.top === window.self &&\n                !window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__) {\n                var nav = window.navigator;\n                var ua = nav && nav.userAgent;\n                var url = void 0;\n                if (typeof ua === \"string\") {\n                    if (ua.indexOf(\"Chrome/\") > -1) {\n                        url = \"https://chrome.google.com/webstore/detail/\" +\n                            \"apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm\";\n                    }\n                    else if (ua.indexOf(\"Firefox/\") > -1) {\n                        url = \"https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/\";\n                    }\n                }\n                if (url) {\n                    __DEV__ && invariant.log(\"Download the Apollo DevTools for a better development \" +\n                        \"experience: \" + url);\n                }\n            }\n        }\n        this.version = version;\n        this.localState = new LocalState({\n            cache: cache,\n            client: this,\n            resolvers: resolvers,\n            fragmentMatcher: fragmentMatcher,\n        });\n        this.queryManager = new QueryManager({\n            cache: this.cache,\n            link: this.link,\n            defaultOptions: this.defaultOptions,\n            queryDeduplication: queryDeduplication,\n            ssrMode: ssrMode,\n            clientAwareness: {\n                name: clientAwarenessName,\n                version: clientAwarenessVersion,\n            },\n            localState: this.localState,\n            assumeImmutableResults: assumeImmutableResults,\n            onBroadcast: connectToDevTools ? function () {\n                if (_this.devToolsHookCb) {\n                    _this.devToolsHookCb({\n                        action: {},\n                        state: {\n                            queries: _this.queryManager.getQueryStore(),\n                            mutations: _this.queryManager.mutationStore || {},\n                        },\n                        dataWithOptimisticResults: _this.cache.extract(true),\n                    });\n                }\n            } : void 0,\n        });\n    }\n    ApolloClient.prototype.stop = function () {\n        this.queryManager.stop();\n    };\n    ApolloClient.prototype.watchQuery = function (options) {\n        if (this.defaultOptions.watchQuery) {\n            options = mergeOptions(this.defaultOptions.watchQuery, options);\n        }\n        if (this.disableNetworkFetches &&\n            (options.fetchPolicy === 'network-only' ||\n                options.fetchPolicy === 'cache-and-network')) {\n            options = __assign(__assign({}, options), { fetchPolicy: 'cache-first' });\n        }\n        return this.queryManager.watchQuery(options);\n    };\n    ApolloClient.prototype.query = function (options) {\n        if (this.defaultOptions.query) {\n            options = mergeOptions(this.defaultOptions.query, options);\n        }\n        __DEV__ ? invariant(options.fetchPolicy !== 'cache-and-network', 'The cache-and-network fetchPolicy does not work with client.query, because ' +\n            'client.query can only return a single result. Please use client.watchQuery ' +\n            'to receive multiple results from the cache and the network, or consider ' +\n            'using a different fetchPolicy, such as cache-first or network-only.') : invariant(options.fetchPolicy !== 'cache-and-network', 8);\n        if (this.disableNetworkFetches && options.fetchPolicy === 'network-only') {\n            options = __assign(__assign({}, options), { fetchPolicy: 'cache-first' });\n        }\n        return this.queryManager.query(options);\n    };\n    ApolloClient.prototype.mutate = function (options) {\n        if (this.defaultOptions.mutate) {\n            options = mergeOptions(this.defaultOptions.mutate, options);\n        }\n        return this.queryManager.mutate(options);\n    };\n    ApolloClient.prototype.subscribe = function (options) {\n        return this.queryManager.startGraphQLSubscription(options);\n    };\n    ApolloClient.prototype.readQuery = function (options, optimistic) {\n        if (optimistic === void 0) { optimistic = false; }\n        return this.cache.readQuery(options, optimistic);\n    };\n    ApolloClient.prototype.readFragment = function (options, optimistic) {\n        if (optimistic === void 0) { optimistic = false; }\n        return this.cache.readFragment(options, optimistic);\n    };\n    ApolloClient.prototype.writeQuery = function (options) {\n        this.cache.writeQuery(options);\n        this.queryManager.broadcastQueries();\n    };\n    ApolloClient.prototype.writeFragment = function (options) {\n        this.cache.writeFragment(options);\n        this.queryManager.broadcastQueries();\n    };\n    ApolloClient.prototype.__actionHookForDevTools = function (cb) {\n        this.devToolsHookCb = cb;\n    };\n    ApolloClient.prototype.__requestRaw = function (payload) {\n        return execute(this.link, payload);\n    };\n    ApolloClient.prototype.resetStore = function () {\n        var _this = this;\n        return Promise.resolve()\n            .then(function () { return _this.queryManager.clearStore({\n            discardWatches: false,\n        }); })\n            .then(function () { return Promise.all(_this.resetStoreCallbacks.map(function (fn) { return fn(); })); })\n            .then(function () { return _this.reFetchObservableQueries(); });\n    };\n    ApolloClient.prototype.clearStore = function () {\n        var _this = this;\n        return Promise.resolve()\n            .then(function () { return _this.queryManager.clearStore({\n            discardWatches: true,\n        }); })\n            .then(function () { return Promise.all(_this.clearStoreCallbacks.map(function (fn) { return fn(); })); });\n    };\n    ApolloClient.prototype.onResetStore = function (cb) {\n        var _this = this;\n        this.resetStoreCallbacks.push(cb);\n        return function () {\n            _this.resetStoreCallbacks = _this.resetStoreCallbacks.filter(function (c) { return c !== cb; });\n        };\n    };\n    ApolloClient.prototype.onClearStore = function (cb) {\n        var _this = this;\n        this.clearStoreCallbacks.push(cb);\n        return function () {\n            _this.clearStoreCallbacks = _this.clearStoreCallbacks.filter(function (c) { return c !== cb; });\n        };\n    };\n    ApolloClient.prototype.reFetchObservableQueries = function (includeStandby) {\n        return this.queryManager.reFetchObservableQueries(includeStandby);\n    };\n    ApolloClient.prototype.refetchQueries = function (options) {\n        var map = this.queryManager.refetchQueries(options);\n        var queries = [];\n        var results = [];\n        map.forEach(function (result, obsQuery) {\n            queries.push(obsQuery);\n            results.push(result);\n        });\n        var result = Promise.all(results);\n        result.queries = queries;\n        result.results = results;\n        result.catch(function (error) {\n            __DEV__ && invariant.debug(\"In client.refetchQueries, Promise.all promise rejected with error \".concat(error));\n        });\n        return result;\n    };\n    ApolloClient.prototype.getObservableQueries = function (include) {\n        if (include === void 0) { include = \"active\"; }\n        return this.queryManager.getObservableQueries(include);\n    };\n    ApolloClient.prototype.extract = function (optimistic) {\n        return this.cache.extract(optimistic);\n    };\n    ApolloClient.prototype.restore = function (serializedState) {\n        return this.cache.restore(serializedState);\n    };\n    ApolloClient.prototype.addResolvers = function (resolvers) {\n        this.localState.addResolvers(resolvers);\n    };\n    ApolloClient.prototype.setResolvers = function (resolvers) {\n        this.localState.setResolvers(resolvers);\n    };\n    ApolloClient.prototype.getResolvers = function () {\n        return this.localState.getResolvers();\n    };\n    ApolloClient.prototype.setLocalStateFragmentMatcher = function (fragmentMatcher) {\n        this.localState.setFragmentMatcher(fragmentMatcher);\n    };\n    ApolloClient.prototype.setLink = function (newLink) {\n        this.link = this.queryManager.link = newLink;\n    };\n    return ApolloClient;\n}());\nexport { ApolloClient };\n//# sourceMappingURL=ApolloClient.js.map", "import { DEV } from '../utilities/globals';\nexport { ApolloClient, mergeOptions, } from './ApolloClient';\nexport { ObservableQuery, } from './ObservableQuery';\nexport { NetworkStatus } from './networkStatus';\nexport * from './types';\nexport { isApolloError, ApolloError } from '../errors';\nexport { Cache, ApolloCache, InMemoryCache, MissingFieldError, defaultDataIdFromObject, makeVar, } from '../cache';\nexport * from '../cache/inmemory/types';\nexport * from '../link/core';\nexport * from '../link/http';\nexport { fromError, toPromise, fromPromise, throwServerError, } from '../link/utils';\nexport { Observable, isReference, makeReference, } from '../utilities';\nimport { setVerbosity } from \"ts-invariant\";\nexport { setVerbosity as setLogVerbosity };\nsetVerbosity(DEV ? \"log\" : \"silent\");\nexport { gql, resetCaches, disableFragmentWarnings, enableExperimentalFragmentVariables, disableExperimentalFragmentVariables, } from 'graphql-tag';\n//# sourceMappingURL=index.js.map", "import * as React from 'react';\nimport { canUseSymbol } from '../../utilities';\nvar contextKey = canUseSymbol\n    ? Symbol.for('__APOLLO_CONTEXT__')\n    : '__APOLLO_CONTEXT__';\nexport function getApolloContext() {\n    var context = React.createContext[contextKey];\n    if (!context) {\n        Object.defineProperty(React.createContext, contextKey, {\n            value: context = React.createContext({}),\n            enumerable: false,\n            writable: false,\n            configurable: true,\n        });\n        context.displayName = 'ApolloContext';\n    }\n    return context;\n}\nexport { getApolloContext as resetApolloContext };\n//# sourceMappingURL=ApolloContext.js.map", "import { invariant } from '../../utilities/globals';\nimport * as React from 'react';\nimport { getApolloContext } from './ApolloContext';\nexport var ApolloConsumer = function (props) {\n    var ApolloContext = getApolloContext();\n    return (React.createElement(ApolloContext.Consumer, null, function (context) {\n        __DEV__ ? invariant(context && context.client, 'Could not find \"client\" in the context of ApolloConsumer. ' +\n            'Wrap the root component in an <ApolloProvider>.') : invariant(context && context.client, 25);\n        return props.children(context.client);\n    }));\n};\n//# sourceMappingURL=ApolloConsumer.js.map", "import { invariant } from '../../utilities/globals';\nimport * as React from 'react';\nimport { getApolloContext } from './ApolloContext';\nexport var ApolloProvider = function (_a) {\n    var client = _a.client, children = _a.children;\n    var ApolloContext = getApolloContext();\n    return (React.createElement(ApolloContext.Consumer, null, function (context) {\n        if (context === void 0) { context = {}; }\n        if (client && context.client !== client) {\n            context = Object.assign({}, context, { client: client });\n        }\n        __DEV__ ? invariant(context.client, 'ApolloProvider was not passed a client instance. Make ' +\n            'sure you pass in your client via the \"client\" prop.') : invariant(context.client, 26);\n        return (React.createElement(ApolloContext.Provider, { value: context }, children));\n    }));\n};\n//# sourceMappingURL=ApolloProvider.js.map", "import { invariant } from '../../utilities/globals';\nexport var DocumentType;\n(function (DocumentType) {\n    DocumentType[DocumentType[\"Query\"] = 0] = \"Query\";\n    DocumentType[DocumentType[\"Mutation\"] = 1] = \"Mutation\";\n    DocumentType[DocumentType[\"Subscription\"] = 2] = \"Subscription\";\n})(DocumentType || (DocumentType = {}));\nvar cache = new Map();\nexport function operationName(type) {\n    var name;\n    switch (type) {\n        case DocumentType.Query:\n            name = 'Query';\n            break;\n        case DocumentType.Mutation:\n            name = 'Mutation';\n            break;\n        case DocumentType.Subscription:\n            name = 'Subscription';\n            break;\n    }\n    return name;\n}\nexport function parser(document) {\n    var cached = cache.get(document);\n    if (cached)\n        return cached;\n    var variables, type, name;\n    __DEV__ ? invariant(!!document && !!document.kind, \"Argument of \".concat(document, \" passed to parser was not a valid GraphQL \") +\n        \"DocumentNode. You may need to use 'graphql-tag' or another method \" +\n        \"to convert your operation into a document\") : invariant(!!document && !!document.kind, 30);\n    var fragments = [];\n    var queries = [];\n    var mutations = [];\n    var subscriptions = [];\n    for (var _i = 0, _a = document.definitions; _i < _a.length; _i++) {\n        var x = _a[_i];\n        if (x.kind === 'FragmentDefinition') {\n            fragments.push(x);\n            continue;\n        }\n        if (x.kind === 'OperationDefinition') {\n            switch (x.operation) {\n                case 'query':\n                    queries.push(x);\n                    break;\n                case 'mutation':\n                    mutations.push(x);\n                    break;\n                case 'subscription':\n                    subscriptions.push(x);\n                    break;\n            }\n        }\n    }\n    __DEV__ ? invariant(!fragments.length ||\n        (queries.length || mutations.length || subscriptions.length), \"Passing only a fragment to 'graphql' is not yet supported. \" +\n        \"You must include a query, subscription or mutation as well\") : invariant(!fragments.length ||\n        (queries.length || mutations.length || subscriptions.length), 31);\n    __DEV__ ? invariant(queries.length + mutations.length + subscriptions.length <= 1, \"react-apollo only supports a query, subscription, or a mutation per HOC. \" +\n        \"\".concat(document, \" had \").concat(queries.length, \" queries, \").concat(subscriptions.length, \" \") +\n        \"subscriptions and \".concat(mutations.length, \" mutations. \") +\n        \"You can use 'compose' to join multiple operation types to a component\") : invariant(queries.length + mutations.length + subscriptions.length <= 1, 32);\n    type = queries.length ? DocumentType.Query : DocumentType.Mutation;\n    if (!queries.length && !mutations.length)\n        type = DocumentType.Subscription;\n    var definitions = queries.length\n        ? queries\n        : mutations.length\n            ? mutations\n            : subscriptions;\n    __DEV__ ? invariant(definitions.length === 1, \"react-apollo only supports one definition per HOC. \".concat(document, \" had \") +\n        \"\".concat(definitions.length, \" definitions. \") +\n        \"You can use 'compose' to join multiple operation types to a component\") : invariant(definitions.length === 1, 33);\n    var definition = definitions[0];\n    variables = definition.variableDefinitions || [];\n    if (definition.name && definition.name.kind === 'Name') {\n        name = definition.name.value;\n    }\n    else {\n        name = 'data';\n    }\n    var payload = { name: name, type: type, variables: variables };\n    cache.set(document, payload);\n    return payload;\n}\nexport function verifyDocumentType(document, type) {\n    var operation = parser(document);\n    var requiredOperationName = operationName(type);\n    var usedOperationName = operationName(operation.type);\n    __DEV__ ? invariant(operation.type === type, \"Running a \".concat(requiredOperationName, \" requires a graphql \") +\n        \"\".concat(requiredOperationName, \", but a \").concat(usedOperationName, \" was used instead.\")) : invariant(operation.type === type, 34);\n}\n//# sourceMappingURL=index.js.map", "import { invariant } from '../../utilities/globals';\nimport { useContext } from 'react';\nimport { getApolloContext } from '../context';\nexport function useApolloClient(override) {\n    var context = useContext(getApolloContext());\n    var client = override || context.client;\n    __DEV__ ? invariant(!!client, 'Could not find \"client\" in the context or passed in as an option. ' +\n        'Wrap the root component in an <ApolloProvider>, or pass an ApolloClient ' +\n        'instance in via options.') : invariant(!!client, 29);\n    return client;\n}\n//# sourceMappingURL=useApolloClient.js.map", "import { invariant } from '../../utilities/globals';\nimport * as React from 'react';\nimport { canUseLayoutEffect } from '../../utilities';\nvar didWarnUncachedGetSnapshot = false;\nvar uSESKey = \"useSyncExternalStore\";\nvar realHook = React[uSESKey];\nexport var useSyncExternalStore = realHook || (function (subscribe, getSnapshot, getServerSnapshot) {\n    var value = getSnapshot();\n    if (__DEV__ &&\n        !didWarnUncachedGetSnapshot &&\n        value !== getSnapshot()) {\n        didWarnUncachedGetSnapshot = true;\n        __DEV__ && invariant.error('The result of getSnapshot should be cached to avoid an infinite loop');\n    }\n    var _a = React.useState({ inst: { value: value, getSnapshot: getSnapshot } }), inst = _a[0].inst, forceUpdate = _a[1];\n    if (canUseLayoutEffect) {\n        React.useLayoutEffect(function () {\n            Object.assign(inst, { value: value, getSnapshot: getSnapshot });\n            if (checkIfSnapshotChanged(inst)) {\n                forceUpdate({ inst: inst });\n            }\n        }, [subscribe, value, getSnapshot]);\n    }\n    else {\n        Object.assign(inst, { value: value, getSnapshot: getSnapshot });\n    }\n    React.useEffect(function () {\n        if (checkIfSnapshotChanged(inst)) {\n            forceUpdate({ inst: inst });\n        }\n        return subscribe(function handleStoreChange() {\n            if (checkIfSnapshotChanged(inst)) {\n                forceUpdate({ inst: inst });\n            }\n        });\n    }, [subscribe]);\n    return value;\n});\nfunction checkIfSnapshotChanged(_a) {\n    var value = _a.value, getSnapshot = _a.getSnapshot;\n    try {\n        return value !== getSnapshot();\n    }\n    catch (_b) {\n        return true;\n    }\n}\n//# sourceMappingURL=useSyncExternalStore.js.map", "import { __assign, __rest } from \"tslib\";\nimport { invariant } from '../../utilities/globals';\nimport { useCallback, useContext, useMemo, useRef, useState, } from 'react';\nimport { useSyncExternalStore } from './useSyncExternalStore';\nimport { equal } from '@wry/equality';\nimport { mergeOptions } from '../../core';\nimport { getApolloContext } from '../context';\nimport { ApolloError } from '../../errors';\nimport { NetworkStatus, } from '../../core';\nimport { DocumentType, verifyDocumentType } from '../parser';\nimport { useApolloClient } from './useApolloClient';\nimport { canUseWeakMap, canUseWeakSet, compact, isNonEmptyArray, maybeDeepFreeze } from '../../utilities';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nexport function useQuery(query, options) {\n    if (options === void 0) { options = Object.create(null); }\n    return useInternalState(useApolloClient(options.client), query).useQuery(options);\n}\nexport function useInternalState(client, query) {\n    var stateRef = useRef();\n    if (!stateRef.current ||\n        client !== stateRef.current.client ||\n        query !== stateRef.current.query) {\n        stateRef.current = new InternalState(client, query, stateRef.current);\n    }\n    var state = stateRef.current;\n    var _a = useState(0), _tick = _a[0], setTick = _a[1];\n    state.forceUpdate = function () {\n        setTick(function (tick) { return tick + 1; });\n    };\n    return state;\n}\nvar InternalState = (function () {\n    function InternalState(client, query, previous) {\n        this.client = client;\n        this.query = query;\n        this.asyncResolveFns = new Set();\n        this.optionsToIgnoreOnce = new (canUseWeakSet ? WeakSet : Set)();\n        this.ssrDisabledResult = maybeDeepFreeze({\n            loading: true,\n            data: void 0,\n            error: void 0,\n            networkStatus: NetworkStatus.loading,\n        });\n        this.skipStandbyResult = maybeDeepFreeze({\n            loading: false,\n            data: void 0,\n            error: void 0,\n            networkStatus: NetworkStatus.ready,\n        });\n        this.toQueryResultCache = new (canUseWeakMap ? WeakMap : Map)();\n        verifyDocumentType(query, DocumentType.Query);\n        var previousResult = previous && previous.result;\n        var previousData = previousResult && previousResult.data;\n        if (previousData) {\n            this.previousData = previousData;\n        }\n    }\n    InternalState.prototype.forceUpdate = function () {\n        __DEV__ && invariant.warn(\"Calling default no-op implementation of InternalState#forceUpdate\");\n    };\n    InternalState.prototype.asyncUpdate = function () {\n        var _this = this;\n        return new Promise(function (resolve) {\n            _this.asyncResolveFns.add(resolve);\n            _this.optionsToIgnoreOnce.add(_this.watchQueryOptions);\n            _this.forceUpdate();\n        });\n    };\n    InternalState.prototype.useQuery = function (options) {\n        var _this = this;\n        this.renderPromises = useContext(getApolloContext()).renderPromises;\n        this.useOptions(options);\n        var obsQuery = this.useObservableQuery();\n        var result = useSyncExternalStore(useCallback(function () {\n            if (_this.renderPromises) {\n                return function () { };\n            }\n            var onNext = function () {\n                var previousResult = _this.result;\n                var result = obsQuery.getCurrentResult();\n                if (previousResult &&\n                    previousResult.loading === result.loading &&\n                    previousResult.networkStatus === result.networkStatus &&\n                    equal(previousResult.data, result.data)) {\n                    return;\n                }\n                _this.setResult(result);\n            };\n            var onError = function (error) {\n                var last = obsQuery[\"last\"];\n                subscription.unsubscribe();\n                try {\n                    obsQuery.resetLastResults();\n                    subscription = obsQuery.subscribe(onNext, onError);\n                }\n                finally {\n                    obsQuery[\"last\"] = last;\n                }\n                if (!hasOwnProperty.call(error, 'graphQLErrors')) {\n                    throw error;\n                }\n                var previousResult = _this.result;\n                if (!previousResult ||\n                    (previousResult && previousResult.loading) ||\n                    !equal(error, previousResult.error)) {\n                    _this.setResult({\n                        data: (previousResult && previousResult.data),\n                        error: error,\n                        loading: false,\n                        networkStatus: NetworkStatus.error,\n                    });\n                }\n            };\n            var subscription = obsQuery.subscribe(onNext, onError);\n            return function () { return subscription.unsubscribe(); };\n        }, [\n            obsQuery,\n            this.renderPromises,\n            this.client.disableNetworkFetches,\n        ]), function () { return _this.getCurrentResult(); }, function () { return _this.getCurrentResult(); });\n        this.unsafeHandlePartialRefetch(result);\n        var queryResult = this.toQueryResult(result);\n        if (!queryResult.loading && this.asyncResolveFns.size) {\n            this.asyncResolveFns.forEach(function (resolve) { return resolve(queryResult); });\n            this.asyncResolveFns.clear();\n        }\n        return queryResult;\n    };\n    InternalState.prototype.useOptions = function (options) {\n        var _a;\n        var watchQueryOptions = this.createWatchQueryOptions(this.queryHookOptions = options);\n        var currentWatchQueryOptions = this.watchQueryOptions;\n        if (this.optionsToIgnoreOnce.has(currentWatchQueryOptions) ||\n            !equal(watchQueryOptions, currentWatchQueryOptions)) {\n            this.watchQueryOptions = watchQueryOptions;\n            if (currentWatchQueryOptions && this.observable) {\n                this.optionsToIgnoreOnce.delete(currentWatchQueryOptions);\n                this.observable.reobserve(this.getObsQueryOptions());\n                this.previousData = ((_a = this.result) === null || _a === void 0 ? void 0 : _a.data) || this.previousData;\n                this.result = void 0;\n            }\n        }\n        this.onCompleted = options.onCompleted || InternalState.prototype.onCompleted;\n        this.onError = options.onError || InternalState.prototype.onError;\n        if ((this.renderPromises || this.client.disableNetworkFetches) &&\n            this.queryHookOptions.ssr === false &&\n            !this.queryHookOptions.skip) {\n            this.result = this.ssrDisabledResult;\n        }\n        else if (this.queryHookOptions.skip ||\n            this.watchQueryOptions.fetchPolicy === 'standby') {\n            this.result = this.skipStandbyResult;\n        }\n        else if (this.result === this.ssrDisabledResult ||\n            this.result === this.skipStandbyResult) {\n            this.result = void 0;\n        }\n    };\n    InternalState.prototype.getObsQueryOptions = function () {\n        var toMerge = [];\n        var globalDefaults = this.client.defaultOptions.watchQuery;\n        if (globalDefaults)\n            toMerge.push(globalDefaults);\n        if (this.queryHookOptions.defaultOptions) {\n            toMerge.push(this.queryHookOptions.defaultOptions);\n        }\n        toMerge.push(compact(this.observable && this.observable.options, this.watchQueryOptions));\n        return toMerge.reduce(mergeOptions);\n    };\n    InternalState.prototype.createWatchQueryOptions = function (_a) {\n        var _b;\n        if (_a === void 0) { _a = {}; }\n        var skip = _a.skip, ssr = _a.ssr, onCompleted = _a.onCompleted, onError = _a.onError, displayName = _a.displayName, defaultOptions = _a.defaultOptions, otherOptions = __rest(_a, [\"skip\", \"ssr\", \"onCompleted\", \"onError\", \"displayName\", \"defaultOptions\"]);\n        var watchQueryOptions = Object.assign(otherOptions, { query: this.query });\n        if (this.renderPromises &&\n            (watchQueryOptions.fetchPolicy === 'network-only' ||\n                watchQueryOptions.fetchPolicy === 'cache-and-network')) {\n            watchQueryOptions.fetchPolicy = 'cache-first';\n        }\n        if (!watchQueryOptions.variables) {\n            watchQueryOptions.variables = {};\n        }\n        if (skip) {\n            var _c = watchQueryOptions.fetchPolicy, fetchPolicy = _c === void 0 ? this.getDefaultFetchPolicy() : _c, _d = watchQueryOptions.initialFetchPolicy, initialFetchPolicy = _d === void 0 ? fetchPolicy : _d;\n            Object.assign(watchQueryOptions, {\n                initialFetchPolicy: initialFetchPolicy,\n                fetchPolicy: 'standby',\n            });\n        }\n        else if (!watchQueryOptions.fetchPolicy) {\n            watchQueryOptions.fetchPolicy =\n                ((_b = this.observable) === null || _b === void 0 ? void 0 : _b.options.initialFetchPolicy) ||\n                    this.getDefaultFetchPolicy();\n        }\n        return watchQueryOptions;\n    };\n    InternalState.prototype.getDefaultFetchPolicy = function () {\n        var _a, _b;\n        return (((_a = this.queryHookOptions.defaultOptions) === null || _a === void 0 ? void 0 : _a.fetchPolicy) ||\n            ((_b = this.client.defaultOptions.watchQuery) === null || _b === void 0 ? void 0 : _b.fetchPolicy) ||\n            \"cache-first\");\n    };\n    InternalState.prototype.onCompleted = function (data) { };\n    InternalState.prototype.onError = function (error) { };\n    InternalState.prototype.useObservableQuery = function () {\n        var obsQuery = this.observable =\n            this.renderPromises\n                && this.renderPromises.getSSRObservable(this.watchQueryOptions)\n                || this.observable\n                || this.client.watchQuery(this.getObsQueryOptions());\n        this.obsQueryFields = useMemo(function () { return ({\n            refetch: obsQuery.refetch.bind(obsQuery),\n            reobserve: obsQuery.reobserve.bind(obsQuery),\n            fetchMore: obsQuery.fetchMore.bind(obsQuery),\n            updateQuery: obsQuery.updateQuery.bind(obsQuery),\n            startPolling: obsQuery.startPolling.bind(obsQuery),\n            stopPolling: obsQuery.stopPolling.bind(obsQuery),\n            subscribeToMore: obsQuery.subscribeToMore.bind(obsQuery),\n        }); }, [obsQuery]);\n        var ssrAllowed = !(this.queryHookOptions.ssr === false ||\n            this.queryHookOptions.skip);\n        if (this.renderPromises && ssrAllowed) {\n            this.renderPromises.registerSSRObservable(obsQuery);\n            if (obsQuery.getCurrentResult().loading) {\n                this.renderPromises.addObservableQueryPromise(obsQuery);\n            }\n        }\n        return obsQuery;\n    };\n    InternalState.prototype.setResult = function (nextResult) {\n        var previousResult = this.result;\n        if (previousResult && previousResult.data) {\n            this.previousData = previousResult.data;\n        }\n        this.result = nextResult;\n        this.forceUpdate();\n        this.handleErrorOrCompleted(nextResult);\n    };\n    InternalState.prototype.handleErrorOrCompleted = function (result) {\n        if (!result.loading) {\n            if (result.error) {\n                this.onError(result.error);\n            }\n            else if (result.data) {\n                this.onCompleted(result.data);\n            }\n        }\n    };\n    InternalState.prototype.getCurrentResult = function () {\n        if (!this.result) {\n            this.handleErrorOrCompleted(this.result = this.observable.getCurrentResult());\n        }\n        return this.result;\n    };\n    InternalState.prototype.toQueryResult = function (result) {\n        var queryResult = this.toQueryResultCache.get(result);\n        if (queryResult)\n            return queryResult;\n        var data = result.data, partial = result.partial, resultWithoutPartial = __rest(result, [\"data\", \"partial\"]);\n        this.toQueryResultCache.set(result, queryResult = __assign(__assign(__assign({ data: data }, resultWithoutPartial), this.obsQueryFields), { client: this.client, observable: this.observable, variables: this.observable.variables, called: true, previousData: this.previousData }));\n        if (!queryResult.error && isNonEmptyArray(result.errors)) {\n            queryResult.error = new ApolloError({ graphQLErrors: result.errors });\n        }\n        return queryResult;\n    };\n    InternalState.prototype.unsafeHandlePartialRefetch = function (result) {\n        if (result.partial &&\n            this.queryHookOptions.partialRefetch &&\n            !result.loading &&\n            (!result.data || Object.keys(result.data).length === 0) &&\n            this.observable.options.fetchPolicy !== 'cache-only') {\n            Object.assign(result, {\n                loading: true,\n                networkStatus: NetworkStatus.refetch,\n            });\n            this.observable.refetch();\n        }\n    };\n    return InternalState;\n}());\n//# sourceMappingURL=useQuery.js.map", "import { __assign } from \"tslib\";\nimport { useCallback, useMemo, useRef } from 'react';\nimport { mergeOptions } from '../../utilities';\nimport { useInternalState } from './useQuery';\nimport { useApolloClient } from './useApolloClient';\nvar EAGER_METHODS = [\n    'refetch',\n    'reobserve',\n    'fetchMore',\n    'updateQuery',\n    'startPolling',\n    'subscribeToMore',\n];\nexport function useLazyQuery(query, options) {\n    var internalState = useInternalState(useApolloClient(options && options.client), query);\n    var execOptionsRef = useRef();\n    var merged = execOptionsRef.current\n        ? mergeOptions(options, execOptionsRef.current)\n        : options;\n    var useQueryResult = internalState.useQuery(__assign(__assign({}, merged), { skip: !execOptionsRef.current }));\n    var initialFetchPolicy = useQueryResult.observable.options.initialFetchPolicy ||\n        internalState.getDefaultFetchPolicy();\n    var result = Object.assign(useQueryResult, {\n        called: !!execOptionsRef.current,\n    });\n    var eagerMethods = useMemo(function () {\n        var eagerMethods = {};\n        var _loop_1 = function (key) {\n            var method = result[key];\n            eagerMethods[key] = function () {\n                if (!execOptionsRef.current) {\n                    execOptionsRef.current = Object.create(null);\n                    internalState.forceUpdate();\n                }\n                return method.apply(this, arguments);\n            };\n        };\n        for (var _i = 0, EAGER_METHODS_1 = EAGER_METHODS; _i < EAGER_METHODS_1.length; _i++) {\n            var key = EAGER_METHODS_1[_i];\n            _loop_1(key);\n        }\n        return eagerMethods;\n    }, []);\n    Object.assign(result, eagerMethods);\n    var execute = useCallback(function (executeOptions) {\n        execOptionsRef.current = executeOptions ? __assign(__assign({}, executeOptions), { fetchPolicy: executeOptions.fetchPolicy || initialFetchPolicy }) : {\n            fetchPolicy: initialFetchPolicy,\n        };\n        var promise = internalState\n            .asyncUpdate()\n            .then(function (queryResult) { return Object.assign(queryResult, eagerMethods); });\n        promise.catch(function () { });\n        return promise;\n    }, []);\n    return [execute, result];\n}\n//# sourceMappingURL=useLazyQuery.js.map", "import { __assign } from \"tslib\";\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport { mergeOptions, } from '../../core';\nimport { equal } from '@wry/equality';\nimport { DocumentType, verifyDocumentType } from '../parser';\nimport { ApolloError } from '../../errors';\nimport { useApolloClient } from './useApolloClient';\nexport function useMutation(mutation, options) {\n    var client = useApolloClient(options === null || options === void 0 ? void 0 : options.client);\n    verifyDocumentType(mutation, DocumentType.Mutation);\n    var _a = useState({\n        called: false,\n        loading: false,\n        client: client,\n    }), result = _a[0], setResult = _a[1];\n    var ref = useRef({\n        result: result,\n        mutationId: 0,\n        isMounted: true,\n        client: client,\n        mutation: mutation,\n        options: options,\n    });\n    {\n        Object.assign(ref.current, { client: client, options: options, mutation: mutation });\n    }\n    var execute = useCallback(function (executeOptions) {\n        if (executeOptions === void 0) { executeOptions = {}; }\n        var _a = ref.current, client = _a.client, options = _a.options, mutation = _a.mutation;\n        var baseOptions = __assign(__assign({}, options), { mutation: mutation });\n        if (!ref.current.result.loading && !baseOptions.ignoreResults) {\n            setResult(ref.current.result = {\n                loading: true,\n                error: void 0,\n                data: void 0,\n                called: true,\n                client: client,\n            });\n        }\n        var mutationId = ++ref.current.mutationId;\n        var clientOptions = mergeOptions(baseOptions, executeOptions);\n        return client.mutate(clientOptions).then(function (response) {\n            var _a, _b, _c;\n            var data = response.data, errors = response.errors;\n            var error = errors && errors.length > 0\n                ? new ApolloError({ graphQLErrors: errors })\n                : void 0;\n            if (mutationId === ref.current.mutationId &&\n                !clientOptions.ignoreResults) {\n                var result_1 = {\n                    called: true,\n                    loading: false,\n                    data: data,\n                    error: error,\n                    client: client,\n                };\n                if (ref.current.isMounted && !equal(ref.current.result, result_1)) {\n                    setResult(ref.current.result = result_1);\n                }\n            }\n            (_b = (_a = ref.current.options) === null || _a === void 0 ? void 0 : _a.onCompleted) === null || _b === void 0 ? void 0 : _b.call(_a, response.data);\n            (_c = executeOptions.onCompleted) === null || _c === void 0 ? void 0 : _c.call(executeOptions, response.data);\n            return response;\n        }).catch(function (error) {\n            var _a, _b, _c, _d;\n            if (mutationId === ref.current.mutationId &&\n                ref.current.isMounted) {\n                var result_2 = {\n                    loading: false,\n                    error: error,\n                    data: void 0,\n                    called: true,\n                    client: client,\n                };\n                if (!equal(ref.current.result, result_2)) {\n                    setResult(ref.current.result = result_2);\n                }\n            }\n            if (((_a = ref.current.options) === null || _a === void 0 ? void 0 : _a.onError) || clientOptions.onError) {\n                (_c = (_b = ref.current.options) === null || _b === void 0 ? void 0 : _b.onError) === null || _c === void 0 ? void 0 : _c.call(_b, error);\n                (_d = executeOptions.onError) === null || _d === void 0 ? void 0 : _d.call(executeOptions, error);\n                return { data: void 0, errors: error };\n            }\n            throw error;\n        });\n    }, []);\n    var reset = useCallback(function () {\n        setResult({ called: false, loading: false, client: client });\n    }, []);\n    useEffect(function () {\n        ref.current.isMounted = true;\n        return function () {\n            ref.current.isMounted = false;\n        };\n    }, []);\n    return [execute, __assign({ reset: reset }, result)];\n}\n//# sourceMappingURL=useMutation.js.map", "import '../../utilities/globals';\nimport { useState, useRef, useEffect } from 'react';\nimport { equal } from '@wry/equality';\nimport { DocumentType, verifyDocumentType } from '../parser';\nimport { useApolloClient } from './useApolloClient';\nexport function useSubscription(subscription, options) {\n    var client = useApolloClient(options === null || options === void 0 ? void 0 : options.client);\n    verifyDocumentType(subscription, DocumentType.Subscription);\n    var _a = useState({\n        loading: !(options === null || options === void 0 ? void 0 : options.skip),\n        error: void 0,\n        data: void 0,\n        variables: options === null || options === void 0 ? void 0 : options.variables,\n    }), result = _a[0], setResult = _a[1];\n    var _b = useState(function () {\n        if (options === null || options === void 0 ? void 0 : options.skip) {\n            return null;\n        }\n        return client.subscribe({\n            query: subscription,\n            variables: options === null || options === void 0 ? void 0 : options.variables,\n            fetchPolicy: options === null || options === void 0 ? void 0 : options.fetchPolicy,\n            context: options === null || options === void 0 ? void 0 : options.context,\n        });\n    }), observable = _b[0], setObservable = _b[1];\n    var canResetObservableRef = useRef(false);\n    useEffect(function () {\n        return function () {\n            canResetObservableRef.current = true;\n        };\n    }, []);\n    var ref = useRef({ client: client, subscription: subscription, options: options });\n    useEffect(function () {\n        var _a, _b, _c, _d;\n        var shouldResubscribe = options === null || options === void 0 ? void 0 : options.shouldResubscribe;\n        if (typeof shouldResubscribe === 'function') {\n            shouldResubscribe = !!shouldResubscribe(options);\n        }\n        if (options === null || options === void 0 ? void 0 : options.skip) {\n            if (!(options === null || options === void 0 ? void 0 : options.skip) !== !((_a = ref.current.options) === null || _a === void 0 ? void 0 : _a.skip) || canResetObservableRef.current) {\n                setResult({\n                    loading: false,\n                    data: void 0,\n                    error: void 0,\n                    variables: options === null || options === void 0 ? void 0 : options.variables,\n                });\n                setObservable(null);\n                canResetObservableRef.current = false;\n            }\n        }\n        else if ((shouldResubscribe !== false &&\n            (client !== ref.current.client ||\n                subscription !== ref.current.subscription ||\n                (options === null || options === void 0 ? void 0 : options.fetchPolicy) !== ((_b = ref.current.options) === null || _b === void 0 ? void 0 : _b.fetchPolicy) ||\n                !(options === null || options === void 0 ? void 0 : options.skip) !== !((_c = ref.current.options) === null || _c === void 0 ? void 0 : _c.skip) ||\n                !equal(options === null || options === void 0 ? void 0 : options.variables, (_d = ref.current.options) === null || _d === void 0 ? void 0 : _d.variables))) ||\n            canResetObservableRef.current) {\n            setResult({\n                loading: true,\n                data: void 0,\n                error: void 0,\n                variables: options === null || options === void 0 ? void 0 : options.variables,\n            });\n            setObservable(client.subscribe({\n                query: subscription,\n                variables: options === null || options === void 0 ? void 0 : options.variables,\n                fetchPolicy: options === null || options === void 0 ? void 0 : options.fetchPolicy,\n                context: options === null || options === void 0 ? void 0 : options.context,\n            }));\n            canResetObservableRef.current = false;\n        }\n        Object.assign(ref.current, { client: client, subscription: subscription, options: options });\n    }, [client, subscription, options, canResetObservableRef.current]);\n    useEffect(function () {\n        if (!observable) {\n            return;\n        }\n        var subscription = observable.subscribe({\n            next: function (fetchResult) {\n                var _a, _b;\n                var result = {\n                    loading: false,\n                    data: fetchResult.data,\n                    error: void 0,\n                    variables: options === null || options === void 0 ? void 0 : options.variables,\n                };\n                setResult(result);\n                (_b = (_a = ref.current.options) === null || _a === void 0 ? void 0 : _a.onSubscriptionData) === null || _b === void 0 ? void 0 : _b.call(_a, {\n                    client: client,\n                    subscriptionData: result\n                });\n            },\n            error: function (error) {\n                setResult({\n                    loading: false,\n                    data: void 0,\n                    error: error,\n                    variables: options === null || options === void 0 ? void 0 : options.variables,\n                });\n            },\n            complete: function () {\n                var _a, _b;\n                (_b = (_a = ref.current.options) === null || _a === void 0 ? void 0 : _a.onSubscriptionComplete) === null || _b === void 0 ? void 0 : _b.call(_a);\n            },\n        });\n        return function () {\n            subscription.unsubscribe();\n        };\n    }, [observable]);\n    return result;\n}\n//# sourceMappingURL=useSubscription.js.map", "import { useEffect, useState } from 'react';\nexport function useReactiveVar(rv) {\n    var value = rv();\n    var setValue = useState(value)[1];\n    useEffect(function () {\n        var probablySameValue = rv();\n        if (value !== probablySameValue) {\n            setValue(probablySameValue);\n        }\n        else {\n            return rv.onNextChange(setValue);\n        }\n    }, [value]);\n    return value;\n}\n//# sourceMappingURL=useReactiveVar.js.map", "'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nrequire('../utilities/globals');\nvar context = require('./context');\nvar hooks = require('./hooks');\nvar parser = require('./parser');\n\n\n\nexports.ApolloConsumer = context.ApolloConsumer;\nexports.ApolloProvider = context.ApolloProvider;\nexports.getApolloContext = context.getApolloContext;\nexports.resetApolloContext = context.resetApolloContext;\nexports.DocumentType = parser.DocumentType;\nexports.operationName = parser.operationName;\nexports.parser = parser.parser;\nfor (var k in hooks) {\n\tif (k !== 'default' && !exports.hasOwnProperty(k)) exports[k] = hooks[k];\n}\n//# sourceMappingURL=react.cjs.map\n", "'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar core = require('./core');\nvar react = require('./react');\n\n\n\nfor (var k in core) {\n\tif (k !== 'default' && !exports.hasOwnProperty(k)) exports[k] = core[k];\n}\nfor (var k in react) {\n\tif (k !== 'default' && !exports.hasOwnProperty(k)) exports[k] = react[k];\n}\n//# sourceMappingURL=main.cjs.map\n", "export * from \"@remix-run/dev/server-build\";", "\nimport * as entryServer from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/entry.server.tsx\";\nimport * as route0 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/root.tsx\";\nimport * as route1 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/submissions/[id]/upload.tsx\";\nimport * as route2 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/verification-requests.tsx\";\nimport * as route3 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/[slug].tsx\";\nimport * as route4 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/[slug]/about.tsx\";\nimport * as route5 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/[slug]/edit.tsx\";\nimport * as route6 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/[slug]/tags.tsx\";\nimport * as route7 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/random.tsx\";\nimport * as route8 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/[slug].tsx\";\nimport * as route9 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/[slug]/about.tsx\";\nimport * as route10 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/[slug]/edit.tsx\";\nimport * as route11 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/[slug]/tags.tsx\";\nimport * as route12 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/[slug].tsx\";\nimport * as route13 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/[slug]/about.tsx\";\nimport * as route14 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/[slug]/edit.tsx\";\nimport * as route15 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/[slug]/tags.tsx\";\nimport * as route16 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/index.tsx\";\nimport * as route17 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/index.tsx\";\nimport * as route18 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/index.tsx\";\nimport * as route19 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/submissions/index.tsx\";\nimport * as route20 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/new.tsx\";\nimport * as route21 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/new.tsx\";\nimport * as route22 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/new.tsx\";\nimport * as route23 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/submissions/new.tsx\";\nimport * as route24 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/submissions/index.tsx\";\nimport * as route25 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/takedown-requests.tsx\";\nimport * as route26 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/submissions/[id].tsx\";\nimport * as route27 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/[slug].tsx\";\nimport * as route28 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/[slug]/about.tsx\";\nimport * as route29 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/[slug]/edit.tsx\";\nimport * as route30 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/[slug]/tags.tsx\";\nimport * as route31 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/[slug].tsx\";\nimport * as route32 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/[slug]/about.tsx\";\nimport * as route33 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/[slug]/edit.tsx\";\nimport * as route34 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/[slug]/tags.tsx\";\nimport * as route35 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/index.tsx\";\nimport * as route36 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/index.tsx\";\nimport * as route37 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/[slug].tsx\";\nimport * as route38 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/[slug]/about.tsx\";\nimport * as route39 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/[slug]/tags.tsx\";\nimport * as route40 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/index.tsx\";\nimport * as route41 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/new.tsx\";\nimport * as route42 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/new.tsx\";\nimport * as route43 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/verify.tsx\";\nimport * as route44 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/index.tsx\";\nimport * as route45 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/admin/index.tsx\";\nimport * as route46 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/saved-items.tsx\";\nimport * as route47 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/auto-login.tsx\";\nimport * as route48 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/users/[id].tsx\";\nimport * as route49 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/logout.tsx\";\nimport * as route50 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/signup.tsx\";\nimport * as route51 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/index.tsx\";\nimport * as route52 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/login.tsx\";\n  export { default as assets } from \"@remix-run/dev/assets-manifest\";\n  export const entry = { module: entryServer };\n  export const routes = {\n    \"root\": {\n      id: \"root\",\n      parentId: undefined,\n      path: \"\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route0\n    },\n  \"routes/account/submissions/[id]/upload\": {\n      id: \"routes/account/submissions/[id]/upload\",\n      parentId: \"root\",\n      path: \"account/submissions/id/upload\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route1\n    },\n  \"routes/admin/verification-requests\": {\n      id: \"routes/admin/verification-requests\",\n      parentId: \"root\",\n      path: \"admin/verification-requests\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route2\n    },\n  \"routes/entities/audio-items/[slug]\": {\n      id: \"routes/entities/audio-items/[slug]\",\n      parentId: \"root\",\n      path: \"entities/audio-items/slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route3\n    },\n  \"routes/entities/audio-items/[slug]/about\": {\n      id: \"routes/entities/audio-items/[slug]/about\",\n      parentId: \"routes/entities/audio-items/[slug]\",\n      path: \"about\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route4\n    },\n  \"routes/entities/audio-items/[slug]/edit\": {\n      id: \"routes/entities/audio-items/[slug]/edit\",\n      parentId: \"routes/entities/audio-items/[slug]\",\n      path: \"edit\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route5\n    },\n  \"routes/entities/audio-items/[slug]/tags\": {\n      id: \"routes/entities/audio-items/[slug]/tags\",\n      parentId: \"routes/entities/audio-items/[slug]\",\n      path: \"tags\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route6\n    },\n  \"routes/entities/audio-items/random\": {\n      id: \"routes/entities/audio-items/random\",\n      parentId: \"root\",\n      path: \"entities/audio-items/random\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route7\n    },\n  \"routes/entities/collections/[slug]\": {\n      id: \"routes/entities/collections/[slug]\",\n      parentId: \"root\",\n      path: \"entities/collections/slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route8\n    },\n  \"routes/entities/collections/[slug]/about\": {\n      id: \"routes/entities/collections/[slug]/about\",\n      parentId: \"routes/entities/collections/[slug]\",\n      path: \"about\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route9\n    },\n  \"routes/entities/collections/[slug]/edit\": {\n      id: \"routes/entities/collections/[slug]/edit\",\n      parentId: \"routes/entities/collections/[slug]\",\n      path: \"edit\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route10\n    },\n  \"routes/entities/collections/[slug]/tags\": {\n      id: \"routes/entities/collections/[slug]/tags\",\n      parentId: \"routes/entities/collections/[slug]\",\n      path: \"tags\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route11\n    },\n  \"routes/entities/instruments/[slug]\": {\n      id: \"routes/entities/instruments/[slug]\",\n      parentId: \"root\",\n      path: \"entities/instruments/slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route12\n    },\n  \"routes/entities/instruments/[slug]/about\": {\n      id: \"routes/entities/instruments/[slug]/about\",\n      parentId: \"routes/entities/instruments/[slug]\",\n      path: \"about\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route13\n    },\n  \"routes/entities/instruments/[slug]/edit\": {\n      id: \"routes/entities/instruments/[slug]/edit\",\n      parentId: \"routes/entities/instruments/[slug]\",\n      path: \"edit\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route14\n    },\n  \"routes/entities/instruments/[slug]/tags\": {\n      id: \"routes/entities/instruments/[slug]/tags\",\n      parentId: \"routes/entities/instruments/[slug]\",\n      path: \"tags\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route15\n    },\n  \"routes/entities/audio-items/index\": {\n      id: \"routes/entities/audio-items/index\",\n      parentId: \"root\",\n      path: \"entities/audio-items\",\n      index: true,\n      caseSensitive: undefined,\n      module: route16\n    },\n  \"routes/entities/collections/index\": {\n      id: \"routes/entities/collections/index\",\n      parentId: \"root\",\n      path: \"entities/collections\",\n      index: true,\n      caseSensitive: undefined,\n      module: route17\n    },\n  \"routes/entities/instruments/index\": {\n      id: \"routes/entities/instruments/index\",\n      parentId: \"root\",\n      path: \"entities/instruments\",\n      index: true,\n      caseSensitive: undefined,\n      module: route18\n    },\n  \"routes/account/submissions/index\": {\n      id: \"routes/account/submissions/index\",\n      parentId: \"root\",\n      path: \"account/submissions\",\n      index: true,\n      caseSensitive: undefined,\n      module: route19\n    },\n  \"routes/entities/audio-items/new\": {\n      id: \"routes/entities/audio-items/new\",\n      parentId: \"root\",\n      path: \"entities/audio-items/new\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route20\n    },\n  \"routes/entities/collections/new\": {\n      id: \"routes/entities/collections/new\",\n      parentId: \"root\",\n      path: \"entities/collections/new\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route21\n    },\n  \"routes/entities/instruments/new\": {\n      id: \"routes/entities/instruments/new\",\n      parentId: \"root\",\n      path: \"entities/instruments/new\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route22\n    },\n  \"routes/account/submissions/new\": {\n      id: \"routes/account/submissions/new\",\n      parentId: \"root\",\n      path: \"account/submissions/new\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route23\n    },\n  \"routes/admin/submissions/index\": {\n      id: \"routes/admin/submissions/index\",\n      parentId: \"root\",\n      path: \"admin/submissions\",\n      index: true,\n      caseSensitive: undefined,\n      module: route24\n    },\n  \"routes/admin/takedown-requests\": {\n      id: \"routes/admin/takedown-requests\",\n      parentId: \"root\",\n      path: \"admin/takedown-requests\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route25\n    },\n  \"routes/admin/submissions/[id]\": {\n      id: \"routes/admin/submissions/[id]\",\n      parentId: \"root\",\n      path: \"admin/submissions/id\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route26\n    },\n  \"routes/entities/people/[slug]\": {\n      id: \"routes/entities/people/[slug]\",\n      parentId: \"root\",\n      path: \"entities/people/slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route27\n    },\n  \"routes/entities/people/[slug]/about\": {\n      id: \"routes/entities/people/[slug]/about\",\n      parentId: \"routes/entities/people/[slug]\",\n      path: \"about\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route28\n    },\n  \"routes/entities/people/[slug]/edit\": {\n      id: \"routes/entities/people/[slug]/edit\",\n      parentId: \"routes/entities/people/[slug]\",\n      path: \"edit\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route29\n    },\n  \"routes/entities/people/[slug]/tags\": {\n      id: \"routes/entities/people/[slug]/tags\",\n      parentId: \"routes/entities/people/[slug]\",\n      path: \"tags\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route30\n    },\n  \"routes/entities/places/[slug]\": {\n      id: \"routes/entities/places/[slug]\",\n      parentId: \"root\",\n      path: \"entities/places/slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route31\n    },\n  \"routes/entities/places/[slug]/about\": {\n      id: \"routes/entities/places/[slug]/about\",\n      parentId: \"routes/entities/places/[slug]\",\n      path: \"about\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route32\n    },\n  \"routes/entities/places/[slug]/edit\": {\n      id: \"routes/entities/places/[slug]/edit\",\n      parentId: \"routes/entities/places/[slug]\",\n      path: \"edit\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route33\n    },\n  \"routes/entities/places/[slug]/tags\": {\n      id: \"routes/entities/places/[slug]/tags\",\n      parentId: \"routes/entities/places/[slug]\",\n      path: \"tags\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route34\n    },\n  \"routes/entities/people/index\": {\n      id: \"routes/entities/people/index\",\n      parentId: \"root\",\n      path: \"entities/people\",\n      index: true,\n      caseSensitive: undefined,\n      module: route35\n    },\n  \"routes/entities/places/index\": {\n      id: \"routes/entities/places/index\",\n      parentId: \"root\",\n      path: \"entities/places\",\n      index: true,\n      caseSensitive: undefined,\n      module: route36\n    },\n  \"routes/entities/tunes/[slug]\": {\n      id: \"routes/entities/tunes/[slug]\",\n      parentId: \"root\",\n      path: \"entities/tunes/slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route37\n    },\n  \"routes/entities/tunes/[slug]/about\": {\n      id: \"routes/entities/tunes/[slug]/about\",\n      parentId: \"routes/entities/tunes/[slug]\",\n      path: \"about\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route38\n    },\n  \"routes/entities/tunes/[slug]/tags\": {\n      id: \"routes/entities/tunes/[slug]/tags\",\n      parentId: \"routes/entities/tunes/[slug]\",\n      path: \"tags\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route39\n    },\n  \"routes/entities/tunes/index\": {\n      id: \"routes/entities/tunes/index\",\n      parentId: \"root\",\n      path: \"entities/tunes\",\n      index: true,\n      caseSensitive: undefined,\n      module: route40\n    },\n  \"routes/entities/people/new\": {\n      id: \"routes/entities/people/new\",\n      parentId: \"root\",\n      path: \"entities/people/new\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route41\n    },\n  \"routes/entities/places/new\": {\n      id: \"routes/entities/places/new\",\n      parentId: \"root\",\n      path: \"entities/places/new\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route42\n    },\n  \"routes/account/verify\": {\n      id: \"routes/account/verify\",\n      parentId: \"root\",\n      path: \"account/verify\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route43\n    },\n  \"routes/account/index\": {\n      id: \"routes/account/index\",\n      parentId: \"root\",\n      path: \"account\",\n      index: true,\n      caseSensitive: undefined,\n      module: route44\n    },\n  \"routes/admin/index\": {\n      id: \"routes/admin/index\",\n      parentId: \"root\",\n      path: \"admin\",\n      index: true,\n      caseSensitive: undefined,\n      module: route45\n    },\n  \"routes/saved-items\": {\n      id: \"routes/saved-items\",\n      parentId: \"root\",\n      path: \"saved-items\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route46\n    },\n  \"routes/auto-login\": {\n      id: \"routes/auto-login\",\n      parentId: \"root\",\n      path: \"auto-login\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route47\n    },\n  \"routes/users/[id]\": {\n      id: \"routes/users/[id]\",\n      parentId: \"root\",\n      path: \"users/id\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route48\n    },\n  \"routes/logout\": {\n      id: \"routes/logout\",\n      parentId: \"root\",\n      path: \"logout\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route49\n    },\n  \"routes/signup\": {\n      id: \"routes/signup\",\n      parentId: \"root\",\n      path: \"signup\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route50\n    },\n  \"routes/index\": {\n      id: \"routes/index\",\n      parentId: \"root\",\n      path: undefined,\n      index: true,\n      caseSensitive: undefined,\n      module: route51\n    },\n  \"routes/login\": {\n      id: \"routes/login\",\n      parentId: \"root\",\n      path: \"login\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route52\n    }\n  };", "import type { EntryContext } from \"@remix-run/node\";\nimport { RemixServer } from \"@remix-run/react\";\nimport { renderToString } from \"react-dom/server\";\n\nexport default function handleRequest(\n\trequest: Request,\n\tresponseStatusCode: number,\n\tresponseHeaders: Headers,\n\tremixContext: EntryContext\n) {\n\tlet markup = renderToString(\n\t\t<RemixServer context={remixContext} url={request.url} />\n\t);\n\n\tresponseHeaders.set(\"Content-Type\", \"text/html\");\n\n\treturn new Response(\"<!DOCTYPE html>\" + markup, {\n\t\tstatus: responseStatusCode,\n\t\theaders: responseHeaders,\n\t});\n}\n", "import type { MetaFunction } from \"@remix-run/node\";\nimport {\n\tLinks,\n\tLiveReload,\n\tMeta,\n\tOutlet,\n\tScripts,\n\tScrollRestoration,\n} from \"@remix-run/react\";\nimport { ApolloProvider } from \"@apollo/client\";\nimport styles from \"~/styles/globals-generated-do-not-edit.css\";\n\nimport { apolloClient } from \"~/apolloClient\";\nimport PlayerContextProvider from \"~/components/PlayerContextProvider\";\nimport Header from \"~/components/Header\";\nimport Footer from \"~/components/Footer\";\n\nexport const meta: MetaFunction = () => ({\n\tcharset: \"utf-8\",\n\ttitle: \"Trad Archive\",\n\tviewport: \"width=device-width,initial-scale=1\",\n});\n\nexport function links() {\n\treturn [\n\t\t{ rel: \"stylesheet\", href: styles },\n\t\t{\n\t\t\trel: \"apple-touch-icon\",\n\t\t\tsizes: \"180x180\",\n\t\t\thref: \"/favicons/apple-touch-icon.png\",\n\t\t},\n\t\t{\n\t\t\trel: \"icon\",\n\t\t\ttype: \"image/png\",\n\t\t\tsizes: \"192x192\",\n\t\t\thref: \"/favicons/android-chrome-192x192.png\",\n\t\t},\n\t\t{\n\t\t\trel: \"icon\",\n\t\t\ttype: \"image/png\",\n\t\t\tsizes: \"32x32\",\n\t\t\thref: \"/favicons/favicon-32x32.png\",\n\t\t},\n\t\t{\n\t\t\trel: \"icon\",\n\t\t\ttype: \"image/png\",\n\t\t\tsizes: \"16x16\",\n\t\t\thref: \"/favicons/favicon-16x16.png\",\n\t\t},\n\t\t{\n\t\t\trel: \"shortcut icon\",\n\t\t\thref: \"/favicons/favicon.ico\",\n\t\t},\n\t];\n}\n\nexport default function App() {\n\treturn (\n\t\t<html lang=\"en\">\n\t\t\t<head>\n\t\t\t\t<Meta />\n\t\t\t\t<Links />\n\t\t\t</head>\n\t\t\t<ApolloProvider client={apolloClient}>\n\t\t\t\t<PlayerContextProvider>\n\t\t\t\t\t<body className=\"bg-gray-100\">\n\t\t\t\t\t\t<div className=\"flex flex-col w-full relative pt-12\">\n\t\t\t\t\t\t\t<div className=\"flex flex-col justify-start items-center\">\n\t\t\t\t\t\t\t\t<div className=\"w-full min-h-screen lg:max-w-5xl px-4 pt-6 pb-44\">\n\t\t\t\t\t\t\t\t\t<Outlet />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Footer />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Add header to the DOM after child content so its modals overlay */}\n\t\t\t\t\t\t\t<div className=\"fixed top-0 right-0 left-0\" id=\"header\">\n\t\t\t\t\t\t\t\t<Header />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<ScrollRestoration />\n\t\t\t\t\t\t<Scripts />\n\t\t\t\t\t\t<LiveReload />\n\t\t\t\t\t</body>\n\t\t\t\t</PlayerContextProvider>\n\t\t\t</ApolloProvider>\n\t\t</html>\n\t);\n}\n", "import { ApolloClient, InMemoryCache } from \"@apollo/client\";\n\n// const { NEXT_PUBLIC_VERCEL_GIT_COMMIT_REF } = process.env;\n\nlet graphqlPath = \"/graphql\";\nlet apiUrl = `http://localhost:4000${graphqlPath}`;\n// if (NEXT_PUBLIC_VERCEL_GIT_COMMIT_REF === \"master\") {\n// \tapiUrl = `https://api-prod.tradarchive.com${graphqlPath}`;\n// } else if (typeof NEXT_PUBLIC_VERCEL_GIT_COMMIT_REF === \"string\") {\n// \tapiUrl = `https://api-${NEXT_PUBLIC_VERCEL_GIT_COMMIT_REF}.tradarchive.com${graphqlPath}`;\n// }\nexport const API_URL = apiUrl;\n\n// mergeArrayById holds logic for merging incoming arrays to the cache. If an\n// incoming array item ID already exists in the cache, it will replace the\n// existing item. Otherwise it will be added to the end of the cached items.\nconst mergeArrayById = (\n\texisting: any[],\n\tincoming: any[],\n\t{ readField, mergeObjects }\n) => {\n\tconst merged: any[] = existing ? existing.slice(0) : [];\n\tconst idToIndex: Record<string, number> = Object.create(null);\n\tif (existing) {\n\t\texisting.forEach((item, index) => {\n\t\t\tidToIndex[readField(\"id\", item)] = index;\n\t\t});\n\t}\n\tif (incoming) {\n\t\tincoming.forEach((item) => {\n\t\t\tconst id = readField(\"id\", item);\n\t\t\tconst index = idToIndex[id];\n\t\t\tif (typeof index === \"number\") {\n\t\t\t\t// Merge the new item data with the existing item data.\n\t\t\t\tmerged[index] = mergeObjects(merged[index], item);\n\t\t\t} else {\n\t\t\t\t// First time we've seen this item in this array.\n\t\t\t\tidToIndex[id] = merged.length;\n\t\t\t\tmerged.push(item);\n\t\t\t}\n\t\t});\n\t}\n\treturn merged;\n};\n\nexport const apolloClient = new ApolloClient({\n\turi: API_URL,\n\tcredentials: \"include\",\n\tcache: new InMemoryCache({\n\t\ttypePolicies: {\n\t\t\tQuery: {\n\t\t\t\tfields: {\n\t\t\t\t\taudioItems: {\n\t\t\t\t\t\t// Cache audioItems separately based on the sortBy value\n\t\t\t\t\t\tkeyArgs: [\"input\", [\"sortBy\"]],\n\t\t\t\t\t\t// When new results are received for this query via fetchMore\n\t\t\t\t\t\t// pagination, specify how to merge them with cached results\n\t\t\t\t\t\tmerge(existing = [], incoming, { args: { input } }) {\n\t\t\t\t\t\t\tconst { skip = 0 } = input;\n\t\t\t\t\t\t\tconst merged = existing ? existing.slice(0) : [];\n\t\t\t\t\t\t\tfor (let i = 0; i < incoming.length; ++i) {\n\t\t\t\t\t\t\t\tmerged[skip + i] = incoming[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn merged;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tcollections: {\n\t\t\t\t\t\t// Cache separately based on the sortBy value\n\t\t\t\t\t\tkeyArgs: [\"input\", [\"sortBy\"]],\n\t\t\t\t\t\t// When new results are received for this query via fetchMore\n\t\t\t\t\t\t// pagination, specify how to merge them with cached results\n\t\t\t\t\t\tmerge(existing = [], incoming, { args: { input } }) {\n\t\t\t\t\t\t\tconst { skip = 0 } = input;\n\t\t\t\t\t\t\tconst merged = existing ? existing.slice(0) : [];\n\t\t\t\t\t\t\tfor (let i = 0; i < incoming.length; ++i) {\n\t\t\t\t\t\t\t\tmerged[skip + i] = incoming[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn merged;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tcomments: {\n\t\t\t\t\t\t// Use shared cache for this query regardless of args like `take` or\n\t\t\t\t\t\t// `skip`\n\t\t\t\t\t\tkeyArgs: false,\n\t\t\t\t\t\tmerge: mergeArrayById,\n\t\t\t\t\t},\n\t\t\t\t\tentity: {\n\t\t\t\t\t\tkeyArgs: false,\n\t\t\t\t\t\tmerge(existing, incoming, { mergeObjects }) {\n\t\t\t\t\t\t\treturn mergeObjects(existing, incoming);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tinstruments: {\n\t\t\t\t\t\t// Cache separately based on the sortBy value\n\t\t\t\t\t\tkeyArgs: [\"input\", [\"sortBy\"]],\n\t\t\t\t\t\t// When new results are received for this query via fetchMore\n\t\t\t\t\t\t// pagination, specify how to merge them with cached results\n\t\t\t\t\t\tmerge(existing = [], incoming, { args: { input } }) {\n\t\t\t\t\t\t\tconst { skip = 0 } = input;\n\t\t\t\t\t\t\tconst merged = existing ? existing.slice(0) : [];\n\t\t\t\t\t\t\tfor (let i = 0; i < incoming.length; ++i) {\n\t\t\t\t\t\t\t\tmerged[skip + i] = incoming[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn merged;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tpeople: {\n\t\t\t\t\t\t// Cache people separately based on the sortBy value\n\t\t\t\t\t\tkeyArgs: [\"input\", [\"sortBy\"]],\n\t\t\t\t\t\t// When new results are received for this query via fetchMore\n\t\t\t\t\t\t// pagination, specify how to merge them with cached results\n\t\t\t\t\t\tmerge(existing = [], incoming, { args: { input } }) {\n\t\t\t\t\t\t\tconst { skip = 0 } = input;\n\t\t\t\t\t\t\tconst merged = existing ? existing.slice(0) : [];\n\t\t\t\t\t\t\tfor (let i = 0; i < incoming.length; ++i) {\n\t\t\t\t\t\t\t\tmerged[skip + i] = incoming[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn merged;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tplaces: {\n\t\t\t\t\t\t// Cache separately based on the sortBy value\n\t\t\t\t\t\tkeyArgs: [\"input\", [\"sortBy\"]],\n\t\t\t\t\t\t// When new results are received for this query via fetchMore\n\t\t\t\t\t\t// pagination, specify how to merge them with cached results\n\t\t\t\t\t\tmerge(existing = [], incoming, { args: { input } }) {\n\t\t\t\t\t\t\tconst { skip = 0 } = input;\n\t\t\t\t\t\t\tconst merged = existing ? existing.slice(0) : [];\n\t\t\t\t\t\t\tfor (let i = 0; i < incoming.length; ++i) {\n\t\t\t\t\t\t\t\tmerged[skip + i] = incoming[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn merged;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tsavedItemsForUser: {\n\t\t\t\t\t\tkeyArgs: false,\n\t\t\t\t\t\tmerge(existing, incoming) {\n\t\t\t\t\t\t\t// Just return incoming results until pagination is implemented\n\t\t\t\t\t\t\treturn incoming ?? existing;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\ttags: {\n\t\t\t\t\t\tkeyArgs: false,\n\t\t\t\t\t\tmerge(_, incoming) {\n\t\t\t\t\t\t\treturn incoming;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\ttunes: {\n\t\t\t\t\t\t// Cache separately based on the sortBy value\n\t\t\t\t\t\tkeyArgs: [\"input\", [\"sortBy\"]],\n\t\t\t\t\t\t// When new results are received for this query via fetchMore\n\t\t\t\t\t\t// pagination, specify how to merge them with cached results\n\t\t\t\t\t\tmerge(existing = [], incoming, { args: { input } }) {\n\t\t\t\t\t\t\tconst { skip = 0 } = input;\n\t\t\t\t\t\t\tconst merged = existing ? existing.slice(0) : [];\n\t\t\t\t\t\t\tfor (let i = 0; i < incoming.length; ++i) {\n\t\t\t\t\t\t\t\tmerged[skip + i] = incoming[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn merged;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tAudioItem: {\n\t\t\t\tfields: {\n\t\t\t\t\tcomments: {\n\t\t\t\t\t\tmerge(existing, incoming) {\n\t\t\t\t\t\t\treturn incoming ?? existing;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\ttags: {\n\t\t\t\t\t\tmerge(existing, incoming) {\n\t\t\t\t\t\t\treturn incoming ?? existing;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tisSavedByUser: {\n\t\t\t\t\t\tmerge(existing, incoming) {\n\t\t\t\t\t\t\treturn incoming ?? existing;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tcreatedByUser: {\n\t\t\t\t\t\tmerge(existing, incoming) {\n\t\t\t\t\t\t\treturn incoming ?? existing;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tCollection: {\n\t\t\t\tfields: {\n\t\t\t\t\ttags: {\n\t\t\t\t\t\tmerge(existing, incoming) {\n\t\t\t\t\t\t\treturn incoming ?? existing;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tComment: {\n\t\t\t\tfields: {\n\t\t\t\t\tparentAudioItem: {\n\t\t\t\t\t\t// If any nested fields of the incoming parentAudioItem have custom\n\t\t\t\t\t\t// merge behavior, mergeObjects ensure that the custom merge\n\t\t\t\t\t\t// functions will be called recursively.\n\t\t\t\t\t\tmerge(existing, incoming, { mergeObjects }) {\n\t\t\t\t\t\t\treturn mergeObjects(existing, incoming);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tcreatedByUser: {\n\t\t\t\t\t\tmerge(existing, incoming) {\n\t\t\t\t\t\t\treturn incoming ?? existing;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tInstrument: {\n\t\t\t\tfields: {\n\t\t\t\t\ttags: {\n\t\t\t\t\t\tmerge(existing, incoming) {\n\t\t\t\t\t\t\treturn incoming ?? existing;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tPerson: {\n\t\t\t\tfields: {\n\t\t\t\t\ttags: {\n\t\t\t\t\t\tmerge(existing, incoming) {\n\t\t\t\t\t\t\treturn incoming ?? existing;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tPlace: {\n\t\t\t\tfields: {\n\t\t\t\t\ttags: {\n\t\t\t\t\t\tmerge(existing, incoming) {\n\t\t\t\t\t\t\treturn incoming ?? existing;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tSavedItem: {\n\t\t\t\tfields: {\n\t\t\t\t\taudioItem: {\n\t\t\t\t\t\tmerge(existing, incoming, { mergeObjects }) {\n\t\t\t\t\t\t\treturn mergeObjects(existing, incoming);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tTag: {\n\t\t\t\tfields: {\n\t\t\t\t\tsubjectEntity: {\n\t\t\t\t\t\tmerge(existing, incoming, { mergeObjects }) {\n\t\t\t\t\t\t\treturn mergeObjects(existing, incoming);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tobjectEntity: {\n\t\t\t\t\t\tmerge(existing, incoming, { mergeObjects }) {\n\t\t\t\t\t\t\treturn mergeObjects(existing, incoming);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tcreatedByUser: {\n\t\t\t\t\t\tmerge(existing, incoming, { mergeObjects }) {\n\t\t\t\t\t\t\treturn mergeObjects(existing, incoming);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tTune: {\n\t\t\t\tfields: {\n\t\t\t\t\ttags: {\n\t\t\t\t\t\tmerge(existing, incoming) {\n\t\t\t\t\t\t\treturn incoming ?? existing;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t}),\n});\n", "import React, { useEffect, useState } from \"react\";\nimport Player from \"~/components/Player\";\nimport { AudioItem } from \"~/types\";\n\ninterface PlayerContextValue {\n\tactiveAudioItem: AudioItem | null;\n\tsetActiveAudioItem: React.Dispatch<React.SetStateAction<AudioItem>>;\n\tactiveItemDurationSeconds: number | undefined;\n\tsetActiveItemDurationSeconds: React.Dispatch<\n\t\tReact.SetStateAction<number | undefined>\n\t>;\n\tplaybackPositionSeconds: number | undefined;\n\tsetPlaybackPositionSeconds: React.Dispatch<\n\t\tReact.SetStateAction<number | undefined>\n\t>;\n\tseekPositionSeconds: number | undefined;\n\tsetSeekPositionSeconds: React.Dispatch<\n\t\tReact.SetStateAction<number | undefined>\n\t>;\n}\n\nexport const PlayerContext = React.createContext<PlayerContextValue>(null);\n\ninterface PlayerContextProviderProps {\n\tchildren: React.ReactChild | React.ReactChild[];\n}\n\nfunction PlayerContextProvider({ children }: PlayerContextProviderProps) {\n\tconst [activeAudioItem, setActiveAudioItem] = useState<AudioItem>(null);\n\tconst [activeItemDurationSeconds, setActiveItemDurationSeconds] = useState<\n\t\tnumber | undefined\n\t>(undefined);\n\tconst [playbackPositionSeconds, setPlaybackPositionSeconds] = useState<\n\t\tnumber | undefined\n\t>(undefined);\n\tconst [seekPositionSeconds, setSeekPositionSeconds] = useState<\n\t\tnumber | undefined\n\t>(undefined);\n\n\t// Reset PlayerContext when there is no active item\n\tuseEffect(() => {\n\t\tif (!activeAudioItem) {\n\t\t\tsetActiveItemDurationSeconds(undefined);\n\t\t\tsetPlaybackPositionSeconds(undefined);\n\t\t\tsetSeekPositionSeconds(undefined);\n\t\t}\n\t}, [activeAudioItem]);\n\n\treturn (\n\t\t<PlayerContext.Provider\n\t\t\tvalue={{\n\t\t\t\tactiveAudioItem,\n\t\t\t\tsetActiveAudioItem,\n\t\t\t\tactiveItemDurationSeconds,\n\t\t\t\tsetActiveItemDurationSeconds,\n\t\t\t\tplaybackPositionSeconds,\n\t\t\t\tsetPlaybackPositionSeconds,\n\t\t\t\tseekPositionSeconds,\n\t\t\t\tsetSeekPositionSeconds,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\n\t\t\t{/* Player is rendered here so it is persistent across all routes */}\n\t\t\t{activeAudioItem && (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"fixed bottom-0 left-0 right-0\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tboxShadow:\n\t\t\t\t\t\t\t\"0 -10px 15px -3px rgba(0, 0, 0, 0.1), 0 -4px 6px -2px rgba(0, 0, 0, 0.05)\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Player />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</PlayerContext.Provider>\n\t);\n}\n\nexport default PlayerContextProvider;\n", "import { useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\nimport { isAudioItem } from \"~/types\";\n\nimport AudioPlayer from \"~/components/AudioPlayer\";\n\nconst Player = () => {\n\tconst { activeAudioItem, setActiveAudioItem } = usePlayerContext();\n\n\tif (!activeAudioItem) {\n\t\treturn null;\n\t}\n\n\tconst itemHref = useMemo(() => {\n\t\tif (isAudioItem(activeAudioItem)) {\n\t\t\treturn `/entities/audio-items/${activeAudioItem.slug}`;\n\t\t}\n\t\treturn window.location.href;\n\t}, [activeAudioItem]);\n\n\treturn (\n\t\t<div className=\"flex flex-col align-center justify-center px-4 pb-4 pt-2 bg-white\">\n\t\t\t<div className=\"flex flex-row justify-between mb-2\">\n\t\t\t\t<div className=\"leading-8\">\n\t\t\t\t\tNow playing:{\" \"}\n\t\t\t\t\t<span className=\"text-gray-500\">{activeAudioItem.name}</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex flex-row items-center ml-4\">\n\t\t\t\t\t<Link to={itemHref}>\n\t\t\t\t\t\t<a className=\"whitespace-nowrap\">View</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn-icon flex ml-2 md:ml-4\"\n\t\t\t\t\t\tonClick={() => setActiveAudioItem(null)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className=\"material-icons\">close</i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<AudioPlayer item={activeAudioItem} key={activeAudioItem.id} />\n\t\t</div>\n\t);\n};\n\nexport default Player;\n", "import { useContext } from \"react\";\nimport { PlayerContext } from \"~/components/PlayerContextProvider\";\n\nconst usePlayerContext = () => {\n\tconst playerContext = useContext(PlayerContext);\n\treturn playerContext;\n};\n\nexport default usePlayerContext;\n", "export enum PerPage {\n\tTen = 10,\n\tTwenty = 20,\n\tFifty = 50,\n\tHundred = 100,\n}\n\nexport enum SortBy {\n\tRecentlyTagged = \"RecentlyTagged\",\n\tRecentlyAdded = \"RecentlyAdded\",\n\tAToZ = \"AToZ\",\n}\n\nexport enum ViewAs {\n\tCards = \"Cards\",\n\tCompact = \"Compact\",\n\tList = \"List\",\n}\n\nexport enum UserRole {\n\tUser = \"User\",\n\tAdmin = \"Admin\",\n}\n\nexport enum CopyrightPermissionStatus {\n\tFullNonCommercialGranted = \"FullNonCommercialGranted\",\n}\nexport interface User {\n\tid: string;\n\trole?: UserRole;\n\temail?: string;\n\tusername: string;\n\tcopyrightPermissionStatus?: CopyrightPermissionStatus | null;\n\tverifiedPerson?: Person | null;\n\tcreatedAt: string;\n\tupdatedAt: string;\n}\n\n// Entity defines a union of all the different Entity types\nexport type Entity =\n\t| AudioItem\n\t| Person\n\t| Instrument\n\t| Place\n\t| Tune\n\t| Collection;\n\nexport enum EntityType {\n\tAudioItem = \"AudioItem\",\n\tPerson = \"Person\",\n\tInstrument = \"Instrument\",\n\tPlace = \"Place\",\n\tTune = \"Tune\",\n\tCollection = \"Collection\",\n}\n\nexport enum EntityStatus {\n\tPublished = \"Published\",\n\tTakenDown = \"TakenDown\",\n}\n\nexport function isAudioItem(entity: Entity): entity is AudioItem {\n\treturn (entity as AudioItem).entityType === EntityType.AudioItem;\n}\nexport function isPerson(entity: Entity): entity is Person {\n\treturn (entity as Person).entityType === EntityType.Person;\n}\nexport function isInstrument(entity: Entity): entity is Instrument {\n\treturn (entity as Instrument).entityType === EntityType.Instrument;\n}\nexport function isPlace(entity: Entity): entity is Place {\n\treturn (entity as Place).entityType === EntityType.Place;\n}\nexport function isTune(entity: Entity): entity is Tune {\n\treturn (entity as Tune).entityType === EntityType.Tune;\n}\nexport function isCollection(entity: Entity): entity is Collection {\n\treturn (entity as Collection).entityType === EntityType.Collection;\n}\n\ninterface BaseEntity {\n\tid: string;\n\tname: string;\n\tslug: string;\n\taliases: string | null;\n\tdescription: string | null;\n\ttags: Tag[] | null;\n\tcreatedByUser: User | null;\n\tlastUpdatedByUser: User | null;\n\tstatus?: EntityStatus;\n\tcreatedAt: string;\n\tupdatedAt: string;\n}\n\nexport interface AudioItem extends BaseEntity {\n\tentityType: EntityType.AudioItem;\n\tcomments?: Comment[] | null;\n\tcommentsCount?: number;\n\titmaAtomSlug: string | null;\n\turlSource: string | null;\n\tisSavedByUser?: boolean;\n}\n\nexport interface Person extends BaseEntity {\n\tentityType: EntityType.Person;\n\tfirstName: string;\n\tmiddleName: string | null;\n\tlastName: string;\n\tverifiedUser?: User | null;\n}\n\nexport interface Instrument extends BaseEntity {\n\tentityType: EntityType.Instrument;\n}\n\nexport interface Place extends BaseEntity {\n\tentityType: EntityType.Place;\n\tlatitude: number;\n\tlongitude: number;\n}\n\nexport interface Tune extends BaseEntity {\n\tentityType: EntityType.Tune;\n\ttheSessionTuneId: string;\n\ttype: string | null;\n\tmeter: string | null;\n\tmode: string | null;\n\tabc: string | null;\n}\n\nexport interface Collection extends BaseEntity {\n\tentityType: EntityType.Collection;\n\titmaAtomSlug: string | null;\n}\n\nexport interface Relationship {\n\tid: string;\n\tname: string;\n\tsubjectEntityType: EntityType;\n\tobjectEntityType: EntityType;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedAt: string;\n}\n\nexport interface Tag {\n\tid: string;\n\trelationship: Relationship;\n\tsubjectEntity?: Entity;\n\tobjectEntity: Entity;\n\tsubjectTimeMarkerSeconds?: number | null;\n\tcreatedByUser?: User | null;\n\tcreatedAt: string;\n\tupdatedAt: string;\n}\n\nexport interface Comment {\n\tid: string;\n\tparentAudioItem?: AudioItem | null;\n\ttext: string;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedAt: string;\n}\n\nexport interface SavedItem {\n\tid: string;\n\taudioItem?: AudioItem | null;\n\tuser?: User | null;\n\tcreatedAt: string;\n}\n\nexport enum TakedownRequestType {\n\tPerformer = \"Performer\",\n\tCopyright = \"Copyright\",\n}\n\nexport enum TakedownRequestStatus {\n\tPending = \"Pending\",\n\tApproved = \"Approved\",\n\tDenied = \"Denied\",\n}\n\nexport interface TakedownRequest {\n\tid: string;\n\tentity?: Entity;\n\ttype: TakedownRequestType;\n\tmessage: string | null;\n\tstatus: TakedownRequestStatus;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedByUser: User;\n\tupdatedAt: string;\n}\n\nexport const isPendingTakedownRequest = (takedownRequest: TakedownRequest) =>\n\ttakedownRequest.status.valueOf() === \"Pending\";\n\nexport const isApprovedTakedownRequest = (takedownRequest: TakedownRequest) =>\n\ttakedownRequest.status.valueOf() === \"Approved\";\n\nexport const isDeniedTakedownRequest = (takedownRequest: TakedownRequest) =>\n\ttakedownRequest.status.valueOf() === \"Denied\";\n\nexport enum VerificationRequestStatus {\n\tPending = \"Pending\",\n\tApproved = \"Approved\",\n\tDenied = \"Denied\",\n}\nexport interface VerificationRequest {\n\tid: string;\n\tperson: Person;\n\tpresignedImageDownloadUrl: string | null;\n\tcopyrightPermissionStatus: CopyrightPermissionStatus | null;\n\tstatus: VerificationRequestStatus;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedByUser: User;\n\tupdatedAt: string;\n}\n\nexport const isPendingVerificationRequest = (\n\tverificationRequest: VerificationRequest\n) => verificationRequest.status.valueOf() === \"Pending\";\n\nexport const isApprovedVerificationRequest = (\n\tverificationRequest: VerificationRequest\n) => verificationRequest.status.valueOf() === \"Approved\";\n\nexport const isDeniedVerificationRequest = (\n\tverificationRequest: VerificationRequest\n) => verificationRequest.status.valueOf() === \"Denied\";\n\nexport enum SubmissionStatus {\n\tPending = \"Pending\",\n\tApproved = \"Approved\",\n\tDenied = \"Denied\",\n}\nexport enum SubmissionMaterialType {\n\tAudio = \"Audio\",\n\tVideo = \"Video\",\n\tImage = \"Image\",\n\tDocument = \"Document\",\n}\nexport interface Submission {\n\tid: string;\n\tstatus: SubmissionStatus;\n\tmaterialTypes: SubmissionMaterialType[];\n\tuserControlsCopyright: boolean;\n\tcopyrightDetails: string | null;\n\tdescription: string | null;\n\ts3DirectoryKey: string | null;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedByUser: User;\n\tupdatedAt: string;\n}\n\nexport interface Stats {\n\tnumAudioItemsAllTime: number;\n\tnumTagsAllTime: number;\n\tnumCommentsAllTime: number;\n}\n", "import { useEffect, useRef } from \"react\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\nimport { AudioItem } from \"~/types\";\n\ninterface AudioPlayerProps {\n\titem: AudioItem;\n}\nconst AudioPlayer = ({ item }: AudioPlayerProps) => {\n\tconst audioPlayerRef = useRef<HTMLAudioElement>();\n\n\tconst {\n\t\tsetActiveItemDurationSeconds,\n\t\tsetPlaybackPositionSeconds,\n\t\tseekPositionSeconds,\n\t\tsetSeekPositionSeconds,\n\t} = usePlayerContext();\n\n\t// Set up event callbacks on the audio tag\n\tuseEffect(() => {\n\t\tconst audioPlayer = audioPlayerRef.current;\n\t\tif (audioPlayer) {\n\t\t\t// When the audio item's duration changes, update PlayerContext\n\t\t\taudioPlayer.ondurationchange = () => {\n\t\t\t\tconst duration = audioPlayer.duration;\n\t\t\t\tif (typeof duration === \"number\") {\n\t\t\t\t\tconst durationSeconds = Math.floor(audioPlayer.duration);\n\t\t\t\t\tsetActiveItemDurationSeconds(durationSeconds);\n\t\t\t\t}\n\t\t\t};\n\t\t\t// As the audio tag's playback position changes, update PlayerContext with the\n\t\t\t// new value\n\t\t\taudioPlayer.ontimeupdate = () => {\n\t\t\t\tconst playbackPositionSeconds = Math.floor(audioPlayer.currentTime);\n\t\t\t\tsetPlaybackPositionSeconds(playbackPositionSeconds);\n\t\t\t};\n\t\t}\n\t}, []);\n\n\t// If a seek position is set in PlayerContext, update audio tag's playback\n\t// position to match and ensure audio is playing\n\tuseEffect(() => {\n\t\tconst audioPlayer = audioPlayerRef.current;\n\t\tif (audioPlayer && typeof seekPositionSeconds === \"number\") {\n\t\t\taudioPlayer.currentTime = seekPositionSeconds;\n\t\t\tsetSeekPositionSeconds(undefined);\n\t\t\tif (audioPlayer.paused) {\n\t\t\t\taudioPlayer.play();\n\t\t\t}\n\t\t}\n\t}, [seekPositionSeconds]);\n\n\treturn (\n\t\t<audio\n\t\t\tref={audioPlayerRef}\n\t\t\tid=\"audio\"\n\t\t\tpreload=\"metadata\"\n\t\t\tautoPlay\n\t\t\tcontrols\n\t\t\tcontrolsList=\"nodownload\"\n\t\t\tclassName=\"w-full outline-none\"\n\t\t>\n\t\t\t<source src={item.urlSource} type=\"audio/mpeg\" />\n\t\t</audio>\n\t);\n};\n\nexport default AudioPlayer;\n", "import { useMemo, useState, useCallback } from \"react\";\nimport { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\nimport { useHotkeys } from \"react-hotkeys-hook\";\n\nimport type { Entity } from \"~/types\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\nimport UserService from \"~/services/User\";\nimport EntityService from \"~/services/Entity\";\n\nimport Modal from \"~/components/Modal\";\nimport SearchEntities from \"~/components/SearchEntities\";\n\nconst Header = () => {\n\tconst navigate = useNavigate();\n\n\tconst [currentUser, { loading }] = useCurrentUser();\n\n\tconst [searchModalIsVisible, setSearchModalIsVisible] = useState(false);\n\n\tconst openSearchModal = (event) => {\n\t\tevent.preventDefault();\n\t\tsetSearchModalIsVisible(true);\n\t};\n\tconst closeSearchModal = () => {\n\t\tsetSearchModalIsVisible(false);\n\t};\n\n\tuseHotkeys(\"/\", openSearchModal);\n\n\tconst onSelectSearchResult = useCallback(\n\t\t(entity: Entity) => {\n\t\t\tsetSearchModalIsVisible(false);\n\t\t\tnavigate(EntityService.makeHrefForView(entity));\n\t\t},\n\t\t[navigate]\n\t);\n\n\tconst onNewEntityCreated = useCallback(\n\t\t(entity: Entity) => {\n\t\t\tnavigate(EntityService.makeHrefForView(entity));\n\t\t},\n\t\t[navigate]\n\t);\n\n\tconst userActions = useMemo(() => {\n\t\tif (loading || typeof currentUser === \"undefined\") {\n\t\t\treturn null;\n\t\t} else if (currentUser) {\n\t\t\treturn (\n\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\t<Link to=\"/saved-items\">\n\t\t\t\t\t\t<a className=\"btn-text text-current flex flex-row items-center whitespace-nowrap hover:text-gray-400 ml-4\">\n\t\t\t\t\t\t\t<i className=\"material-icons\">bookmark</i>\n\t\t\t\t\t\t\t<span className=\"hidden md:block md:pl-1\">Saved</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t{UserService.isAdmin(currentUser) && (\n\t\t\t\t\t\t<Link to=\"/admin\">\n\t\t\t\t\t\t\t<a className=\"btn-text text-current flex flex-row items-center whitespace-nowrap hover:text-gray-400 ml-4\">\n\t\t\t\t\t\t\t\t<i className=\"material-icons\">manage_accounts</i>\n\t\t\t\t\t\t\t\t<span className=\"hidden md:block md:pl-1\">Admin</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t)}\n\t\t\t\t\t<Link to=\"/account\">\n\t\t\t\t\t\t<a className=\"btn-text text-current flex flex-row items-center whitespace-nowrap hover:text-gray-400 ml-4\">\n\t\t\t\t\t\t\t<i className=\"material-icons\">account_circle</i>\n\t\t\t\t\t\t\t<span className=\"hidden md:block md:pl-1\">Account</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<Link to=\"/login\">\n\t\t\t\t\t\t<a className=\"btn-text text-current whitespace-nowrap hover:text-gray-400 ml-4\">\n\t\t\t\t\t\t\tLog In\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/signup\">\n\t\t\t\t\t\t<a className=\"btn text-current no-underline whitespace-nowrap hover:text-current ml-4\">\n\t\t\t\t\t\t\tSign Up\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}, [loading, currentUser]);\n\n\treturn (\n\t\t<>\n\t\t\t<div\n\t\t\t\tclassName=\"flex flex-row py-3 px-4 justify-between text-white items-center bg-teal-700\"\n\t\t\t\tsuppressHydrationWarning\n\t\t\t>\n\t\t\t\t<div className=\"flex flex-row\">\n\t\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t\t<a className=\"btn-text text-current whitespace-nowrap text-yellow-200 hover:text-gray-400\">\n\t\t\t\t\t\t\tTrad Archive\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn-text text-current flex flex-row items-center whitespace-nowrap hover:text-gray-400 group ml-4\"\n\t\t\t\t\t\tonClick={openSearchModal}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className=\"material-icons\">search</i>\n\t\t\t\t\t\t<span className=\"hidden md:block md:pl-1\">Search</span>\n\t\t\t\t\t\t<span className=\"hidden md:block border border-gray-300 group-hover:border-gray-400 rounded text-xs px-1.5 ml-2.5\">{`/`}</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<Link to=\"/entities/audio-items/random\">\n\t\t\t\t\t\t<a className=\"flex flex-row items-center link-bare text-current text-white hover:text-gray-400 ml-4\">\n\t\t\t\t\t\t\t<div className=\"block h-6\">\n\t\t\t\t\t\t\t\t<i className=\"material-icons\">shuffle</i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"md:pl-2 hidden md:block\">Random</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\n\t\t\t\t{userActions}\n\t\t\t</div>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Search\"\n\t\t\t\tisVisible={searchModalIsVisible}\n\t\t\t\tonClose={closeSearchModal}\n\t\t\t>\n\t\t\t\t<SearchEntities\n\t\t\t\t\tonSelect={onSelectSearchResult}\n\t\t\t\t\tonNewEntityCreated={onNewEntityCreated}\n\t\t\t\t/>\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default Header;\n", "import { useEffect } from \"react\";\nimport type { LazyQueryResult } from \"@apollo/client\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\n\nimport type { User } from \"~/types\";\nimport { UserFragments } from \"~/fragments\";\n\nexport const CURRENT_USER_QUERY = gql`\n\tquery CurrentUser {\n\t\tcurrentUser {\n\t\t\t...CurrentUser\n\t\t}\n\t}\n\t${UserFragments.currentUser}\n`;\n\ninterface QueryData {\n\tcurrentUser: User;\n}\n\nconst useCurrentUser = (): [\n\tUser | null | undefined,\n\tLazyQueryResult<QueryData, {}>\n] => {\n\tconst [getCurrentUser, currentUserQuery] =\n\t\tuseLazyQuery<QueryData>(CURRENT_USER_QUERY);\n\n\tuseEffect(() => {\n\t\tgetCurrentUser();\n\t}, [getCurrentUser]);\n\n\tconst currentUser = currentUserQuery.data?.currentUser;\n\n\treturn [currentUser, currentUserQuery];\n};\n\nexport default useCurrentUser;\n", "import { gql } from \"@apollo/client\";\n\nexport const UserFragments = {\n\tuser: gql`\n\t\tfragment User on User {\n\t\t\tid\n\t\t\tusername\n\t\t\tcopyrightPermissionStatus\n\t\t\tverifiedPerson {\n\t\t\t\tid\n\t\t\t\tentityType\n\t\t\t\tslug\n\t\t\t\tname\n\t\t\t}\n\t\t\tcreatedAt\n\t\t}\n\t`,\n\tcurrentUser: gql`\n\t\tfragment CurrentUser on User {\n\t\t\tid\n\t\t\trole\n\t\t\temail\n\t\t\tusername\n\t\t\tcopyrightPermissionStatus\n\t\t}\n\t`,\n};\n\nexport const RelationshipFragments = {\n\trelationship: gql`\n\t\tfragment Relationship on Relationship {\n\t\t\tid\n\t\t\tname\n\t\t\tsubjectEntityType\n\t\t\tobjectEntityType\n\t\t}\n\t`,\n};\n\nexport const TagEntityFragments = {\n\ttagAudioItem: gql`\n\t\tfragment TagAudioItem on AudioItem {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t}\n\t`,\n\ttagInstrument: gql`\n\t\tfragment TagInstrument on Instrument {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t}\n\t`,\n\ttagPerson: gql`\n\t\tfragment TagPerson on Person {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t}\n\t`,\n\ttagPlace: gql`\n\t\tfragment TagPlace on Place {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t}\n\t`,\n\ttagTune: gql`\n\t\tfragment TagTune on Tune {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\ttype\n\t\t}\n\t`,\n\ttagCollection: gql`\n\t\tfragment TagCollection on Collection {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t}\n\t`,\n};\n\nexport const TagFragments = {\n\ttag: gql`\n\t\tfragment Tag on Tag {\n\t\t\tid\n\t\t\trelationship {\n\t\t\t\t...Relationship\n\t\t\t}\n\t\t\tsubjectEntity {\n\t\t\t\t...TagAudioItem\n\t\t\t\t...TagInstrument\n\t\t\t\t...TagPerson\n\t\t\t\t...TagPlace\n\t\t\t\t...TagTune\n\t\t\t\t...TagCollection\n\t\t\t}\n\t\t\tobjectEntity {\n\t\t\t\t...TagAudioItem\n\t\t\t\t...TagInstrument\n\t\t\t\t...TagPerson\n\t\t\t\t...TagPlace\n\t\t\t\t...TagTune\n\t\t\t\t...TagCollection\n\t\t\t}\n\t\t\tsubjectTimeMarkerSeconds\n\t\t\tcreatedByUser {\n\t\t\t\t...User\n\t\t\t}\n\t\t\tcreatedAt\n\t\t}\n\t\t${RelationshipFragments.relationship}\n\t\t${TagEntityFragments.tagAudioItem}\n\t\t${TagEntityFragments.tagInstrument}\n\t\t${TagEntityFragments.tagPerson}\n\t\t${TagEntityFragments.tagPlace}\n\t\t${TagEntityFragments.tagTune}\n\t\t${TagEntityFragments.tagCollection}\n\t\t${UserFragments.user}\n\t`,\n\ttagForEntity: gql`\n\t\tfragment TagForEntity on Tag {\n\t\t\tid\n\t\t\trelationship {\n\t\t\t\t...Relationship\n\t\t\t}\n\t\t\tobjectEntity {\n\t\t\t\t...TagAudioItem\n\t\t\t\t...TagInstrument\n\t\t\t\t...TagPerson\n\t\t\t\t...TagPlace\n\t\t\t\t...TagTune\n\t\t\t\t...TagCollection\n\t\t\t}\n\t\t\tsubjectTimeMarkerSeconds\n\t\t\tcreatedByUser {\n\t\t\t\t...User\n\t\t\t}\n\t\t\tcreatedAt\n\t\t}\n\t\t${RelationshipFragments.relationship}\n\t\t${TagEntityFragments.tagAudioItem}\n\t\t${TagEntityFragments.tagInstrument}\n\t\t${TagEntityFragments.tagPerson}\n\t\t${TagEntityFragments.tagPlace}\n\t\t${TagEntityFragments.tagTune}\n\t\t${TagEntityFragments.tagCollection}\n\t\t${UserFragments.user}\n\t`,\n};\n\nexport const EntityFragments = {\n\taudioItem: gql`\n\t\tfragment AudioItem on AudioItem {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...TagForEntity\n\t\t\t}\n\t\t\tcommentsCount\n\t\t\tisSavedByUser\n\t\t\tstatus\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\tverifiedPerson {\n\t\t\t\t\tid\n\t\t\t\t\tentityType\n\t\t\t\t\tslug\n\t\t\t\t}\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedAt\n\t\t\turlSource\n\t\t\titmaAtomSlug\n\t\t}\n\t\t${TagFragments.tagForEntity}\n\t`,\n\tperson: gql`\n\t\tfragment Person on Person {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...Tag\n\t\t\t}\n\t\t\tverifiedUser {\n\t\t\t\t...User\n\t\t\t}\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedAt\n\t\t\tfirstName\n\t\t\tmiddleName\n\t\t\tlastName\n\t\t}\n\t\t${TagFragments.tag}\n\t\t${UserFragments.user}\n\t`,\n\tinstrument: gql`\n\t\tfragment Instrument on Instrument {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...Tag\n\t\t\t}\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t}\n\t\t}\n\t\t${TagFragments.tag}\n\t`,\n\tplace: gql`\n\t\tfragment Place on Place {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...Tag\n\t\t\t}\n\t\t\tlatitude\n\t\t\tlongitude\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t}\n\t\t}\n\t\t${TagFragments.tag}\n\t`,\n\ttune: gql`\n\t\tfragment Tune on Tune {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...Tag\n\t\t\t}\n\t\t\ttheSessionTuneId\n\t\t\ttype\n\t\t\tmeter\n\t\t\tmode\n\t\t\tabc\n\t\t}\n\t\t${TagFragments.tag}\n\t`,\n\tcollection: gql`\n\t\tfragment Collection on Collection {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...Tag\n\t\t\t}\n\t\t\titmaAtomSlug\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedAt\n\t\t}\n\t\t${TagFragments.tag}\n\t\t${UserFragments.user}\n\t`,\n};\n\nexport const CommentFragments = {\n\tcomment: gql`\n\t\tfragment Comment on Comment {\n\t\t\tid\n\t\t\ttext\n\t\t\tparentAudioItem {\n\t\t\t\t...AudioItem\n\t\t\t}\n\t\t\tcreatedByUser {\n\t\t\t\t...User\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedAt\n\t\t}\n\t\t${EntityFragments.audioItem}\n\t\t${UserFragments.user}\n\t`,\n\tcommentWithoutParentEntity: gql`\n\t\tfragment CommentWithoutParentEntity on Comment {\n\t\t\tid\n\t\t\ttext\n\t\t\tcreatedByUser {\n\t\t\t\t...User\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedAt\n\t\t}\n\t\t${UserFragments.user}\n\t`,\n};\n\nexport const SavedItemFragments = {\n\tsavedItem: gql`\n\t\tfragment SavedItem on SavedItem {\n\t\t\tid\n\t\t\taudioItem {\n\t\t\t\t...AudioItem\n\t\t\t}\n\t\t\tcreatedAt\n\t\t}\n\t\t${EntityFragments.audioItem}\n\t`,\n};\n\nexport const TakedownRequestFragments = {\n\ttakedownRequest: gql`\n\t\tfragment TakedownRequest on TakedownRequest {\n\t\t\tid\n\t\t\tentity {\n\t\t\t\t...AudioItem\n\t\t\t}\n\t\t\ttype\n\t\t\tmessage\n\t\t\tstatus\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tupdatedAt\n\t\t}\n\t\t${EntityFragments.audioItem}\n\t`,\n\ttakedownRequestWithoutEntity: gql`\n\t\tfragment TakedownRequestWithoutEntity on TakedownRequest {\n\t\t\tid\n\t\t\ttype\n\t\t\tmessage\n\t\t\tstatus\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tupdatedAt\n\t\t}\n\t`,\n};\n\nexport const VerificationRequestFragments = {\n\tverificationRequest: gql`\n\t\tfragment VerificationRequest on VerificationRequest {\n\t\t\tid\n\t\t\tperson {\n\t\t\t\tid\n\t\t\t\tentityType\n\t\t\t\tname\n\t\t\t\tslug\n\t\t\t}\n\t\t\tpresignedImageDownloadUrl\n\t\t\tcopyrightPermissionStatus\n\t\t\tstatus\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tupdatedAt\n\t\t}\n\t`,\n};\n\nexport const SubmissionFragments = {\n\tsubmission: gql`\n\t\tfragment Submission on Submission {\n\t\t\tid\n\t\t\tstatus\n\t\t\tmaterialTypes\n\t\t\tuserControlsCopyright\n\t\t\tcopyrightDetails\n\t\t\tdescription\n\t\t\ts3DirectoryKey\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tupdatedAt\n\t\t}\n\t`,\n};\n", "import type { User } from \"~/types\";\nimport { UserRole } from \"~/types\";\n\nconst isAdmin = (user?: User) => {\n\tif (!user) {\n\t\treturn false;\n\t}\n\treturn user.role === UserRole.Admin;\n};\n\nconst UserService = {\n\tisAdmin,\n};\nexport default UserService;\n", "import { Entity, EntityType } from \"~/types\";\n\nconst cleanSlug = (rawSlug: string) => {\n\tconst slugWithHyphens = rawSlug.replace(/[\\s]/g, \"-\");\n\treturn slugWithHyphens.replace(/[^a-zA-Z0-9-]/g, \"\").toLowerCase();\n};\n\nconst makeHrefForTopLevel = (entity: Entity) => {\n\tswitch (entity?.entityType) {\n\t\tcase EntityType.AudioItem:\n\t\t\treturn \"/entities/audio-items\";\n\t\tcase EntityType.Person:\n\t\t\treturn \"/entities/people\";\n\t\tcase EntityType.Instrument:\n\t\t\treturn \"/entities/instruments\";\n\t\tcase EntityType.Place:\n\t\t\treturn \"/entities/places\";\n\t\tcase EntityType.Tune:\n\t\t\treturn \"/entities/tunes\";\n\t\tcase EntityType.Collection:\n\t\t\treturn \"/entities/collections\";\n\t\tdefault:\n\t\t\treturn \"\";\n\t}\n};\n\nconst makeHrefForView = (entity: Entity) => {\n\treturn `${makeHrefForTopLevel(entity)}/${entity.slug}`;\n};\n\nconst makeHrefForEdit = (entity: Entity) => {\n\treturn `${makeHrefForView(entity)}/edit`;\n};\n\nconst makeHrefForAbout = (entity: Entity) => {\n\treturn `${makeHrefForView(entity)}/about`;\n};\n\nconst makeHrefForTags = (entity: Entity) => {\n\treturn `${makeHrefForView(entity)}/tags`;\n};\n\nconst makeReadableNamePlural = (entity: Entity) => {\n\tswitch (entity?.entityType) {\n\t\tcase EntityType.AudioItem:\n\t\t\treturn \"Audio Items\";\n\t\tcase EntityType.Person:\n\t\t\treturn \"People\";\n\t\tcase EntityType.Instrument:\n\t\t\treturn \"Instruments\";\n\t\tcase EntityType.Place:\n\t\t\treturn \"Places\";\n\t\tcase EntityType.Tune:\n\t\t\treturn \"Tunes\";\n\t\tcase EntityType.Collection:\n\t\t\treturn \"Collections\";\n\t\tdefault:\n\t\t\treturn \"\";\n\t}\n};\n\nconst EntityService = {\n\tcleanSlug,\n\tmakeHrefForTopLevel,\n\tmakeHrefForView,\n\tmakeHrefForEdit,\n\tmakeHrefForAbout,\n\tmakeHrefForTags,\n\tmakeReadableNamePlural,\n};\nexport default EntityService;\n", "import { useHotkeys } from \"react-hotkeys-hook\";\n\ninterface Props {\n\tchildren: React.ReactChild | React.ReactChild[];\n\tisVisible: boolean;\n\tonClose: () => void;\n\ttitle?: string;\n\tclassName?: string;\n}\n\nconst Modal = ({\n\tchildren,\n\tisVisible = false,\n\tonClose,\n\ttitle,\n\tclassName,\n}: Props) => {\n\t// Close the modal when escape key is pressed, even if a form field is focused\n\tuseHotkeys(\n\t\t\"esc\",\n\t\tonClose,\n\t\t{\n\t\t\tenableOnTags: [\"INPUT\", \"TEXTAREA\"],\n\t\t},\n\t\t[onClose]\n\t);\n\n\tif (!isVisible) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`${\n\t\t\t\tisVisible ? \"visible\" : \"hidden\"\n\t\t\t} z-40 fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center`}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName=\"absolute top-0 left-0 right-0 bottom-0 bg-black bg-opacity-40\"\n\t\t\t\tonClick={onClose}\n\t\t\t/>\n\n\t\t\t<div\n\t\t\t\tclassName={`bg-white cursor-auto rounded relative w-full px-4 pb-4 pt-3 m-2 max-h-9/10 overflow-y-auto overflow-x-hidden md:max-w-md ${\n\t\t\t\t\tclassName ?? \"\"\n\t\t\t\t}`}\n\t\t\t>\n\t\t\t\t<div className=\"flex flex-row justify-between items-center mb-4 text-black\">\n\t\t\t\t\t<h2>{title}</h2>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn-icon flex flex-row items-center justify-center ml-4 mb-0.5\"\n\t\t\t\t\t\tonClick={onClose}\n\t\t\t\t\t\taria-label=\"Close\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className=\"hidden md:block border border-gray-300 group-hover:border-gray-400 rounded text-xs px-1.5 ml-0.5 mr-3\">\n\t\t\t\t\t\t\tESC\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<i className=\"material-icons\">close</i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Add some style resets so that the Modal's parent doesn't affect the content */}\n\t\t\t\t<div className=\"text-base text-black font-normal whitespace-normal text-left cursor-auto\">\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Modal;\n", "import { Link } from \"@remix-run/react\";\nimport type { ChangeEvent } from \"react\";\nimport { useEffect, useState, useCallback } from \"react\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\nimport debounce from \"lodash/debounce\";\n\nimport type { Entity } from \"~/types\";\nimport { EntityType } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport EntityService from \"~/services/Entity\";\n\nimport LoadingCircle from \"~/components/LoadingCircle\";\nimport CreateNewEntities from \"~/components/CreateNewEntities\";\n\nconst SEARCH_ENTITIES_QUERY = gql`\n\tquery SearchEntities($input: SearchEntitiesInput!) {\n\t\tsearchEntities(input: $input) {\n\t\t\t...AudioItem\n\t\t\t...Person\n\t\t\t...Instrument\n\t\t\t...Place\n\t\t\t...Tune\n\t\t\t...Collection\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n\t${EntityFragments.person}\n\t${EntityFragments.instrument}\n\t${EntityFragments.place}\n\t${EntityFragments.tune}\n\t${EntityFragments.collection}\n`;\n\ninterface QueryData {\n\tsearchEntities: Entity[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\tsearchTerm: string;\n\t\tentityTypes?: EntityType[];\n\t\ttake?: number;\n\t};\n}\ninterface Props {\n\tentityTypes?: EntityType[];\n\ttake?: number;\n\tonSelect: (entity: Entity) => void;\n\tonNewEntityCreated?: (entity: Entity) => void;\n\tclassName?: string;\n}\nconst SearchEntities = ({\n\tentityTypes,\n\ttake,\n\tonSelect,\n\tonNewEntityCreated,\n\tclassName,\n}: Props) => {\n\tconst [searchTerm, setSearchTerm] = useState<string>(\"\");\n\tconst [searchResults, setSearchResults] = useState<Entity[] | undefined>();\n\n\tconst onChangeSearchTerm = (event: ChangeEvent<HTMLInputElement>) => {\n\t\tsetSearchTerm(event.target.value);\n\t};\n\n\tconst [searchEntities, { loading, data, error }] = useLazyQuery<\n\t\tQueryData,\n\t\tQueryVariables\n\t>(SEARCH_ENTITIES_QUERY, {\n\t\tfetchPolicy: \"no-cache\",\n\t});\n\tconst debouncedSearchEntities = useCallback(\n\t\tdebounce(searchEntities, 300, { trailing: true }),\n\t\t[searchEntities]\n\t);\n\n\tuseEffect(() => {\n\t\tconst cleanedSearchTerm = searchTerm?.trim() ?? \"\";\n\t\tif (cleanedSearchTerm.length >= 3) {\n\t\t\tdebouncedSearchEntities({\n\t\t\t\tvariables: {\n\t\t\t\t\tinput: {\n\t\t\t\t\t\tsearchTerm: cleanedSearchTerm,\n\t\t\t\t\t\tentityTypes,\n\t\t\t\t\t\ttake: take ?? 24,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}, [searchTerm]);\n\n\tuseEffect(() => {\n\t\tif (data?.searchEntities) {\n\t\t\tsetSearchResults(data.searchEntities);\n\t\t}\n\t}, [data]);\n\n\treturn (\n\t\t<div className={className ?? \"\"}>\n\t\t\t<div className=\"relative\">\n\t\t\t\t<input\n\t\t\t\t\tautoFocus\n\t\t\t\t\tplaceholder=\"Start typing...\"\n\t\t\t\t\tvalue={searchTerm}\n\t\t\t\t\tonChange={onChangeSearchTerm}\n\t\t\t\t/>\n\t\t\t\t{loading && (\n\t\t\t\t\t<div className=\"absolute top-2 right-2\">\n\t\t\t\t\t\t<LoadingCircle />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{error && (\n\t\t\t\t<div className=\"text-red-600 mt-4 ml-2\">Error fetching results</div>\n\t\t\t)}\n\n\t\t\t{searchResults && (\n\t\t\t\t<div className=\"mt-4\">\n\t\t\t\t\t<ul className=\"max-h-40\">\n\t\t\t\t\t\t{searchResults.map((entity, index) => (\n\t\t\t\t\t\t\t<li className=\"flex flex-row\" key={index}>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"flex flex-1 justify-between items-center text-left p-2 rounded cursor-pointer hover:bg-gray-200\"\n\t\t\t\t\t\t\t\t\tonClick={() => onSelect(entity)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t{entity.name}\n\t\t\t\t\t\t\t\t\t\t{entity.entityType === EntityType.Tune\n\t\t\t\t\t\t\t\t\t\t\t? ` (${entity.type})`\n\t\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span className=\"uppercase text-gray-500 text-sm\">\n\t\t\t\t\t\t\t\t\t\t{entity.entityType}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForAbout(entity)}>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn-icon w-auto px-2\"\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\taria-label={`Open ${entity.name} in New Tab`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i className=\"material-icons text-base\">launch</i>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\n\t\t\t\t\t{searchResults.length === 0 && (\n\t\t\t\t\t\t<div className=\"p-2 block text-gray-500\">No results</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{onNewEntityCreated && (\n\t\t\t\t\t\t<div className=\"mt-2 ml-2\">\n\t\t\t\t\t\t\t<CreateNewEntities\n\t\t\t\t\t\t\t\tentityTypes={entityTypes}\n\t\t\t\t\t\t\t\tonNewEntityCreated={onNewEntityCreated}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default SearchEntities;\n", "interface Props {\n\tclassName?: string;\n}\n\nconst LoadingCircle = ({ className }: Props) => (\n\t<div className=\"h-6\">\n\t\t<i\n\t\t\tclassName={`material-icons animate-spin text-gray-500 ${className ?? \"\"}`}\n\t\t>\n\t\t\tscatter_plot\n\t\t</i>\n\t</div>\n);\n\nexport default LoadingCircle;\n", "import { useState, useCallback } from \"react\";\n\nimport type { Entity, Person, Instrument, Place, Collection } from \"~/types\";\nimport { EntityType } from \"~/types\";\nimport useRequireLogin from \"~/hooks/useRequireLogin\";\n\nimport Modal from \"~/components/Modal\";\nimport CreatePersonForm from \"~/components/CreatePersonForm\";\nimport CreateInstrumentForm from \"~/components/CreateInstrumentForm\";\nimport CreatePlaceForm from \"~/components/CreatePlaceForm\";\nimport CreateCollectionForm from \"~/components/CreateCollectionForm\";\n\ninterface Props {\n\tentityTypes?: EntityType[];\n\tonNewEntityCreated: (entity: Entity) => void;\n}\nconst CreateNewEntities = ({ entityTypes, onNewEntityCreated }: Props) => {\n\tconst { currentUser, requireLogin } = useRequireLogin();\n\n\tconst [createPersonModalIsVisible, setCreatePersonModalIsVisible] =\n\t\tuseState(false);\n\tconst [createInstrumentModalIsVisible, setCreateInstrumentModalIsVisible] =\n\t\tuseState(false);\n\tconst [createPlaceModalIsVisible, setCreatePlaceModalIsVisible] =\n\t\tuseState(false);\n\tconst [createCollectionModalIsVisible, setCreateCollectionModalIsVisible] =\n\t\tuseState(false);\n\n\tconst onCreateNewPersonClicked = useCallback(async () => {\n\t\tif (!currentUser) {\n\t\t\treturn await requireLogin();\n\t\t}\n\t\tsetCreatePersonModalIsVisible(true);\n\t}, [requireLogin, currentUser]);\n\n\tconst onCreateNewInstrumentClicked = useCallback(async () => {\n\t\tif (!currentUser) {\n\t\t\treturn await requireLogin();\n\t\t}\n\t\tsetCreateInstrumentModalIsVisible(true);\n\t}, [requireLogin, currentUser]);\n\n\tconst onCreateNewPlaceClicked = useCallback(async () => {\n\t\tif (!currentUser) {\n\t\t\treturn await requireLogin();\n\t\t}\n\t\tsetCreatePlaceModalIsVisible(true);\n\t}, [requireLogin, currentUser]);\n\n\tconst onCreateNewCollectionClicked = useCallback(async () => {\n\t\tif (!currentUser) {\n\t\t\treturn await requireLogin();\n\t\t}\n\t\tsetCreateCollectionModalIsVisible(true);\n\t}, [requireLogin, currentUser]);\n\n\tconst onNewPersonCreated = useCallback(\n\t\t(person: Person) => {\n\t\t\tsetCreatePersonModalIsVisible(false);\n\t\t\tonNewEntityCreated(person);\n\t\t},\n\t\t[onNewEntityCreated]\n\t);\n\n\tconst onNewInstrumentCreated = useCallback((instrument: Instrument) => {\n\t\tsetCreateInstrumentModalIsVisible(false);\n\t\tonNewEntityCreated(instrument);\n\t}, []);\n\n\tconst onNewPlaceCreated = useCallback((place: Place) => {\n\t\tsetCreatePlaceModalIsVisible(false);\n\t\tonNewEntityCreated(place);\n\t}, []);\n\n\tconst onNewCollectionCreated = useCallback((collection: Collection) => {\n\t\tsetCreateCollectionModalIsVisible(false);\n\t\tonNewEntityCreated(collection);\n\t}, []);\n\n\tconst shouldShowCreatePerson =\n\t\ttypeof entityTypes === \"undefined\" ||\n\t\tentityTypes.includes(EntityType.Person);\n\tconst shouldShowCreateInstrument =\n\t\ttypeof entityTypes === \"undefined\" ||\n\t\tentityTypes.includes(EntityType.Instrument);\n\tconst shouldShowCreatePlace =\n\t\ttypeof entityTypes === \"undefined\" ||\n\t\tentityTypes.includes(EntityType.Place);\n\tconst shouldShowCreateCollection =\n\t\ttypeof entityTypes === \"undefined\" ||\n\t\tentityTypes.includes(EntityType.Collection);\n\n\tconst shouldShowCommaAfterCreatePerson =\n\t\t!entityTypes ||\n\t\tshouldShowCreateInstrument ||\n\t\tshouldShowCreatePlace ||\n\t\tshouldShowCreateCollection;\n\tconst shouldShowCommaAfterCreateInstrument =\n\t\t!entityTypes || shouldShowCreatePlace || shouldShowCreateCollection;\n\tconst shouldShowCommaAfterCreatePlace =\n\t\t!entityTypes || shouldShowCreateCollection;\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"text-gray-500\">\n\t\t\t\tCan't find it? Create new:{\" \"}\n\t\t\t\t{shouldShowCreatePerson && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<button className=\"btn-text\" onClick={onCreateNewPersonClicked}>\n\t\t\t\t\t\t\tPerson\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{shouldShowCommaAfterCreatePerson && \", \"}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{shouldShowCreateInstrument && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<button className=\"btn-text\" onClick={onCreateNewInstrumentClicked}>\n\t\t\t\t\t\t\tInstrument\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{shouldShowCommaAfterCreateInstrument && \", \"}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{shouldShowCreatePlace && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<button className=\"btn-text\" onClick={onCreateNewPlaceClicked}>\n\t\t\t\t\t\t\tPlace\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{shouldShowCommaAfterCreatePlace && \", \"}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{shouldShowCreateCollection && (\n\t\t\t\t\t<button className=\"btn-text\" onClick={onCreateNewCollectionClicked}>\n\t\t\t\t\t\tCollection\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Create New Person\"\n\t\t\t\tisVisible={createPersonModalIsVisible}\n\t\t\t\tonClose={() => setCreatePersonModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t<CreatePersonForm onSuccess={onNewPersonCreated} />\n\t\t\t</Modal>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Create New Instrument\"\n\t\t\t\tisVisible={createInstrumentModalIsVisible}\n\t\t\t\tonClose={() => setCreateInstrumentModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t<CreateInstrumentForm onSuccess={onNewInstrumentCreated} />\n\t\t\t</Modal>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Create New Place\"\n\t\t\t\tisVisible={createPlaceModalIsVisible}\n\t\t\t\tonClose={() => setCreatePlaceModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t<CreatePlaceForm onSuccess={onNewPlaceCreated} />\n\t\t\t</Modal>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Create New Collection\"\n\t\t\t\tisVisible={createCollectionModalIsVisible}\n\t\t\t\tonClose={() => setCreateCollectionModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t<CreateCollectionForm onSuccess={onNewCollectionCreated} />\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default CreateNewEntities;\n", "import { useCallback } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { User } from \"~/types\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\n\ninterface RequireLoginFunctionArgs {\n\tredirectTo?: string;\n}\n\ninterface HookReturnValue {\n\trequireLogin: (args?: RequireLoginFunctionArgs) => Promise<boolean>;\n\tcurrentUser: User | null | undefined;\n}\n\n// useRequireLogin returns a function that will navigate to the /login page\n// and then back to the given redirect path, if specified.\nconst useRequireLogin = (): HookReturnValue => {\n\tconst navigate = useNavigate();\n\tconst [currentUser] = useCurrentUser();\n\n\tconst requireLogin = useCallback(\n\t\t({ redirectTo }: RequireLoginFunctionArgs = {}): Promise<boolean> =>\n\t\t\tnavigate({\n\t\t\t\tpathname: \"/login\",\n\t\t\t\tquery: {\n\t\t\t\t\tredirectTo: redirectTo ?? window.location.pathname,\n\t\t\t\t},\n\t\t\t}),\n\t\t[navigate]\n\t);\n\n\treturn { requireLogin, currentUser };\n};\n\nexport default useRequireLogin;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { Person } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport EntityService from \"~/services/Entity\";\n\nconst CREATE_PERSON_MUTATION = gql`\n\tmutation CreatePerson($input: CreatePersonInput!) {\n\t\tcreatePerson(input: $input) {\n\t\t\t...Person\n\t\t}\n\t}\n\t${EntityFragments.person}\n`;\ninterface CreatePersonInput {\n\tslug: string;\n\taliases?: string;\n\tdescription?: string;\n\tfirstName: string;\n\tmiddleName?: string;\n\tlastName: string;\n}\ninterface Props {\n\tonSuccess?: (person: Person) => void;\n}\nconst CreatePersonForm = ({ onSuccess }: Props) => {\n\tconst [createPerson, { loading, error, data }] = useMutation<\n\t\t{ createPerson: Person },\n\t\t{ input: CreatePersonInput }\n\t>(CREATE_PERSON_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\n\tconst [firstName, setFirstName] = useState(\"\");\n\tconst [middleName, setMiddleName] = useState(\"\");\n\tconst [lastName, setLastName] = useState(\"\");\n\tconst [slug, setSlug] = useState(\"\");\n\tconst [aliases, setAliases] = useState(\"\");\n\tconst [description, setDescription] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tlet proposedSlug = \"\";\n\t\tif (firstName) {\n\t\t\tproposedSlug = firstName;\n\t\t}\n\t\tif (middleName) {\n\t\t\tproposedSlug = `${proposedSlug}-${middleName}`;\n\t\t}\n\t\tif (lastName) {\n\t\t\tproposedSlug = `${proposedSlug}-${lastName}`;\n\t\t}\n\t\tsetSlug(EntityService.cleanSlug(proposedSlug));\n\t}, [firstName, middleName, lastName]);\n\n\tconst onCreatePerson = (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tfirstName,\n\t\t\tmiddleName,\n\t\t\tlastName,\n\t\t\tslug,\n\t\t\taliases,\n\t\t\tdescription,\n\t\t};\n\t\tcreatePerson({ variables: { input } });\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.createPerson) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.createPerson);\n\t\t\t}\n\t\t\twindow.alert(\"Person created successfully!\");\n\t\t\tsetFirstName(\"\");\n\t\t\tsetMiddleName(\"\");\n\t\t\tsetLastName(\"\");\n\t\t\tsetSlug(\"\");\n\t\t\tsetAliases(\"\");\n\t\t\tsetDescription(\"\");\n\t\t}\n\t}, [data]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onCreatePerson}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"First name\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={firstName}\n\t\t\t\t\t\tonChange={(event) => setFirstName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Middle name (optional)\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={middleName}\n\t\t\t\t\t\tonChange={(event) => setMiddleName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Last name\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={lastName}\n\t\t\t\t\t\tonChange={(event) => setLastName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"URL slug (ie. kitty-hayes)\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={slug}\n\t\t\t\t\t\tonChange={(event) => setSlug(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tThis will be used for the URL of this Person, for example{\" \"}\n\t\t\t\t\t\t{`https://trad-archive.com/entities/people/${\n\t\t\t\t\t\t\tslug || \"kitty-hayes\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Person. For example:{\" \"}\n\t\t\t\t\t\t<em>Tony D, The Tradfather, Tony from the County Calamari</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={5}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Create\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default CreatePersonForm;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { Instrument } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport EntityService from \"~/services/Entity\";\n\nconst CREATE_INSTRUMENT_MUTATION = gql`\n\tmutation CreateInstrument($input: CreateInstrumentInput!) {\n\t\tcreateInstrument(input: $input) {\n\t\t\t...Instrument\n\t\t}\n\t}\n\t${EntityFragments.instrument}\n`;\ninterface CreateInstrumentInput {\n\tname: string;\n\tslug: string;\n\taliases?: string;\n\tdescription?: string;\n}\ninterface Props {\n\tonSuccess?: (instrument: Instrument) => void;\n}\nconst CreateInstrumentForm = ({ onSuccess }: Props) => {\n\tconst [createInstrument, { loading, error, data }] = useMutation<\n\t\t{ createInstrument: Instrument },\n\t\t{ input: CreateInstrumentInput }\n\t>(CREATE_INSTRUMENT_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\n\tconst [name, setName] = useState(\"\");\n\tconst [slug, setSlug] = useState(\"\");\n\tconst [aliases, setAliases] = useState(\"\");\n\tconst [description, setDescription] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tconst proposedSlug = EntityService.cleanSlug(name ?? \"\");\n\t\tsetSlug(proposedSlug);\n\t}, [name]);\n\n\tconst onCreateInstrument = (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tname,\n\t\t\tslug,\n\t\t\taliases,\n\t\t\tdescription,\n\t\t};\n\t\tcreateInstrument({ variables: { input } });\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.createInstrument) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.createInstrument);\n\t\t\t}\n\t\t\twindow.alert(\"Instrument created successfully!\");\n\t\t\tsetName(\"\");\n\t\t\tsetSlug(\"\");\n\t\t\tsetAliases(\"\");\n\t\t\tsetDescription(\"\");\n\t\t}\n\t}, [data]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onCreateInstrument}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(event) => setName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"URL slug (ie. button-accordion)\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={slug}\n\t\t\t\t\t\tonChange={(event) => setSlug(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tThis will be used for the URL of this Instrument, for example{\" \"}\n\t\t\t\t\t\t{`https://trad-archive.com/entities/instruments/${\n\t\t\t\t\t\t\tslug || \"button-accordion\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Instrument. For example:{\" \"}\n\t\t\t\t\t\t<em>Stomach Steinway, Squeezebox, Belly Organ</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={5}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Create\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default CreateInstrumentForm;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { Place } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport EntityService from \"~/services/Entity\";\n\nconst CREATE_PLACE_MUTATION = gql`\n\tmutation CreatePlace($input: CreatePlaceInput!) {\n\t\tcreatePlace(input: $input) {\n\t\t\t...Place\n\t\t}\n\t}\n\t${EntityFragments.place}\n`;\ninterface CreatePlaceInput {\n\tslug: string;\n\taliases?: string;\n\tdescription?: string;\n\tlatitude: number;\n\tlongitude: number;\n}\ninterface Props {\n\tonSuccess?: (place: Place) => void;\n}\nconst CreatePlaceForm = ({ onSuccess }: Props) => {\n\tconst [createPlace, { loading, error, data }] = useMutation<\n\t\t{ createPlace: Place },\n\t\t{ input: CreatePlaceInput }\n\t>(CREATE_PLACE_MUTATION, { errorPolicy: \"all\" });\n\n\tconst [name, setName] = useState(\"\");\n\tconst [slug, setSlug] = useState(\"\");\n\tconst [aliases, setAliases] = useState(\"\");\n\tconst [latitude, setLatitude] = useState(\"\");\n\tconst [longitude, setLongitude] = useState(\"\");\n\tconst [description, setDescription] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tconst proposedSlug = EntityService.cleanSlug(name ?? \"\");\n\t\tsetSlug(proposedSlug);\n\t}, [name]);\n\n\tconst onCreatePlace = async (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tname,\n\t\t\tslug,\n\t\t\taliases,\n\t\t\tlatitude: parseFloat(latitude),\n\t\t\tlongitude: parseFloat(longitude),\n\t\t\tdescription,\n\t\t};\n\t\ttry {\n\t\t\tawait createPlace({ variables: { input } });\n\t\t} catch {\n\t\t\t//\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.createPlace) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.createPlace);\n\t\t\t}\n\t\t\twindow.alert(\"Place created successfully!\");\n\t\t\tsetName(\"\");\n\t\t\tsetSlug(\"\");\n\t\t\tsetAliases(\"\");\n\t\t\tsetLatitude(\"\");\n\t\t\tsetLongitude(\"\");\n\t\t\tsetDescription(\"\");\n\t\t}\n\t}, [data]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onCreatePlace}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(event) => setName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"URL slug (ie. galway-city)\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={slug}\n\t\t\t\t\t\tonChange={(event) => setSlug(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tThis will be used for the URL of this Place, for example{\" \"}\n\t\t\t\t\t\t{`https://trad-archive.com/entities/places/${\n\t\t\t\t\t\t\tslug || \"galway-city\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Place. For example:{\" \"}\n\t\t\t\t\t\t<em>Gaillimh, The City of Tribes</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Latitude\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={latitude}\n\t\t\t\t\t\tonChange={(event) => setLatitude(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Longitude\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={longitude}\n\t\t\t\t\t\tonChange={(event) => setLongitude(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tTo find the latitude and longitude, visit{\" \"}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={`https://www.google.com/maps/place/${name}`}\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{name ? `${name} on ` : \"\"}Google Maps (will open in new tab)\n\t\t\t\t\t\t</a>{\" \"}\n\t\t\t\t\t\tand right-click on the exact location you'd like. You'll see numbers\n\t\t\t\t\t\tlike \"53.2838294,-9.1888286\". Click to copy them to your clipboard.\n\t\t\t\t\t\tThe first one is latitude, and the second is longitude.\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={5}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Create\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default CreatePlaceForm;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { Collection } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport EntityService from \"~/services/Entity\";\n\nconst CREATE_COLLECTION_MUTATION = gql`\n\tmutation CreateCollection($input: CreateCollectionInput!) {\n\t\tcreateCollection(input: $input) {\n\t\t\t...Collection\n\t\t}\n\t}\n\t${EntityFragments.collection}\n`;\n\ninterface CreateCollectionInput {\n\tslug: string;\n\taliases?: string;\n\tdescription?: string;\n}\ninterface Props {\n\tonSuccess?: (collection: Collection) => void;\n}\n\nconst CreateCollectionForm = ({ onSuccess }: Props) => {\n\tconst [createCollection, { loading, error, data }] = useMutation<\n\t\t{ createCollection: Collection },\n\t\t{ input: CreateCollectionInput }\n\t>(CREATE_COLLECTION_MUTATION, { errorPolicy: \"all\" });\n\n\tconst [name, setName] = useState(\"\");\n\tconst [slug, setSlug] = useState(\"\");\n\tconst [aliases, setAliases] = useState(\"\");\n\tconst [description, setDescription] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tconst proposedSlug = EntityService.cleanSlug(name ?? \"\");\n\t\tsetSlug(proposedSlug);\n\t}, [name]);\n\n\tconst onCreateCollection = async (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tname,\n\t\t\tslug,\n\t\t\taliases,\n\t\t\tdescription,\n\t\t};\n\t\ttry {\n\t\t\tawait createCollection({ variables: { input } });\n\t\t} catch {\n\t\t\t//\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.createCollection) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.createCollection);\n\t\t\t}\n\t\t\twindow.alert(\"Collection created successfully!\");\n\t\t\tsetName(\"\");\n\t\t\tsetSlug(\"\");\n\t\t\tsetAliases(\"\");\n\t\t\tsetDescription(\"\");\n\t\t}\n\t}, [data]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<div className=\"text-gray-500 mb-8\">\n\t\t\t\t\tA Collection is a logical grouping of other entities. For example,\n\t\t\t\t\t\"O'Neill's Music of Ireland\" would be a Collection of Tunes. Or the\n\t\t\t\t\t\"Alen MacWeeney Collection\" would be a Collection of AudioItems.\n\t\t\t\t</div>\n\n\t\t\t\t<form onSubmit={onCreateCollection}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(event) => setName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"URL slug (ie. alan-macweeney-collection)\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={slug}\n\t\t\t\t\t\tonChange={(event) => setSlug(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tThis will be used for the URL of this Collection, for example{\" \"}\n\t\t\t\t\t\t{`https://trad-archive.com/entities/collections/${\n\t\t\t\t\t\t\tslug || \"alan-macweeney-collection\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Collection. For example:{\" \"}\n\t\t\t\t\t\t<em>O'Neill's, 1000 Fiddle Tunes</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={5}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Create\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default CreateCollectionForm;\n", "export default function Footer() {\n\treturn (\n\t\t<div className=\"flex flex-col items-start w-full p-4 pt-7 pb-24 bg-gray-900 text-gray-100\">\n\t\t\t<div className=\"mb-4\">\n\t\t\t\tThis project is a collaboration between the{\" \"}\n\t\t\t\t<a href=\"https://www.itma.ie/\" target=\"_blank\">\n\t\t\t\t\tIrish Traditional Music Archive{\" \"}\n\t\t\t\t\t<i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t</a>{\" \"}\n\t\t\t\tand{\" \"}\n\t\t\t\t<a href=\"https://dangurney.net\" target=\"_blank\">\n\t\t\t\t\tDan Gurney <i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t</a>\n\t\t\t</div>\n\n\t\t\t<div className=\"mb-4\">\n\t\t\t\tSpecial thanks to{\" \"}\n\t\t\t\t<a href=\"https://thesession.org/\" target=\"_blank\">\n\t\t\t\t\tThe Session <i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t</a>{\" \"}\n\t\t\t\tfor providing tune data.\n\t\t\t</div>\n\n\t\t\t<div className=\"mb-4\">\n\t\t\t\tAll of the code is open source on{\" \"}\n\t\t\t\t<a href=\"https://github.com/dgurns/trad-archive\" target=\"_blank\">\n\t\t\t\t\tGitHub <i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t</a>\n\t\t\t\t. We welcome community contributors.\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<a\n\t\t\t\t\thref=\"https://github.com/dgurns/trad-archive/discussions\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t>\n\t\t\t\t\tShare feedback or report a bug{\" \"}\n\t\t\t\t\t<i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n", "import { useState } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\nimport { useQuery, useMutation, gql } from \"@apollo/client\";\n\nimport type { Submission } from \"~/types\";\nimport { SubmissionFragments } from \"~/fragments\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport FileUploader from \"~/components/FileUploader\";\nimport DateTimeService from \"~/services/DateTime\";\n\nconst SUBMISSION = gql`\n\tquery Submission($input: SubmissionInput!) {\n\t\tsubmission(input: $input) {\n\t\t\t...Submission\n\t\t}\n\t}\n\t${SubmissionFragments.submission}\n`;\n\nconst CREATE_PRESIGNED_FILE_UPLOAD_URLS = gql`\n\tmutation CreatePresignedFileUploadUrls(\n\t\t$input: CreatePresignedFileUploadUrlsInput!\n\t) {\n\t\tcreatePresignedFileUploadUrls(input: $input) {\n\t\t\tfilename\n\t\t\tpresignedUploadUrl\n\t\t}\n\t}\n`;\n\ninterface QueryData {\n\tsubmission: Submission;\n}\ninterface QueryVars {\n\tinput: {\n\t\tid: string;\n\t};\n}\ninterface MutationData {\n\tcreatePresignedFileUploadUrls: Array<{\n\t\tfilename: string;\n\t\tpresignedUploadUrl: string;\n\t}>;\n}\ninterface MutationVars {\n\tinput: {\n\t\tsubmissionId: string;\n\t\tfilenames: string[];\n\t};\n}\n\nconst SubmissionsViewByIdUpload = () => {\n\tconst navigate = useNavigate();\n\tconst { id } = navigate.query;\n\tconst submissionId = typeof id === \"string\" ? id : undefined;\n\n\tconst { data, error } = useQuery<QueryData, QueryVars>(SUBMISSION, {\n\t\tvariables: { input: { id: submissionId } },\n\t\tskip: !submissionId,\n\t});\n\n\tconst [files, setFiles] = useState<File[]>([]);\n\tconst [uploadQueue, setUploadQueue] =\n\t\tuseState<Array<{ file: File; uploadUrl: string }>>();\n\n\tconst [getPresignedUrls] = useMutation<MutationData, MutationVars>(\n\t\tCREATE_PRESIGNED_FILE_UPLOAD_URLS\n\t);\n\n\tconst onUploadClicked = async () => {\n\t\tif (!submissionId) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\t// Prepend filenames with their size to avoid collisions, for example\n\t\t\t// multiple \"Track1.mp3\"\n\t\t\tconst filenamesForUrls = files.map((f) => `${f.size}_${f.name}`);\n\t\t\tconst response = await getPresignedUrls({\n\t\t\t\tvariables: { input: { submissionId, filenames: filenamesForUrls } },\n\t\t\t});\n\t\t\tconst uploadUrls = response.data.createPresignedFileUploadUrls;\n\t\t\tif (uploadUrls.length !== files.length) {\n\t\t\t\tthrow new Error(\"Unexpected number of presigned upload URLs\");\n\t\t\t}\n\t\t\tsetUploadQueue(\n\t\t\t\tfiles.map((f, index) => ({\n\t\t\t\t\tfile: f,\n\t\t\t\t\tuploadUrl: uploadUrls[index].presignedUploadUrl,\n\t\t\t\t}))\n\t\t\t);\n\t\t} catch {\n\t\t\talert(\"Error uploading files. Please try again.\");\n\t\t}\n\t};\n\n\tif (!data) {\n\t\treturn (\n\t\t\t<Layout>\n\t\t\t\t<RequireUser>\n\t\t\t\t\t{error ? (\n\t\t\t\t\t\t<div className=\"text-red-600\">\n\t\t\t\t\t\t\t{error.graphQLErrors.map((e) => e.message).join(\", \")}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<LoadingBlock />\n\t\t\t\t\t)}\n\t\t\t\t</RequireUser>\n\t\t\t</Layout>\n\t\t);\n\t}\n\n\tconst onFilesSelected = (event) => {\n\t\t// Add any new files to the array in state\n\t\tconst updatedFiles = [...files];\n\t\tconst selected = Array.from<File>(event.target.files);\n\t\tfor (const s of selected) {\n\t\t\tif (\n\t\t\t\t!updatedFiles.find(\n\t\t\t\t\t(f) =>\n\t\t\t\t\t\tf.name === s.name &&\n\t\t\t\t\t\tf.size === s.size &&\n\t\t\t\t\t\tf.lastModified === s.lastModified\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tupdatedFiles.push(s);\n\t\t\t}\n\t\t}\n\t\tsetFiles(updatedFiles);\n\t};\n\n\tconst onRemove = (file: File) => {\n\t\tsetFiles(\n\t\t\tfiles.filter((f) => {\n\t\t\t\tif (\n\t\t\t\t\tf.name === file.name &&\n\t\t\t\t\tf.size === file.size &&\n\t\t\t\t\tf.lastModified === file.lastModified\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t})\n\t\t);\n\t};\n\n\tconst onUploadSuccess = () => {\n\t\talert(\"Files uploaded successfully!\");\n\t\tnavigate(\"/account/submissions\");\n\t};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<Breadcrumb\n\t\t\t\t\titems={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Account\",\n\t\t\t\t\t\t\thref: \"/account\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: \"Submissions\", href: \"/account/submissions\" },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: DateTimeService.formatDateYearTime(\n\t\t\t\t\t\t\t\tdata.submission.createdAt,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: \"Upload Files\" },\n\t\t\t\t\t]}\n\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t/>\n\n\t\t\t\t<div className=\"flex-col\">\n\t\t\t\t\t{!uploadQueue ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<label htmlFor=\"file-picker\">\n\t\t\t\t\t\t\t\t<div className=\"btn-text mb-4 cursor-pointer\">\n\t\t\t\t\t\t\t\t\t{files.length === 0 ? \"Choose Files\" : \"Choose More Files\"}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"file-picker\"\n\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\tonChange={onFilesSelected}\n\t\t\t\t\t\t\t\tstyle={{ display: \"none\" }}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{files.length > 0 && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<ul className=\"mb-6\">\n\t\t\t\t\t\t\t\t\t\t{files.map((f, index) => (\n\t\t\t\t\t\t\t\t\t\t\t<li key={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t{f.name}{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text pl-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onRemove(f)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tRemove\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t<button className=\"btn block\" onClick={onUploadClicked}>\n\t\t\t\t\t\t\t\t\t\tUpload {files.length} File{files.length === 1 ? \"\" : \"s\"}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<FileUploader\n\t\t\t\t\t\t\tfilesWithUploadUrls={uploadQueue}\n\t\t\t\t\t\t\tonSuccess={onUploadSuccess}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default SubmissionsViewByIdUpload;\n", "import { useRef, useEffect, useState } from \"react\";\nimport Header from \"~/components/Header\";\nimport Footer from \"~/components/Footer\";\n\nconst { NEXT_PUBLIC_VERCEL_GIT_COMMIT_REF } = process.env;\ninterface Props {\n\tchildren: React.ReactNode;\n\tpageTitle?: string;\n}\n\nconst Layout = ({ children, pageTitle }: Props) => {\n\tconst shouldShowPreviewWarning =\n\t\tNEXT_PUBLIC_VERCEL_GIT_COMMIT_REF !== \"master\";\n\n\tconst fixedHeaderRef = useRef<HTMLDivElement>();\n\tconst defaultFixedHeaderHeight = shouldShowPreviewWarning ? 76 : 48;\n\tconst [fixedHeaderHeight, setFixedHeaderHeight] = useState(\n\t\tdefaultFixedHeaderHeight\n\t);\n\n\tuseEffect(() => {\n\t\tconst fixedHeader = fixedHeaderRef.current;\n\t\tif (fixedHeader) {\n\t\t\tsetFixedHeaderHeight(fixedHeader.offsetHeight);\n\t\t}\n\t}, []);\n\n\treturn (\n\t\t<div style={{ paddingTop: fixedHeaderHeight }}>\n\t\t\t<div className=\"flex flex-col justify-start items-center\">\n\t\t\t\t<div className=\"w-full min-h-screen lg:max-w-5xl py-6 px-4 pb-44\">\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t\t<Footer />\n\t\t\t</div>\n\n\t\t\t{/* Add header to the DOM after child content so its modals overlay */}\n\t\t\t<div\n\t\t\t\tclassName=\"fixed top-0 right-0 left-0\"\n\t\t\t\tref={fixedHeaderRef}\n\t\t\t\tid=\"header\"\n\t\t\t>\n\t\t\t\t{shouldShowPreviewWarning && (\n\t\t\t\t\t<div className=\"flex flex-row items-center justify-center py-1 px-4 bg-black text-white text-sm text-center\">\n\t\t\t\t\t\tThis is a preview version of the site with fake data.\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<Header />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Layout;\n", "import { useNavigate } from \"@remix-run/react\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\n\ninterface Props {\n\tchildren: React.ReactNode | React.ReactNode[];\n\trequireUserId?: string;\n}\n\nconst RequireUser = ({\n\tchildren,\n\trequireUserId,\n}: Props): React.ReactElement | null => {\n\tconst navigate = useNavigate();\n\n\tconst [currentUser, { data, error }] = useCurrentUser();\n\n\tif (!data && !error) {\n\t\treturn <div>Checking for logged-in user...</div>;\n\t} else if (requireUserId && currentUser?.id !== requireUserId) {\n\t\treturn <div>You do not have access to this page</div>;\n\t} else if (currentUser) {\n\t\treturn <>{children}</>;\n\t} else if (typeof window !== \"undefined\") {\n\t\tnavigate({\n\t\t\tpathname: \"/login\",\n\t\t\tquery: { redirectTo: window.location.pathname },\n\t\t});\n\t\treturn null;\n\t}\n\n\treturn null;\n};\n\nexport default RequireUser;\n", "import { Link } from \"@remix-run/react\";\n\ninterface BreadcrumbItem {\n\tlabel: string;\n\thref?: string;\n}\n\ninterface Props {\n\titems: BreadcrumbItem[];\n\tclassName?: string;\n}\n\nconst Breadcrumb = ({ items = [], className }: Props) => {\n\tif (items.length === 0) {\n\t\treturn null;\n\t}\n\tif (items.length === 1) {\n\t\treturn <h1 className={className ?? \"\"}>{items[0].label}</h1>;\n\t}\n\n\tconst subItems = items.slice(0, items.length - 1);\n\tconst finalItem = items[items.length - 1];\n\n\treturn (\n\t\t<div className={`flex flex-col ${className ?? \"\"}`}>\n\t\t\t<div className=\"flex flex-row items-center mb-1\">\n\t\t\t\t{subItems.map(({ label, href }, index) => (\n\t\t\t\t\t<div className=\"flex\" key={index}>\n\t\t\t\t\t\t{href ? (\n\t\t\t\t\t\t\t<Link to={href}>{label}</Link>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{label}</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<i className=\"material-icons text-gray-500 text-base ml-1\">\n\t\t\t\t\t\t\tkeyboard_arrow_right\n\t\t\t\t\t\t</i>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\n\t\t\t<h1>{finalItem.label}</h1>\n\t\t</div>\n\t);\n};\n\nexport default Breadcrumb;\n", "interface Props {\n\tclassName?: string;\n}\n\nconst LoadingBlock = ({ className }: Props) => (\n\t<div\n\t\tclassName={`flex flex-col justify-start items-start w-full ${\n\t\t\tclassName ?? \"\"\n\t\t}`}\n\t>\n\t\t<div className=\"flex h-5 w-2/3 rounded bg-gray-300 mb-4 animate-pulse\" />\n\t\t<div className=\"flex h-12 w-full rounded bg-gray-300 mb-4 animate-pulse\" />\n\t\t<div className=\"flex h-5 w-5/12 rounded bg-gray-300 mb-4 animate-pulse\" />\n\t</div>\n);\n\nexport default LoadingBlock;\n", "import { useEffect, useRef, useState } from \"react\";\nimport LoadingCircle from \"~/components/LoadingCircle\";\n\ninterface FileWithUploadUrl {\n\tfile: File;\n\tuploadUrl: string;\n}\ninterface Props {\n\tfilesWithUploadUrls: FileWithUploadUrl[];\n\tonSuccess?: () => void;\n}\nconst FileUploader = ({ filesWithUploadUrls, onSuccess }: Props) => {\n\tconst queue = useRef<{\n\t\tpending: FileWithUploadUrl[];\n\t\tinProgress: FileWithUploadUrl[];\n\t\tfailed: FileWithUploadUrl[];\n\t\tsucceeded: FileWithUploadUrl[];\n\t}>({\n\t\tpending: filesWithUploadUrls,\n\t\tinProgress: [],\n\t\tfailed: [],\n\t\tsucceeded: [],\n\t});\n\tconst [ticker, setTicker] = useState(0);\n\n\tconst moveFromPendingToInProgress = (file: FileWithUploadUrl) => {\n\t\tconst updated = { ...queue.current };\n\t\tupdated.pending = updated.pending.filter(\n\t\t\t(f) => f.uploadUrl !== file.uploadUrl\n\t\t);\n\t\tupdated.inProgress = [...updated.inProgress, file];\n\t\tqueue.current = updated;\n\t};\n\tconst moveFromInProgressToSucceeded = (file: FileWithUploadUrl) => {\n\t\tconst updated = { ...queue.current };\n\t\tupdated.inProgress = updated.inProgress.filter(\n\t\t\t(f) => f.uploadUrl !== file.uploadUrl\n\t\t);\n\t\tupdated.succeeded = [...updated.succeeded, file];\n\t\tqueue.current = updated;\n\t};\n\tconst moveFromInProgressToFailed = (file: FileWithUploadUrl) => {\n\t\tconst updated = { ...queue.current };\n\t\tupdated.inProgress = updated.inProgress.filter(\n\t\t\t(f) => f.uploadUrl !== file.uploadUrl\n\t\t);\n\t\tupdated.failed = [...updated.failed, file];\n\t\tqueue.current = updated;\n\t};\n\n\tconst uploadFile = async (f: FileWithUploadUrl) => {\n\t\ttry {\n\t\t\tmoveFromPendingToInProgress(f);\n\t\t\tawait fetch(f.uploadUrl, {\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\tbody: f.file,\n\t\t\t});\n\t\t\tmoveFromInProgressToSucceeded(f);\n\t\t} catch {\n\t\t\tmoveFromInProgressToFailed(f);\n\t\t}\n\t};\n\n\tconst checkForFilesToUpload = () => {\n\t\tif (queue.current.succeeded.length === filesWithUploadUrls.length) {\n\t\t\tif (onSuccess) {\n\t\t\t\tsetTimeout(() => onSuccess(), 500);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tqueue.current.pending.length === 0 ||\n\t\t\tqueue.current.inProgress.length >= 2\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tuploadFile(queue.current.pending[0]);\n\t};\n\n\tuseEffect(() => {\n\t\tconst interval = setInterval(checkForFilesToUpload, 1000);\n\t\treturn () => clearInterval(interval);\n\t}, [checkForFilesToUpload]);\n\n\t// Use the ticker to force re-renders of upload status\n\tuseEffect(() => {\n\t\tconst interval = setInterval(() => setTicker(ticker + 1), 1000);\n\t\treturn () => clearInterval(interval);\n\t}, [ticker]);\n\n\tconst renderFileStatus = (file: FileWithUploadUrl) => {\n\t\tif (queue.current.inProgress.includes(file)) {\n\t\t\treturn <LoadingCircle />;\n\t\t} else if (queue.current.failed.includes(file)) {\n\t\t\treturn <i className=\"material-icons text-red-600\">error</i>;\n\t\t} else if (queue.current.succeeded.includes(file)) {\n\t\t\treturn <i className=\"material-icons text-teal-600\">check</i>;\n\t\t} else {\n\t\t\treturn <i className=\"material-icons text-gray-500\">schedule</i>;\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"flex flex-col\">\n\t\t\t<ul className=\"flex flex-col\" key={ticker}>\n\t\t\t\t{filesWithUploadUrls.map((f, i) => (\n\t\t\t\t\t<li className=\"flex flex-row\" key={i}>\n\t\t\t\t\t\t<div className=\"flex flex-1\">{f.file.name}</div>\n\t\t\t\t\t\t{renderFileStatus(f)}\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</div>\n\t);\n};\n\nexport default FileUploader;\n", "import format from \"date-fns/format\";\nimport isToday from \"date-fns/isToday\";\nimport isYesterday from \"date-fns/isYesterday\";\n\n/**\n * @param {number} inputSeconds\n * \t- Number of seconds to convert to a duration\n * @returns {string}\n * \t- Readable duration in the format 10:01:01 (hours:minutes:seconds)\n */\nconst formatSecondsAsDuration = (inputSeconds: number) => {\n\tconst hours = Math.floor(inputSeconds / (60 * 60));\n\tconst minutes = Math.floor((inputSeconds - hours * 60 * 60) / 60);\n\tconst minutesAsTwoCharString = minutes < 10 ? `0${minutes}` : `${minutes}`;\n\tconst seconds = inputSeconds - hours * 60 * 60 - minutes * 60;\n\tconst secondsAsTwoCharString = seconds < 10 ? `0${seconds}` : `${seconds}`;\n\tlet output = `${minutes}:${secondsAsTwoCharString}`;\n\tif (hours > 0) {\n\t\toutput = `${hours}:${minutesAsTwoCharString}:${secondsAsTwoCharString}`;\n\t}\n\treturn output;\n};\n\nconst formatDateYear = (\n\tdate?: number | string,\n\tshouldCapitalize: boolean | undefined = false\n) => {\n\tif (!date) {\n\t\treturn \"\";\n\t}\n\tconst dateObject = new Date(date);\n\tif (isToday(dateObject)) {\n\t\treturn format(dateObject, `'${shouldCapitalize ? \"T\" : \"t\"}oday`);\n\t} else if (isYesterday(dateObject)) {\n\t\treturn format(dateObject, `'${shouldCapitalize ? \"Y\" : \"y\"}esterday`);\n\t} else {\n\t\treturn format(new Date(date), `LLLL d, y`);\n\t}\n};\n\nconst formatDateYearTime = (\n\tdate?: number | string,\n\tshouldCapitalize: boolean | undefined = false\n) => {\n\tif (!date) {\n\t\treturn \"\";\n\t}\n\tconst dateObject = new Date(date);\n\tif (isToday(dateObject)) {\n\t\treturn format(\n\t\t\tdateObject,\n\t\t\t`'${shouldCapitalize ? \"T\" : \"t\"}oday at' h:mm a`\n\t\t);\n\t} else if (isYesterday(dateObject)) {\n\t\treturn format(\n\t\t\tdateObject,\n\t\t\t`'${shouldCapitalize ? \"Y\" : \"y\"}esterday at' h:mm a`\n\t\t);\n\t} else {\n\t\treturn format(new Date(date), `LLLL d, y 'at' h:mm a`);\n\t}\n};\n\nconst DateTimeService = {\n\tformatSecondsAsDuration,\n\tformatDateYear,\n\tformatDateYearTime,\n};\nexport default DateTimeService;\n", "import { useEffect, useMemo, useState } from \"react\";\nimport { Link } from \"@remix-run/react\";\nimport { useQuery, useMutation, gql } from \"@apollo/client\";\nimport compareDesc from \"date-fns/compareDesc\";\n\nimport { VerificationRequestFragments } from \"~/fragments\";\nimport {\n\tisApprovedVerificationRequest,\n\tisDeniedVerificationRequest,\n\tisPendingVerificationRequest,\n\tVerificationRequest,\n\tVerificationRequestStatus,\n} from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport DateTimeService from \"~/services/DateTime\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport RequireAdmin from \"~/components/RequireAdmin\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\n\nconst VERIFICATION_REQUESTS = gql`\n\tquery VerificationRequests($input: VerificationRequestsInput!) {\n\t\tverificationRequests(input: $input) {\n\t\t\t...VerificationRequest\n\t\t}\n\t}\n\t${VerificationRequestFragments.verificationRequest}\n`;\n\nconst UPDATE_VERIFICATION_REQUEST_STATUS = gql`\n\tmutation UpdateVerificationRequestStatus(\n\t\t$input: UpdateVerificationRequestStatusInput!\n\t) {\n\t\tupdateVerificationRequestStatus(input: $input) {\n\t\t\t...VerificationRequest\n\t\t}\n\t}\n\t${VerificationRequestFragments.verificationRequest}\n`;\n\ninterface QueryData {\n\tverificationRequests: VerificationRequest[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\ttake?: number;\n\t\tskip?: number;\n\t\tstatus?: VerificationRequestStatus;\n\t};\n}\ninterface MutationData {\n\tupdateVerificationRequestStatus: VerificationRequest;\n}\ninterface MutationVariables {\n\tinput: {\n\t\tid: string;\n\t\tstatus: VerificationRequestStatus;\n\t};\n}\n\nconst VerificationRequests = () => {\n\tconst [statusToFetch, setStatusToFetch] = useState<\n\t\tVerificationRequestStatus | undefined\n\t>(VerificationRequestStatus.Pending);\n\n\tconst onChangeStatusToFetch = (event) => {\n\t\tconst updatedStatus = event.target.value;\n\t\tif (!updatedStatus) {\n\t\t\tsetStatusToFetch(undefined);\n\t\t} else {\n\t\t\tsetStatusToFetch(event.target.value as VerificationRequestStatus);\n\t\t}\n\t};\n\n\tconst {\n\t\tloading: verificationRequestsLoading,\n\t\tdata: verificationRequestsData,\n\t\terror: verificationRequestsError,\n\t} = useQuery<QueryData, QueryVariables>(VERIFICATION_REQUESTS, {\n\t\t// Take a high number until we implement pagination\n\t\tvariables: { input: { take: 200, skip: 0, status: statusToFetch } },\n\t\tfetchPolicy: \"network-only\",\n\t});\n\n\tconst verificationRequests = useMemo(() => {\n\t\tif (!verificationRequestsData?.verificationRequests) {\n\t\t\treturn [];\n\t\t}\n\t\tconst sortedVerificationRequests = [\n\t\t\t...verificationRequestsData.verificationRequests,\n\t\t];\n\t\tsortedVerificationRequests.sort((a, b) =>\n\t\t\tcompareDesc(new Date(a.createdAt), new Date(b.createdAt))\n\t\t);\n\t\treturn sortedVerificationRequests;\n\t}, [verificationRequestsData]);\n\n\tconst [\n\t\tupdateVerificationRequestStatus,\n\t\t{\n\t\t\tloading: updateVerificationRequestStatusLoading,\n\t\t\terror: updateVerificationRequestStatusError,\n\t\t},\n\t] = useMutation<MutationData, MutationVariables>(\n\t\tUPDATE_VERIFICATION_REQUEST_STATUS,\n\t\t{ errorPolicy: \"all\" }\n\t);\n\n\tconst onApproveClicked = (id: string) => {\n\t\tupdateVerificationRequestStatus({\n\t\t\tvariables: { input: { id, status: VerificationRequestStatus.Approved } },\n\t\t});\n\t};\n\n\tconst onDenyClicked = (id: string) => {\n\t\tupdateVerificationRequestStatus({\n\t\t\tvariables: { input: { id, status: VerificationRequestStatus.Denied } },\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tif (updateVerificationRequestStatusError) {\n\t\t\twindow.alert(\n\t\t\t\t\"Error updating Verification Request status. Please reload the page and try again.\"\n\t\t\t);\n\t\t}\n\t}, [updateVerificationRequestStatusError]);\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireAdmin>\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: \"Admin\",\n\t\t\t\t\t\t\t\thref: \"/admin\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ label: \"Verification Requests\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<select\n\t\t\t\t\t\tclassName=\"mb-6 flex max-w-xs\"\n\t\t\t\t\t\tvalue={statusToFetch}\n\t\t\t\t\t\tonChange={onChangeStatusToFetch}\n\t\t\t\t\t>\n\t\t\t\t\t\t<option value={VerificationRequestStatus.Pending}>Pending</option>\n\t\t\t\t\t\t<option value={VerificationRequestStatus.Approved}>Approved</option>\n\t\t\t\t\t\t<option value={VerificationRequestStatus.Denied}>Denied</option>\n\t\t\t\t\t\t<option value=\"\">All</option>\n\t\t\t\t\t</select>\n\n\t\t\t\t\t{verificationRequestsLoading && <LoadingBlock />}\n\t\t\t\t\t{verificationRequestsError && (\n\t\t\t\t\t\t<div className=\"text-red-600\">\n\t\t\t\t\t\t\t{verificationRequestsError.graphQLErrors\n\t\t\t\t\t\t\t\t.map((error) => error.message)\n\t\t\t\t\t\t\t\t.join(\", \")}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{!verificationRequestsLoading &&\n\t\t\t\t\t\tverificationRequests?.map((verificationRequest, index) => {\n\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tperson,\n\t\t\t\t\t\t\t\tpresignedImageDownloadUrl,\n\t\t\t\t\t\t\t\tcreatedAt,\n\t\t\t\t\t\t\t\tcreatedByUser,\n\t\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\t} = verificationRequest;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className=\"mb-4\" key={index}>\n\t\t\t\t\t\t\t\t\tCreated {DateTimeService.formatDateYearTime(createdAt)}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\tUser{\" \"}\n\t\t\t\t\t\t\t\t\t<Link to={`/users/${createdByUser.id}`}>\n\t\t\t\t\t\t\t\t\t\t<a target=\"_blank\">{createdByUser.username}</a>\n\t\t\t\t\t\t\t\t\t</Link>{\" \"}\n\t\t\t\t\t\t\t\t\tis asking to be verified as Person{\" \"}\n\t\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(person)}>\n\t\t\t\t\t\t\t\t\t\t<a target=\"_blank\">{person.name}</a>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t{presignedImageDownloadUrl && (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\tProof:{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t<a href={presignedImageDownloadUrl} target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t\t\tImage\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tEmail: {createdByUser.email}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\tStatus: {status}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t{isApprovedVerificationRequest(verificationRequest) && (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={updateVerificationRequestStatusLoading}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => onDenyClicked(id)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tDeny\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{isDeniedVerificationRequest(verificationRequest) && (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={updateVerificationRequestStatusLoading}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => onApproveClicked(id)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tApprove\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{isPendingVerificationRequest(verificationRequest) && (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text mr-4\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={updateVerificationRequestStatusLoading}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onApproveClicked(id)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tApprove\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={updateVerificationRequestStatusLoading}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onDenyClicked(id)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tDeny\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t</RequireAdmin>\n\t\t</Layout>\n\t);\n};\n\nexport default VerificationRequests;\n", "import { useNavigate } from \"@remix-run/react\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\nimport UserService from \"~/services/User\";\n\ninterface Props {\n\tchildren: React.ReactNode | React.ReactNode[];\n}\n\nconst RequireAdmin = ({ children }: Props): React.ReactElement | null => {\n\tconst navigate = useNavigate();\n\n\tconst [currentUser, { data, error }] = useCurrentUser();\n\n\tif (currentUser && UserService.isAdmin(currentUser)) {\n\t\treturn <>{children}</>;\n\t} else if (!data && !error) {\n\t\treturn <div>Checking admin permissions...</div>;\n\t} else if (typeof window !== \"undefined\") {\n\t\tnavigate({\n\t\t\tpathname: \"/login\",\n\t\t\tquery: { redirectTo: window.location.pathname },\n\t\t});\n\t\treturn null;\n\t}\n\n\treturn null;\n};\n\nexport default RequireAdmin;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { Link } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport { EntityFragments } from \"~/fragments\";\nimport type { AudioItem } from \"~/types\";\nimport { ViewAs } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport AudioItemComponent from \"~/components/AudioItem\";\n\nexport const AUDIO_ITEM_QUERY = gql`\n\tquery AudioItem($slug: String!) {\n\t\taudioItem(slug: $slug) {\n\t\t\t...AudioItem\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n`;\n\nconst ViewAudioItemBySlug = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery<{\n\t\taudioItem: AudioItem;\n\t}>(AUDIO_ITEM_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst { audioItem } = data ?? {};\n\tconst { name } = audioItem ?? {};\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name ?? \"\"}`}>\n\t\t\t{!data && !error && <LoadingBlock />}\n\t\t\t{error && <span className=\"text-red-500\">{error.message}</span>}\n\t\t\t{data && (\n\t\t\t\t<div className=\"mb-6\">\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: EntityService.makeReadableNamePlural(audioItem),\n\t\t\t\t\t\t\t\thref: EntityService.makeHrefForTopLevel(audioItem),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ label: name },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"flex flex-row mb-6\">\n\t\t\t\t\t\t<Link to={EntityService.makeHrefForAbout(audioItem)}>About</Link>\n\t\t\t\t\t</div>\n\t\t\t\t\t<AudioItemComponent\n\t\t\t\t\t\tviewAs={ViewAs.Cards}\n\t\t\t\t\t\taudioItem={audioItem}\n\t\t\t\t\t\tshowTitle={false}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default ViewAudioItemBySlug;\n", "import type { AudioItem } from \"~/types\";\nimport { ViewAs } from \"~/types\";\n\nimport AudioItemCard from \"~/components/AudioItemCard\";\nimport AudioItemCompact from \"~/components/AudioItemCompact\";\nimport AudioItemTextOnly from \"~/components/AudioItemTextOnly\";\n\ninterface Props {\n\tviewAs?: ViewAs;\n\taudioItem: AudioItem;\n\tshowTitle?: boolean;\n\tclassName?: string;\n}\n\n// AudioItem handles wrapping the different variants of AudioItem components. It\n// returns the variant requested in the `viewAs` prop. Default is Card.\nconst AudioItemComponent = ({\n\tviewAs = ViewAs.Cards,\n\taudioItem,\n\tshowTitle,\n\tclassName,\n}: Props) => {\n\tif (viewAs === ViewAs.Cards) {\n\t\treturn (\n\t\t\t<AudioItemCard\n\t\t\t\taudioItem={audioItem}\n\t\t\t\tshowTitle={showTitle}\n\t\t\t\tclassName={className}\n\t\t\t/>\n\t\t);\n\t} else if (viewAs === ViewAs.Compact) {\n\t\treturn <AudioItemCompact audioItem={audioItem} className={className} />;\n\t} else if (viewAs === ViewAs.List) {\n\t\treturn <AudioItemTextOnly audioItem={audioItem} className={className} />;\n\t} else {\n\t\treturn null;\n\t}\n};\n\nexport default AudioItemComponent;\n", "import { useCallback, useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { AudioItem, Tag, TakedownRequest } from \"~/types\";\nimport { EntityStatus, TakedownRequestStatus } from \"~/types\";\nimport DateTime from \"~/services/DateTime\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\n\nimport Tags from \"~/components/Tags\";\nimport Menu from \"~/components/Menu\";\nimport SaveItemButton from \"~/components/SaveItemButton\";\nimport ViewCommentsButton from \"~/components/ViewCommentsButton\";\nimport TimeMarkers from \"~/components/TimeMarkers\";\nimport RequestTakedownButton from \"~/components/RequestTakedownButton\";\n\ninterface Props {\n\taudioItem: AudioItem;\n\tshowTitle?: boolean;\n\tclassName?: string;\n}\nconst AudioItemCard = ({ audioItem, showTitle = true, className }: Props) => {\n\tconst { name, slug, description, tags, status, createdByUser, createdAt } =\n\t\taudioItem;\n\n\tconst navigate = useNavigate();\n\n\tconst {\n\t\tactiveAudioItem,\n\t\tsetActiveAudioItem,\n\t\tactiveItemDurationSeconds,\n\t\tplaybackPositionSeconds,\n\t} = usePlayerContext();\n\n\tconst audioItemIsInPlayer = activeAudioItem?.id === audioItem.id;\n\tconst tagsWithTimeMarkers: Tag[] = useMemo(() => {\n\t\tif (!Array.isArray(tags)) {\n\t\t\treturn [];\n\t\t}\n\t\treturn tags.filter(\n\t\t\t(tag) => typeof tag.subjectTimeMarkerSeconds === \"number\"\n\t\t);\n\t}, [tags]);\n\n\tconst onPlayPressed = useCallback(() => {\n\t\tsetActiveAudioItem(audioItem);\n\t}, [audioItem]);\n\n\tconst onTakedownRequestCreated = useCallback(\n\t\t(takedownRequest: TakedownRequest) => {\n\t\t\tif (takedownRequest.status === TakedownRequestStatus.Approved) {\n\t\t\t\tnavigate(`/entities/audio-items/${slug}`);\n\t\t\t}\n\t\t},\n\t\t[navigate, slug]\n\t);\n\n\tconst shouldShowPositionAndDuration =\n\t\taudioItemIsInPlayer &&\n\t\ttypeof playbackPositionSeconds === \"number\" &&\n\t\ttypeof activeItemDurationSeconds === \"number\";\n\tconst positionAndDuration = `${DateTime.formatSecondsAsDuration(\n\t\tplaybackPositionSeconds\n\t)} / ${DateTime.formatSecondsAsDuration(activeItemDurationSeconds)}`;\n\n\tconst isTakenDown = status === EntityStatus.TakenDown;\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-col justify-start items-start bg-white shadow-md rounded p-4 pb-3 ${\n\t\t\t\tclassName ?? \"\"\n\t\t\t}`}\n\t\t>\n\t\t\t{showTitle && (\n\t\t\t\t<h2 className=\"mb-2\">\n\t\t\t\t\t<Link to={`/entities/audio-items/${slug}`}>\n\t\t\t\t\t\t<a className=\"link-bare\">{name}</a>\n\t\t\t\t\t</Link>\n\t\t\t\t</h2>\n\t\t\t)}\n\n\t\t\t<div className=\"mb-4\">\n\t\t\t\t<Tags entity={audioItem} />\n\t\t\t</div>\n\n\t\t\t<div className=\"flex flex-col w-full border border-gray-200 rounded mb-2\">\n\t\t\t\t{isTakenDown ? (\n\t\t\t\t\t<div className=\"flex flex-row items-center px-4 py-6 text-gray-500\">\n\t\t\t\t\t\tThis Audio Item has been removed via an approved Takedown Request\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"flex flex-row justify-start items-center pr-4 h-16\">\n\t\t\t\t\t\t\t<div className=\"flex flex-1\">\n\t\t\t\t\t\t\t\t{audioItemIsInPlayer ? (\n\t\t\t\t\t\t\t\t\t<div className=\"pl-4 text-gray-500\">Playing</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tstyle={{ lineHeight: 0 }}\n\t\t\t\t\t\t\t\t\t\tonClick={onPlayPressed}\n\t\t\t\t\t\t\t\t\t\taria-label=\"Play\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i className=\"material-icons text-6xl text-teal-600 hover:text-teal-800\">\n\t\t\t\t\t\t\t\t\t\t\tplay_arrow\n\t\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={`ml-4 text-gray-500 opacity-0 ${\n\t\t\t\t\t\t\t\t\t\tshouldShowPositionAndDuration\n\t\t\t\t\t\t\t\t\t\t\t? \"opacity-100 transition-opacity delay-500 duration-400\"\n\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{positionAndDuration}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{tagsWithTimeMarkers.length > 0 && (\n\t\t\t\t\t<div className=\"mx-4 mb-2 pt-3 border-t border-gray-200\">\n\t\t\t\t\t\t<TimeMarkers audioItem={audioItem} />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<div className=\"mt-4\">\n\t\t\t\t<div className=\"text-gray-500 text-sm flex flex-col sm:flex-row\">\n\t\t\t\t\tAdded\n\t\t\t\t\t{createdByUser && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t\tby{\" \"}\n\t\t\t\t\t\t\t<Link to={`/users/${createdByUser.id}`}>\n\t\t\t\t\t\t\t\t<a className=\"flex flex-row px-0 sm:px-1\">\n\t\t\t\t\t\t\t\t\t{createdByUser.verifiedPerson && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"inline\">\n\t\t\t\t\t\t\t\t\t\t\t<i className=\"material-icons text-sm mr-1\">verified</i>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{createdByUser.username}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}{\" \"}\n\t\t\t\t\t{DateTime.formatDateYearTime(createdAt)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"text-sm mt-1 text-gray-900 whitespace-pre-wrap\">\n\t\t\t\t\t{description || \"No description\"}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"border-t border-gray-200 mt-4 pt-3 w-full flex flex-row justify-between items-center\">\n\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\t<ViewCommentsButton audioItem={audioItem} />\n\n\t\t\t\t\t<div className=\"ml-2\">\n\t\t\t\t\t\t<SaveItemButton audioItem={audioItem} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<Menu>\n\t\t\t\t\t{!isTakenDown && (\n\t\t\t\t\t\t<RequestTakedownButton\n\t\t\t\t\t\t\tentity={audioItem}\n\t\t\t\t\t\t\tonTakedownRequestCreated={onTakedownRequestCreated}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Menu>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AudioItemCard;\n", "import { useMemo, useState, useCallback, useEffect } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport type { Tag, Entity } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport TagService from \"~/services/Tag\";\n\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\n\ninterface TagProps {\n\ttag: Tag;\n}\nconst TagLink = ({ tag }: TagProps) => {\n\tconst [tooltipIsVisible, setTooltipIsVisible] = useState(false);\n\tconst [timeoutFunc, setTimeoutFunc] = useState<NodeJS.Timeout>();\n\n\tconst onMouseEnter = useCallback(() => {\n\t\tsetTimeoutFunc(setTimeout(() => setTooltipIsVisible(true), 400));\n\t}, []);\n\n\tconst onMouseLeave = useCallback(() => {\n\t\tif (timeoutFunc) {\n\t\t\tclearTimeout(timeoutFunc);\n\t\t\tsetTimeoutFunc(undefined);\n\t\t}\n\t\tsetTooltipIsVisible(false);\n\t}, [timeoutFunc]);\n\n\t// Clean up the timeout function when component unmounts\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (timeoutFunc) {\n\t\t\t\tclearTimeout(timeoutFunc);\n\t\t\t\tsetTimeoutFunc(undefined);\n\t\t\t}\n\t\t};\n\t}, [timeoutFunc]);\n\n\tconst { objectEntity, relationship } = tag;\n\tconst href = EntityService.makeHrefForView(objectEntity);\n\treturn (\n\t\t<Link to={href}>\n\t\t\t<a\n\t\t\t\tclassName=\"relative block p-1 px-2 mb-2 no-underline border border-teal-600 rounded hover:border-teal-800\"\n\t\t\t\tonMouseEnter={onMouseEnter}\n\t\t\t\tonMouseLeave={onMouseLeave}\n\t\t\t>\n\t\t\t\t{objectEntity.name}\n\t\t\t\t<div\n\t\t\t\t\tclassName={`${\n\t\t\t\t\t\ttooltipIsVisible ? \"flex\" : \"hidden\"\n\t\t\t\t\t} absolute -top-8 left-0 text-center px-2 py-1 text-sm whitespace-nowrap bg-gray-700 rounded text-white`}\n\t\t\t\t>\n\t\t\t\t\t{relationship.name} {objectEntity.entityType.toUpperCase()}\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t</Link>\n\t);\n};\n\ninterface TagsProps {\n\tentity: Entity;\n}\nconst Tags = ({ entity }: TagsProps) => {\n\tconst { tags } = entity;\n\n\tconst sortedTags = useMemo(() => {\n\t\tif (!Array.isArray(tags)) {\n\t\t\treturn [];\n\t\t}\n\t\tconst tagsWithoutTimeMarkers = tags.filter(\n\t\t\t(tag) => typeof tag.subjectTimeMarkerSeconds !== \"number\"\n\t\t);\n\t\treturn TagService.sort(tagsWithoutTimeMarkers);\n\t}, [tags]);\n\n\treturn (\n\t\t<div className=\"flex flex-row items-center flex-wrap\">\n\t\t\t{sortedTags.map((tag, index) => (\n\t\t\t\t<div className=\"mr-2\" key={index}>\n\t\t\t\t\t<TagLink tag={tag} />\n\t\t\t\t</div>\n\t\t\t))}\n\n\t\t\t<div className={tags?.length > 0 ? \"mb-2 ml-1\" : undefined}>\n\t\t\t\t<AddTagButton entity={entity} />\n\t\t\t</div>\n\n\t\t\t{tags?.length > 0 && (\n\t\t\t\t<div className=\"flex ml-1 mb-2\">\n\t\t\t\t\t<span className=\"text-gray-500 mr-1\">/</span>\n\t\t\t\t\t<EditTagsButton entity={entity} />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default Tags;\n", "import compareAsc from \"date-fns/compareAsc\";\nimport compareDesc from \"date-fns/compareDesc\";\nimport type { Tag } from \"~/types\";\n\nenum TagSortStrategy {\n\tCreatedAtThenTimeMarker = \"CREATED_AT_THEN_TIME_MARKER\",\n\tCreatedAtDesc = \"CREATED_AT_DESC\",\n}\n\n/**\n * Sort with the following logic:\n *   1) Tags without time markers, sorted by `createdAt` ASC\n *   2) Tags with time markers, sorted by time marker ASC\n */\nconst sortByCreatedAtThenTimeMarker = (tags: Tag[]) => {\n\tconst sortedTags = [...(tags ?? [])];\n\tsortedTags.sort((a, b) => {\n\t\tif (\n\t\t\ttypeof a.subjectTimeMarkerSeconds !== \"number\" &&\n\t\t\ttypeof b.subjectTimeMarkerSeconds !== \"number\"\n\t\t) {\n\t\t\treturn compareAsc(new Date(a.createdAt), new Date(b.createdAt));\n\t\t}\n\t\tif (\n\t\t\ttypeof a.subjectTimeMarkerSeconds !== \"number\" &&\n\t\t\ttypeof b.subjectTimeMarkerSeconds === \"number\"\n\t\t) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn a.subjectTimeMarkerSeconds - b.subjectTimeMarkerSeconds;\n\t});\n\treturn sortedTags;\n};\n\n/**\n * Sort Tags by `createdAt` DESC\n */\nconst sortByCreatedAtDesc = (tags: Tag[]) => {\n\tconst sortedTags = [...(tags ?? [])];\n\tsortedTags.sort((a, b) => {\n\t\treturn compareDesc(new Date(a.createdAt), new Date(b.createdAt));\n\t});\n\treturn sortedTags;\n};\n\n/**\n * @param {Array<Tag>} tags\n * \t- The Tags you want to sort\n * @param {Enum} sortStrategy\n * \t- The sort strategy you want to apply. Default is\n *    'created-at-then-time-marker'\n * @returns {Array<Tag>}\n * \t- The sorted Tags\n */\nconst sort = (\n\ttags: Tag[] = [],\n\tsortStrategy = TagSortStrategy.CreatedAtThenTimeMarker\n) => {\n\tswitch (sortStrategy) {\n\t\tcase TagSortStrategy.CreatedAtThenTimeMarker:\n\t\t\treturn sortByCreatedAtThenTimeMarker(tags);\n\t\tcase TagSortStrategy.CreatedAtDesc:\n\t\t\treturn sortByCreatedAtDesc(tags);\n\t\tdefault:\n\t\t\treturn tags;\n\t}\n};\n\nexport default {\n\tTagSortStrategy,\n\tsort,\n};\n", "import { useState, useCallback } from \"react\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\n\nimport type { Entity, Tag } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport useRequireLogin from \"~/hooks/useRequireLogin\";\nimport EntityService from \"~/services/Entity\";\n\nimport Modal from \"~/components/Modal\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport CreateTagForm from \"~/components/CreateTagForm\";\n\nconst PARENT_ENTITY_QUERY = gql`\n\tquery Entity($id: String!) {\n\t\tentity(id: $id) {\n\t\t\t...AudioItem\n\t\t\t...Collection\n\t\t\t...Person\n\t\t\t...Place\n\t\t\t...Instrument\n\t\t\t...Tune\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n\t${EntityFragments.collection}\n\t${EntityFragments.instrument}\n\t${EntityFragments.person}\n\t${EntityFragments.place}\n\t${EntityFragments.tune}\n`;\n\ninterface Props {\n\tentity: Entity;\n\tonSuccess?: (tag: Tag) => void;\n\tclassName?: string;\n\tchildren?: React.ReactChild | React.ReactChild[];\n}\nconst AddTagButton = ({ entity, onSuccess, className, children }: Props) => {\n\tconst { currentUser, requireLogin } = useRequireLogin();\n\n\tconst [addTagModalIsVisible, setAddTagModalIsVisible] = useState(false);\n\n\tconst [getParentEntity, { loading: parentEntityLoading }] = useLazyQuery<{\n\t\tentity: Entity;\n\t}>(PARENT_ENTITY_QUERY, {\n\t\tvariables: { id: entity.id },\n\t\tfetchPolicy: \"network-only\",\n\t});\n\n\tconst onCreateTagSuccess = useCallback(\n\t\tasync (tag: Tag) => {\n\t\t\t// Refetch the parent Entity so it has updated Tags\n\t\t\tawait getParentEntity();\n\t\t\tsetAddTagModalIsVisible(false);\n\t\t\tif (onSuccess) {\n\t\t\t\tonSuccess(tag);\n\t\t\t}\n\t\t},\n\t\t[getParentEntity, setAddTagModalIsVisible, onSuccess]\n\t);\n\n\tconst onAddTagClicked = useCallback(async () => {\n\t\tif (!currentUser) {\n\t\t\tconst redirectTo = EntityService.makeHrefForView(entity);\n\t\t\treturn await requireLogin({ redirectTo });\n\t\t}\n\t\tsetAddTagModalIsVisible(true);\n\t}, [currentUser, requireLogin, entity]);\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName={`btn-text whitespace-pre ${className ?? \"\"}`}\n\t\t\t\tonClick={onAddTagClicked}\n\t\t\t>\n\t\t\t\t{children ?? \"+ Add Tag\"}\n\t\t\t</button>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Add Tag\"\n\t\t\t\tisVisible={addTagModalIsVisible}\n\t\t\t\tonClose={() => setAddTagModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t{parentEntityLoading ? (\n\t\t\t\t\t<LoadingBlock />\n\t\t\t\t) : (\n\t\t\t\t\t<CreateTagForm entity={entity} onSuccess={onCreateTagSuccess} />\n\t\t\t\t)}\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default AddTagButton;\n", "import { useEffect, useState, useCallback } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { Entity, Tag } from \"~/types\";\nimport { EntityType } from \"~/types\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\nimport useTags from \"~/hooks/useTags\";\n\nimport SearchEntities from \"~/components/SearchEntities\";\nimport SelectRelationship from \"~/components/SelectRelationship\";\nimport TimestampInput from \"~/components/TimestampInput\";\n\nconst CREATE_TAG_MUTATION = gql`\n\tmutation CreateTag($input: CreateTagInput!) {\n\t\tcreateTag(input: $input) {\n\t\t\tid\n\t\t}\n\t}\n`;\ninterface CreateTagInput {\n\trelationshipId: string;\n\tsubjectEntityType: EntityType;\n\tsubjectEntityId: string;\n\tobjectEntityType: EntityType;\n\tobjectEntityId: string;\n\tsubjectTimeMarkerSeconds?: number;\n}\ninterface Props {\n\tentity: Entity;\n\tonSuccess: (tag: Tag) => void;\n}\nconst CreateTagForm = ({ entity, onSuccess }: Props) => {\n\tconst {\n\t\tactiveAudioItem,\n\t\tplaybackPositionSeconds,\n\t\tactiveItemDurationSeconds,\n\t} = usePlayerContext();\n\n\tconst isActiveAudioItem = activeAudioItem?.id === entity.id;\n\tconst defaultTimeMarkerValue = isActiveAudioItem\n\t\t? playbackPositionSeconds\n\t\t: undefined;\n\n\tconst [shouldAddTimeMarker, setShouldAddTimeMarker] = useState(false);\n\tconst [timeMarkerValue, setTimeMarkerValue] = useState<number | undefined>(\n\t\tdefaultTimeMarkerValue\n\t);\n\n\tconst [selectedEntity, setSelectedEntity] = useState<Entity>(null);\n\tconst [selectedRelationshipId, setSelectedRelationshipId] = useState(\"\");\n\tconst [shouldCreateInverseRelationship, setShouldCreateInverseRelationship] =\n\t\tuseState(true);\n\tconst [selectedInverseRelationshipId, setSelectedInverseRelationshipId] =\n\t\tuseState(\"\");\n\n\tconst [createTag, { data, error }] = useMutation<\n\t\t{ createTag: Tag },\n\t\t{ input: CreateTagInput }\n\t>(CREATE_TAG_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\tconst [tagsAreCreating, setTagsAreCreating] = useState(false);\n\tconst [primaryCreatedTag, setPrimaryCreatedTag] = useState<Tag | undefined>(\n\t\tundefined\n\t);\n\tconst [tagsAreCreated, setTagsAreCreated] = useState(false);\n\n\tconst {\n\t\ttagsQuery: { refetch: refetchTopLevelTags },\n\t} = useTags({\n\t\tqueryOptions: { fetchPolicy: \"network-only\" },\n\t});\n\n\tuseEffect(() => {\n\t\tif (!tagsAreCreated) {\n\t\t\treturn;\n\t\t}\n\t\tconst onCreateSuccess = async (tag: Tag) => {\n\t\t\t// Now that a new Tag has been created, refetch the top-level `tags` query\n\t\t\tif (refetchTopLevelTags) {\n\t\t\t\tawait refetchTopLevelTags();\n\t\t\t}\n\t\t\tawait onSuccess(tag);\n\t\t};\n\t\tif (primaryCreatedTag) {\n\t\t\tonCreateSuccess(primaryCreatedTag);\n\t\t}\n\t}, [data, refetchTopLevelTags, onSuccess, tagsAreCreated, primaryCreatedTag]);\n\n\tconst onSelectEntity = useCallback(\n\t\t(selectedEntityFromResults: Entity) => {\n\t\t\tif (selectedEntityFromResults.id === entity.id) {\n\t\t\t\treturn window.alert(\"Cannot tag an entity with itself\");\n\t\t\t}\n\t\t\tsetSelectedEntity(selectedEntityFromResults);\n\t\t},\n\t\t[entity]\n\t);\n\n\tconst onNewEntityCreated = useCallback((entity: Entity) => {\n\t\tsetSelectedEntity(entity);\n\t}, []);\n\n\tconst onTimeMarkerValueChanged = useCallback(\n\t\t(newTimeMarkerValueSeconds: number) => {\n\t\t\tsetShouldAddTimeMarker(true);\n\t\t\tif (newTimeMarkerValueSeconds >= activeItemDurationSeconds) {\n\t\t\t\tsetTimeMarkerValue(activeItemDurationSeconds);\n\t\t\t} else if (newTimeMarkerValueSeconds <= 0) {\n\t\t\t\tsetTimeMarkerValue(0);\n\t\t\t} else {\n\t\t\t\tsetTimeMarkerValue(newTimeMarkerValueSeconds);\n\t\t\t}\n\t\t},\n\t\t[activeItemDurationSeconds]\n\t);\n\n\tconst onSelectRelationship = useCallback(\n\t\t(relationshipId: string) => {\n\t\t\tsetSelectedRelationshipId(relationshipId);\n\t\t},\n\t\t[setSelectedRelationshipId]\n\t);\n\n\tconst onSelectInverseRelationship = useCallback(\n\t\t(relationshipId: string) => {\n\t\t\tsetSelectedInverseRelationshipId(relationshipId);\n\t\t},\n\t\t[setSelectedInverseRelationshipId]\n\t);\n\n\tconst onCreateTagClicked = useCallback(async () => {\n\t\tsetTagsAreCreating(true);\n\n\t\tlet subjectTimeMarkerSeconds: number | undefined;\n\t\tif (shouldAddTimeMarker && !isNaN(timeMarkerValue)) {\n\t\t\tsubjectTimeMarkerSeconds = timeMarkerValue;\n\t\t}\n\t\tconst tagInput = {\n\t\t\trelationshipId: selectedRelationshipId,\n\t\t\tsubjectEntityType: entity.entityType,\n\t\t\tsubjectEntityId: entity.id,\n\t\t\tobjectEntityType: selectedEntity.entityType,\n\t\t\tobjectEntityId: selectedEntity.id,\n\t\t\tsubjectTimeMarkerSeconds,\n\t\t};\n\t\tconst primaryTagQuery = await createTag({ variables: { input: tagInput } });\n\t\tsetPrimaryCreatedTag(primaryTagQuery.data?.createTag);\n\n\t\tif (shouldCreateInverseRelationship && selectedInverseRelationshipId) {\n\t\t\tconst inverseTagInput = {\n\t\t\t\trelationshipId: selectedInverseRelationshipId,\n\t\t\t\tsubjectEntityType: selectedEntity.entityType,\n\t\t\t\tsubjectEntityId: selectedEntity.id,\n\t\t\t\tobjectEntityType: entity.entityType,\n\t\t\t\tobjectEntityId: entity.id,\n\t\t\t\tsubjectTimeMarkerSeconds,\n\t\t\t};\n\t\t\tawait createTag({ variables: { input: inverseTagInput } });\n\t\t}\n\n\t\tsetTagsAreCreating(false);\n\t\tsetTagsAreCreated(true);\n\t}, [\n\t\tselectedRelationshipId,\n\t\tshouldCreateInverseRelationship,\n\t\tselectedInverseRelationshipId,\n\t\tentity,\n\t\tselectedEntity,\n\t\tcreateTag,\n\t\tshouldAddTimeMarker,\n\t\ttimeMarkerValue,\n\t]);\n\n\tif (!selectedEntity) {\n\t\treturn (\n\t\t\t<SearchEntities\n\t\t\t\tonSelect={onSelectEntity}\n\t\t\t\tonNewEntityCreated={onNewEntityCreated}\n\t\t\t/>\n\t\t);\n\t}\n\n\t// Only show the time marker option if the subject entity is an AudioItem\n\tconst shouldShowTimeMarkerCheckbox =\n\t\tentity.entityType === EntityType.AudioItem &&\n\t\ttypeof defaultTimeMarkerValue !== \"undefined\";\n\n\treturn (\n\t\t<>\n\t\t\t<div>What is the relationship between these two entities?</div>\n\n\t\t\t<div className=\"mt-2\">\n\t\t\t\t<SelectRelationship\n\t\t\t\t\tsubjectEntity={entity}\n\t\t\t\t\tobjectEntity={selectedEntity}\n\t\t\t\t\tonSelect={onSelectRelationship}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<div className=\"mt-6 flex flex-row items-center justify-start\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tid=\"reverse-relationship\"\n\t\t\t\t\tchecked={shouldCreateInverseRelationship}\n\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\tsetShouldCreateInverseRelationship(event.target.checked)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<label htmlFor=\"reverse-relationship\" className=\"ml-2\">\n\t\t\t\t\tAlso create the inverse relationship\n\t\t\t\t</label>\n\t\t\t</div>\n\n\t\t\t{shouldCreateInverseRelationship && (\n\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t<SelectRelationship\n\t\t\t\t\t\tsubjectEntity={selectedEntity}\n\t\t\t\t\t\tobjectEntity={entity}\n\t\t\t\t\t\tonSelect={onSelectInverseRelationship}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{shouldShowTimeMarkerCheckbox && (\n\t\t\t\t<div className=\"mt-6 flex flex-row items-start justify-start\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tid=\"time-marker\"\n\t\t\t\t\t\tclassName=\"mt-1\"\n\t\t\t\t\t\tchecked={shouldAddTimeMarker}\n\t\t\t\t\t\tonChange={(event) => setShouldAddTimeMarker(event.target.checked)}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor=\"time-marker\" className=\"ml-2\">\n\t\t\t\t\t\t<div className=\"flex flex-col items-start\">\n\t\t\t\t\t\t\t<div className=\"mb-2\">Mark this Tag at time:</div>\n\t\t\t\t\t\t\t<TimestampInput\n\t\t\t\t\t\t\t\tvalueInSeconds={timeMarkerValue}\n\t\t\t\t\t\t\t\tonChange={onTimeMarkerValueChanged}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<button\n\t\t\t\tclassName=\"btn mt-6\"\n\t\t\t\tonClick={onCreateTagClicked}\n\t\t\t\tdisabled={tagsAreCreating || !selectedRelationshipId}\n\t\t\t>\n\t\t\t\tSave\n\t\t\t</button>\n\t\t\t{error && <div className=\"text-red-600 mt-4\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default CreateTagForm;\n", "import { useEffect, useCallback } from \"react\";\nimport type {\n\tLazyQueryResult,\n\tQueryLazyOptions,\n\tLazyQueryHookOptions,\n} from \"@apollo/client\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\nimport type { Tag } from \"~/types\";\nimport { TagFragments } from \"~/fragments\";\n\nexport const TAGS_QUERY = gql`\n\tquery Tags($input: TagsInput!) {\n\t\ttags(input: $input) {\n\t\t\t...Tag\n\t\t}\n\t}\n\t${TagFragments.tag}\n`;\n\ninterface QueryData {\n\ttags: Tag[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\ttake?: number;\n\t\tskip?: number;\n\t};\n}\ninterface HookArgs {\n\tresultsPerPage?: number;\n\tqueryOptions?: LazyQueryHookOptions<QueryData, QueryVariables>;\n}\ninterface HookReturnValue {\n\ttags: Tag[];\n\tgetTags: (options?: QueryLazyOptions<QueryVariables>) => void;\n\ttagsQuery: LazyQueryResult<QueryData, QueryVariables>;\n\tfetchNextPageOfTags: () => void;\n}\n\nconst useTags = ({\n\tresultsPerPage = 10,\n\tqueryOptions = {},\n}: HookArgs = {}): HookReturnValue => {\n\tconst [getTags, tagsQuery] = useLazyQuery<QueryData, QueryVariables>(\n\t\tTAGS_QUERY,\n\t\t{\n\t\t\tnotifyOnNetworkStatusChange: true,\n\t\t\t...queryOptions,\n\t\t}\n\t);\n\tconst { data, fetchMore } = tagsQuery;\n\n\tuseEffect(() => {\n\t\tgetTags({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\ttake: resultsPerPage,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}, [getTags, resultsPerPage]);\n\n\tconst tags = data?.tags;\n\n\tconst fetchNextPageOfTags = useCallback(() => {\n\t\tfetchMore({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\ttake: resultsPerPage,\n\t\t\t\t\tskip: tags.length ?? 0,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}, [fetchMore, resultsPerPage, tags]);\n\n\treturn {\n\t\ttags: tagsQuery.data?.tags,\n\t\tgetTags,\n\t\ttagsQuery,\n\t\tfetchNextPageOfTags,\n\t};\n};\n\nexport default useTags;\n", "import { useEffect, useState } from \"react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { Entity, Relationship } from \"~/types\";\nimport { RelationshipFragments } from \"~/fragments\";\n\nimport LoadingCircle from \"./LoadingCircle\";\n\nconst SEARCH_RELATIONSHIPS_QUERY = gql`\n\tquery SearchRelationships(\n\t\t$subjectEntityType: String!\n\t\t$objectEntityType: String!\n\t) {\n\t\tsearchRelationships(\n\t\t\tsubjectEntityType: $subjectEntityType\n\t\t\tobjectEntityType: $objectEntityType\n\t\t) {\n\t\t\t...Relationship\n\t\t}\n\t}\n\t${RelationshipFragments.relationship}\n`;\n\ninterface Props {\n\tsubjectEntity: Entity;\n\tobjectEntity: Entity;\n\tonSelect: (relationshipId: string) => void;\n}\nconst SelectRelationship = ({\n\tsubjectEntity,\n\tobjectEntity,\n\tonSelect,\n}: Props) => {\n\tconst [selectedRelationshipId, setSelectedRelationshipId] = useState(\"\");\n\n\tconst { loading, data, error } = useQuery<{\n\t\tsearchRelationships: Relationship[];\n\t}>(SEARCH_RELATIONSHIPS_QUERY, {\n\t\tvariables: {\n\t\t\tsubjectEntityType: subjectEntity.entityType,\n\t\t\tobjectEntityType: objectEntity.entityType,\n\t\t},\n\t\tfetchPolicy: \"no-cache\",\n\t});\n\tconst relationshipOptions = data?.searchRelationships ?? [];\n\n\tuseEffect(() => {\n\t\tif (relationshipOptions.length > 0) {\n\t\t\tonSelectRelationshipId(relationshipOptions[0].id);\n\t\t}\n\t}, [relationshipOptions]);\n\n\tconst onSelectRelationshipId = (relationshipId: string) => {\n\t\tsetSelectedRelationshipId(relationshipId);\n\t\tonSelect(relationshipId);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"mb-2 text-gray-500\">\n\t\t\t\t<span className=\"text-sm uppercase pr-2\">\n\t\t\t\t\t{subjectEntity.entityType}\n\t\t\t\t</span>\n\t\t\t\t{subjectEntity.name}\n\t\t\t</div>\n\n\t\t\t{loading ? (\n\t\t\t\t<LoadingCircle />\n\t\t\t) : (\n\t\t\t\t<select\n\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\tvalue={selectedRelationshipId}\n\t\t\t\t\tonChange={(event) => onSelectRelationshipId(event.target.value)}\n\t\t\t\t>\n\t\t\t\t\t{relationshipOptions.map((relationship, index) => (\n\t\t\t\t\t\t<option value={relationship.id} key={index}>\n\t\t\t\t\t\t\t{relationship.name}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t))}\n\t\t\t\t</select>\n\t\t\t)}\n\n\t\t\t<div className=\"text-gray-500\">\n\t\t\t\t<span className=\"text-sm uppercase pr-2\">\n\t\t\t\t\t{objectEntity.entityType}\n\t\t\t\t</span>\n\t\t\t\t{objectEntity.name}\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600 mt-4\">{error}</div>}\n\t\t</>\n\t);\n};\n\nexport default SelectRelationship;\n", "interface Props {\n\tvalueInSeconds: number;\n\tonChange: (valueInSeconds: number) => void;\n\tclassName?: string;\n}\n\nconst TimestampInput = ({ valueInSeconds, onChange, className }: Props) => {\n\tconst hrs = Math.floor(valueInSeconds / 3600);\n\tconst mins = Math.floor((valueInSeconds - hrs * 3600) / 60);\n\tconst secs = valueInSeconds - hrs * 3600 - mins * 60;\n\n\tconst onChangeHrs = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst newHrs = parseInt(event.target.value, 10) || 0;\n\t\tconst newValueInSeconds = newHrs * 3600 + mins * 60 + secs;\n\t\tonChange(newValueInSeconds);\n\t};\n\n\tconst onChangeMins = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst newMins = parseInt(event.target.value, 10) || 0;\n\t\tconst newValueInSeconds = hrs * 3600 + newMins * 60 + secs;\n\t\tonChange(newValueInSeconds);\n\t};\n\n\tconst onChangeSecs = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst newSecs = parseInt(event.target.value, 10) || 0;\n\t\tconst newValueInSeconds = hrs * 3600 + mins * 60 + newSecs;\n\t\tonChange(newValueInSeconds);\n\t};\n\n\treturn (\n\t\t<div className={`flex flex-row items-center ${className ?? \"\"}`}>\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tid=\"hrs\"\n\t\t\t\tclassName=\"flex max-w-[50px]\"\n\t\t\t\tvalue={hrs || \"\"}\n\t\t\t\tplaceholder=\"0\"\n\t\t\t\tonChange={onChangeHrs}\n\t\t\t/>\n\t\t\t<label htmlFor=\"hours\" className=\"px-2\">\n\t\t\t\thr{hrs !== 1 && \"s\"}\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tid=\"mins\"\n\t\t\t\tclassName=\"flex max-w-[55px]\"\n\t\t\t\tvalue={mins || \"\"}\n\t\t\t\tplaceholder=\"0\"\n\t\t\t\tonChange={onChangeMins}\n\t\t\t/>\n\t\t\t<label htmlFor=\"mins\" className=\"px-2\">\n\t\t\t\tmin{mins !== 1 ? \"s\" : \"\"}\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tid=\"secs\"\n\t\t\t\tclassName=\"flex max-w-[55px]\"\n\t\t\t\tvalue={secs || \"\"}\n\t\t\t\tplaceholder=\"0\"\n\t\t\t\tonChange={onChangeSecs}\n\t\t\t/>\n\t\t\t<label htmlFor=\"secs\" className=\"px-2\">\n\t\t\t\tsec{secs !== 1 ? \"s\" : \"\"}\n\t\t\t</label>\n\t\t</div>\n\t);\n};\n\nexport default TimestampInput;\n", "import { useState, useCallback, useEffect, useMemo } from \"react\";\nimport { useLazyQuery, useMutation, gql } from \"@apollo/client\";\n\nimport type { Entity } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport useRequireLogin from \"~/hooks/useRequireLogin\";\nimport useTags from \"~/hooks/useTags\";\nimport DateTimeService from \"~/services/DateTime\";\nimport TagService from \"~/services/Tag\";\n\nimport Modal from \"~/components/Modal\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst PARENT_ENTITY_QUERY = gql`\n\tquery Entity($id: String!) {\n\t\tentity(id: $id) {\n\t\t\t...AudioItem\n\t\t\t...Collection\n\t\t\t...Person\n\t\t\t...Place\n\t\t\t...Instrument\n\t\t\t...Tune\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n\t${EntityFragments.collection}\n\t${EntityFragments.instrument}\n\t${EntityFragments.person}\n\t${EntityFragments.place}\n\t${EntityFragments.tune}\n`;\n\nconst DELETE_TAG_MUTATION = gql`\n\tmutation DeleteTag($id: String!) {\n\t\tdeleteTag(id: $id)\n\t}\n`;\n\ninterface Props {\n\tentity: Entity;\n\tclassName?: string;\n\tchildren?: React.ReactChild | React.ReactChild[];\n\tonSuccess?: () => void;\n}\nconst EditTagsButton = ({ entity, className, children, onSuccess }: Props) => {\n\tconst { currentUser, requireLogin } = useRequireLogin();\n\n\tconst [editTagsModalIsVisible, setEditTagsModalIsVisible] = useState(false);\n\n\tconst [getParentEntity, { loading: parentEntityLoading }] = useLazyQuery<{\n\t\tentity: Entity;\n\t}>(PARENT_ENTITY_QUERY, {\n\t\tvariables: { id: entity.id },\n\t\tfetchPolicy: \"network-only\",\n\t});\n\n\tconst [deleteTag, { loading: deleteTagLoading, data: deleteTagData }] =\n\t\tuseMutation(DELETE_TAG_MUTATION, { errorPolicy: \"all\" });\n\n\tconst {\n\t\ttagsQuery: { refetch: refetchTopLevelTags },\n\t} = useTags();\n\n\tconst onDeleteTag = useCallback(\n\t\tasync (id: string) => {\n\t\t\tif (!currentUser) {\n\t\t\t\treturn await requireLogin();\n\t\t\t}\n\t\t\tif (window.confirm(\"Are you sure you want to delete this Tag?\")) {\n\t\t\t\tdeleteTag({ variables: { id } });\n\t\t\t}\n\t\t},\n\t\t[deleteTag, currentUser, requireLogin]\n\t);\n\n\tuseEffect(() => {\n\t\tconst onDeleteSuccess = async () => {\n\t\t\tawait Promise.all([refetchTopLevelTags(), getParentEntity()]);\n\t\t\tsetEditTagsModalIsVisible(false);\n\t\t};\n\t\tif (deleteTagData?.deleteTag) {\n\t\t\tonDeleteSuccess();\n\t\t\tif (onSuccess) {\n\t\t\t\tonSuccess();\n\t\t\t}\n\t\t}\n\t}, [\n\t\tdeleteTagData,\n\t\tgetParentEntity,\n\t\tsetEditTagsModalIsVisible,\n\t\trefetchTopLevelTags,\n\t\tonSuccess,\n\t]);\n\n\tconst { tags } = entity;\n\n\tconst sortedTags = useMemo(() => {\n\t\tif (!Array.isArray(tags)) {\n\t\t\treturn [];\n\t\t}\n\t\treturn TagService.sort(tags);\n\t}, [tags]);\n\n\tif (!sortedTags || sortedTags.length === 0) {\n\t\treturn null;\n\t}\n\n\tconst isLoading = parentEntityLoading || deleteTagLoading;\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName={`btn-text whitespace-pre ${className ?? \"\"}`}\n\t\t\t\tonClick={() => setEditTagsModalIsVisible(true)}\n\t\t\t>\n\t\t\t\t{children ?? \"Edit Tags\"}\n\t\t\t</button>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Edit Tags\"\n\t\t\t\tisVisible={editTagsModalIsVisible}\n\t\t\t\tonClose={() => setEditTagsModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t{isLoading ? (\n\t\t\t\t\t<LoadingBlock />\n\t\t\t\t) : (\n\t\t\t\t\tsortedTags.map((tag, index) => {\n\t\t\t\t\t\tconst { id, relationship, objectEntity, subjectTimeMarkerSeconds } =\n\t\t\t\t\t\t\ttag;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"flex flex-row items-start justify-start\"\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"flex flex-col flex-1 justify-start align-start mb-4 pr-4\">\n\t\t\t\t\t\t\t\t\t<div className=\"italic text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t{relationship.name}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"uppercase text-sm text-gray-500 pr-2\">\n\t\t\t\t\t\t\t\t\t\t{objectEntity.entityType}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{objectEntity.name}\n\t\t\t\t\t\t\t\t\t{typeof subjectTimeMarkerSeconds === \"number\" && (\n\t\t\t\t\t\t\t\t\t\t<span className=\"italic text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t{`at ${DateTimeService.formatSecondsAsDuration(\n\t\t\t\t\t\t\t\t\t\t\t\tsubjectTimeMarkerSeconds\n\t\t\t\t\t\t\t\t\t\t\t)}`}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button className=\"btn-text\" onClick={() => onDeleteTag(id)}>\n\t\t\t\t\t\t\t\t\tDelete Tag\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})\n\t\t\t\t)}\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default EditTagsButton;\n", "import React, { useRef, useEffect, useState, useCallback } from \"react\";\n\n// Menu is a simple overlay menu that displays whatever menu items are passed to\n// it as children. For example, you can use it like:\n//\n// <Menu>\n//\t <span onClick={doSomething}>Option 1</span>\n//\t <span onClick={doSomethingElse}>Option 2</span>\n// </Menu>\n\ninterface Props {\n\tchildren: React.ReactNode | React.ReactNode[];\n}\n\nconst Menu = ({ children }: Props) => {\n\tconst containerRef = useRef<HTMLDivElement>();\n\n\tconst [shouldOpenLeft, setShouldOpenLeft] = useState(true);\n\tconst [isOpen, setIsOpen] = useState(false);\n\n\tuseEffect(() => {\n\t\tconst container = containerRef.current;\n\t\tif (container) {\n\t\t\tconst { x } = container.getBoundingClientRect();\n\t\t\tif (x < 200) {\n\t\t\t\tsetShouldOpenLeft(false);\n\t\t\t}\n\t\t}\n\t}, []);\n\n\tconst onIconClicked = useCallback((event) => {\n\t\tevent.stopPropagation();\n\t\tsetIsOpen(true);\n\t}, []);\n\n\tconst onBackgroundClicked = useCallback((event) => {\n\t\tevent.stopPropagation();\n\t\tsetIsOpen(false);\n\t}, []);\n\n\tconst childrenAsArray = Array.isArray(children) ? children : [children];\n\n\tif (!children) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className=\"relative\" ref={containerRef}>\n\t\t\t<button\n\t\t\t\tclassName=\"btn-secondary\"\n\t\t\t\tonClick={onIconClicked}\n\t\t\t\taria-label={isOpen ? \"Close Menu\" : \"Show Menu\"}\n\t\t\t>\n\t\t\t\t<i className=\"material-icons\">expand_more</i>\n\t\t\t</button>\n\n\t\t\t{isOpen && (\n\t\t\t\t<>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"fixed top-0 right-0 bottom-0 left-0\"\n\t\t\t\t\t\tonClick={onBackgroundClicked}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<ul\n\t\t\t\t\t\tclassName={`absolute top-9 ${\n\t\t\t\t\t\t\tshouldOpenLeft ? \"right-0 text-right\" : \"left-0 text-left\"\n\t\t\t\t\t\t} flex flex-col bg-white rounded shadow-xl`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{childrenAsArray.map((child, index) => (\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tclassName={`cursor-pointer first:rounded-t last:rounded-b text-sm text-gray-500 font-bold whitespace-nowrap hover:bg-gray-200 ${\n\t\t\t\t\t\t\t\t\tindex === 0 ? \"hover:rounded-t\" : \"\"\n\t\t\t\t\t\t\t\t} ${\n\t\t\t\t\t\t\t\t\tindex === childrenAsArray.length - 1 ? \"hover:rounded-b\" : \"\"\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{child}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default Menu;\n", "import { useCallback, useEffect } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\nimport { useMutation, useLazyQuery, gql } from \"@apollo/client\";\n\nimport { AUDIO_ITEM_QUERY } from \"~/hooks/useAudioItem\";\nimport useRequireLogin from \"~/hooks/useRequireLogin\";\nimport useSavedItemsForUser from \"~/hooks/useSavedItemsForUser\";\nimport type { AudioItem, SavedItem } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\n\nconst CREATE_SAVED_ITEM_MUTATION = gql`\n\tmutation CreateSavedItem($input: CreateSavedItemInput!) {\n\t\tcreateSavedItem(input: $input) {\n\t\t\tid\n\t\t}\n\t}\n`;\nconst DELETE_SAVED_ITEM_MUTATION = gql`\n\tmutation DeleteSavedItem($input: DeleteSavedItemInput!) {\n\t\tdeleteSavedItem(input: $input)\n\t}\n`;\n\ninterface CreateMutationData {\n\tcreateSavedItem: SavedItem;\n}\ninterface CreateMutationVariables {\n\tinput: {\n\t\taudioItemId: string;\n\t};\n}\ninterface DeleteMutationData {\n\tdeleteSavedItem: boolean;\n}\ninterface DeleteMutationVariables {\n\tinput: {\n\t\taudioItemId: string;\n\t};\n}\ninterface Props {\n\taudioItem: AudioItem;\n}\nconst SaveItemButton = ({ audioItem }: Props) => {\n\tconst { id, slug, isSavedByUser } = audioItem;\n\tconst navigate = useNavigate();\n\tconst { currentUser, requireLogin } = useRequireLogin();\n\tconst [refetchAudioItem] = useLazyQuery(AUDIO_ITEM_QUERY, {\n\t\tfetchPolicy: \"network-only\",\n\t});\n\tconst [, { refetch: refetchSavedItemsForUser }] = useSavedItemsForUser();\n\n\tconst [\n\t\tcreateSavedItem,\n\t\t{ loading: createLoading, data: createData, error: createError },\n\t] = useMutation<CreateMutationData, CreateMutationVariables>(\n\t\tCREATE_SAVED_ITEM_MUTATION,\n\t\t{ errorPolicy: \"all\" }\n\t);\n\tconst [\n\t\tdeleteSavedItem,\n\t\t{ loading: deleteLoading, data: deleteData, error: deleteError },\n\t] = useMutation<DeleteMutationData, DeleteMutationVariables>(\n\t\tDELETE_SAVED_ITEM_MUTATION,\n\t\t{ errorPolicy: \"all\" }\n\t);\n\n\tconst onButtonClicked = useCallback(async () => {\n\t\tif (!currentUser) {\n\t\t\tconst redirectTo = EntityService.makeHrefForView(audioItem);\n\t\t\treturn await requireLogin({ redirectTo });\n\t\t} else if (!isSavedByUser) {\n\t\t\tcreateSavedItem({\n\t\t\t\tvariables: {\n\t\t\t\t\tinput: { audioItemId: id },\n\t\t\t\t},\n\t\t\t});\n\t\t} else if (isSavedByUser) {\n\t\t\tdeleteSavedItem({\n\t\t\t\tvariables: {\n\t\t\t\t\tinput: { audioItemId: id },\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}, [currentUser, navigate, audioItem, id, createSavedItem, deleteSavedItem]);\n\n\tuseEffect(() => {\n\t\tconst refetch = async () => {\n\t\t\tawait refetchAudioItem({ variables: { slug } });\n\t\t\trefetchSavedItemsForUser();\n\t\t};\n\t\tif (createData) {\n\t\t\trefetch();\n\t\t}\n\t}, [createData, refetchAudioItem, refetchSavedItemsForUser, slug]);\n\tuseEffect(() => {\n\t\tif (createError) {\n\t\t\twindow.alert(\"Error saving item. Please try again.\");\n\t\t}\n\t}, [createError]);\n\n\tuseEffect(() => {\n\t\tconst refetch = async () => {\n\t\t\tawait refetchAudioItem({ variables: { slug } });\n\t\t\trefetchSavedItemsForUser();\n\t\t};\n\t\tif (deleteData) {\n\t\t\trefetch();\n\t\t}\n\t}, [deleteData, refetchAudioItem, refetchSavedItemsForUser, slug]);\n\tuseEffect(() => {\n\t\tif (deleteError) {\n\t\t\twindow.alert(\"Error removing saved item. Please try again.\");\n\t\t}\n\t}, [deleteError]);\n\n\treturn (\n\t\t<button\n\t\t\tclassName={`btn-secondary ${\n\t\t\t\tisSavedByUser ? \"btn-secondary-active\" : \"\"\n\t\t\t} pl-0.5`}\n\t\t\tonClick={onButtonClicked}\n\t\t\tdisabled={createLoading || deleteLoading}\n\t\t\taria-label={isSavedByUser ? \"Unsave\" : \"Save\"}\n\t\t>\n\t\t\t{isSavedByUser ? (\n\t\t\t\t<>\n\t\t\t\t\t<i className=\"material-icons\">bookmark</i>\n\t\t\t\t\tSaved\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<i className=\"material-icons\">bookmark_border</i>\n\t\t\t\t\tSave\n\t\t\t\t</>\n\t\t\t)}\n\t\t</button>\n\t);\n};\n\nexport default SaveItemButton;\n", "import { useEffect } from \"react\";\nimport type { LazyQueryHookOptions, LazyQueryResult } from \"@apollo/client\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\nimport type { AudioItem } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nexport const AUDIO_ITEM_QUERY = gql`\n\tquery AudioItem($slug: String!) {\n\t\taudioItem(slug: $slug) {\n\t\t\t...AudioItem\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n`;\n\ninterface QueryData {\n\taudioItem: AudioItem;\n}\ninterface QueryVariables {\n\tslug: string;\n}\ninterface HookArgs {\n\tslug?: string;\n\tqueryOptions?: LazyQueryHookOptions<QueryData, QueryVariables>;\n\tskip?: boolean;\n}\n\nconst useAudioItem = ({\n\tslug,\n\tqueryOptions = {},\n\tskip = false,\n}: HookArgs = {}): [\n\tAudioItem | undefined,\n\tLazyQueryResult<QueryData, QueryVariables>\n] => {\n\tconst [getAudioItem, audioItemQuery] = useLazyQuery<\n\t\tQueryData,\n\t\tQueryVariables\n\t>(AUDIO_ITEM_QUERY, queryOptions);\n\tconst { data } = audioItemQuery;\n\n\tuseEffect(() => {\n\t\tif (skip) {\n\t\t\treturn;\n\t\t}\n\t\tif (slug) {\n\t\t\tgetAudioItem({\n\t\t\t\tvariables: {\n\t\t\t\t\tslug,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}, [getAudioItem, slug, skip]);\n\n\tconst audioItem = data?.audioItem;\n\n\treturn [audioItem, audioItemQuery];\n};\n\nexport default useAudioItem;\n", "import { useEffect } from \"react\";\nimport type { LazyQueryResult } from \"@apollo/client\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\nimport type { SavedItem } from \"~/types\";\nimport { SavedItemFragments } from \"~/fragments\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\n\nconst SAVED_ITEMS_FOR_USER_QUERY = gql`\n\tquery SavedItemsForUser {\n\t\tsavedItemsForUser {\n\t\t\t...SavedItem\n\t\t}\n\t}\n\t${SavedItemFragments.savedItem}\n`;\n\ninterface QueryData {\n\tsavedItemsForUser: SavedItem[];\n}\n\nconst useSavedItemsForUser = (): [\n\tSavedItem[] | undefined,\n\tLazyQueryResult<QueryData, {}>\n] => {\n\tconst [currentUser] = useCurrentUser();\n\n\tconst [makeQuery, query] = useLazyQuery<QueryData, {}>(\n\t\tSAVED_ITEMS_FOR_USER_QUERY,\n\t\t{ fetchPolicy: \"cache-first\" }\n\t);\n\n\tuseEffect(() => {\n\t\tif (currentUser) {\n\t\t\tmakeQuery();\n\t\t}\n\t}, [makeQuery, currentUser]);\n\n\tconst savedItemsForUser = query.data?.savedItemsForUser;\n\n\treturn [savedItemsForUser, query];\n};\n\nexport default useSavedItemsForUser;\n", "import { useCallback, useState, useEffect, useRef } from \"react\";\nimport { Link } from \"@remix-run/react\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\n\nimport type { AudioItem, Comment, EntityType } from \"~/types\";\nimport { CommentFragments } from \"~/fragments\";\nimport DateTimeService from \"~/services/DateTime\";\nimport useAudioItem from \"~/hooks/useAudioItem\";\n\nimport Modal from \"~/components/Modal\";\nimport CreateCommentForm from \"~/components/CreateCommentForm\";\nimport LoadingCircle from \"~/components/LoadingCircle\";\n\nconst COMMENTS_FOR_PARENT_ENTITY_QUERY = gql`\n\tquery CommentsForParentEntity($input: CommentsForParentEntityInput!) {\n\t\tcommentsForParentEntity(input: $input) {\n\t\t\t...CommentWithoutParentEntity\n\t\t}\n\t}\n\t${CommentFragments.commentWithoutParentEntity}\n`;\n\ninterface QueryData {\n\tcommentsForParentEntity: Comment[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\tparentEntityType: EntityType;\n\t\tparentEntityId: string;\n\t};\n}\ninterface Props {\n\taudioItem: AudioItem;\n}\nconst ViewCommentsButton = ({ audioItem }: Props) => {\n\tconst { id, slug, entityType, commentsCount } = audioItem;\n\n\tconst commentsRef = useRef<HTMLDivElement>();\n\n\tconst [modalIsVisible, setModalIsVisible] = useState(false);\n\n\t// The parent AudioItem has already been fetched, so only use the cache for\n\t// this query\n\tconst [, { refetch: refetchParentAudioItem }] = useAudioItem({\n\t\tslug,\n\t\tqueryOptions: { fetchPolicy: \"cache-only\" },\n\t});\n\n\tconst [getCommentsForParentEntity, { loading, data, error }] = useLazyQuery<\n\t\tQueryData,\n\t\tQueryVariables\n\t>(COMMENTS_FOR_PARENT_ENTITY_QUERY, {\n\t\tfetchPolicy: \"cache-and-network\",\n\t});\n\tconst comments = data?.commentsForParentEntity ?? [];\n\n\tconst fetchCommentsForParent = useCallback(async () => {\n\t\tawait getCommentsForParentEntity({\n\t\t\tvariables: {\n\t\t\t\tinput: { parentEntityType: entityType, parentEntityId: id },\n\t\t\t},\n\t\t});\n\t}, [getCommentsForParentEntity, entityType, id]);\n\n\tconst onViewCommentsButtonClicked = useCallback(async () => {\n\t\tsetModalIsVisible(true);\n\t\tawait fetchCommentsForParent();\n\t}, [fetchCommentsForParent, commentsCount, comments]);\n\n\tconst onCreateCommentSuccess = useCallback(async () => {\n\t\tawait Promise.allSettled([\n\t\t\tfetchCommentsForParent(),\n\t\t\trefetchParentAudioItem({ slug }),\n\t\t]);\n\t}, [fetchCommentsForParent, refetchParentAudioItem]);\n\n\tconst onCloseModal = useCallback(() => setModalIsVisible(false), []);\n\n\tuseEffect(() => {\n\t\t// If comments have loaded, scroll to the bottom\n\t\tif (!commentsRef.current) {\n\t\t\treturn;\n\t\t}\n\t\tconst commentsHeight = commentsRef.current?.scrollHeight ?? 0;\n\t\tif (modalIsVisible && commentsHeight > 0 && comments.length > 0) {\n\t\t\tcommentsRef.current.scrollTo({\n\t\t\t\ttop: commentsHeight,\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t});\n\t\t}\n\t}, [comments, modalIsVisible]);\n\n\tconst modalTitle =\n\t\tcommentsCount > 0\n\t\t\t? `${commentsCount} Comment${commentsCount === 1 ? \"\" : \"s\"}`\n\t\t\t: \"No Comments\";\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName=\"btn-secondary\"\n\t\t\t\tonClick={onViewCommentsButtonClicked}\n\t\t\t\taria-label=\"View Comments\"\n\t\t\t>\n\t\t\t\t<i className=\"material-icons mr-0.5\">chat_bubble_outline</i>\n\t\t\t\t{commentsCount > 0 ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{commentsCount}\n\t\t\t\t\t\t<span className=\"hidden md:block md:pl-1\">\n\t\t\t\t\t\t\tComment{commentsCount === 1 ? \"\" : \"s\"}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className=\"md:hidden\">0</span>\n\t\t\t\t\t\t<span className=\"hidden md:block\">No Comments</span>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</button>\n\n\t\t\t<Modal\n\t\t\t\ttitle={modalTitle}\n\t\t\t\tisVisible={modalIsVisible}\n\t\t\t\tonClose={onCloseModal}\n\t\t\t>\n\t\t\t\t{error && <div className=\"text-red-600 mb-2\">{error.message}</div>}\n\n\t\t\t\t{comments.length > 0 && (\n\t\t\t\t\t<div className=\"max-h-1/2 overflow-auto\" ref={commentsRef}>\n\t\t\t\t\t\t{comments.map(({ createdByUser, createdAt, text }, index) => (\n\t\t\t\t\t\t\t<div className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t\t<div className=\"text-gray-500 text-sm mb-1 flex flex-row items-center\">\n\t\t\t\t\t\t\t\t\t<Link to={`/users/${createdByUser.id}`}>\n\t\t\t\t\t\t\t\t\t\t<a className=\"mr-1 flex flex-row items-center\">\n\t\t\t\t\t\t\t\t\t\t\t{createdByUser.verifiedPerson && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"inline\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"material-icons text-sm mr-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tverified\n\t\t\t\t\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t<span>{createdByUser.username}</span>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</Link>{\" \"}\n\t\t\t\t\t\t\t\t\t{DateTimeService.formatDateYearTime(createdAt)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"text-sm whitespace-pre-line text-gray-900\">\n\t\t\t\t\t\t\t\t\t{text}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{loading && <LoadingCircle />}\n\n\t\t\t\t<div className=\"mt-4\">\n\t\t\t\t\t<CreateCommentForm\n\t\t\t\t\t\tparentEntity={audioItem}\n\t\t\t\t\t\tonSuccess={onCreateCommentSuccess}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default ViewCommentsButton;\n", "import { useState, useCallback, useEffect } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { Comment, Entity } from \"~/types\";\nimport { isAudioItem } from \"~/types\";\nimport { CommentFragments } from \"~/fragments\";\nimport useRequireLogin from \"~/hooks/useRequireLogin\";\nimport useComments from \"~/hooks/useComments\";\nimport EntityService from \"~/services/Entity\";\n\nconst CREATE_COMMENT_MUTATION = gql`\n\tmutation CreateComment($input: CreateCommentInput!) {\n\t\tcreateComment(input: $input) {\n\t\t\t...CommentWithoutParentEntity\n\t\t}\n\t}\n\t${CommentFragments.commentWithoutParentEntity}\n`;\n\ninterface MutationData {\n\tcreateComment: Comment;\n}\ninterface MutationVariables {\n\tinput: {\n\t\tparentAudioItemId: string;\n\t\ttext: string;\n\t};\n}\ninterface Props {\n\tparentEntity: Entity;\n\tonSuccess?: (comment: Comment) => void;\n}\nconst CreateCommentForm = ({ parentEntity, onSuccess }: Props) => {\n\tconst { currentUser, requireLogin } = useRequireLogin();\n\n\tconst [text, setText] = useState(\"\");\n\n\tconst [createComment, { loading, data, error }] = useMutation<\n\t\tMutationData,\n\t\tMutationVariables\n\t>(CREATE_COMMENT_MUTATION, { errorPolicy: \"all\" });\n\n\tconst {\n\t\tcommentsQuery: { refetch: refetchTopLevelComments },\n\t} = useComments();\n\n\tconst onSubmit = useCallback(\n\t\tasync (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (!currentUser) {\n\t\t\t\tconst redirectTo = EntityService.makeHrefForView(parentEntity);\n\t\t\t\treturn await requireLogin({ redirectTo });\n\t\t\t}\n\n\t\t\tlet parentAudioItemId;\n\t\t\tif (isAudioItem(parentEntity)) {\n\t\t\t\tparentAudioItemId = parentEntity.id;\n\t\t\t}\n\t\t\tconst input = { parentAudioItemId, text };\n\t\t\tcreateComment({ variables: { input } });\n\t\t},\n\t\t[createComment, parentEntity, text]\n\t);\n\n\tuseEffect(() => {\n\t\tif (data?.createComment) {\n\t\t\tsetText(\"\");\n\t\t\tif (onSuccess) {\n\t\t\t\tonSuccess(data.createComment);\n\t\t\t}\n\t\t\t// Now that a new Comment has been created, update the top-level\n\t\t\t// `comments` query\n\t\t\trefetchTopLevelComments();\n\t\t}\n\t}, [data, refetchTopLevelComments]);\n\n\treturn (\n\t\t<form onSubmit={onSubmit} className=\"w-full\">\n\t\t\t<textarea\n\t\t\t\tplaceholder=\"Add a comment...\"\n\t\t\t\tautoFocus\n\t\t\t\tvalue={text}\n\t\t\t\trows={3}\n\t\t\t\tonChange={(event) => setText(event.target.value)}\n\t\t\t/>\n\t\t\t{text.length > 0 && (\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"btn mt-3 w-auto\"\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tdisabled={loading}\n\t\t\t\t\tvalue=\"Add Comment\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{error && <div className=\"text-red-600 mt-3\">{error.message}</div>}\n\t\t</form>\n\t);\n};\n\nexport default CreateCommentForm;\n", "import { useEffect, useCallback } from \"react\";\nimport type {\n\tLazyQueryResult,\n\tLazyQueryHookOptions,\n\tQueryLazyOptions,\n} from \"@apollo/client\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\nimport type { Comment } from \"~/types\";\nimport { CommentFragments } from \"~/fragments\";\n\nexport const COMMENTS_QUERY = gql`\n\tquery Comments($input: CommentsInput!) {\n\t\tcomments(input: $input) {\n\t\t\t...Comment\n\t\t}\n\t}\n\t${CommentFragments.comment}\n`;\n\ninterface QueryData {\n\tcomments: Comment[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\ttake?: number;\n\t\tskip?: number;\n\t};\n}\ninterface HookArgs {\n\tresultsPerPage?: number;\n\tqueryOptions?: LazyQueryHookOptions<QueryData, QueryVariables>;\n}\ninterface HookReturnValue {\n\tcomments: Comment[];\n\tgetComments: (options?: QueryLazyOptions<QueryVariables>) => void;\n\tcommentsQuery: LazyQueryResult<QueryData, QueryVariables>;\n\tfetchNextPageOfComments: () => void;\n}\n\nconst useComments = ({\n\tresultsPerPage = 10,\n\tqueryOptions = {},\n}: HookArgs = {}): HookReturnValue => {\n\tconst [getComments, commentsQuery] = useLazyQuery<QueryData, QueryVariables>(\n\t\tCOMMENTS_QUERY,\n\t\t{\n\t\t\tnotifyOnNetworkStatusChange: true,\n\t\t\t...queryOptions,\n\t\t}\n\t);\n\tconst { data, fetchMore } = commentsQuery;\n\n\tuseEffect(() => {\n\t\tgetComments({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\ttake: resultsPerPage,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}, [getComments, resultsPerPage]);\n\n\tconst comments = data?.comments;\n\n\tconst fetchNextPageOfComments = useCallback(() => {\n\t\tfetchMore({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\ttake: resultsPerPage,\n\t\t\t\t\tskip: comments.length ?? 0,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}, [fetchMore, resultsPerPage, comments]);\n\n\treturn {\n\t\tcomments: commentsQuery.data?.comments,\n\t\tgetComments,\n\t\tcommentsQuery,\n\t\tfetchNextPageOfComments,\n\t};\n};\n\nexport default useComments;\n", "import { useCallback, useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport { AudioItem, EntityType, Tag } from \"~/types\";\nimport DateTime from \"~/services/DateTime\";\nimport Entity from \"~/services/Entity\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\n\ninterface Props {\n\taudioItem: AudioItem;\n}\nconst TimeMarkers = ({ audioItem }: Props) => {\n\tconst { tags } = audioItem;\n\n\tconst {\n\t\tactiveAudioItem,\n\t\tsetActiveAudioItem,\n\t\tplaybackPositionSeconds,\n\t\tsetSeekPositionSeconds,\n\t} = usePlayerContext();\n\n\ttype TimeMarkersWithTags = {\n\t\t[timeMarker: string]: Tag[];\n\t};\n\tconst timeMarkersWithTags: TimeMarkersWithTags = useMemo(() => {\n\t\tconst output = {};\n\t\tif (!tags) {\n\t\t\treturn output;\n\t\t}\n\t\t// Filter out tags without time markers\n\t\tconst filteredTags = tags.filter(\n\t\t\t(tag) => typeof tag.subjectTimeMarkerSeconds === \"number\"\n\t\t);\n\t\t// Sort array so that time markers are ascending, and thus object keys will\n\t\t// be created in ascending order\n\t\tfilteredTags.sort(\n\t\t\t(a, b) => a.subjectTimeMarkerSeconds - b.subjectTimeMarkerSeconds\n\t\t);\n\t\tfilteredTags.forEach((tag) => {\n\t\t\tconst existingTagsAtTimeMarker: Tag[] | undefined =\n\t\t\t\toutput[tag.subjectTimeMarkerSeconds] ?? [];\n\t\t\toutput[tag.subjectTimeMarkerSeconds] = [...existingTagsAtTimeMarker, tag];\n\t\t});\n\t\treturn output;\n\t}, [tags]);\n\n\tconst onTimeMarkerClicked = useCallback(\n\t\t(event, timeMarker) => {\n\t\t\tif (event.target.id === \"time-marker-tag-link\") {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (activeAudioItem?.id !== audioItem.id) {\n\t\t\t\tsetActiveAudioItem(audioItem);\n\t\t\t}\n\t\t\tsetSeekPositionSeconds(parseInt(timeMarker));\n\t\t},\n\t\t[audioItem, activeAudioItem]\n\t);\n\n\tconst audioItemIsInPlayer = activeAudioItem?.id === audioItem.id;\n\tconst activeTimeMarker: string | undefined = useMemo(() => {\n\t\tif (!audioItemIsInPlayer) {\n\t\t\treturn undefined;\n\t\t}\n\t\tlet result: string | undefined;\n\t\tObject.keys(timeMarkersWithTags).forEach((timeMarker) => {\n\t\t\tif (parseInt(timeMarker) <= playbackPositionSeconds) {\n\t\t\t\tresult = timeMarker;\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}, [audioItemIsInPlayer, timeMarkersWithTags, playbackPositionSeconds]);\n\n\treturn (\n\t\t<div className=\"flex flex-col\">\n\t\t\t{Object.entries(timeMarkersWithTags).map(\n\t\t\t\t([timeMarker, tagsAtTimeMarker], index) => {\n\t\t\t\t\tconst isActive = activeTimeMarker === timeMarker;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"flex flex-row items-start md:items-center justify-start mb-2 last:mb-1 text-sm\"\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"flex flex-row w-16 flex-shrink-0\">\n\t\t\t\t\t\t\t\t<div className=\"w-3 text-left\">{isActive && \">\"}</div>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"btn-text underline hover:underline\"\n\t\t\t\t\t\t\t\t\tonClick={(event) => onTimeMarkerClicked(event, timeMarker)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{DateTime.formatSecondsAsDuration(parseInt(timeMarker))}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex flex-col md:flex-row\">\n\t\t\t\t\t\t\t\t{tagsAtTimeMarker.map((tag, index) => (\n\t\t\t\t\t\t\t\t\t<span className=\"flex flex-row items-center\" key={index}>\n\t\t\t\t\t\t\t\t\t\t<Link to={Entity.makeHrefForView(tag.objectEntity)}>\n\t\t\t\t\t\t\t\t\t\t\t<a id=\"time-marker-tag-link\">\n\t\t\t\t\t\t\t\t\t\t\t\t{tag.objectEntity.name}\n\t\t\t\t\t\t\t\t\t\t\t\t{tag.objectEntity.entityType === EntityType.Tune\n\t\t\t\t\t\t\t\t\t\t\t\t\t? ` (${tag.objectEntity.type})`\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t{index !== tagsAtTimeMarker.length - 1 && (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"hidden md:block mr-1\">,</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default TimeMarkers;\n", "import { useCallback, useState, useMemo } from \"react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { Entity, EntityType, TakedownRequest } from \"~/types\";\nimport { isPendingTakedownRequest, isApprovedTakedownRequest } from \"~/types\";\nimport useRequireLogin from \"~/hooks/useRequireLogin\";\nimport EntityService from \"~/services/Entity\";\nimport { TakedownRequestFragments } from \"~/fragments\";\n\nimport Modal from \"~/components/Modal\";\nimport CreateTakedownRequestForm from \"~/components/CreateTakedownRequestForm\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport DateTimeService from \"~/services/DateTime\";\nimport useAudioItem from \"~/hooks/useAudioItem\";\n\nconst TAKEDOWN_REQUESTS_FOR_ENTITY = gql`\n\tquery TakedownRequestsForEntity($input: TakedownRequestsForEntityInput!) {\n\t\ttakedownRequestsForEntity(input: $input) {\n\t\t\t...TakedownRequestWithoutEntity\n\t\t}\n\t}\n\t${TakedownRequestFragments.takedownRequestWithoutEntity}\n`;\n\ninterface QueryData {\n\ttakedownRequestsForEntity: TakedownRequest[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\tentityType: EntityType;\n\t\tentityId: string;\n\t};\n}\ninterface Props {\n\tentity: Entity;\n\tonTakedownRequestCreated?: (takedownRequest: TakedownRequest) => void;\n}\n\nconst RequestTakedownButton = ({ entity, onTakedownRequestCreated }: Props) => {\n\tconst { currentUser, requireLogin } = useRequireLogin();\n\n\tconst [modalIsVisible, setModalIsVisible] = useState(false);\n\tconst closeModal = useCallback(() => setModalIsVisible(false), []);\n\n\tconst { loading, data, error, refetch } = useQuery<QueryData, QueryVariables>(\n\t\tTAKEDOWN_REQUESTS_FOR_ENTITY,\n\t\t{\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tentityType: entity.entityType,\n\t\t\t\t\tentityId: entity.id,\n\t\t\t\t},\n\t\t\t},\n\t\t\tskip: !modalIsVisible,\n\t\t}\n\t);\n\tconst takedownRequests = data?.takedownRequestsForEntity ?? [];\n\n\tconst onButtonClicked = useCallback(async () => {\n\t\tif (!currentUser) {\n\t\t\tconst redirectTo = EntityService.makeHrefForView(entity);\n\t\t\tawait requireLogin({ redirectTo });\n\t\t} else {\n\t\t\tsetModalIsVisible(true);\n\t\t}\n\t}, [currentUser, entity, requireLogin]);\n\n\tconst onSuccess = useCallback(\n\t\tasync (takedownRequest: TakedownRequest) => {\n\t\t\ttry {\n\t\t\t\tawait refetch();\n\t\t\t\tif (onTakedownRequestCreated) {\n\t\t\t\t\tawait onTakedownRequestCreated(takedownRequest);\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\t//\n\t\t\t}\n\t\t},\n\t\t[refetch, onTakedownRequestCreated]\n\t);\n\n\tconst modalContent = useMemo(() => {\n\t\tconst pendingTakedown = takedownRequests.find(isPendingTakedownRequest);\n\t\tconst approvedTakedown = takedownRequests.find(isApprovedTakedownRequest);\n\n\t\tif (loading) {\n\t\t\treturn <LoadingBlock />;\n\t\t} else if (error) {\n\t\t\treturn (\n\t\t\t\t<div className=\"text-red-600\">Error fetching Takedown Request data</div>\n\t\t\t);\n\t\t} else if (approvedTakedown) {\n\t\t\treturn (\n\t\t\t\t<div className=\"text-gray-500\">\n\t\t\t\t\tThis {entity.entityType} has an <strong>approved</strong>{\" \"}\n\t\t\t\t\t{approvedTakedown.type} Takedown Request last updated{\" \"}\n\t\t\t\t\t{DateTimeService.formatDateYearTime(approvedTakedown.updatedAt)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else if (pendingTakedown) {\n\t\t\treturn (\n\t\t\t\t<div className=\"text-gray-500\">\n\t\t\t\t\tThis {entity.entityType} has a <strong>pending</strong>{\" \"}\n\t\t\t\t\t{pendingTakedown.type} Takedown Request last updated{\" \"}\n\t\t\t\t\t{DateTimeService.formatDateYearTime(pendingTakedown.updatedAt)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"text-gray-500 mb-5\">\n\t\t\t\t\tWe exist as a community resource, and as such we place the foremost\n\t\t\t\t\timportance on performers' rights and copyright. You can request a\n\t\t\t\t\ttakedown using this form. We will be in touch to verify details.\n\t\t\t\t</div>\n\n\t\t\t\t<CreateTakedownRequestForm entity={entity} onSuccess={onSuccess} />\n\t\t\t</>\n\t\t);\n\t}, [loading, error, takedownRequests, refetch, entity]);\n\n\treturn (\n\t\t<>\n\t\t\t<span\n\t\t\t\tclassName=\"rounded flex flex-row items-center p-2\"\n\t\t\t\tonClick={onButtonClicked}\n\t\t\t>\n\t\t\t\t<i className=\"material-icons mr-0.5\">report_problem</i>\n\t\t\t\tRequest Takedown\n\t\t\t</span>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Request Takedown\"\n\t\t\t\tisVisible={modalIsVisible}\n\t\t\t\tonClose={closeModal}\n\t\t\t>\n\t\t\t\t{modalContent}\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default RequestTakedownButton;\n", "import { useState, useCallback, useEffect } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { Entity, EntityType, TakedownRequest } from \"~/types\";\nimport { TakedownRequestType } from \"~/types\";\nimport { TakedownRequestFragments } from \"~/fragments\";\n\nconst CREATE_TAKEDOWN_REQUEST = gql`\n\tmutation CreateTakedownRequest($input: CreateTakedownRequestInput!) {\n\t\tcreateTakedownRequest(input: $input) {\n\t\t\t...TakedownRequestWithoutEntity\n\t\t}\n\t}\n\t${TakedownRequestFragments.takedownRequestWithoutEntity}\n`;\n\ninterface MutationData {\n\tcreateTakedownRequest: TakedownRequest;\n}\ninterface MutationVariables {\n\tinput: {\n\t\tentityType: EntityType;\n\t\tentityId: string;\n\t\ttype: TakedownRequestType;\n\t\tmessage: string;\n\t};\n}\ninterface Props {\n\tentity: Entity;\n\tonSuccess?: (takedownRequest: TakedownRequest) => void;\n}\n\nconst CreateTakedownRequestForm = ({ entity, onSuccess }: Props) => {\n\tconst defaultType = Object.keys(TakedownRequestType)[0];\n\tconst [type, setType] = useState(defaultType);\n\tconst [message, setMessage] = useState(\"\");\n\tconst [validationError, setValidationError] = useState(\"\");\n\n\tconst [createTakedownRequest, { loading, data, error }] = useMutation<\n\t\tMutationData,\n\t\tMutationVariables\n\t>(CREATE_TAKEDOWN_REQUEST, { errorPolicy: \"all\" });\n\n\tconst getLabelForType = (type: TakedownRequestType) => {\n\t\tswitch (TakedownRequestType[type]) {\n\t\t\tcase TakedownRequestType.Performer:\n\t\t\t\treturn \"I'm a performer in it\";\n\t\t\tcase TakedownRequestType.Copyright:\n\t\t\t\treturn \"I own the copyright\";\n\t\t\tdefault:\n\t\t\t\treturn type;\n\t\t}\n\t};\n\n\tconst onSubmitForm = useCallback(\n\t\t(event) => {\n\t\t\tevent.preventDefault();\n\t\t\tsetValidationError(\"\");\n\t\t\tif (!message) {\n\t\t\t\treturn setValidationError(\"Please include details about your request\");\n\t\t\t}\n\t\t\tconst input = {\n\t\t\t\tentityType: entity.entityType,\n\t\t\t\tentityId: entity.id,\n\t\t\t\ttype: type as TakedownRequestType,\n\t\t\t\tmessage,\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tcreateTakedownRequest({\n\t\t\t\t\tvariables: {\n\t\t\t\t\t\tinput,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t} catch {\n\t\t\t\t//\n\t\t\t}\n\t\t},\n\t\t[message, entity, type, createTakedownRequest]\n\t);\n\n\tuseEffect(() => {\n\t\tif (data?.createTakedownRequest?.id && onSuccess) {\n\t\t\tonSuccess(data.createTakedownRequest);\n\t\t}\n\t}, [data, onSuccess]);\n\n\treturn (\n\t\t<form className=\"flex flex-col items-start\" onSubmit={onSubmitForm}>\n\t\t\t<label htmlFor=\"select-type\" className=\"mb-2\">\n\t\t\t\tWhy are you requesting a takedown for this {entity.entityType}?\n\t\t\t</label>\n\t\t\t<select\n\t\t\t\tid=\"select-type\"\n\t\t\t\tclassName=\"mb-4\"\n\t\t\t\tvalue={type}\n\t\t\t\tonChange={(event) => setType(event.target.value as TakedownRequestType)}\n\t\t\t>\n\t\t\t\t{Object.keys(TakedownRequestType).map((type, index) => (\n\t\t\t\t\t<option value={type} key={index}>\n\t\t\t\t\t\t{getLabelForType(type as TakedownRequestType)}\n\t\t\t\t\t</option>\n\t\t\t\t))}\n\t\t\t</select>\n\n\t\t\t<textarea\n\t\t\t\tclassName=\"mb-4\"\n\t\t\t\tplaceholder=\"Please include as many details as you can...\"\n\t\t\t\tvalue={message}\n\t\t\t\tonChange={(event) => setMessage(event.target.value)}\n\t\t\t\trows={4}\n\t\t\t/>\n\n\t\t\t<input type=\"submit\" value=\"Submit\" disabled={loading} />\n\n\t\t\t{validationError && (\n\t\t\t\t<div className=\"mt-4 text-red-600\">{validationError}</div>\n\t\t\t)}\n\t\t\t{error && (\n\t\t\t\t<div className=\"mt-4 text-red-600\">\n\t\t\t\t\tError submitting Takedown Request. Please reload the page and try\n\t\t\t\t\tagain.\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</form>\n\t);\n};\n\nexport default CreateTakedownRequestForm;\n", "import { useCallback, useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport type { AudioItem } from \"~/types\";\nimport { EntityStatus, EntityType } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport TagService from \"~/services/Tag\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\n\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\nimport Menu from \"~/components/Menu\";\nimport SaveItemButton from \"~/components/SaveItemButton\";\nimport ViewCommentsButton from \"~/components/ViewCommentsButton\";\nimport RequestTakedownButton from \"~/components/RequestTakedownButton\";\n\ninterface Props {\n\taudioItem: AudioItem;\n\tclassName?: string;\n}\nconst AudioItemCompact = ({ audioItem, className }: Props) => {\n\tconst { name, slug, description, tags, status } = audioItem;\n\tconst isTakenDown = status === EntityStatus.TakenDown;\n\tconst sortedTags = useMemo(() => TagService.sort(tags), [tags]);\n\n\tconst { activeAudioItem, setActiveAudioItem } = usePlayerContext();\n\n\tconst onPlayPressed = useCallback(() => {\n\t\tsetActiveAudioItem(audioItem);\n\t}, [audioItem]);\n\n\tconst playButtonMarkup = useMemo(() => {\n\t\tconst audioItemIsInPlayer = activeAudioItem?.id === audioItem.id;\n\t\tif (isTakenDown) {\n\t\t\treturn <div className=\"text-gray-500\">Taken Down</div>;\n\t\t}\n\t\tif (audioItemIsInPlayer) {\n\t\t\treturn <div className=\"text-gray-500\">Playing</div>;\n\t\t}\n\t\treturn (\n\t\t\t<button\n\t\t\t\tstyle={{ lineHeight: 0 }}\n\t\t\t\tonClick={onPlayPressed}\n\t\t\t\taria-label=\"Play\"\n\t\t\t>\n\t\t\t\t<i className=\"material-icons text-6xl text-teal-600 hover:text-teal-800\">\n\t\t\t\t\tplay_arrow\n\t\t\t\t</i>\n\t\t\t</button>\n\t\t);\n\t}, [isTakenDown, activeAudioItem, audioItem, onPlayPressed]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-row justify-start items-start bg-white shadow-md rounded pt-2 px-3 pb-1 ${\n\t\t\t\tclassName ?? \"\"\n\t\t\t}`}\n\t\t>\n\t\t\t<div className=\"flex justify-center items-center w-14 mr-3\">\n\t\t\t\t{playButtonMarkup}\n\t\t\t</div>\n\n\t\t\t<div className=\"flex flex-1 flex-col overflow-hidden\">\n\t\t\t\t<Link to={`/entities/audio-items/${slug}`}>{name}</Link>\n\n\t\t\t\t<div className=\"flex flex-row flex-wrap text-sm mt-1 mb-1\">\n\t\t\t\t\tTags:\n\t\t\t\t\t{sortedTags.map((tag, index) => (\n\t\t\t\t\t\t<div key={index} className=\"ml-1 whitespace-pre\">\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(tag.objectEntity)}>\n\t\t\t\t\t\t\t\t<a>\n\t\t\t\t\t\t\t\t\t{tag.objectEntity.name}\n\t\t\t\t\t\t\t\t\t{tag.objectEntity.entityType === EntityType.Tune\n\t\t\t\t\t\t\t\t\t\t? ` (${tag.objectEntity.type})`\n\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t{index !== sortedTags.length - 1 && \", \"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t\t<AddTagButton entity={audioItem} className=\"ml-2\" />\n\t\t\t\t\t{tags?.length > 0 && (\n\t\t\t\t\t\t<div className=\"flex ml-1\">\n\t\t\t\t\t\t\t<span className=\"text-gray-500 mr-1\">/</span>\n\t\t\t\t\t\t\t<EditTagsButton entity={audioItem} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{description && (\n\t\t\t\t\t<div className=\"text-gray-500 text-sm\">{description}</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"border-t border-gray-200 mt-2 pt-1 w-full flex flex-row justify-between items-center\">\n\t\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\t\t<ViewCommentsButton audioItem={audioItem} />\n\n\t\t\t\t\t\t<div className=\"ml-2\">\n\t\t\t\t\t\t\t<SaveItemButton audioItem={audioItem} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Menu>\n\t\t\t\t\t\t{!isTakenDown && <RequestTakedownButton entity={audioItem} />}\n\t\t\t\t\t</Menu>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AudioItemCompact;\n", "import { useCallback, useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport { AudioItem, EntityStatus } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport TagService from \"~/services/Tag\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\n\ninterface Props {\n\taudioItem: AudioItem;\n\tclassName?: string;\n}\nconst AudioItemTextOnly = ({ audioItem, className }: Props) => {\n\tconst { name, slug, tags, status } = audioItem;\n\tconst isTakenDown = status === EntityStatus.TakenDown;\n\tconst sortedTags = useMemo(() => TagService.sort(tags), [tags]);\n\n\tconst { activeAudioItem, setActiveAudioItem } = usePlayerContext();\n\n\tconst onPlayPressed = useCallback(() => {\n\t\tsetActiveAudioItem(audioItem);\n\t}, [audioItem]);\n\n\tconst playButtonMarkup = useMemo(() => {\n\t\tconst audioItemIsInPlayer = activeAudioItem?.id === audioItem.id;\n\t\tif (isTakenDown) {\n\t\t\treturn <div className=\"text-gray-500\">Taken Down</div>;\n\t\t}\n\t\tif (audioItemIsInPlayer) {\n\t\t\treturn <div className=\"text-gray-500\">Playing</div>;\n\t\t}\n\t\treturn (\n\t\t\t<button\n\t\t\t\tstyle={{ lineHeight: 0 }}\n\t\t\t\tonClick={onPlayPressed}\n\t\t\t\taria-label=\"Play\"\n\t\t\t>\n\t\t\t\t<i className=\"material-icons text-2xl text-teal-600 hover:text-teal-800\">\n\t\t\t\t\tplay_arrow\n\t\t\t\t</i>\n\t\t\t</button>\n\t\t);\n\t}, [isTakenDown, activeAudioItem, audioItem, onPlayPressed]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-row justify-start items-start ${className ?? \"\"}`}\n\t\t>\n\t\t\t<div className=\"flex justify-center items-center w-14 mr-3\">\n\t\t\t\t{playButtonMarkup}\n\t\t\t</div>\n\n\t\t\t<div className=\"flex flex-1 flex-col overflow-hidden\">\n\t\t\t\t<Link to={`/entities/audio-items/${slug}`}>{name}</Link>\n\n\t\t\t\t<div className=\"flex flex-row flex-wrap text-sm mt-1 mb-1\">\n\t\t\t\t\t<span className=\"text-gray-500\">Tags:</span>\n\t\t\t\t\t{sortedTags.map((tag, index) => (\n\t\t\t\t\t\t<div key={index} className=\"ml-1 whitespace-pre\">\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(tag.objectEntity)}>\n\t\t\t\t\t\t\t\t{tag.objectEntity.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t{index !== sortedTags.length - 1 && \", \"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AudioItemTextOnly;\n", "import { useQuery } from \"@apollo/client\";\nimport { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { AudioItem } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport { AUDIO_ITEM_QUERY } from \"~/routes/entities/audio-items/[slug]\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst AudioItemAbout = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery<{\n\t\taudioItem: AudioItem;\n\t}>(AUDIO_ITEM_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst isLoading = !data && !error;\n\tconst { name, description, aliases, itmaAtomSlug } = data?.audioItem ?? {};\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - About`}>\n\t\t\t{isLoading && <LoadingBlock />}\n\t\t\t{error && <div className=\"text-red-500\">{error.message}</div>}\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Audio Items\", href: \"/entities/audio-items\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/audio-items/${slug}` },\n\t\t\t\t\t\t\t{ label: \"About\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\t\t\t\t\t{itmaAtomSlug && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\t<div className=\"italic text-gray-500\">\n\t\t\t\t\t\t\t\tThis was sourced from ITMA's AtoM archive\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={`https://itma-atom.arkivum.net/index.php/${itmaAtomSlug}`}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView on AtoM <i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{description && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tDescription:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500 whitespace-pre\">\n\t\t\t\t\t\t\t\t{description}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{aliases && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tAliases:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{aliases}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<Link to={`/entities/audio-items/${slug}/edit`}>Edit</Link>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default AudioItemAbout;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { Link } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport { EntityFragments } from \"~/fragments\";\nimport type { AudioItem } from \"~/types\";\nimport { ViewAs } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport AudioItemComponent from \"~/components/AudioItem\";\n\nexport const AUDIO_ITEM_QUERY = gql`\n\tquery AudioItem($slug: String!) {\n\t\taudioItem(slug: $slug) {\n\t\t\t...AudioItem\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n`;\n\nconst ViewAudioItemBySlug = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery<{\n\t\taudioItem: AudioItem;\n\t}>(AUDIO_ITEM_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst { audioItem } = data ?? {};\n\tconst { name } = audioItem ?? {};\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name ?? \"\"}`}>\n\t\t\t{!data && !error && <LoadingBlock />}\n\t\t\t{error && <span className=\"text-red-500\">{error.message}</span>}\n\t\t\t{data && (\n\t\t\t\t<div className=\"mb-6\">\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: EntityService.makeReadableNamePlural(audioItem),\n\t\t\t\t\t\t\t\thref: EntityService.makeHrefForTopLevel(audioItem),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ label: name },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"flex flex-row mb-6\">\n\t\t\t\t\t\t<Link to={EntityService.makeHrefForAbout(audioItem)}>About</Link>\n\t\t\t\t\t</div>\n\t\t\t\t\t<AudioItemComponent\n\t\t\t\t\t\tviewAs={ViewAs.Cards}\n\t\t\t\t\t\taudioItem={audioItem}\n\t\t\t\t\t\tshowTitle={false}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default ViewAudioItemBySlug;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { AudioItem } from \"types\";\nimport { EntityFragments } from \"~/fragments\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport RequireUser from \"~/components/RequireUser\";\nimport EditAudioItemForm from \"~/components/EditAudioItemForm\";\n\nconst AUDIO_ITEM_QUERY = gql`\n\tquery AudioItem($slug: String!) {\n\t\taudioItem(slug: $slug) {\n\t\t\t...AudioItem\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n`;\n\nconst EditAudioItem = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery<{ audioItem?: AudioItem }>(\n\t\tAUDIO_ITEM_QUERY,\n\t\t{\n\t\t\tvariables: { slug },\n\t\t\tskip: !slug,\n\t\t}\n\t);\n\n\tconst onEditSuccess = (audioItem: AudioItem) => {\n\t\tnavigate(`/entities/audio-items/${audioItem.slug}`);\n\t};\n\n\tlet statusMessage;\n\tif (!data && !error) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!data && error) {\n\t\tstatusMessage = `Error fetching AudioItem with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\tconst { audioItem } = data;\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Edit AudioItem: {audioItem.name}</h1>\n\t\t\t\t\t<EditAudioItemForm audioItem={audioItem} onSuccess={onEditSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default EditAudioItem;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\nimport type { AudioItem } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nconst UPDATE_AUDIO_ITEM_MUTATION = gql`\n\tmutation UpdateAudioItem($slug: String!, $input: UpdateAudioItemInput!) {\n\t\tupdateAudioItem(slug: $slug, input: $input) {\n\t\t\t...AudioItem\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n`;\ninterface UpdateAudioItemInput {\n\tslug: string;\n\tinput: {\n\t\tname?: string;\n\t\taliases?: string;\n\t\tdescription?: string;\n\t};\n}\ninterface Props {\n\taudioItem: AudioItem;\n\tonSuccess?: (audioItem: AudioItem) => void;\n}\nconst EditAudioItemForm = ({ audioItem, onSuccess }: Props) => {\n\tconst navigate = useNavigate();\n\n\tconst [updateAudioItem, { loading, error, data }] = useMutation<\n\t\t{ updateAudioItem: AudioItem },\n\t\tUpdateAudioItemInput\n\t>(UPDATE_AUDIO_ITEM_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\n\tconst [name, setName] = useState(audioItem.name);\n\tconst [aliases, setAliases] = useState(audioItem.aliases);\n\tconst [description, setDescription] = useState(audioItem.description);\n\n\tconst onUpdateAudioItem = (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tname,\n\t\t\taliases,\n\t\t\tdescription,\n\t\t};\n\t\tupdateAudioItem({ variables: { slug: audioItem.slug, input } });\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.updateAudioItem) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.updateAudioItem);\n\t\t\t}\n\t\t\twindow.alert(\"AudioItem updated successfully!\");\n\t\t}\n\t}, [data, navigate]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onUpdateAudioItem}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(event) => setName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this AudioItem. For example:{\" \"}\n\t\t\t\t\t\t<em>Finbarr and Brian, Finbarr '08 at Dolan's</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={10}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Save\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default EditAudioItemForm;\n", "import { useEffect } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nconst ViewAudioItemTags = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tuseEffect(() => {\n\t\tif (slug) {\n\t\t\tnavigate(`/entities/audio-items/${slug}`);\n\t\t}\n\t}, [navigate, slug]);\n\n\treturn null;\n};\n\nexport default ViewAudioItemTags;\n", "import { useEffect } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport useAudioItemRandom from \"~/hooks/useAudioItemRandom\";\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst AudioItemRandom = () => {\n\tconst [audioItemRandom, { loading, error }] = useAudioItemRandom();\n\tconst navigate = useNavigate();\n\n\tuseEffect(() => {\n\t\tif (audioItemRandom) {\n\t\t\tnavigate(EntityService.makeHrefForView(audioItemRandom));\n\t\t}\n\t}, [audioItemRandom]);\n\n\treturn (\n\t\t<Layout>\n\t\t\t{loading && <LoadingBlock />}\n\t\t\t{error && (\n\t\t\t\t<div className=\"text-red-600\">\n\t\t\t\t\tError fetching random Audio Item. Please reload the page.\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default AudioItemRandom;\n", "import type { QueryHookOptions, QueryResult } from \"@apollo/client\";\nimport { useQuery, gql } from \"@apollo/client\";\nimport type { AudioItem } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nexport const AUDIO_ITEM_RANDOM_QUERY = gql`\n\tquery AudioItemRandom {\n\t\taudioItemRandom {\n\t\t\t...AudioItem\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n`;\n\ninterface QueryData {\n\taudioItemRandom: AudioItem;\n}\ninterface HookArgs {\n\tslug?: string;\n\tqueryOptions?: QueryHookOptions<QueryData>;\n}\n\nconst useAudioItemRandom = ({ queryOptions = {} }: HookArgs = {}): [\n\tAudioItem | undefined,\n\tQueryResult<QueryData, {}>\n] => {\n\tconst audioItemRandomQuery = useQuery<QueryData>(AUDIO_ITEM_RANDOM_QUERY, {\n\t\tfetchPolicy: \"network-only\",\n\t\t...queryOptions,\n\t});\n\tconst { data } = audioItemRandomQuery;\n\tconst audioItemRandom = data?.audioItemRandom;\n\n\treturn [audioItemRandom, audioItemRandomQuery];\n};\n\nexport default useAudioItemRandom;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport { EntityFragments } from \"~/fragments\";\nimport type { Collection } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\nexport const COLLECTION_QUERY = gql`\n\tquery Collection($slug: String!) {\n\t\tcollection(slug: $slug) {\n\t\t\t...Collection\n\t\t}\n\t}\n\t${EntityFragments.collection}\n`;\n\nconst ViewCollectionBySlug = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data: collectionData, error: collectionError } = useQuery<{\n\t\tcollection: Collection;\n\t}>(COLLECTION_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst { collection } = collectionData ?? {};\n\n\tlet statusMessage;\n\tif (!collectionData && !collectionError) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!collectionData && collectionError) {\n\t\tstatusMessage = `Error fetching Collection with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${collection.name}`}>\n\t\t\t<ViewEntityAndAudioItems entity={collection} />\n\t\t</Layout>\n\t);\n};\n\nexport default ViewCollectionBySlug;\n", "import { useEffect, useState, useRef } from \"react\";\nimport { Link } from \"@remix-run/react\";\nimport { useInView } from \"react-intersection-observer\";\n\nimport type { Entity } from \"~/types\";\nimport { PerPage, ViewAs } from \"~/types\";\nimport useAudioItemsTaggedWithEntity from \"~/hooks/useAudioItemsTaggedWithEntity\";\nimport useFilters from \"~/hooks/useFilters\";\nimport EntityService from \"~/services/Entity\";\n\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport AudioItem from \"~/components/AudioItem\";\n\ninterface Props {\n\tentity: Entity;\n\tclassName?: string;\n}\nconst ViewEntityAndAudioItems = ({ entity, className }: Props) => {\n\tconst { name } = entity ?? {};\n\n\tconst { ref: metadataRef, inView: metadataInView } = useInView({\n\t\tinitialInView: true,\n\t});\n\n\tconst [totalAudioItems, setTotalAudioItems] = useState<number | undefined>();\n\n\tconst { Filters, filtersProps, page, perPage, viewAs } = useFilters({\n\t\tdefaultPage: 1,\n\t\ttotalItems: totalAudioItems,\n\t\tdefaultPerPage: PerPage.Twenty,\n\t\tdefaultViewAs: ViewAs.Cards,\n\t});\n\tconst filtersRef = useRef<HTMLDivElement>(null);\n\n\t// Scroll to the top after choosing a different page of results\n\tuseEffect(() => {\n\t\tif (filtersRef.current) {\n\t\t\tfiltersRef.current.scrollIntoView({\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t\tblock: \"end\",\n\t\t\t});\n\t\t}\n\t}, [page, filtersRef]);\n\n\tconst {\n\t\taudioItems = [],\n\t\ttotal,\n\t\tquery: { loading: audioItemsLoading, error: audioItemsError },\n\t} = useAudioItemsTaggedWithEntity({\n\t\tentity,\n\t\tpage,\n\t\tperPage: perPage as number,\n\t});\n\tuseEffect(() => {\n\t\tif (typeof total === \"number\") {\n\t\t\tsetTotalAudioItems(total);\n\t\t}\n\t}, [total]);\n\n\tconst headerOffset =\n\t\twindow.document.getElementById(\"header\")?.offsetHeight ?? 0;\n\n\treturn (\n\t\t<div className={`flex flex-1 flex-col mb-8 ${className ?? \"\"}`}>\n\t\t\t{/* Initial metadata at top of page */}\n\t\t\t<div className=\"mb-6\" ref={metadataRef}>\n\t\t\t\t<Breadcrumb\n\t\t\t\t\titems={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: EntityService.makeReadableNamePlural(entity),\n\t\t\t\t\t\t\thref: EntityService.makeHrefForTopLevel(entity),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: name },\n\t\t\t\t\t]}\n\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t/>\n\t\t\t\t<div className=\"flex flex-row mb-6\">\n\t\t\t\t\t<span className=\"text-gray-500\">\n\t\t\t\t\t\t{totalAudioItems ?? \"\"} Audio Item{totalAudioItems === 1 ? \"\" : \"s\"}\n\t\t\t\t\t</span>\n\t\t\t\t\t<Link to={EntityService.makeHrefForAbout(entity)}>\n\t\t\t\t\t\t<a className=\"ml-4\">About</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to={EntityService.makeHrefForTags(entity)}>\n\t\t\t\t\t\t<a className=\"ml-4\">Tags</a>\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t\t{totalAudioItems > 0 && (\n\t\t\t\t\t<div ref={filtersRef}>\n\t\t\t\t\t\t<Filters {...filtersProps} />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{audioItemsLoading && <LoadingBlock />}\n\t\t\t{totalAudioItems > 0 &&\n\t\t\t\taudioItems.map((audioItem, index) => (\n\t\t\t\t\t<AudioItem\n\t\t\t\t\t\tviewAs={viewAs}\n\t\t\t\t\t\taudioItem={audioItem}\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tclassName={viewAs === ViewAs.List ? \"mb-4\" : \"mb-6\"}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t{audioItemsError && (\n\t\t\t\t<div className=\"text-red-600\">Error fetching Audio Items</div>\n\t\t\t)}\n\n\t\t\t{/* Fixed overlay metadata when scrolling. Render after AudioItems so it takes z-index precedence */}\n\t\t\t<div\n\t\t\t\tclassName={`${\n\t\t\t\t\tmetadataInView ? \"hidden\" : \"visible\"\n\t\t\t\t} fixed left-0 right-0 p-4 bg-gray-100 shadow-lg`}\n\t\t\t\tstyle={{ top: `${headerOffset}px` }}\n\t\t\t>\n\t\t\t\t{totalAudioItems > 0 && <Filters {...filtersProps} />}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default ViewEntityAndAudioItems;\n", "import type { QueryResult, QueryHookOptions } from \"@apollo/client\";\nimport { useQuery, gql } from \"@apollo/client\";\nimport type { Entity, EntityType, AudioItem } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nexport const AUDIO_ITEMS_TAGGED_WITH_ENTITY_QUERY = gql`\n\tquery AudioItemsTaggedWithEntity($input: AudioItemsTaggedWithEntityInput!) {\n\t\taudioItemsTaggedWithEntity(input: $input) {\n\t\t\taudioItems {\n\t\t\t\t...AudioItem\n\t\t\t}\n\t\t\ttotal\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n`;\n\ninterface QueryData {\n\taudioItemsTaggedWithEntity?: {\n\t\taudioItems: AudioItem[];\n\t\ttotal: number;\n\t};\n}\ninterface QueryVariables {\n\tinput: {\n\t\tentityType: EntityType;\n\t\tentityId: string;\n\t\ttake?: number;\n\t\tskip?: number;\n\t};\n}\ninterface HookArgs {\n\tentity?: Entity;\n\tpage?: number;\n\tperPage?: number;\n\tqueryOptions?: QueryHookOptions<QueryData, QueryVariables>;\n}\ninterface HookReturnValue {\n\taudioItems: AudioItem[] | undefined;\n\ttotal: number | undefined;\n\tquery: QueryResult<QueryData, QueryVariables>;\n}\n\nconst useAudioItemsTaggedWithEntity = ({\n\tentity,\n\tpage = 1,\n\tperPage = 10,\n\tqueryOptions = {},\n}: HookArgs): HookReturnValue => {\n\tconst query = useQuery<QueryData, QueryVariables>(\n\t\tAUDIO_ITEMS_TAGGED_WITH_ENTITY_QUERY,\n\t\t{\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tentityType: entity?.entityType,\n\t\t\t\t\tentityId: entity?.id,\n\t\t\t\t\tskip: (page - 1) * perPage,\n\t\t\t\t\ttake: perPage,\n\t\t\t\t},\n\t\t\t},\n\t\t\tskip: !entity,\n\t\t\t...queryOptions,\n\t\t}\n\t);\n\tconst { data } = query;\n\tconst audioItems = data?.audioItemsTaggedWithEntity?.audioItems;\n\tconst total = data?.audioItemsTaggedWithEntity?.total;\n\n\treturn {\n\t\taudioItems,\n\t\ttotal,\n\t\tquery,\n\t};\n};\n\nexport default useAudioItemsTaggedWithEntity;\n", "import type React from \"react\";\nimport { useState, useCallback, useMemo, useEffect } from \"react\";\nimport type { PerPage, SortBy, ViewAs } from \"~/types\";\n\nimport useQueryParams from \"~/hooks/useQueryParams\";\nimport type { Props as FiltersProps } from \"~/components/Filters\";\nimport Filters from \"~/components/Filters\";\n\ninterface Args {\n\ttotalItems?: number;\n\tdefaultPage?: number; // Starts at 1\n\tdefaultPerPage?: PerPage;\n\tdefaultSortBy?: SortBy;\n\tdefaultViewAs?: ViewAs;\n\tenableQueryParams?: boolean;\n}\ninterface ReturnValue {\n\tFilters: (props: FiltersProps) => React.ReactElement;\n\tfiltersProps: FiltersProps;\n\tpage?: number;\n\tperPage?: PerPage;\n\tsortBy?: SortBy;\n\tviewAs?: ViewAs;\n}\n\n// useFilters takes default values for sortBy and viewAs and returns the Filters\n// component along with props to pass to it, plus the current sortBy and\n// viewAs values.\nconst useFilters = ({\n\ttotalItems,\n\tdefaultPage,\n\tdefaultPerPage,\n\tdefaultSortBy,\n\tdefaultViewAs,\n\tenableQueryParams = true,\n}: Args = {}): ReturnValue => {\n\tconst { getQueryParams, updateQueryParams, clearQueryParams } =\n\t\tuseQueryParams();\n\tconst queryParams = getQueryParams();\n\n\t// If query params are enabled and set in the URL, use them as default values\n\tconst initialPage = enableQueryParams\n\t\t? parseInt(queryParams.page, 10) || defaultPage\n\t\t: defaultPage;\n\tconst initialPerPage = enableQueryParams\n\t\t? parseInt(queryParams.perPage, 10) || defaultPerPage\n\t\t: defaultPerPage;\n\tconst initialSortBy = enableQueryParams\n\t\t? (queryParams.sortBy as SortBy) ?? defaultSortBy\n\t\t: defaultSortBy;\n\tconst initialViewAs = enableQueryParams\n\t\t? (queryParams.viewAs as ViewAs) ?? defaultViewAs\n\t\t: defaultViewAs;\n\n\tconst [page, setPage] = useState<number>(initialPage);\n\tconst [perPage, setPerPage] = useState<number>(initialPerPage);\n\tconst [sortBy, setSortBy] = useState<SortBy>(initialSortBy);\n\tconst [viewAs, setViewAs] = useState<ViewAs>(initialViewAs);\n\n\t// Update query params when state changes\n\tuseEffect(() => {\n\t\tif (!enableQueryParams) {\n\t\t\treturn;\n\t\t}\n\t\tupdateQueryParams({\n\t\t\tpage: page ? `${page}` : null,\n\t\t\tperPage: perPage ? `${perPage}` : null,\n\t\t\tsortBy,\n\t\t\tviewAs,\n\t\t});\n\t}, [enableQueryParams, page, perPage, sortBy, viewAs]);\n\n\t// Clear query params on unmount\n\tuseEffect(() => {\n\t\tif (!enableQueryParams) {\n\t\t\treturn;\n\t\t}\n\t\treturn () => clearQueryParams();\n\t}, [enableQueryParams]);\n\n\tconst onChangePage = useCallback(\n\t\t(event: React.ChangeEvent<HTMLSelectElement>) =>\n\t\t\tsetPage(parseInt(event.target.value)),\n\t\t[]\n\t);\n\tconst onChangePerPage = useCallback(\n\t\t(event: React.ChangeEvent<HTMLSelectElement>) => {\n\t\t\tsetPerPage(parseInt(event.target.value));\n\t\t\tsetPage(1);\n\t\t},\n\t\t[]\n\t);\n\tconst onChangeSortBy = useCallback(\n\t\t(event: React.ChangeEvent<HTMLSelectElement>) =>\n\t\t\tsetSortBy(event.target.value as SortBy),\n\t\t[]\n\t);\n\tconst onChangeViewAs = useCallback(\n\t\t(event: React.ChangeEvent<HTMLSelectElement>) =>\n\t\t\tsetViewAs(event.target.value as ViewAs),\n\t\t[]\n\t);\n\n\tconst returnValue = useMemo(\n\t\t() => ({\n\t\t\tFilters,\n\t\t\tfiltersProps: {\n\t\t\t\ttotalItems,\n\t\t\t\tpage,\n\t\t\t\tonChangePage,\n\t\t\t\tperPage,\n\t\t\t\tonChangePerPage,\n\t\t\t\tsortBy,\n\t\t\t\tonChangeSortBy,\n\t\t\t\tviewAs,\n\t\t\t\tonChangeViewAs,\n\t\t\t},\n\t\t\tpage,\n\t\t\tperPage,\n\t\t\tsortBy,\n\t\t\tviewAs,\n\t\t}),\n\t\t[\n\t\t\tFilters,\n\t\t\ttotalItems,\n\t\t\tpage,\n\t\t\tonChangePage,\n\t\t\tperPage,\n\t\t\tonChangePerPage,\n\t\t\tsortBy,\n\t\t\tonChangeSortBy,\n\t\t\tviewAs,\n\t\t\tonChangeViewAs,\n\t\t]\n\t);\n\n\treturn returnValue;\n};\n\nexport default useFilters;\n", "import { useCallback, useMemo } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\n\ninterface ReturnValue {\n\tgetQueryParams: () => Record<string, string>;\n\tupdateQueryParams: (paramsToUpdate: Record<string, string | null>) => void;\n\tclearQueryParams: () => void;\n}\nconst useQueryParams = (): ReturnValue => {\n\tconst navigate = useNavigate();\n\n\tconst getQueryParams = useCallback(() => {\n\t\tif (typeof window === \"undefined\") {\n\t\t\treturn {};\n\t\t}\n\t\tconst queryParams = new URLSearchParams(window.location.search);\n\t\tconst outputObject = {};\n\t\tfor (const key of queryParams.keys()) {\n\t\t\toutputObject[key] = queryParams.get(key);\n\t\t}\n\t\treturn outputObject;\n\t}, []);\n\n\tconst updateQueryParams = useCallback(\n\t\t(paramsToUpdate: Record<string, string | null> = {}) => {\n\t\t\tif (typeof window === \"undefined\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst queryParams = new URLSearchParams(window.location.search);\n\n\t\t\tconst paramNames = Object.keys(paramsToUpdate);\n\t\t\tparamNames.forEach((paramName) => {\n\t\t\t\tconst value = paramsToUpdate[paramName];\n\t\t\t\tif (value) {\n\t\t\t\t\tqueryParams.set(paramName, value);\n\t\t\t\t} else {\n\t\t\t\t\tqueryParams.delete(paramName);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn navigate(`${window.location.pathname}?${queryParams.toString()}`);\n\t\t},\n\t\t[navigate]\n\t);\n\n\tconst clearQueryParams = useCallback(() => {\n\t\tif (typeof window === \"undefined\") {\n\t\t\treturn;\n\t\t}\n\t\tnavigate(window.location.pathname);\n\t}, [navigate]);\n\n\tconst returnValue = useMemo(\n\t\t() => ({\n\t\t\tgetQueryParams,\n\t\t\tupdateQueryParams,\n\t\t\tclearQueryParams,\n\t\t}),\n\t\t[getQueryParams, updateQueryParams, clearQueryParams]\n\t);\n\n\treturn returnValue;\n};\n\nexport default useQueryParams;\n", "import React, { useMemo } from \"react\";\nimport { PerPage, SortBy, ViewAs } from \"~/types\";\n\nexport interface Props {\n\ttotalItems?: number;\n\tpage?: number;\n\tonChangePage?: (event: React.ChangeEvent<HTMLSelectElement>) => void;\n\tperPage?: PerPage;\n\tonChangePerPage?: (event: React.ChangeEvent<HTMLSelectElement>) => void;\n\tsortBy?: SortBy;\n\tonChangeSortBy?: (event: React.ChangeEvent<HTMLSelectElement>) => void;\n\tviewAs?: ViewAs;\n\tonChangeViewAs?: (event: React.ChangeEvent<HTMLSelectElement>) => void;\n\tclassName?: string;\n}\n\nconst Filters = ({\n\ttotalItems,\n\tpage,\n\tonChangePage,\n\tperPage,\n\tonChangePerPage,\n\tsortBy,\n\tonChangeSortBy,\n\tviewAs,\n\tonChangeViewAs,\n\tclassName,\n}: Props) => {\n\tconst shouldRenderPagination =\n\t\ttypeof totalItems === \"number\" &&\n\t\ttypeof page === \"number\" &&\n\t\tonChangePage &&\n\t\tperPage &&\n\t\tonChangePerPage;\n\tconst shouldRenderSortBy = sortBy && onChangeSortBy;\n\tconst shouldRenderViewAs = viewAs && onChangeViewAs;\n\n\tconst totalPages = useMemo<number>(() => {\n\t\tif (typeof totalItems !== \"number\" || typeof perPage === \"undefined\") {\n\t\t\treturn 0;\n\t\t}\n\t\treturn Math.ceil(totalItems / perPage);\n\t}, [totalItems, perPage]);\n\n\tconst pageSelectOptions = useMemo(() => {\n\t\tconst output: React.ReactNode[] = [];\n\t\tlet i = 1;\n\t\twhile (i <= totalPages) {\n\t\t\toutput.push(\n\t\t\t\t<option value={i} key={i}>\n\t\t\t\t\t{i}\n\t\t\t\t</option>\n\t\t\t);\n\t\t\ti++;\n\t\t}\n\t\treturn output;\n\t}, [totalPages]);\n\n\tconst perPageOptions = useMemo(() => {\n\t\tconst output: React.ReactNode[] = [];\n\t\tfor (const value in PerPage) {\n\t\t\tif (isNaN(Number(value))) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\toutput.push(\n\t\t\t\t<option value={value} key={value}>\n\t\t\t\t\t{value}\n\t\t\t\t</option>\n\t\t\t);\n\t\t}\n\t\treturn output;\n\t}, []);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-col md:flex-row flex-wrap justify-start items-start md:items-center text-gray-500 ${\n\t\t\t\tclassName ?? \"\"\n\t\t\t}`}\n\t\t>\n\t\t\t{shouldRenderPagination && (\n\t\t\t\t<div\n\t\t\t\t\tclassName={`flex flex-row items-center mr-0 md:mb-0 ${\n\t\t\t\t\t\tshouldRenderSortBy || shouldRenderViewAs ? \"mb-4 md:mr-6\" : \"\"\n\t\t\t\t\t}`}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"mr-6\">\n\t\t\t\t\t\tPage{\" \"}\n\t\t\t\t\t\t<select value={page} onChange={onChangePage}>\n\t\t\t\t\t\t\t{pageSelectOptions}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t{totalPages ? ` of ${totalPages}` : \"\"}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<select value={perPage} onChange={onChangePerPage}>\n\t\t\t\t\t\t\t{perPageOptions}\n\t\t\t\t\t\t</select>{\" \"}\n\t\t\t\t\t\tper page\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{shouldRenderSortBy && (\n\t\t\t\t<div\n\t\t\t\t\tclassName={`flex flex-row items-center mr-0 md:mb-0 ${\n\t\t\t\t\t\tshouldRenderViewAs ? \"mb-4 md:mr-6\" : \"\"\n\t\t\t\t\t}`}\n\t\t\t\t>\n\t\t\t\t\tSort by\n\t\t\t\t\t<select className=\"ml-1\" value={sortBy} onChange={onChangeSortBy}>\n\t\t\t\t\t\t<option value={SortBy.RecentlyTagged}>Recently tagged</option>\n\t\t\t\t\t\t<option value={SortBy.RecentlyAdded}>Recently added</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{shouldRenderViewAs && (\n\t\t\t\t<div className=\"flex flex-row items-center mr-0 md:mb-0\">\n\t\t\t\t\tView as\n\t\t\t\t\t<select className=\"ml-1\" value={viewAs} onChange={onChangeViewAs}>\n\t\t\t\t\t\t<option value={ViewAs.Cards}>Cards</option>\n\t\t\t\t\t\t<option value={ViewAs.Compact}>Compact</option>\n\t\t\t\t\t\t<option value={ViewAs.List}>List</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default Filters;\n", "import { useQuery } from \"@apollo/client\";\nimport { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Collection } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport { COLLECTION_QUERY } from \"~/routes/entities/collections/[slug]\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\n\nconst CollectionAbout = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery<{\n\t\tcollection: Collection;\n\t}>(COLLECTION_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst isLoading = !data && !error;\n\tconst { name, description, aliases, itmaAtomSlug } = data?.collection ?? {};\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - About`}>\n\t\t\t{isLoading && <LoadingBlock />}\n\t\t\t{error && <div className=\"text-red-500\">{error.message}</div>}\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Collections\", href: \"/entities/collections\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/collections/${slug}` },\n\t\t\t\t\t\t\t{ label: \"About\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{itmaAtomSlug && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\t<div className=\"italic text-gray-500\">\n\t\t\t\t\t\t\t\tThis was sourced from ITMA's AtoM archive\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={`https://itma-atom.arkivum.net/index.php/${itmaAtomSlug}`}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView on AtoM <i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{description && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tDescription:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500 whitespace-pre-wrap\">\n\t\t\t\t\t\t\t\t{description}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{aliases && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tAliases:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{aliases}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<Link to={`/entities/collections/${slug}/edit`}>Edit</Link>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default CollectionAbout;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport { EntityFragments } from \"~/fragments\";\nimport type { Collection } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\nexport const COLLECTION_QUERY = gql`\n\tquery Collection($slug: String!) {\n\t\tcollection(slug: $slug) {\n\t\t\t...Collection\n\t\t}\n\t}\n\t${EntityFragments.collection}\n`;\n\nconst ViewCollectionBySlug = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data: collectionData, error: collectionError } = useQuery<{\n\t\tcollection: Collection;\n\t}>(COLLECTION_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst { collection } = collectionData ?? {};\n\n\tlet statusMessage;\n\tif (!collectionData && !collectionError) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!collectionData && collectionError) {\n\t\tstatusMessage = `Error fetching Collection with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${collection.name}`}>\n\t\t\t<ViewEntityAndAudioItems entity={collection} />\n\t\t</Layout>\n\t);\n};\n\nexport default ViewCollectionBySlug;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { Collection } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport RequireUser from \"~/components/RequireUser\";\nimport EditCollectionForm from \"~/components/EditCollectionForm\";\n\nconst COLLECTION_QUERY = gql`\n\tquery Collection($slug: String!) {\n\t\tcollection(slug: $slug) {\n\t\t\t...Collection\n\t\t}\n\t}\n\t${EntityFragments.collection}\n`;\n\nconst CollectionEdit = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery(COLLECTION_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\n\tconst onEditSuccess = (collection: Collection) => {\n\t\tnavigate(`/entities/collections/${collection.slug}/about`);\n\t};\n\n\tlet statusMessage;\n\tif (!data && !error) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!data && error) {\n\t\tstatusMessage = `Error fetching Collection with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\tconst { collection } = data;\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Edit Collection: {collection.name}</h1>\n\t\t\t\t\t<EditCollectionForm\n\t\t\t\t\t\tcollection={collection}\n\t\t\t\t\t\tonSuccess={onEditSuccess}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default CollectionEdit;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\nimport type { Collection } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nconst UPDATE_COLLECTION_MUTATION = gql`\n\tmutation UpdateCollection($slug: String!, $input: UpdateCollectionInput!) {\n\t\tupdateCollection(slug: $slug, input: $input) {\n\t\t\t...Collection\n\t\t}\n\t}\n\t${EntityFragments.collection}\n`;\ninterface UpdateCollectionVariables {\n\tslug: string;\n\tinput: {\n\t\taliases?: string;\n\t\tdescription?: string;\n\t};\n}\ninterface Props {\n\tcollection: Collection;\n\tonSuccess?: (collection: Collection) => void;\n}\nconst EditCollectionForm = ({ collection, onSuccess }: Props) => {\n\tconst navigate = useNavigate();\n\n\tconst [updateCollection, { loading, error, data }] = useMutation<\n\t\t{ updateCollection: Collection },\n\t\tUpdateCollectionVariables\n\t>(UPDATE_COLLECTION_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\n\tconst [name, setName] = useState(collection.name);\n\tconst [aliases, setAliases] = useState(collection.aliases);\n\tconst [description, setDescription] = useState(collection.description);\n\n\tconst onUpdateCollection = (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tname,\n\t\t\taliases,\n\t\t\tdescription,\n\t\t};\n\t\tupdateCollection({ variables: { slug: collection.slug, input } });\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.updateCollection) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.updateCollection);\n\t\t\t}\n\t\t\twindow.alert(\"Collection updated successfully!\");\n\t\t}\n\t}, [data, navigate]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onUpdateCollection}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(event) => setName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases ?? \"\"}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Collection. For example:{\" \"}\n\t\t\t\t\t\t<em>O'Neill's, 1000 Fiddle Tunes</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={10}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Save\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default EditCollectionForm;\n", "import { useQuery } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Collection } from \"~/types\";\nimport TagService from \"~/services/Tag\";\nimport { COLLECTION_QUERY } from \"~/routes/entities/collections/[slug]\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport TagWithRelationshipToObject from \"~/components/TagWithRelationshipToObject\";\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\n\nconst CollectionTags = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error, refetch } = useQuery<{\n\t\tcollection: Collection;\n\t}>(COLLECTION_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst isLoading = !data && !error;\n\tconst { collection } = data ?? {};\n\tconst { name, tags } = collection ?? {};\n\tconst sortedTags = TagService.sort(tags);\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - Tags`}>\n\t\t\t{isLoading && <LoadingBlock />}\n\t\t\t{error && <div className=\"text-red-500\">{error.message}</div>}\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Collections\", href: \"/entities/collections\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/collections/${slug}` },\n\t\t\t\t\t\t\t{ label: \"Tags\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{sortedTags.map((tag, index) => (\n\t\t\t\t\t\t<TagWithRelationshipToObject\n\t\t\t\t\t\t\ttag={tag}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<AddTagButton entity={collection} onSuccess={refetch} />\n\t\t\t\t\t\t{sortedTags.length > 0 && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<span className=\"text-gray-500 px-2\">/</span>\n\t\t\t\t\t\t\t\t<EditTagsButton entity={collection} onSuccess={refetch} />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default CollectionTags;\n", "import { Link } from \"@remix-run/react\";\n\nimport { Tag } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport DateTimeService from \"~/services/DateTime\";\n\ninterface Props {\n\ttag: Tag;\n\tclassName?: string;\n}\n\n// TagWithRelationshipToObject renders a Tag in the format \"taught PERSON Billy\n// McComiskey\", displaying the relationship from the subject entity to an object\n// entity.\nconst TagWithRelationshipToObject = ({ tag, className }: Props) => {\n\tconst { relationship, objectEntity, subjectTimeMarkerSeconds } = tag;\n\n\tif (!objectEntity) {\n\t\treturn null;\n\t}\n\n\tconst shouldShowTimeMarker = typeof subjectTimeMarkerSeconds === \"number\";\n\n\treturn (\n\t\t<div className={`text-gray-500 ${className ?? \"\"}`}>\n\t\t\t<em>{relationship.name}</em>\n\t\t\t<br />\n\t\t\t<span className=\"uppercase text-sm\">{objectEntity.entityType}</span>\n\t\t\t<br />\n\t\t\t<Link to={EntityService.makeHrefForView(objectEntity)}>\n\t\t\t\t{objectEntity.name}\n\t\t\t</Link>\n\t\t\t<br />\n\t\t\t{typeof subjectTimeMarkerSeconds === \"number\" && (\n\t\t\t\t<em>\n\t\t\t\t\t{`at ${DateTimeService.formatSecondsAsDuration(\n\t\t\t\t\t\tsubjectTimeMarkerSeconds\n\t\t\t\t\t)}`}\n\t\t\t\t</em>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default TagWithRelationshipToObject;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport { EntityFragments } from \"~/fragments\";\nimport type { Instrument } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\nexport const INSTRUMENT_QUERY = gql`\n\tquery Instrument($slug: String!) {\n\t\tinstrument(slug: $slug) {\n\t\t\t...Instrument\n\t\t}\n\t}\n\t${EntityFragments.instrument}\n`;\n\nconst ViewInstrumentBySlug = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data: instrumentData, error: instrumentError } = useQuery<{\n\t\tinstrument: Instrument;\n\t}>(INSTRUMENT_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst { instrument } = instrumentData ?? {};\n\n\tlet statusMessage;\n\tif (!instrumentData && !instrumentError) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!instrumentData && instrumentError) {\n\t\tstatusMessage = `Error fetching Instrument with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${instrument.name}`}>\n\t\t\t<ViewEntityAndAudioItems entity={instrument} />\n\t\t</Layout>\n\t);\n};\n\nexport default ViewInstrumentBySlug;\n", "import { useQuery } from \"@apollo/client\";\nimport { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Instrument } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport { INSTRUMENT_QUERY } from \"~/routes/entities/instruments/[slug]\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst InstrumentAbout = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery<{\n\t\tinstrument: Instrument;\n\t}>(INSTRUMENT_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst isLoading = !data && !error;\n\tconst { name, description, aliases } = data?.instrument ?? {};\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - About`}>\n\t\t\t{isLoading && <LoadingBlock />}\n\t\t\t{error && <div className=\"text-red-500\">{error.message}</div>}\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Instruments\", href: \"/entities/instruments\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/instruments/${slug}` },\n\t\t\t\t\t\t\t{ label: \"About\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\t\t\t\t\t{description && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tDescription:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500 whitespace-pre-wrap\">\n\t\t\t\t\t\t\t\t{description}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{aliases && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tAliases:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{aliases}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<Link to={`/entities/instruments/${slug}/edit`}>Edit</Link>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default InstrumentAbout;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport { EntityFragments } from \"~/fragments\";\nimport type { Instrument } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\nexport const INSTRUMENT_QUERY = gql`\n\tquery Instrument($slug: String!) {\n\t\tinstrument(slug: $slug) {\n\t\t\t...Instrument\n\t\t}\n\t}\n\t${EntityFragments.instrument}\n`;\n\nconst ViewInstrumentBySlug = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data: instrumentData, error: instrumentError } = useQuery<{\n\t\tinstrument: Instrument;\n\t}>(INSTRUMENT_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst { instrument } = instrumentData ?? {};\n\n\tlet statusMessage;\n\tif (!instrumentData && !instrumentError) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!instrumentData && instrumentError) {\n\t\tstatusMessage = `Error fetching Instrument with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${instrument.name}`}>\n\t\t\t<ViewEntityAndAudioItems entity={instrument} />\n\t\t</Layout>\n\t);\n};\n\nexport default ViewInstrumentBySlug;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { Instrument } from \"types\";\nimport { EntityFragments } from \"~/fragments\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport RequireUser from \"~/components/RequireUser\";\nimport EditInstrumentForm from \"~/components/EditInstrumentForm\";\n\nconst INSTRUMENT_QUERY = gql`\n\tquery Instrument($slug: String!) {\n\t\tinstrument(slug: $slug) {\n\t\t\t...Instrument\n\t\t}\n\t}\n\t${EntityFragments.instrument}\n`;\n\nconst EditInstrument = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery(INSTRUMENT_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\n\tconst onEditSuccess = (instrument: Instrument) => {\n\t\tnavigate(`/entities/instruments/${instrument.slug}`);\n\t};\n\n\tlet statusMessage;\n\tif (!data && !error) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!data && error) {\n\t\tstatusMessage = `Error fetching Instrument with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\tconst { instrument } = data;\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Edit Instrument: {instrument.name}</h1>\n\t\t\t\t\t<EditInstrumentForm\n\t\t\t\t\t\tinstrument={instrument}\n\t\t\t\t\t\tonSuccess={onEditSuccess}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default EditInstrument;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\nimport type { Instrument } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nconst UPDATE_INSTRUMENT_MUTATION = gql`\n\tmutation UpdateInstrument($slug: String!, $input: UpdateInstrumentInput!) {\n\t\tupdateInstrument(slug: $slug, input: $input) {\n\t\t\t...Instrument\n\t\t}\n\t}\n\t${EntityFragments.instrument}\n`;\ninterface UpdateInstrumentVariables {\n\tslug: string;\n\tinput: {\n\t\tname?: string;\n\t\taliases?: string;\n\t\tdescription?: string;\n\t};\n}\ninterface Props {\n\tinstrument: Instrument;\n\tonSuccess?: (instrument: Instrument) => void;\n}\nconst EditInstrumentForm = ({ instrument, onSuccess }: Props) => {\n\tconst navigate = useNavigate();\n\n\tconst [updateInstrument, { loading, error, data }] = useMutation<\n\t\t{ updateInstrument: Instrument },\n\t\tUpdateInstrumentVariables\n\t>(UPDATE_INSTRUMENT_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\n\tconst [name, setName] = useState(instrument.name);\n\tconst [aliases, setAliases] = useState(instrument.aliases);\n\tconst [description, setDescription] = useState(instrument.description);\n\n\tconst onUpdateInstrument = (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tname,\n\t\t\taliases,\n\t\t\tdescription,\n\t\t};\n\t\tupdateInstrument({ variables: { slug: instrument.slug, input } });\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.updateInstrument) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.updateInstrument);\n\t\t\t}\n\t\t\twindow.alert(\"Instrument updated successfully!\");\n\t\t}\n\t}, [data, navigate]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onUpdateInstrument}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(event) => setName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Instrument. For example:{\" \"}\n\t\t\t\t\t\t<em>Stomach Steinway, Squeezebox, Belly Organ</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={10}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Save\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default EditInstrumentForm;\n", "import { useQuery } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Instrument } from \"~/types\";\nimport TagService from \"~/services/Tag\";\nimport { INSTRUMENT_QUERY } from \"~/routes/entities/instruments/[slug]\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport TagWithRelationshipToObject from \"~/components/TagWithRelationshipToObject\";\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\n\nconst InstrumentTags = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error, refetch } = useQuery<{\n\t\tinstrument: Instrument;\n\t}>(INSTRUMENT_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst isLoading = !data && !error;\n\tconst { instrument } = data ?? {};\n\tconst { name, tags } = instrument ?? {};\n\tconst sortedTags = TagService.sort(tags);\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - Tags`}>\n\t\t\t{isLoading && <LoadingBlock />}\n\t\t\t{error && <div className=\"text-red-500\">{error.message}</div>}\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Instruments\", href: \"/entities/instruments\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/instruments/${slug}` },\n\t\t\t\t\t\t\t{ label: \"Tags\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{sortedTags.map((tag, index) => (\n\t\t\t\t\t\t<TagWithRelationshipToObject\n\t\t\t\t\t\t\ttag={tag}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<AddTagButton entity={instrument} onSuccess={refetch} />\n\t\t\t\t\t\t{sortedTags.length > 0 && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<span className=\"text-gray-500 px-2\">/</span>\n\t\t\t\t\t\t\t\t<EditTagsButton entity={instrument} onSuccess={refetch} />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default InstrumentTags;\n", "import { useEffect } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nconst ViewAudioItems = () => {\n\tconst navigate = useNavigate();\n\n\tuseEffect(() => {\n\t\tnavigate(\"/\");\n\t}, [navigate]);\n\n\treturn null;\n};\n\nexport default ViewAudioItems;\n", "import { Link } from \"@remix-run/react\";\n\nimport useCollections from \"~/hooks/useCollections\";\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst Collections = () => {\n\tconst [collections, { loading, error }, fetchNextPage] = useCollections({\n\t\tresultsPerPage: 50,\n\t});\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - Collections`}>\n\t\t\t<h1 className=\"mb-6\">Collections</h1>\n\t\t\t{!loading && error && (\n\t\t\t\t<div className=\"text-red-600\">Error fetching Collections</div>\n\t\t\t)}\n\t\t\t{!loading && collections?.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No Collections found</div>\n\t\t\t)}\n\t\t\t{collections?.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{collections.map((collection, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(collection)}>\n\t\t\t\t\t\t\t\t{collection.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t\t<div className=\"mt-6\">\n\t\t\t\t{loading && <LoadingBlock />}\n\t\t\t\t{!loading && collections?.length > 0 && (\n\t\t\t\t\t<button className=\"btn-text\" onClick={fetchNextPage}>\n\t\t\t\t\t\tLoad More\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</Layout>\n\t);\n};\n\nexport default Collections;\n", "import { useEffect, useCallback, useState } from \"react\";\nimport type { LazyQueryResult, LazyQueryHookOptions } from \"@apollo/client\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\nimport type { Collection } from \"~/types\";\nimport { SortBy } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nexport const COLLECTIONS_QUERY = gql`\n\tquery Collections($input: CollectionsInput!) {\n\t\tcollections(input: $input) {\n\t\t\t...Collection\n\t\t}\n\t}\n\t${EntityFragments.collection}\n`;\n\ninterface QueryData {\n\tcollections: Collection[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\ttake?: number;\n\t\tskip?: number;\n\t\tsortBy?: SortBy;\n\t};\n}\ninterface HookArgs {\n\tsortBy?: SortBy;\n\tresultsPerPage?: number;\n\tqueryOptions?: LazyQueryHookOptions<QueryData, QueryVariables>;\n}\ntype HookReturnValue = [\n\tCollection[] | undefined,\n\tLazyQueryResult<QueryData, {}>,\n\t() => void\n];\n\nconst useCollections = ({\n\tsortBy = SortBy.AToZ,\n\tresultsPerPage = 20,\n\tqueryOptions = {},\n}: HookArgs = {}): HookReturnValue => {\n\tconst [skip, setSkip] = useState(0);\n\tconst [collections, setCollections] = useState<Collection[] | undefined>();\n\n\tconst [getCollections, collectionsQuery] = useLazyQuery<\n\t\tQueryData,\n\t\tQueryVariables\n\t>(COLLECTIONS_QUERY, {\n\t\tnotifyOnNetworkStatusChange: true,\n\t\t...queryOptions,\n\t});\n\tconst { data, fetchMore } = collectionsQuery;\n\tuseEffect(() => {\n\t\t// Avoid bug with Apollo Client where it makes an extra network request\n\t\t// with original variables after `fetchMore` is called, thus leading to\n\t\t// `data` briefly being `undefined`.\n\t\t// https://github.com/apollographql/apollo-client/issues/6916\n\t\tif (data?.collections) {\n\t\t\tsetCollections(data.collections);\n\t\t}\n\t}, [data]);\n\n\tuseEffect(() => {\n\t\tgetCollections({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\ttake: resultsPerPage + skip,\n\t\t\t\t\tskip: 0,\n\t\t\t\t\tsortBy,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}, [getCollections, resultsPerPage, sortBy]);\n\n\tconst fetchNextPageOfCollections = useCallback(async () => {\n\t\tconst numToSkip = collections?.length ?? 0;\n\t\tawait fetchMore({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\ttake: resultsPerPage,\n\t\t\t\t\tskip: numToSkip,\n\t\t\t\t\tsortBy,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tsetSkip(numToSkip);\n\t}, [fetchMore, resultsPerPage, collections, sortBy]);\n\n\treturn [collections, collectionsQuery, fetchNextPageOfCollections];\n};\n\nexport default useCollections;\n", "import { Link } from \"@remix-run/react\";\n\nimport useInstruments from \"~/hooks/useInstruments\";\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst Instruments = () => {\n\tconst [instruments, { loading, error }, fetchNextPage] = useInstruments({\n\t\tresultsPerPage: 50,\n\t});\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - Instruments`}>\n\t\t\t<h1 className=\"mb-6\">Instruments</h1>\n\t\t\t{!loading && error && (\n\t\t\t\t<div className=\"text-red-600\">Error fetching Instruments</div>\n\t\t\t)}\n\t\t\t{!loading && instruments?.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No Instruments found</div>\n\t\t\t)}\n\t\t\t{instruments?.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{instruments.map((instrument, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(instrument)}>\n\t\t\t\t\t\t\t\t{instrument.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t\t<div className=\"mt-6\">\n\t\t\t\t{loading && <LoadingBlock />}\n\t\t\t\t{!loading && instruments?.length > 0 && (\n\t\t\t\t\t<button className=\"btn-text\" onClick={fetchNextPage}>\n\t\t\t\t\t\tLoad More\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</Layout>\n\t);\n};\n\nexport default Instruments;\n", "import { useEffect, useCallback, useState } from \"react\";\nimport type { LazyQueryHookOptions, LazyQueryResult } from \"@apollo/client\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\nimport type { Instrument } from \"~/types\";\nimport { SortBy } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nexport const INSTRUMENTS_QUERY = gql`\n\tquery Instruments($input: InstrumentsInput!) {\n\t\tinstruments(input: $input) {\n\t\t\t...Instrument\n\t\t}\n\t}\n\t${EntityFragments.instrument}\n`;\n\ninterface QueryData {\n\tinstruments: Instrument[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\ttake?: number;\n\t\tskip?: number;\n\t\tsortBy?: SortBy;\n\t};\n}\ninterface HookArgs {\n\tsortBy?: SortBy;\n\tresultsPerPage?: number;\n\tqueryOptions?: LazyQueryHookOptions<QueryData, QueryVariables>;\n}\ntype HookReturnValue = [\n\tInstrument[] | undefined,\n\tLazyQueryResult<QueryData, {}>,\n\t() => void\n];\n\nconst useInstruments = ({\n\tsortBy = SortBy.AToZ,\n\tresultsPerPage = 20,\n\tqueryOptions = {},\n}: HookArgs = {}): HookReturnValue => {\n\tconst [skip, setSkip] = useState(0);\n\tconst [instruments, setInstruments] = useState<Instrument[] | undefined>();\n\n\t// Reset values when sortBy changes\n\tuseEffect(() => {\n\t\tsetInstruments(undefined);\n\t\tsetSkip(0);\n\t}, [sortBy]);\n\n\tconst [getInstruments, instrumentsQuery] = useLazyQuery<\n\t\tQueryData,\n\t\tQueryVariables\n\t>(INSTRUMENTS_QUERY, {\n\t\tnotifyOnNetworkStatusChange: true,\n\t\t...queryOptions,\n\t});\n\tconst { data, fetchMore } = instrumentsQuery;\n\tuseEffect(() => {\n\t\t// Avoid bug with Apollo Client where it makes an extra network request\n\t\t// with original variables after `fetchMore` is called, thus leading to\n\t\t// `data` briefly being `undefined`.\n\t\t// https://github.com/apollographql/apollo-client/issues/6916\n\t\tif (data?.instruments) {\n\t\t\tsetInstruments(data.instruments);\n\t\t}\n\t}, [data]);\n\n\tuseEffect(() => {\n\t\tgetInstruments({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tsortBy,\n\t\t\t\t\ttake: resultsPerPage + skip,\n\t\t\t\t\tskip: 0,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}, [getInstruments, resultsPerPage, sortBy, skip]);\n\n\tconst fetchNextPage = useCallback(async () => {\n\t\tconst numToSkip = instruments?.length ?? 0;\n\t\tawait fetchMore({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tsortBy,\n\t\t\t\t\ttake: resultsPerPage,\n\t\t\t\t\tskip: numToSkip,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tsetSkip(numToSkip);\n\t}, [fetchMore, resultsPerPage, instruments, sortBy]);\n\n\treturn [instruments, instrumentsQuery, fetchNextPage];\n};\n\nexport default useInstruments;\n", "import { Link } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport { Submission } from \"~/types\";\nimport { SubmissionFragments } from \"~/fragments\";\nimport DateTimeService from \"~/services/DateTime\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst SUBMISSIONS_FOR_CURRENT_USER = gql`\n\tquery SubmissionsForCurrentUser {\n\t\tsubmissionsForCurrentUser {\n\t\t\t...Submission\n\t\t}\n\t}\n\t${SubmissionFragments.submission}\n`;\n\ninterface SubmissionsData {\n\tsubmissionsForCurrentUser: Submission[];\n}\n\nconst Submissions = () => {\n\tconst { data, loading } = useQuery<SubmissionsData>(\n\t\tSUBMISSIONS_FOR_CURRENT_USER,\n\t\t{ fetchPolicy: \"cache-and-network\" }\n\t);\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<Breadcrumb\n\t\t\t\t\titems={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Account\",\n\t\t\t\t\t\t\thref: \"/account\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: \"Submissions\" },\n\t\t\t\t\t]}\n\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t/>\n\t\t\t\t<Link to=\"/account/submissions/new\">\n\t\t\t\t\t<a className=\"btn\">Create New</a>\n\t\t\t\t</Link>\n\n\t\t\t\t{!data && loading && <LoadingBlock className=\"mt-12\" />}\n\n\t\t\t\t{data && (\n\t\t\t\t\t<ul className=\"mt-12\">\n\t\t\t\t\t\t{data.submissionsForCurrentUser.map((s, index) => (\n\t\t\t\t\t\t\t<li className=\"mb-4\" key={index}>\n\t\t\t\t\t\t\t\t{DateTimeService.formatDateYearTime(s.createdAt, true)} (\n\t\t\t\t\t\t\t\t{s.materialTypes.join(\", \")}) - Status: {s.status}\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<span className=\"text-gray-500\">\n\t\t\t\t\t\t\t\t\t{`${s.description.substring(0, 200)}${\n\t\t\t\t\t\t\t\t\t\ts.description.length > 200 ? \"...\" : \"\"\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<Link to={`/account/submissions/${s.id}/upload`}>\n\t\t\t\t\t\t\t\t\tUpload More Files to This Submission\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t)}\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default Submissions;\n", "import { useNavigate } from \"@remix-run/react\";\nimport type { AudioItem } from \"types\";\n\nimport useAudioItems from \"~/hooks/useAudioItems\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireAdmin from \"~/components/RequireAdmin\";\nimport CreateAudioItemForm from \"~/components/CreateAudioItemForm\";\n\nconst NewAudioItem = () => {\n\tconst navigate = useNavigate();\n\tconst [_, { refetch }] = useAudioItems();\n\n\tconst onCreateSuccess = async (audioItem: AudioItem) => {\n\t\tawait refetch();\n\t\tnavigate(`/entities/audio-items/${audioItem.slug}`);\n\t};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireAdmin>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Create Audio Item</h1>\n\t\t\t\t\t<CreateAudioItemForm onSuccess={onCreateSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireAdmin>\n\t\t</Layout>\n\t);\n};\n\nexport default NewAudioItem;\n", "import { useEffect, useCallback, useState } from \"react\";\nimport type { LazyQueryHookOptions, LazyQueryResult } from \"@apollo/client\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\nimport type { AudioItem } from \"~/types\";\nimport { EntityStatus, SortBy } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nexport const AUDIO_ITEMS_QUERY = gql`\n\tquery AudioItems($input: AudioItemsInput!) {\n\t\taudioItems(input: $input) {\n\t\t\t...AudioItem\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n`;\n\ninterface QueryData {\n\taudioItems: AudioItem[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\ttake?: number;\n\t\tskip?: number;\n\t\tstatus?: EntityStatus;\n\t\tsortBy?: SortBy;\n\t};\n}\ninterface HookArgs {\n\tsortBy?: SortBy;\n\tresultsPerPage?: number;\n\tqueryOptions?: LazyQueryHookOptions<QueryData, QueryVariables>;\n}\n\nconst useAudioItems = ({\n\tsortBy = SortBy.RecentlyTagged,\n\tresultsPerPage = 10,\n\tqueryOptions = {},\n}: HookArgs = {}): [\n\tAudioItem[] | undefined,\n\tLazyQueryResult<QueryData, {}>,\n\t() => void\n] => {\n\tconst [skip, setSkip] = useState(0);\n\tconst [audioItems, setAudioItems] = useState<AudioItem[] | undefined>();\n\n\t// Reset values when sortBy changes\n\tuseEffect(() => {\n\t\tsetAudioItems(undefined);\n\t\tsetSkip(0);\n\t}, [sortBy]);\n\n\tconst [getAudioItems, audioItemsQuery] = useLazyQuery<\n\t\tQueryData,\n\t\tQueryVariables\n\t>(AUDIO_ITEMS_QUERY, {\n\t\tnotifyOnNetworkStatusChange: true,\n\t\t...queryOptions,\n\t});\n\tconst { data, fetchMore } = audioItemsQuery;\n\tuseEffect(() => {\n\t\t// Avoid bug with Apollo Client where it makes an extra network request\n\t\t// with original variables after `fetchMore` is called, thus leading to\n\t\t// `data` briefly being `undefined`.\n\t\t// https://github.com/apollographql/apollo-client/issues/6916\n\t\tif (data?.audioItems) {\n\t\t\tsetAudioItems(data.audioItems);\n\t\t}\n\t}, [data]);\n\n\tuseEffect(() => {\n\t\tgetAudioItems({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tsortBy,\n\t\t\t\t\ttake: resultsPerPage + skip,\n\t\t\t\t\tskip: 0,\n\t\t\t\t\tstatus: EntityStatus.Published,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}, [getAudioItems, resultsPerPage, sortBy, skip]);\n\n\tconst fetchNextPage = useCallback(async () => {\n\t\tconst numToSkip = audioItems?.length ?? 0;\n\t\tawait fetchMore({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tsortBy,\n\t\t\t\t\ttake: resultsPerPage,\n\t\t\t\t\tstatus: EntityStatus.Published,\n\t\t\t\t\tskip: numToSkip,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tsetSkip(numToSkip);\n\t}, [fetchMore, resultsPerPage, audioItems, sortBy]);\n\n\treturn [audioItems, audioItemsQuery, fetchNextPage];\n};\n\nexport default useAudioItems;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { AudioItem } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport EntityService from \"~/services/Entity\";\n\nconst CREATE_AUDIO_ITEM_MUTATION = gql`\n\tmutation CreateAudioItem($input: CreateAudioItemInput!) {\n\t\tcreateAudioItem(input: $input) {\n\t\t\t...AudioItem\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n`;\n\ninterface Props {\n\tonSuccess?: (audioItem: AudioItem) => void;\n}\ninterface CreateAudioItemInput {\n\tname: string;\n\turlSource: string;\n\tslug: string;\n\taliases?: string;\n\tdescription?: string;\n}\n\nconst CreateAudioItemForm = ({ onSuccess }: Props) => {\n\tconst [createAudioItem, { loading, error, data }] = useMutation<\n\t\t{ createAudioItem: AudioItem },\n\t\t{ input: CreateAudioItemInput }\n\t>(CREATE_AUDIO_ITEM_MUTATION, { errorPolicy: \"all\" });\n\n\tconst [name, setName] = useState(\"\");\n\tconst [urlSource, setUrlSource] = useState(\"\");\n\tconst [slug, setSlug] = useState(\"\");\n\tconst [aliases, setAliases] = useState(\"\");\n\tconst [description, setDescription] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tconst proposedSlug = EntityService.cleanSlug(name ?? \"\");\n\t\tsetSlug(proposedSlug);\n\t}, [name]);\n\n\tconst onCreateAudioItem = (event) => {\n\t\tevent.preventDefault();\n\t\tcreateAudioItem({\n\t\t\tvariables: { input: { name, urlSource, slug, aliases, description } },\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.createAudioItem) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.createAudioItem);\n\t\t\t}\n\t\t\twindow.alert(\"Audio Item created successfully!\");\n\t\t\tsetName(\"\");\n\t\t\tsetUrlSource(\"\");\n\t\t\tsetSlug(\"\");\n\t\t\tsetAliases(\"\");\n\t\t\tsetDescription(\"\");\n\t\t}\n\t}, [data]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onCreateAudioItem}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(event) => setName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"URL of Source File (ie. https://www.example.com/file.mp3)\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={urlSource}\n\t\t\t\t\t\tonChange={(event) => setUrlSource(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"URL slug (ie. finbarr-dwyer-live-at-dolans)\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={slug}\n\t\t\t\t\t\tonChange={(event) => setSlug(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tThis will be used for the URL of this AudioItem, for example{\" \"}\n\t\t\t\t\t\t{`https://trad-archive.com/entities/audio-items/${\n\t\t\t\t\t\t\tslug || \"finbarr-dwyer-live-at-dolans\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this AudioItem. For example:{\" \"}\n\t\t\t\t\t\t<em>Finbarr and Brian, Finbarr '08 at Dolan's</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={5}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Create\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600 mb-4\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default CreateAudioItemForm;\n", "import { useNavigate } from \"@remix-run/react\";\n\nimport type { Collection } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\nimport CreateCollectionForm from \"~/components/CreateCollectionForm\";\n\nconst NewCollection = () => {\n\tconst navigate = useNavigate();\n\n\tconst onCreateSuccess = (collection: Collection) => {\n\t\tnavigate(`/entities/collections/${collection.slug}`);\n\t};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Create Collection</h1>\n\t\t\t\t\t<CreateCollectionForm onSuccess={onCreateSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default NewCollection;\n", "import { useNavigate } from \"@remix-run/react\";\n\nimport type { Instrument } from \"types\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\nimport CreateInstrumentForm from \"~/components/CreateInstrumentForm\";\n\nconst NewInstrument = () => {\n\tconst navigate = useNavigate();\n\n\tconst onCreateSuccess = (instrument: Instrument) => {\n\t\tnavigate(`/entities/instruments/${instrument.slug}`);\n\t};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Create Instrument</h1>\n\t\t\t\t\t<CreateInstrumentForm onSuccess={onCreateSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default NewInstrument;\n", "import { useNavigate } from \"@remix-run/react\";\n\nimport { Submission } from \"~/types\";\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport CreateSubmissionForm from \"~/components/CreateSubmissionForm\";\n\nconst SubmissionsNew = () => {\n\tconst navigate = useNavigate();\n\n\tconst onCreateSuccess = (submission: Submission) => {\n\t\tnavigate(`/account/submissions/${submission.id}/upload`);\n\t};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<Breadcrumb\n\t\t\t\t\titems={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Account\",\n\t\t\t\t\t\t\thref: \"/account\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Submissions\",\n\t\t\t\t\t\t\thref: \"/account/submissions\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: \"Create a New Submission\" },\n\t\t\t\t\t]}\n\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t/>\n\t\t\t\t<div className=\"max-w-full md:max-w-xl\">\n\t\t\t\t\t<div className=\"mb-6 text-gray-500\">\n\t\t\t\t\t\tWelcome! Please use this page if you would like to submit material\n\t\t\t\t\t\tto be considered for acceptance into ITMA's permanent collection.\n\t\t\t\t\t\tSubmission is easy: just fill in the form below to provide\n\t\t\t\t\t\tinformation about the sound recordings, videos, photographs or\n\t\t\t\t\t\tdocuments you are sharing, then upload your files. Thank you for\n\t\t\t\t\t\tyour contribution.\n\t\t\t\t\t</div>\n\t\t\t\t\t<CreateSubmissionForm onSuccess={onCreateSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default SubmissionsNew;\n", "import { useState, useCallback, useEffect } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { Submission } from \"~/types\";\nimport { SubmissionMaterialType } from \"~/types\";\nimport { SubmissionFragments } from \"~/fragments\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\n\nimport Checkbox from \"~/components/Checkbox\";\n\nconst CREATE_SUBMISSION = gql`\n\tmutation CreateSubmission($input: CreateSubmissionInput!) {\n\t\tcreateSubmission(input: $input) {\n\t\t\t...Submission\n\t\t}\n\t}\n\t${SubmissionFragments.submission}\n`;\n\ninterface MutationData {\n\tcreateSubmission: Submission;\n}\ninterface MutationVariables {\n\tinput: {\n\t\tmaterialTypes: SubmissionMaterialType[];\n\t\tuserControlsCopyright: boolean;\n\t\tcopyrightDetails?: string;\n\t\tdescription?: string;\n\t};\n}\ninterface Props {\n\tonSuccess?: (submission: Submission) => void;\n}\n\nconst CreateSubmissionForm = ({ onSuccess }: Props) => {\n\tconst [currentUser] = useCurrentUser();\n\n\tconst [materialTypes, setMaterialTypes] = useState([]);\n\tconst [userControlsCopyright, setUserControlsCopyright] = useState(true);\n\tconst [copyrightDetails, setCopyrightDetails] = useState(\"\");\n\tconst [description, setDescription] = useState(\"\");\n\tconst [userGrantsPermissionToITMA, setUserGrantsPermissionToITMA] =\n\t\tuseState(false);\n\tconst [validationError, setValidationError] = useState(\"\");\n\n\tconst [createSubmission, { loading, data, error }] = useMutation<\n\t\tMutationData,\n\t\tMutationVariables\n\t>(CREATE_SUBMISSION, { errorPolicy: \"all\" });\n\n\tconst onMaterialTypeChecked = (\n\t\tmaterialType: SubmissionMaterialType,\n\t\tisChecked: boolean\n\t) => {\n\t\tif (isChecked) {\n\t\t\tsetMaterialTypes(materialTypes.concat(materialType));\n\t\t} else {\n\t\t\tsetMaterialTypes(materialTypes.filter((mt) => mt !== materialType));\n\t\t}\n\t};\n\n\tconst materialTypeIsChecked = (materialType: SubmissionMaterialType) => {\n\t\treturn materialTypes.includes(materialType);\n\t};\n\n\tconst onSubmitForm = (event) => {\n\t\tevent.preventDefault();\n\t\tsetValidationError(\"\");\n\t\tif (!userControlsCopyright && !copyrightDetails) {\n\t\t\tsetValidationError(\n\t\t\t\t\"Please provide details on who controls the copyright for these items\"\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tif (!description) {\n\t\t\tsetValidationError(\"Please describe the items you are submitting\");\n\t\t\treturn;\n\t\t}\n\t\tconst input = {\n\t\t\tmaterialTypes,\n\t\t\tuserControlsCopyright,\n\t\t\tcopyrightDetails,\n\t\t\tdescription,\n\t\t};\n\t\ttry {\n\t\t\tcreateSubmission({\n\t\t\t\tvariables: {\n\t\t\t\t\tinput,\n\t\t\t\t},\n\t\t\t});\n\t\t} catch {\n\t\t\t//\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.createSubmission?.id && onSuccess) {\n\t\t\tonSuccess(data.createSubmission);\n\t\t}\n\t}, [data, onSuccess]);\n\n\treturn (\n\t\t<form className=\"flex flex-col items-start\" onSubmit={onSubmitForm}>\n\t\t\t<div className=\"flex flex-col mb-5\">\n\t\t\t\t<div className=\"mb-2\">\n\t\t\t\t\tWhat types of material would you like to upload?\n\t\t\t\t</div>\n\t\t\t\t<Checkbox\n\t\t\t\t\tid=\"audio\"\n\t\t\t\t\tlabel=\"Audio\"\n\t\t\t\t\tchecked={materialTypeIsChecked(SubmissionMaterialType.Audio)}\n\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\tonMaterialTypeChecked(\n\t\t\t\t\t\t\tSubmissionMaterialType.Audio,\n\t\t\t\t\t\t\te.target.checked\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"mb-1\"\n\t\t\t\t/>\n\t\t\t\t<Checkbox\n\t\t\t\t\tid=\"video\"\n\t\t\t\t\tlabel=\"Video\"\n\t\t\t\t\tchecked={materialTypeIsChecked(SubmissionMaterialType.Video)}\n\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\tonMaterialTypeChecked(\n\t\t\t\t\t\t\tSubmissionMaterialType.Video,\n\t\t\t\t\t\t\te.target.checked\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"mb-1\"\n\t\t\t\t/>\n\t\t\t\t<Checkbox\n\t\t\t\t\tid=\"image\"\n\t\t\t\t\tlabel=\"Image\"\n\t\t\t\t\tchecked={materialTypeIsChecked(SubmissionMaterialType.Image)}\n\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\tonMaterialTypeChecked(\n\t\t\t\t\t\t\tSubmissionMaterialType.Image,\n\t\t\t\t\t\t\te.target.checked\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"mb-1\"\n\t\t\t\t/>\n\t\t\t\t<Checkbox\n\t\t\t\t\tid=\"document\"\n\t\t\t\t\tlabel=\"Document\"\n\t\t\t\t\tchecked={materialTypeIsChecked(SubmissionMaterialType.Document)}\n\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\tonMaterialTypeChecked(\n\t\t\t\t\t\t\tSubmissionMaterialType.Document,\n\t\t\t\t\t\t\te.target.checked\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"mb-1\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"mb-2\">Do you control the copyright for these items?</div>\n\t\t\t<select\n\t\t\t\tclassName=\"mb-6\"\n\t\t\t\tvalue={userControlsCopyright ? \"Yes\" : \"No\"}\n\t\t\t\tonChange={(event) =>\n\t\t\t\t\tsetUserControlsCopyright(event.target.value === \"Yes\" ? true : false)\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<option value={\"Yes\"}>Yes</option>\n\t\t\t\t<option value={\"No\"}>No</option>\n\t\t\t</select>\n\t\t\t{!userControlsCopyright && (\n\t\t\t\t<div className=\"mb-6\">\n\t\t\t\t\t<div className=\"mb-2\">\n\t\t\t\t\t\tWho controls the copyright? Are you donating on someone's behalf?\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\trows={3}\n\t\t\t\t\t\tvalue={copyrightDetails}\n\t\t\t\t\t\tonChange={(e) => setCopyrightDetails(e.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<div className=\"mb-2\">\n\t\t\t\tPlease describe this material:\n\t\t\t\t<br />\n\t\t\t\t- Who collected it?\n\t\t\t\t<br />- Who originally recorded it?\n\t\t\t\t<br />- Who is featured in these items?\n\t\t\t\t<br />- What are the recording dates?\n\t\t\t\t<br />- What are the recording locations?\n\t\t\t\t<br />- Any other comments you'd like to add?\n\t\t\t</div>\n\t\t\t<textarea\n\t\t\t\tclassName=\"mb-6\"\n\t\t\t\trows={12}\n\t\t\t\tvalue={description}\n\t\t\t\tonChange={(e) => setDescription(e.target.value)}\n\t\t\t/>\n\n\t\t\t<Checkbox\n\t\t\t\tclassName=\"mb-6\"\n\t\t\t\tchecked={userGrantsPermissionToITMA}\n\t\t\t\tlabel=\"By clicking this box, I consent to upload and give the digitised\n\t\t\tmaterial to the Irish Traditional Music Archive (Dublin, Ireland). ITMA\n\t\t\treserves the right to retain or delete at any time this material based on\n\t\t\tits collection policy.\"\n\t\t\t\tonChange={(e) => setUserGrantsPermissionToITMA(e.target.checked)}\n\t\t\t/>\n\n\t\t\t<input\n\t\t\t\ttype=\"submit\"\n\t\t\t\tvalue=\"Save and Continue to Upload\"\n\t\t\t\tdisabled={loading || !userGrantsPermissionToITMA}\n\t\t\t/>\n\n\t\t\t{validationError && (\n\t\t\t\t<div className=\"mt-4 text-red-600\">{validationError}</div>\n\t\t\t)}\n\t\t\t{error && (\n\t\t\t\t<div className=\"mt-4 text-red-600\">\n\t\t\t\t\tError saving Submission. Please reload the page and try again.\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<div className=\"text-gray-500 italic mt-6\">\n\t\t\t\tAs per ITMA's Data Protection policy the information provided on this\n\t\t\t\tform will not be used for any other purpose; it will be stored securely\n\t\t\t\tand will not be shared with any third parties.\n\t\t\t</div>\n\t\t</form>\n\t);\n};\n\nexport default CreateSubmissionForm;\n", "import { ChangeEventHandler } from \"react\";\n\ninterface Props {\n\tchecked: boolean;\n\tlabel: string;\n\tid?: string;\n\tonChange: ChangeEventHandler<HTMLInputElement>;\n\tclassName?: string;\n}\n\nconst Checkbox = ({ checked, label, id, onChange, className }: Props) => {\n\tconst inputId = id ?? `input_${Math.round(Math.random() * 100000)}`;\n\n\treturn (\n\t\t<div className={`flex flex-row items-top justify-start ${className ?? \"\"}`}>\n\t\t\t<input\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tchecked={checked}\n\t\t\t\tonChange={onChange}\n\t\t\t\tid={inputId}\n\t\t\t\tclassName=\"mt-1 mr-2\"\n\t\t\t/>\n\t\t\t<label htmlFor={inputId}>{label}</label>\n\t\t</div>\n\t);\n};\n\nexport default Checkbox;\n", "import { Link } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { Submission } from \"~/types\";\nimport { SubmissionFragments } from \"~/fragments\";\nimport DateTimeService from \"~/services/DateTime\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireAdmin from \"~/components/RequireAdmin\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst SUBMISSIONS = gql`\n\tquery Submissions($input: SubmissionsInput!) {\n\t\tsubmissions(input: $input) {\n\t\t\t...Submission\n\t\t}\n\t}\n\t${SubmissionFragments.submission}\n`;\n\ninterface SubmissionsData {\n\tsubmissions: Submission[];\n}\ninterface SubmissionsVars {\n\tinput: {\n\t\ttake?: number;\n\t\tskip?: number;\n\t};\n}\n\nconst AdminSubmissions = () => {\n\tconst { data, loading } = useQuery<SubmissionsData, SubmissionsVars>(\n\t\tSUBMISSIONS,\n\t\t{\n\t\t\tvariables: { input: { take: 100, skip: 0 } },\n\t\t\tfetchPolicy: \"cache-and-network\",\n\t\t}\n\t);\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireAdmin>\n\t\t\t\t<Breadcrumb\n\t\t\t\t\titems={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Admin\",\n\t\t\t\t\t\t\thref: \"/admin\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: \"Submissions\" },\n\t\t\t\t\t]}\n\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t/>\n\n\t\t\t\t{!data && loading && <LoadingBlock />}\n\n\t\t\t\t{data && (\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{data.submissions.map((s, index) => (\n\t\t\t\t\t\t\t<li className=\"mb-4\" key={index}>\n\t\t\t\t\t\t\t\t{DateTimeService.formatDateYearTime(s.createdAt, true)} (\n\t\t\t\t\t\t\t\t{s.materialTypes.join(\", \")}) - Status: {s.status}\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\tFrom {s.createdByUser.username} / {s.createdByUser.email}\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\tOwns copyright? {s.userControlsCopyright ? \"Yes\" : \"No\"}\n\t\t\t\t\t\t\t\t{s.copyrightDetails ? ` - ${s.copyrightDetails}` : \"\"}\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<span className=\"text-gray-500\">{s.description}</span>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<Link to={`/admin/submissions/${s.id}`}>View Files</Link>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t)}\n\t\t\t</RequireAdmin>\n\t\t</Layout>\n\t);\n};\n\nexport default AdminSubmissions;\n", "import { useEffect, useMemo } from \"react\";\nimport { useQuery, useMutation, gql } from \"@apollo/client\";\nimport compareDesc from \"date-fns/compareDesc\";\n\nimport { TakedownRequestFragments } from \"~/fragments\";\nimport {\n\tisApprovedTakedownRequest,\n\tisDeniedTakedownRequest,\n\tisPendingTakedownRequest,\n\tTakedownRequest,\n\tTakedownRequestStatus,\n} from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport DateTimeService from \"~/services/DateTime\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport RequireAdmin from \"~/components/RequireAdmin\";\n\nconst TAKEDOWN_REQUESTS = gql`\n\tquery TakedownRequests($input: TakedownRequestsInput!) {\n\t\ttakedownRequests(input: $input) {\n\t\t\t...TakedownRequest\n\t\t}\n\t}\n\t${TakedownRequestFragments.takedownRequest}\n`;\n\nconst UPDATE_TAKEDOWN_REQUEST_STATUS = gql`\n\tmutation UpdateTakedownRequestStatus(\n\t\t$input: UpdateTakedownRequestStatusInput!\n\t) {\n\t\tupdateTakedownRequestStatus(input: $input) {\n\t\t\t...TakedownRequest\n\t\t}\n\t}\n\t${TakedownRequestFragments.takedownRequest}\n`;\n\ninterface QueryData {\n\ttakedownRequests: TakedownRequest[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\ttake?: number;\n\t\tskip?: number;\n\t};\n}\ninterface MutationData {\n\tupdateTakedownRequestStatus: TakedownRequest;\n}\ninterface MutationVariables {\n\tinput: {\n\t\tid: string;\n\t\tstatus: TakedownRequestStatus;\n\t};\n}\n\nconst TakedownRequests = () => {\n\tconst {\n\t\tloading: takedownRequestsLoading,\n\t\tdata: takedownRequestsData,\n\t\terror: takedownRequestsError,\n\t} = useQuery<QueryData, QueryVariables>(TAKEDOWN_REQUESTS, {\n\t\t// Take a high number until we implement pagination\n\t\tvariables: { input: { take: 200, skip: 0 } },\n\t\tfetchPolicy: \"network-only\",\n\t});\n\n\tconst takedownRequests = useMemo(() => {\n\t\tif (!takedownRequestsData?.takedownRequests) {\n\t\t\treturn [];\n\t\t}\n\t\tconst sortedTakedownRequests = [...takedownRequestsData.takedownRequests];\n\t\tsortedTakedownRequests.sort((a, b) =>\n\t\t\tcompareDesc(new Date(a.createdAt), new Date(b.createdAt))\n\t\t);\n\t\treturn sortedTakedownRequests;\n\t}, [takedownRequestsData]);\n\n\tconst [\n\t\tupdateTakedownRequestStatus,\n\t\t{\n\t\t\tloading: updateTakedownRequestStatusLoading,\n\t\t\terror: updateTakedownRequestStatusError,\n\t\t},\n\t] = useMutation<MutationData, MutationVariables>(\n\t\tUPDATE_TAKEDOWN_REQUEST_STATUS,\n\t\t{ errorPolicy: \"all\" }\n\t);\n\n\tconst onApproveClicked = (id: string) => {\n\t\tupdateTakedownRequestStatus({\n\t\t\tvariables: { input: { id, status: TakedownRequestStatus.Approved } },\n\t\t});\n\t};\n\n\tconst onDenyClicked = (id: string) => {\n\t\tupdateTakedownRequestStatus({\n\t\t\tvariables: { input: { id, status: TakedownRequestStatus.Denied } },\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tif (updateTakedownRequestStatusError) {\n\t\t\twindow.alert(\n\t\t\t\t\"Error updating Takedown Request status. Please reload the page and try again.\"\n\t\t\t);\n\t\t}\n\t}, [updateTakedownRequestStatusError]);\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireAdmin>\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: \"Admin\",\n\t\t\t\t\t\t\t\thref: \"/admin\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ label: \"Takedown Requests\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{takedownRequestsLoading && <LoadingBlock />}\n\t\t\t\t\t{takedownRequestsError && (\n\t\t\t\t\t\t<div className=\"text-red-600\">\n\t\t\t\t\t\t\t{takedownRequestsError.graphQLErrors.join(\", \")}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{!takedownRequestsLoading &&\n\t\t\t\t\t\ttakedownRequests?.map((takedownRequest, index) => {\n\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tcreatedAt,\n\t\t\t\t\t\t\t\tcreatedByUser,\n\t\t\t\t\t\t\t\tentity,\n\t\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t} = takedownRequest;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className=\"mb-4\" key={index}>\n\t\t\t\t\t\t\t\t\tCreated {DateTimeService.formatDateYearTime(createdAt)} by{\" \"}\n\t\t\t\t\t\t\t\t\t{createdByUser.username}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\tEmail: {createdByUser.email}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\tEntity:{\" \"}\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={EntityService.makeHrefForView(entity)}\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{entity.name}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\tTakedown Type: {type}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\tMessage: {message}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\tStatus: {status}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t{isApprovedTakedownRequest(takedownRequest) && (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={updateTakedownRequestStatusLoading}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => onDenyClicked(id)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tDeny\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{isDeniedTakedownRequest(takedownRequest) && (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={updateTakedownRequestStatusLoading}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => onApproveClicked(id)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tApprove\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{isPendingTakedownRequest(takedownRequest) && (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text mr-4\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={updateTakedownRequestStatusLoading}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onApproveClicked(id)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tApprove\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-text\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={updateTakedownRequestStatusLoading}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onDenyClicked(id)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tDeny\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t</RequireAdmin>\n\t\t</Layout>\n\t);\n};\n\nexport default TakedownRequests;\n", "import { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { Submission } from \"~/types\";\nimport { SubmissionFragments } from \"~/fragments\";\nimport DateTimeService from \"~/services/DateTime\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireAdmin from \"~/components/RequireAdmin\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst SUBMISSION_WITH_FILES = gql`\n\tquery SubmissionWithFiles($id: String!) {\n\t\tsubmissionWithFiles(id: $id) {\n\t\t\tsubmission {\n\t\t\t\t...Submission\n\t\t\t}\n\t\t\tfiles {\n\t\t\t\tfilename\n\t\t\t\tpresignedDownloadUrl\n\t\t\t}\n\t\t}\n\t}\n\t${SubmissionFragments.submission}\n`;\n\ninterface SubmissionWithFilesData {\n\tsubmissionWithFiles: {\n\t\tsubmission: Submission;\n\t\tfiles: Array<{\n\t\t\tfilename: string;\n\t\t\tpresignedDownloadUrl: string;\n\t\t}>;\n\t};\n}\ninterface SubmissionWithFilesVars {\n\tid: string;\n}\n\nconst AdminViewSubmissionById = () => {\n\tconst navigate = useNavigate();\n\tconst { id } = navigate.query;\n\tconst submissionId = typeof id === \"string\" ? id : undefined;\n\n\tconst { data, loading } = useQuery<\n\t\tSubmissionWithFilesData,\n\t\tSubmissionWithFilesVars\n\t>(SUBMISSION_WITH_FILES, {\n\t\tvariables: { id: submissionId },\n\t\tskip: !submissionId,\n\t\tfetchPolicy: \"cache-and-network\",\n\t});\n\tconst { submission, files } = data?.submissionWithFiles ?? {};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireAdmin>\n\t\t\t\t<Breadcrumb\n\t\t\t\t\titems={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Admin\",\n\t\t\t\t\t\t\thref: \"/admin\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: \"Submissions\", href: \"/admin/submissions\" },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: submission\n\t\t\t\t\t\t\t\t? `${DateTimeService.formatDateYearTime(\n\t\t\t\t\t\t\t\t\t\tsubmission.createdAt,\n\t\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t  )} from ${submission.createdByUser.username}`\n\t\t\t\t\t\t\t\t: \"View Submission\",\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t/>\n\n\t\t\t\t{files && (\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{files.map((f, index) => (\n\t\t\t\t\t\t\t<li className=\"flex flex-row\" key={index}>\n\t\t\t\t\t\t\t\t<div className=\"pr-2\">{f.filename}</div>\n\t\t\t\t\t\t\t\t<Link to={f.presignedDownloadUrl}>\n\t\t\t\t\t\t\t\t\t<a target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\tView<i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t)}\n\n\t\t\t\t{!files && loading && <LoadingBlock className=\"mt-8\" />}\n\t\t\t</RequireAdmin>\n\t\t</Layout>\n\t);\n};\n\nexport default AdminViewSubmissionById;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport { EntityFragments } from \"~/fragments\";\nimport type { Person } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\nexport const PERSON_QUERY = gql`\n\tquery Person($slug: String!) {\n\t\tperson(slug: $slug) {\n\t\t\t...Person\n\t\t}\n\t}\n\t${EntityFragments.person}\n`;\n\nconst ViewPersonBySlug = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data: personData, error: personError } = useQuery<{\n\t\tperson: Person;\n\t}>(PERSON_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst { person } = personData ?? {};\n\n\tlet statusMessage;\n\tif (!personData && !personError) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!personData && personError) {\n\t\tstatusMessage = `Error fetching Person with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${person.name}`}>\n\t\t\t<ViewEntityAndAudioItems entity={person} />\n\t\t</Layout>\n\t);\n};\n\nexport default ViewPersonBySlug;\n", "import { useQuery } from \"@apollo/client\";\nimport { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Person } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport { PERSON_QUERY } from \"~/routes/entities/people/[slug]\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst PersonAbout = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery<{\n\t\tperson: Person;\n\t}>(PERSON_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst isLoading = !data && !error;\n\tconst { name, description, aliases } = data?.person ?? {};\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - About`}>\n\t\t\t{isLoading && <LoadingBlock />}\n\t\t\t{error && <div className=\"text-red-500\">{error.message}</div>}\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"People\", href: \"/entities/people\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/people/${slug}` },\n\t\t\t\t\t\t\t{ label: \"About\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\t\t\t\t\t{description && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tDescription:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500 whitespace-pre-wrap\">\n\t\t\t\t\t\t\t\t{description}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{aliases && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tAliases:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{aliases}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<Link to={`/entities/people/${slug}/edit`}>Edit</Link>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default PersonAbout;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport { EntityFragments } from \"~/fragments\";\nimport type { Person } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\nexport const PERSON_QUERY = gql`\n\tquery Person($slug: String!) {\n\t\tperson(slug: $slug) {\n\t\t\t...Person\n\t\t}\n\t}\n\t${EntityFragments.person}\n`;\n\nconst ViewPersonBySlug = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data: personData, error: personError } = useQuery<{\n\t\tperson: Person;\n\t}>(PERSON_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst { person } = personData ?? {};\n\n\tlet statusMessage;\n\tif (!personData && !personError) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!personData && personError) {\n\t\tstatusMessage = `Error fetching Person with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${person.name}`}>\n\t\t\t<ViewEntityAndAudioItems entity={person} />\n\t\t</Layout>\n\t);\n};\n\nexport default ViewPersonBySlug;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { Person } from \"types\";\nimport { EntityFragments } from \"~/fragments\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport RequireUser from \"~/components/RequireUser\";\nimport EditPersonForm from \"~/components/EditPersonForm\";\n\nconst PERSON_QUERY = gql`\n\tquery Person($slug: String!) {\n\t\tperson(slug: $slug) {\n\t\t\t...Person\n\t\t}\n\t}\n\t${EntityFragments.person}\n`;\n\nconst EditPerson = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery(PERSON_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\n\tconst onEditSuccess = (person: Person) => {\n\t\tnavigate(`/entities/people/${person.slug}`);\n\t};\n\n\tlet statusMessage;\n\tif (!data && !error) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!data && error) {\n\t\tstatusMessage = `Error fetching Person with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\tconst { person } = data;\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Edit Person: {person.name}</h1>\n\t\t\t\t\t<EditPersonForm person={person} onSuccess={onEditSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default EditPerson;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\nimport type { Person } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nconst UPDATE_PERSON_MUTATION = gql`\n\tmutation UpdatePerson($slug: String!, $input: UpdatePersonInput!) {\n\t\tupdatePerson(slug: $slug, input: $input) {\n\t\t\t...Person\n\t\t}\n\t}\n\t${EntityFragments.person}\n`;\ninterface UpdatePersonVariables {\n\tslug: string;\n\tinput: {\n\t\taliases?: string;\n\t\tdescription?: string;\n\t\tfirstName: string;\n\t\tmiddleName?: string;\n\t\tlastName: string;\n\t};\n}\ninterface Props {\n\tperson: Person;\n\tonSuccess?: (person: Person) => void;\n}\nconst EditPersonForm = ({ person, onSuccess }: Props) => {\n\tconst navigate = useNavigate();\n\n\tconst [updatePerson, { loading, error, data }] = useMutation<\n\t\t{ updatePerson: Person },\n\t\tUpdatePersonVariables\n\t>(UPDATE_PERSON_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\n\tconst [firstName, setFirstName] = useState(person.firstName);\n\tconst [middleName, setMiddleName] = useState(person.middleName);\n\tconst [lastName, setLastName] = useState(person.lastName);\n\tconst [aliases, setAliases] = useState(person.aliases);\n\tconst [description, setDescription] = useState(person.description);\n\n\tconst onUpdatePerson = (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tfirstName,\n\t\t\tmiddleName,\n\t\t\tlastName,\n\t\t\taliases,\n\t\t\tdescription,\n\t\t};\n\t\tupdatePerson({ variables: { slug: person.slug, input } });\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.updatePerson) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.updatePerson);\n\t\t\t}\n\t\t\twindow.alert(\"Person updated successfully!\");\n\t\t}\n\t}, [data, navigate]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onUpdatePerson}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"First name\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={firstName}\n\t\t\t\t\t\tonChange={(event) => setFirstName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Middle name (optional)\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={middleName}\n\t\t\t\t\t\tonChange={(event) => setMiddleName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Last name\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={lastName}\n\t\t\t\t\t\tonChange={(event) => setLastName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Person. For example:{\" \"}\n\t\t\t\t\t\t<em>Tony D, The Tradfather, Tony from the County Calamari</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={10}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Save\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default EditPersonForm;\n", "import { useQuery } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Person } from \"~/types\";\nimport TagService from \"~/services/Tag\";\nimport { PERSON_QUERY } from \"~/routes/entities/people/[slug]\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport TagWithRelationshipToObject from \"~/components/TagWithRelationshipToObject\";\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\n\nconst PersonTags = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error, refetch } = useQuery<{\n\t\tperson: Person;\n\t}>(PERSON_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst isLoading = !data && !error;\n\tconst { person } = data ?? {};\n\tconst { name, tags } = person ?? {};\n\tconst sortedTags = TagService.sort(tags);\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - Tags`}>\n\t\t\t{isLoading && <LoadingBlock />}\n\t\t\t{error && <div className=\"text-red-500\">{error.message}</div>}\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"People\", href: \"/entities/people\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/people/${slug}` },\n\t\t\t\t\t\t\t{ label: \"Tags\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{sortedTags.map((tag, index) => (\n\t\t\t\t\t\t<TagWithRelationshipToObject\n\t\t\t\t\t\t\ttag={tag}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<AddTagButton entity={person} onSuccess={refetch} />\n\t\t\t\t\t\t{sortedTags.length > 0 && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<span className=\"text-gray-500 px-2\">/</span>\n\t\t\t\t\t\t\t\t<EditTagsButton entity={person} onSuccess={refetch} />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default PersonTags;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport { EntityFragments } from \"~/fragments\";\nimport type { Place } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\nexport const PLACE_QUERY = gql`\n\tquery Place($slug: String!) {\n\t\tplace(slug: $slug) {\n\t\t\t...Place\n\t\t}\n\t}\n\t${EntityFragments.place}\n`;\n\nconst ViewPlaceBySlug = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data: placeData, error: placeError } = useQuery<{\n\t\tplace: Place;\n\t}>(PLACE_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst { place } = placeData ?? {};\n\n\tlet statusMessage;\n\tif (!placeData && !placeError) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!placeData && placeError) {\n\t\tstatusMessage = `Error fetching Place with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${place.name}`}>\n\t\t\t<ViewEntityAndAudioItems entity={place} />\n\t\t</Layout>\n\t);\n};\n\nexport default ViewPlaceBySlug;\n", "import { useQuery } from \"@apollo/client\";\nimport { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Place } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport { PLACE_QUERY } from \"~/routes/entities/places/[slug]\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst PlaceAbout = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery<{\n\t\tplace: Place;\n\t}>(PLACE_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst isLoading = !data && !error;\n\tconst { name, description, aliases, latitude, longitude } = data?.place ?? {};\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - About`}>\n\t\t\t{isLoading && <LoadingBlock />}\n\t\t\t{error && <div className=\"text-red-500\">{error.message}</div>}\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Places\", href: \"/entities/places\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/places/${slug}` },\n\t\t\t\t\t\t\t{ label: \"About\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\t\t\t\t\t{description && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tDescription:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500 whitespace-pre-wrap\">\n\t\t\t\t\t\t\t\t{description}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{aliases && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tAliases:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{aliases}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{latitude && longitude && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tLatitude and Longitude:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">\n\t\t\t\t\t\t\t\t{latitude},{longitude}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={`https://www.google.com/maps/@?api=1&map_action=map&zoom=12&center=${latitude},${longitude}`}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView on Map <i className=\"material-icons text-base\">launch</i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<Link to={`/entities/places/${slug}/edit`}>Edit</Link>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default PlaceAbout;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport { EntityFragments } from \"~/fragments\";\nimport type { Place } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\nexport const PLACE_QUERY = gql`\n\tquery Place($slug: String!) {\n\t\tplace(slug: $slug) {\n\t\t\t...Place\n\t\t}\n\t}\n\t${EntityFragments.place}\n`;\n\nconst ViewPlaceBySlug = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data: placeData, error: placeError } = useQuery<{\n\t\tplace: Place;\n\t}>(PLACE_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst { place } = placeData ?? {};\n\n\tlet statusMessage;\n\tif (!placeData && !placeError) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!placeData && placeError) {\n\t\tstatusMessage = `Error fetching Place with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${place.name}`}>\n\t\t\t<ViewEntityAndAudioItems entity={place} />\n\t\t</Layout>\n\t);\n};\n\nexport default ViewPlaceBySlug;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { Place } from \"types\";\nimport { EntityFragments } from \"~/fragments\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport RequireUser from \"~/components/RequireUser\";\nimport EditPlaceForm from \"~/components/EditPlaceForm\";\n\nconst PLACE_QUERY = gql`\n\tquery Place($slug: String!) {\n\t\tplace(slug: $slug) {\n\t\t\t...Place\n\t\t}\n\t}\n\t${EntityFragments.place}\n`;\n\nconst EditPlace = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery(PLACE_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\n\tconst onEditSuccess = (place: Place) => {\n\t\tnavigate(`/entities/places/${place.slug}`);\n\t};\n\n\tlet statusMessage;\n\tif (!data && !error) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!data && error) {\n\t\tstatusMessage = `Error fetching Place with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\tconst { place } = data;\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Edit Place: {place.name}</h1>\n\t\t\t\t\t<EditPlaceForm place={place} onSuccess={onEditSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default EditPlace;\n", "import { useEffect, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\nimport type { Place } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nconst UPDATE_PLACE_MUTATION = gql`\n\tmutation UpdatePlace($slug: String!, $input: UpdatePlaceInput!) {\n\t\tupdatePlace(slug: $slug, input: $input) {\n\t\t\t...Place\n\t\t}\n\t}\n\t${EntityFragments.place}\n`;\ninterface UpdatePlaceVariables {\n\tslug: string;\n\tinput: {\n\t\taliases?: string;\n\t\tdescription?: string;\n\t\tlatitude?: number;\n\t\tlongitude?: number;\n\t};\n}\ninterface Props {\n\tplace: Place;\n\tonSuccess?: (place: Place) => void;\n}\nconst EditPlaceForm = ({ place, onSuccess }: Props) => {\n\tconst navigate = useNavigate();\n\n\tconst [updatePlace, { loading, error, data }] = useMutation<\n\t\t{ updatePlace: Place },\n\t\tUpdatePlaceVariables\n\t>(UPDATE_PLACE_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\n\tconst [name, setName] = useState(place.name);\n\tconst [aliases, setAliases] = useState(place.aliases);\n\tconst [latitude, setLatitude] = useState(place.latitude.toString());\n\tconst [longitude, setLongitude] = useState(place.longitude.toString());\n\tconst [description, setDescription] = useState(place.description);\n\n\tconst onUpdatePlace = (event) => {\n\t\tevent.preventDefault();\n\t\tconst input = {\n\t\t\tname,\n\t\t\taliases,\n\t\t\tlatitude: parseFloat(latitude),\n\t\t\tlongitude: parseFloat(longitude),\n\t\t\tdescription,\n\t\t};\n\t\tupdatePlace({ variables: { slug: place.slug, input } });\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.updatePlace) {\n\t\t\tif (onSuccess) {\n\t\t\t\treturn onSuccess(data.updatePlace);\n\t\t\t}\n\t\t\twindow.alert(\"Place updated successfully!\");\n\t\t}\n\t}, [data, navigate]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<form onSubmit={onUpdatePlace}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(event) => setName(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Aliases\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={aliases}\n\t\t\t\t\t\tonChange={(event) => setAliases(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Place. For example:{\" \"}\n\t\t\t\t\t\t<em>Gaillimh, The City of Tribes</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Latitude\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={latitude}\n\t\t\t\t\t\tonChange={(event) => setLatitude(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Longitude\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={longitude}\n\t\t\t\t\t\tonChange={(event) => setLongitude(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tTo view the current latitude and longitude coordinates, visit{\" \"}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={`https://www.google.com/maps/@?api=1&map_action=map&zoom=12&center=${latitude},${longitude}`}\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{latitude},{longitude} on Google Maps (will open in new tab)\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t. To pick new coordinates, right-click on the exact location you'd\n\t\t\t\t\t\tlike, and you'll see numbers like \"53.2838294,-9.1888286\". Click to\n\t\t\t\t\t\tcopy them to your clipboard. The first one is latitude, and the\n\t\t\t\t\t\tsecond is longitude.\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\trows={10}\n\t\t\t\t\t\tonChange={(event) => setDescription(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Save\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default EditPlaceForm;\n", "import { useQuery } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Place } from \"~/types\";\nimport TagService from \"~/services/Tag\";\nimport { PLACE_QUERY } from \"~/routes/entities/places/[slug]\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport TagWithRelationshipToObject from \"~/components/TagWithRelationshipToObject\";\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\n\nconst PlaceTags = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error, refetch } = useQuery<{\n\t\tplace: Place;\n\t}>(PLACE_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst isLoading = !data && !error;\n\tconst { place } = data ?? {};\n\tconst { name, tags } = place ?? {};\n\tconst sortedTags = TagService.sort(tags);\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - Tags`}>\n\t\t\t{isLoading && <LoadingBlock />}\n\t\t\t{error && <div className=\"text-red-500\">{error.message}</div>}\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Places\", href: \"/entities/places\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/places/${slug}` },\n\t\t\t\t\t\t\t{ label: \"Tags\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{sortedTags.map((tag, index) => (\n\t\t\t\t\t\t<TagWithRelationshipToObject\n\t\t\t\t\t\t\ttag={tag}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<AddTagButton entity={place} onSuccess={refetch} />\n\t\t\t\t\t\t{sortedTags.length > 0 && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<span className=\"text-gray-500 px-2\">/</span>\n\t\t\t\t\t\t\t\t<EditTagsButton entity={place} onSuccess={refetch} />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default PlaceTags;\n", "import { Link } from \"@remix-run/react\";\n\nimport usePeople from \"~/hooks/usePeople\";\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst People = () => {\n\tconst [people, { loading, error }, fetchNextPage] = usePeople({\n\t\tresultsPerPage: 50,\n\t});\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - People`}>\n\t\t\t<h1 className=\"mb-6\">People</h1>\n\t\t\t{!loading && error && (\n\t\t\t\t<div className=\"text-red-600\">Error fetching People</div>\n\t\t\t)}\n\t\t\t{!loading && people?.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No People found</div>\n\t\t\t)}\n\t\t\t{people?.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{people.map((person, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(person)}>\n\t\t\t\t\t\t\t\t{person.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t\t<div className=\"mt-6\">\n\t\t\t\t{loading && <LoadingBlock />}\n\t\t\t\t{!loading && people?.length > 0 && (\n\t\t\t\t\t<button className=\"btn-text\" onClick={fetchNextPage}>\n\t\t\t\t\t\tLoad More\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</Layout>\n\t);\n};\n\nexport default People;\n", "import { useEffect, useCallback, useState } from \"react\";\nimport type { LazyQueryHookOptions, LazyQueryResult } from \"@apollo/client\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\nimport type { Person } from \"~/types\";\nimport { SortBy } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nexport const PEOPLE_QUERY = gql`\n\tquery People($input: PeopleInput!) {\n\t\tpeople(input: $input) {\n\t\t\t...Person\n\t\t}\n\t}\n\t${EntityFragments.person}\n`;\n\ninterface QueryData {\n\tpeople: Person[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\ttake?: number;\n\t\tskip?: number;\n\t\tsortBy?: SortBy;\n\t};\n}\ninterface HookArgs {\n\tsortBy?: SortBy;\n\tresultsPerPage?: number;\n\tqueryOptions?: LazyQueryHookOptions<QueryData, QueryVariables>;\n}\ntype HookReturnValue = [\n\tPerson[] | undefined,\n\tLazyQueryResult<QueryData, {}>,\n\t() => void\n];\n\nconst usePeople = ({\n\tsortBy = SortBy.AToZ,\n\tresultsPerPage = 20,\n\tqueryOptions = {},\n}: HookArgs = {}): HookReturnValue => {\n\tconst [skip, setSkip] = useState(0);\n\tconst [people, setPeople] = useState<Person[] | undefined>();\n\n\t// Reset values when sortBy changes\n\tuseEffect(() => {\n\t\tsetPeople(undefined);\n\t\tsetSkip(0);\n\t}, [sortBy]);\n\n\tconst [getPeople, peopleQuery] = useLazyQuery<QueryData, QueryVariables>(\n\t\tPEOPLE_QUERY,\n\t\t{\n\t\t\tnotifyOnNetworkStatusChange: true,\n\t\t\t...queryOptions,\n\t\t}\n\t);\n\tconst { data, fetchMore } = peopleQuery;\n\tuseEffect(() => {\n\t\t// Avoid bug with Apollo Client where it makes an extra network request\n\t\t// with original variables after `fetchMore` is called, thus leading to\n\t\t// `data` briefly being `undefined`.\n\t\t// https://github.com/apollographql/apollo-client/issues/6916\n\t\tif (data?.people) {\n\t\t\tsetPeople(data.people);\n\t\t}\n\t}, [data]);\n\n\tuseEffect(() => {\n\t\tgetPeople({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tsortBy,\n\t\t\t\t\ttake: resultsPerPage + skip,\n\t\t\t\t\tskip: 0,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}, [getPeople, resultsPerPage, sortBy, skip]);\n\n\tconst fetchNextPage = useCallback(async () => {\n\t\tconst numToSkip = people?.length ?? 0;\n\t\tawait fetchMore({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tsortBy,\n\t\t\t\t\ttake: resultsPerPage,\n\t\t\t\t\tskip: numToSkip,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tsetSkip(numToSkip);\n\t}, [fetchMore, resultsPerPage, people, sortBy]);\n\n\treturn [people, peopleQuery, fetchNextPage];\n};\n\nexport default usePeople;\n", "import { Link } from \"@remix-run/react\";\n\nimport usePlaces from \"~/hooks/usePlaces\";\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst Places = () => {\n\tconst [places, { loading, error }, fetchNextPage] = usePlaces({\n\t\tresultsPerPage: 50,\n\t});\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - Places`}>\n\t\t\t<h1 className=\"mb-6\">Places</h1>\n\t\t\t{!loading && error && (\n\t\t\t\t<div className=\"text-red-600\">Error fetching Places</div>\n\t\t\t)}\n\t\t\t{!loading && places?.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No Places found</div>\n\t\t\t)}\n\t\t\t{places?.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{places.map((place, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(place)}>\n\t\t\t\t\t\t\t\t{place.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t\t<div className=\"mt-6\">\n\t\t\t\t{loading && <LoadingBlock />}\n\t\t\t\t{!loading && places?.length > 0 && (\n\t\t\t\t\t<button className=\"btn-text\" onClick={fetchNextPage}>\n\t\t\t\t\t\tLoad More\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</Layout>\n\t);\n};\n\nexport default Places;\n", "import { useEffect, useCallback, useState } from \"react\";\nimport type { LazyQueryHookOptions, LazyQueryResult } from \"@apollo/client\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\nimport type { Place } from \"~/types\";\nimport { SortBy } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nexport const PLACES_QUERY = gql`\n\tquery Places($input: PlacesInput!) {\n\t\tplaces(input: $input) {\n\t\t\t...Place\n\t\t}\n\t}\n\t${EntityFragments.place}\n`;\n\ninterface QueryData {\n\tplaces: Place[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\ttake?: number;\n\t\tskip?: number;\n\t\tsortBy?: SortBy;\n\t};\n}\ninterface HookArgs {\n\tsortBy?: SortBy;\n\tresultsPerPage?: number;\n\tqueryOptions?: LazyQueryHookOptions<QueryData, QueryVariables>;\n}\ntype HookReturnValue = [\n\tPlace[] | undefined,\n\tLazyQueryResult<QueryData, {}>,\n\t() => void\n];\n\nconst usePlaces = ({\n\tsortBy = SortBy.AToZ,\n\tresultsPerPage = 20,\n\tqueryOptions = {},\n}: HookArgs = {}): HookReturnValue => {\n\tconst [skip, setSkip] = useState(0);\n\tconst [places, setPlaces] = useState<Place[] | undefined>();\n\n\t// Reset values when sortBy changes\n\tuseEffect(() => {\n\t\tsetPlaces(undefined);\n\t\tsetSkip(0);\n\t}, [sortBy]);\n\n\tconst [getPlaces, placesQuery] = useLazyQuery<QueryData, QueryVariables>(\n\t\tPLACES_QUERY,\n\t\t{\n\t\t\tnotifyOnNetworkStatusChange: true,\n\t\t\t...queryOptions,\n\t\t}\n\t);\n\tconst { data, fetchMore } = placesQuery;\n\tuseEffect(() => {\n\t\t// Avoid bug with Apollo Client where it makes an extra network request\n\t\t// with original variables after `fetchMore` is called, thus leading to\n\t\t// `data` briefly being `undefined`.\n\t\t// https://github.com/apollographql/apollo-client/issues/6916\n\t\tif (data?.places) {\n\t\t\tsetPlaces(data.places);\n\t\t}\n\t}, [data]);\n\n\tuseEffect(() => {\n\t\tgetPlaces({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tsortBy,\n\t\t\t\t\ttake: resultsPerPage + skip,\n\t\t\t\t\tskip: 0,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}, [getPlaces, resultsPerPage, sortBy, skip]);\n\n\tconst fetchNextPage = useCallback(async () => {\n\t\tconst numToSkip = places?.length ?? 0;\n\t\tawait fetchMore({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tsortBy,\n\t\t\t\t\ttake: resultsPerPage,\n\t\t\t\t\tskip: numToSkip,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tsetSkip(numToSkip);\n\t}, [fetchMore, resultsPerPage, places, sortBy]);\n\n\treturn [places, placesQuery, fetchNextPage];\n};\n\nexport default usePlaces;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport { EntityFragments } from \"~/fragments\";\nimport type { Tune } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\nexport const TUNE_QUERY = gql`\n\tquery Tune($slug: String!) {\n\t\ttune(slug: $slug) {\n\t\t\t...Tune\n\t\t}\n\t}\n\t${EntityFragments.tune}\n`;\n\nconst ViewTuneBySlug = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data: tuneData, error: tuneError } = useQuery<{\n\t\ttune: Tune;\n\t}>(TUNE_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst { tune } = tuneData ?? {};\n\n\tlet statusMessage;\n\tif (!tuneData && !tuneError) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!tuneData && tuneError) {\n\t\tstatusMessage = `Error fetching Tune with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${tune.name}`}>\n\t\t\t<ViewEntityAndAudioItems entity={tune} />\n\t\t</Layout>\n\t);\n};\n\nexport default ViewTuneBySlug;\n", "import { useQuery } from \"@apollo/client\";\nimport { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Tune } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport { TUNE_QUERY } from \"~/routes/entities/tunes/[slug]\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst TuneAbout = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error } = useQuery<{\n\t\ttune: Tune;\n\t}>(TUNE_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst isLoading = !data && !error;\n\tconst { name, aliases, theSessionTuneId, type, meter, mode, abc } =\n\t\tdata?.tune ?? {};\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - About`}>\n\t\t\t{isLoading && <LoadingBlock />}\n\t\t\t{error && <div className=\"text-red-500\">{error.message}</div>}\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Tunes\", href: \"/entities/tunes\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/tunes/${slug}` },\n\t\t\t\t\t\t\t{ label: \"About\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\t\t\t\t\t{theSessionTuneId && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\t<div className=\"italic text-gray-500\">\n\t\t\t\t\t\t\t\tWe source all of our Tune data from a wonderful community\n\t\t\t\t\t\t\t\tproject called The Session.\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={`https://thesession.org/tunes/${theSessionTuneId}`}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView or Edit This Tune on The Session{\" \"}\n\t\t\t\t\t\t\t\t<i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{aliases && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tAliases:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{aliases}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{type && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tType:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{type}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{meter && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tMeter:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{meter}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{mode && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tMode:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{mode}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{abc && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\tABC:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{abc}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<Link to={`/entities/tunes/${slug}/edit`}>Edit</Link>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default TuneAbout;\n", "import { useNavigate } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport { EntityFragments } from \"~/fragments\";\nimport type { Tune } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\nexport const TUNE_QUERY = gql`\n\tquery Tune($slug: String!) {\n\t\ttune(slug: $slug) {\n\t\t\t...Tune\n\t\t}\n\t}\n\t${EntityFragments.tune}\n`;\n\nconst ViewTuneBySlug = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data: tuneData, error: tuneError } = useQuery<{\n\t\ttune: Tune;\n\t}>(TUNE_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst { tune } = tuneData ?? {};\n\n\tlet statusMessage;\n\tif (!tuneData && !tuneError) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!tuneData && tuneError) {\n\t\tstatusMessage = `Error fetching Tune with slug ${slug}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${tune.name}`}>\n\t\t\t<ViewEntityAndAudioItems entity={tune} />\n\t\t</Layout>\n\t);\n};\n\nexport default ViewTuneBySlug;\n", "import { useQuery } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Tune } from \"~/types\";\nimport TagService from \"~/services/Tag\";\nimport { TUNE_QUERY } from \"~/routes/entities/tunes/[slug]\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport TagWithRelationshipToObject from \"~/components/TagWithRelationshipToObject\";\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\n\nconst TuneTags = () => {\n\tconst navigate = useNavigate();\n\tconst { slug } = navigate.query;\n\n\tconst { data, error, refetch } = useQuery<{\n\t\ttune: Tune;\n\t}>(TUNE_QUERY, {\n\t\tvariables: { slug },\n\t\tskip: !slug,\n\t});\n\tconst isLoading = !data && !error;\n\tconst { tune } = data ?? {};\n\tconst { name, tags } = tune ?? {};\n\tconst sortedTags = TagService.sort(tags);\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${name} - Tags`}>\n\t\t\t{isLoading && <LoadingBlock />}\n\t\t\t{error && <div className=\"text-red-500\">{error.message}</div>}\n\t\t\t{data && (\n\t\t\t\t<>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t{ label: \"Tunes\", href: \"/entities/tunes\" },\n\t\t\t\t\t\t\t{ label: name, href: `/entities/tunes/${slug}` },\n\t\t\t\t\t\t\t{ label: \"Tags\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{sortedTags.map((tag, index) => (\n\t\t\t\t\t\t<TagWithRelationshipToObject\n\t\t\t\t\t\t\ttag={tag}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<AddTagButton entity={tune} onSuccess={refetch} />\n\t\t\t\t\t\t{sortedTags.length > 0 && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<span className=\"text-gray-500 px-2\">/</span>\n\t\t\t\t\t\t\t\t<EditTagsButton entity={tune} onSuccess={refetch} />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default TuneTags;\n", "import { Link } from \"@remix-run/react\";\n\nimport useTunes from \"~/hooks/useTunes\";\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst Tunes = () => {\n\tconst [tunes, { loading, error }, fetchNextPage] = useTunes({\n\t\tresultsPerPage: 50,\n\t});\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - Tunes`}>\n\t\t\t<h1 className=\"mb-6\">Tunes</h1>\n\t\t\t{!loading && error && (\n\t\t\t\t<div className=\"text-red-600\">Error fetching Tunes</div>\n\t\t\t)}\n\t\t\t{!loading && tunes?.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No Tunes found</div>\n\t\t\t)}\n\t\t\t{tunes?.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{tunes.map((tune, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(tune)}>{tune.name}</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t\t<div className=\"mt-6\">\n\t\t\t\t{loading && <LoadingBlock />}\n\t\t\t\t{!loading && tunes?.length > 0 && (\n\t\t\t\t\t<button className=\"btn-text\" onClick={fetchNextPage}>\n\t\t\t\t\t\tLoad More\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</Layout>\n\t);\n};\n\nexport default Tunes;\n", "import { useEffect, useCallback, useState } from \"react\";\nimport type { LazyQueryHookOptions, LazyQueryResult } from \"@apollo/client\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\nimport type { Tune } from \"~/types\";\nimport { SortBy } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\n\nexport const TUNES_QUERY = gql`\n\tquery Tunes($input: TunesInput!) {\n\t\ttunes(input: $input) {\n\t\t\t...Tune\n\t\t}\n\t}\n\t${EntityFragments.tune}\n`;\n\ninterface QueryData {\n\ttunes: Tune[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\ttake?: number;\n\t\tskip?: number;\n\t\tsortBy?: SortBy;\n\t};\n}\ninterface HookArgs {\n\tsortBy?: SortBy;\n\tresultsPerPage?: number;\n\tqueryOptions?: LazyQueryHookOptions<QueryData, QueryVariables>;\n}\ntype HookReturnValue = [\n\tTune[] | undefined,\n\tLazyQueryResult<QueryData, {}>,\n\t() => void\n];\n\nconst useTunes = ({\n\tsortBy = SortBy.AToZ,\n\tresultsPerPage = 20,\n\tqueryOptions = {},\n}: HookArgs = {}): HookReturnValue => {\n\tconst [skip, setSkip] = useState(0);\n\tconst [tunes, setTunes] = useState<Tune[] | undefined>();\n\n\t// Reset values when sortBy changes\n\tuseEffect(() => {\n\t\tsetTunes(undefined);\n\t\tsetSkip(0);\n\t}, [sortBy]);\n\n\tconst [getTunes, tunesQuery] = useLazyQuery<QueryData, QueryVariables>(\n\t\tTUNES_QUERY,\n\t\t{\n\t\t\tnotifyOnNetworkStatusChange: true,\n\t\t\t...queryOptions,\n\t\t}\n\t);\n\tconst { data, fetchMore } = tunesQuery;\n\tuseEffect(() => {\n\t\t// Avoid bug with Apollo Client where it makes an extra network request\n\t\t// with original variables after `fetchMore` is called, thus leading to\n\t\t// `data` briefly being `undefined`.\n\t\t// https://github.com/apollographql/apollo-client/issues/6916\n\t\tif (data?.tunes) {\n\t\t\tsetTunes(data.tunes);\n\t\t}\n\t}, [data]);\n\n\tuseEffect(() => {\n\t\tgetTunes({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tsortBy,\n\t\t\t\t\ttake: resultsPerPage + skip,\n\t\t\t\t\tskip: 0,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}, [getTunes, resultsPerPage, sortBy, skip]);\n\n\tconst fetchNextPage = useCallback(async () => {\n\t\tconst numToSkip = tunes?.length ?? 0;\n\t\tawait fetchMore({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tsortBy,\n\t\t\t\t\ttake: resultsPerPage,\n\t\t\t\t\tskip: numToSkip,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tsetSkip(numToSkip);\n\t}, [fetchMore, resultsPerPage, tunes, sortBy]);\n\n\treturn [tunes, tunesQuery, fetchNextPage];\n};\n\nexport default useTunes;\n", "import { useNavigate } from \"@remix-run/react\";\n\nimport type { Person } from \"types\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\nimport CreatePersonForm from \"~/components/CreatePersonForm\";\n\nconst NewPerson = () => {\n\tconst navigate = useNavigate();\n\n\tconst onCreateSuccess = (person: Person) => {\n\t\tnavigate(`/entities/people/${person.slug}`);\n\t};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Create Person</h1>\n\t\t\t\t\t<CreatePersonForm onSuccess={onCreateSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default NewPerson;\n", "import { useNavigate } from \"@remix-run/react\";\n\nimport type { Place } from \"types\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\nimport CreatePlaceForm from \"~/components/CreatePlaceForm\";\n\nconst NewPlace = () => {\n\tconst navigate = useNavigate();\n\n\tconst onCreateSuccess = (place: Place) => {\n\t\tnavigate(`/entities/places/${place.slug}`);\n\t};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"max-w-md\">\n\t\t\t\t\t<h1 className=\"mb-4\">Create Place</h1>\n\t\t\t\t\t<CreatePlaceForm onSuccess={onCreateSuccess} />\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default NewPlace;\n", "import { useState, useEffect } from \"react\";\nimport { gql, useMutation } from \"@apollo/client\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport type { Entity, Person, VerificationRequest } from \"~/types\";\nimport { EntityType, isPerson, CopyrightPermissionStatus } from \"~/types\";\nimport { VerificationRequestFragments } from \"~/fragments\";\nimport useVerificationRequestsForCurrentUser from \"~/hooks/useVerificationRequestsForCurrentUser\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\nimport SearchEntities from \"~/components/SearchEntities\";\nimport LoadingCircle from \"~/components/LoadingCircle\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\n\nconst CREATE_PRESIGNED_UPLOAD_URL_MUTATION = gql`\n\tmutation CreatePresignedUploadUrl($filename: String!) {\n\t\tcreatePresignedUploadUrlForVerificationImage(filename: $filename) {\n\t\t\timageS3Key\n\t\t\tpresignedUploadUrl\n\t\t}\n\t}\n`;\nconst CREATE_VERIFICATION_REQUEST_MUTATION = gql`\n\tmutation CreateVerificationRequest($input: CreateVerificationRequestInput!) {\n\t\tcreateVerificationRequest(input: $input) {\n\t\t\t...VerificationRequest\n\t\t}\n\t}\n\t${VerificationRequestFragments.verificationRequest}\n`;\n\ninterface CreatePresignedUploadUrlMutationData {\n\tcreatePresignedUploadUrlForVerificationImage: {\n\t\timageS3Key: string;\n\t\tpresignedUploadUrl: string;\n\t};\n}\ninterface CreatePresignedUploadUrlMutationVars {\n\tfilename: string;\n}\ninterface CreateVerificationRequestMutationData {\n\tcreateVerificationRequest: VerificationRequest;\n}\ninterface CreateVerificationRequestMutationVars {\n\tinput: {\n\t\tpersonId: string;\n\t\timageS3Key: string;\n\t\tcopyrightPermissionStatus: CopyrightPermissionStatus;\n\t};\n}\n\nconst AccountVerify = () => {\n\tconst navigate = useNavigate();\n\tconst [\n\t\t_,\n\t\t{\n\t\t\trefetch: refetchVerificationRequestsForCurrentUser,\n\t\t\tloading: refetchVerificationRequestsIsLoading,\n\t\t},\n\t] = useVerificationRequestsForCurrentUser();\n\n\tconst [personEntity, setPersonEntity] = useState<Person | undefined>();\n\tconst [imageFile, setImageFile] = useState<File>();\n\tconst [imageFileObjectUrl, setImageFileObjectUrl] = useState<\n\t\tstring | undefined\n\t>();\n\tconst [copyrightPermissionIsGranted, setCopyrightPermissionIsGranted] =\n\t\tuseState(false);\n\tconst [formIsSubmitting, setFormIsSubmitting] = useState(false);\n\n\tconst [createPresignedUploadUrl] = useMutation<\n\t\tCreatePresignedUploadUrlMutationData,\n\t\tCreatePresignedUploadUrlMutationVars\n\t>(CREATE_PRESIGNED_UPLOAD_URL_MUTATION, { errorPolicy: \"all\" });\n\n\tconst [createVerificationRequest] = useMutation<\n\t\tCreateVerificationRequestMutationData,\n\t\tCreateVerificationRequestMutationVars\n\t>(CREATE_VERIFICATION_REQUEST_MUTATION, { errorPolicy: \"all\" });\n\n\tconst onSelectEntity = (entity: Entity) => {\n\t\tif (isPerson(entity)) {\n\t\t\tsetPersonEntity(entity);\n\t\t}\n\t};\n\n\tconst onImageFileChanged = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tif (!event.target.files?.length) {\n\t\t\treturn;\n\t\t}\n\t\tconst selectedFile = event.target.files[0];\n\t\tsetImageFile(selectedFile);\n\t\tconst objectUrl = URL.createObjectURL(selectedFile);\n\t\tsetImageFileObjectUrl(objectUrl);\n\t};\n\t// Clear the existing object URL whenever it changes\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (imageFileObjectUrl) {\n\t\t\t\tURL.revokeObjectURL(imageFileObjectUrl);\n\t\t\t}\n\t\t};\n\t}, [imageFileObjectUrl]);\n\n\tconst requiredFieldsAreSet =\n\t\tpersonEntity && imageFile && copyrightPermissionIsGranted;\n\n\tconst onSubmitClicked = async () => {\n\t\tif (!requiredFieldsAreSet) {\n\t\t\treturn window.alert(\"Please fill out all the fields\");\n\t\t}\n\t\tsetFormIsSubmitting(true);\n\t\ttry {\n\t\t\t// Create a presigned upload URL for the image\n\t\t\tconst response = await createPresignedUploadUrl({\n\t\t\t\tvariables: { filename: imageFile.name },\n\t\t\t});\n\t\t\tconst { imageS3Key, presignedUploadUrl } =\n\t\t\t\tresponse.data.createPresignedUploadUrlForVerificationImage;\n\t\t\t// Upload the image\n\t\t\tawait fetch(presignedUploadUrl, { method: \"PUT\", body: imageFile });\n\t\t\t// Then create the VerificationRequest\n\t\t\tconst { data } = await createVerificationRequest({\n\t\t\t\tvariables: {\n\t\t\t\t\tinput: {\n\t\t\t\t\t\tpersonId: personEntity.id,\n\t\t\t\t\t\timageS3Key,\n\t\t\t\t\t\tcopyrightPermissionStatus:\n\t\t\t\t\t\t\tCopyrightPermissionStatus.FullNonCommercialGranted,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t\tif (!data.createVerificationRequest) {\n\t\t\t\tthrow new Error();\n\t\t\t}\n\t\t\t// Refetch the Verification Requests for current user and navigate to\n\t\t\t// their Account page\n\t\t\tawait refetchVerificationRequestsForCurrentUser();\n\t\t\tsetFormIsSubmitting(false);\n\t\t\tnavigate(\"/account\");\n\t\t} catch {\n\t\t\tsetFormIsSubmitting(false);\n\t\t\twindow.alert(\n\t\t\t\t\"Error submitting verification request. Please reload and try again.\"\n\t\t\t);\n\t\t}\n\t};\n\n\tconst shouldPromptToChoosePerson =\n\t\t!personEntity && imageFile && copyrightPermissionIsGranted;\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<Breadcrumb\n\t\t\t\t\titems={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Account\",\n\t\t\t\t\t\t\thref: \"/account\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: \"Verify Your Account\" },\n\t\t\t\t\t]}\n\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t/>\n\t\t\t\t<div className=\"mb-8 text-gray-500\">\n\t\t\t\t\tThis enables you to link your user account with a Person tag. For\n\t\t\t\t\texample, let's say you are Michael Coleman; you can link your user\n\t\t\t\t\taccount to the \"Michael Coleman\" tag on the site. You'll get a\n\t\t\t\t\tverified badge next to your username, and you'll be able to\n\t\t\t\t\timmediately take down any content that you're tagged in, if you want\n\t\t\t\t\tto. Verification is free and will be done by ITMA staff.\n\t\t\t\t</div>\n\n\t\t\t\t{!personEntity ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"mb-2\">\n\t\t\t\t\t\t\tSearch for your name and click on the Person if found. If it\n\t\t\t\t\t\t\tdoesn't exist yet, go ahead and create a new one.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex flex-col max-w-xs\">\n\t\t\t\t\t\t\t<SearchEntities\n\t\t\t\t\t\t\t\tclassName=\"mb-8\"\n\t\t\t\t\t\t\t\tentityTypes={[EntityType.Person]}\n\t\t\t\t\t\t\t\ttake={15}\n\t\t\t\t\t\t\t\tonSelect={onSelectEntity}\n\t\t\t\t\t\t\t\tonNewEntityCreated={onSelectEntity}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"mb-8\">\n\t\t\t\t\t\t<div className=\"mb-2 font-bold\">You have selected:</div>\n\t\t\t\t\t\t{personEntity.firstName} {personEntity.lastName}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"btn-text ml-2\"\n\t\t\t\t\t\t\tonClick={() => setPersonEntity(undefined)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tClear\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"mb-8\">\n\t\t\t\t\t<div className=\"mb-2\">\n\t\t\t\t\t\tPlease attach a photo proving your identity (utility bill, ID, etc;\n\t\t\t\t\t\twill be deleted after verification):\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\taccept=\".png,.jpeg,.jpg\"\n\t\t\t\t\t\tonChange={onImageFileChanged}\n\t\t\t\t\t\tclassName=\"block\"\n\t\t\t\t\t/>\n\t\t\t\t\t{imageFileObjectUrl && (\n\t\t\t\t\t\t<img src={imageFileObjectUrl} className=\"h-48 mt-4\" />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"mb-2\">\n\t\t\t\t\tDo you give the Irish Traditional Music Archive (ITMA) permission to\n\t\t\t\t\tmake recordings of you publicly available for non-commercial use,\n\t\t\t\t\tgiven that you can take them down at any time?\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mb-8 flex flex-row items-center justify-start\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tid=\"copyright-permission\"\n\t\t\t\t\t\tchecked={copyrightPermissionIsGranted}\n\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\tsetCopyrightPermissionIsGranted(event.target.checked)\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor=\"copyright-permission\" className=\"ml-2\">\n\t\t\t\t\t\tYes, I give permission\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\n\t\t\t\t{refetchVerificationRequestsIsLoading || formIsSubmitting ? (\n\t\t\t\t\t<LoadingCircle />\n\t\t\t\t) : (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn\"\n\t\t\t\t\t\tonClick={onSubmitClicked}\n\t\t\t\t\t\tdisabled={!requiredFieldsAreSet}\n\t\t\t\t\t>\n\t\t\t\t\t\tSubmit\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\n\t\t\t\t{shouldPromptToChoosePerson && (\n\t\t\t\t\t<div className=\"text-red-600 mt-6\">Please select a Person above</div>\n\t\t\t\t)}\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default AccountVerify;\n", "import { useEffect } from \"react\";\nimport type { LazyQueryResult } from \"@apollo/client\";\nimport { gql, useLazyQuery } from \"@apollo/client\";\n\nimport { VerificationRequestFragments } from \"~/fragments\";\nimport type { VerificationRequest } from \"~/types\";\n\nconst VERIFICATION_REQUESTS_FOR_CURRENT_USER_QUERY = gql`\n\tquery VerificationRequestsForCurrentUser {\n\t\tverificationRequestsForCurrentUser {\n\t\t\t...VerificationRequest\n\t\t}\n\t}\n\t${VerificationRequestFragments.verificationRequest}\n`;\n\ninterface QueryData {\n\tverificationRequestsForCurrentUser: VerificationRequest[];\n}\n\nconst useVerificationRequestsForCurrentUser = (): [\n\tVerificationRequest[] | undefined,\n\tLazyQueryResult<QueryData, {}>\n] => {\n\tconst [makeQuery, query] = useLazyQuery<QueryData>(\n\t\tVERIFICATION_REQUESTS_FOR_CURRENT_USER_QUERY\n\t);\n\n\tuseEffect(() => {\n\t\tmakeQuery();\n\t}, [makeQuery]);\n\n\tconst verificationRequests = query?.data?.verificationRequestsForCurrentUser;\n\n\treturn [verificationRequests, query];\n};\n\nexport default useVerificationRequestsForCurrentUser;\n", "import { useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport {\n\tisApprovedVerificationRequest,\n\tisPendingVerificationRequest,\n} from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport useVerificationRequestsForCurrentUser from \"~/hooks/useVerificationRequestsForCurrentUser\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\n\nconst AccountHome = () => {\n\tconst [verificationRequests = [], { loading, data, error }] =\n\t\tuseVerificationRequestsForCurrentUser();\n\n\tconst verifyYourselfMarkup = useMemo(() => {\n\t\tif (!loading && error) {\n\t\t\treturn (\n\t\t\t\t<span className=\"text-red-600\">\n\t\t\t\t\tError fetching verification status. Please reload.\n\t\t\t\t</span>\n\t\t\t);\n\t\t} else if (loading) {\n\t\t\treturn (\n\t\t\t\t<span className=\"text-gray-500\">Loading verification status...</span>\n\t\t\t);\n\t\t}\n\t\tconst approvedRequest = verificationRequests.find((request) =>\n\t\t\tisApprovedVerificationRequest(request)\n\t\t);\n\t\tif (approvedRequest) {\n\t\t\treturn (\n\t\t\t\t<span className=\"flex flex-row items-center\">\n\t\t\t\t\t<i className=\"material-icons text-base\">verified</i>\n\t\t\t\t\t<span className=\"ml-2 mr-1\">You are verified as</span>\n\t\t\t\t\t<Link to={EntityService.makeHrefForView(approvedRequest.person)}>\n\t\t\t\t\t\t{approvedRequest.person.name}\n\t\t\t\t\t</Link>\n\t\t\t\t</span>\n\t\t\t);\n\t\t}\n\t\tconst pendingRequest = verificationRequests.find((request) =>\n\t\t\tisPendingVerificationRequest(request)\n\t\t);\n\t\tif (pendingRequest) {\n\t\t\treturn (\n\t\t\t\t<span>\n\t\t\t\t\tYour request to verify as {pendingRequest.person.name} is pending\n\t\t\t\t</span>\n\t\t\t);\n\t\t}\n\t\treturn <Link to=\"/account/verify\">Verify Your Account</Link>;\n\t}, [data, loading, error, verificationRequests]);\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<h1 className=\"mb-4\">Account</h1>\n\t\t\t\t{verifyYourselfMarkup}\n\t\t\t\t<Link to=\"/account/submissions\">\n\t\t\t\t\t<a className=\"block mt-2\">\n\t\t\t\t\t\tSubmit Audio, Video, Images, or Documents to ITMA\n\t\t\t\t\t</a>\n\t\t\t\t</Link>\n\t\t\t\t<Link to=\"/logout\">\n\t\t\t\t\t<a className=\"block mt-2\">Log Out</a>\n\t\t\t\t</Link>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default AccountHome;\n", "import { Link } from \"@remix-run/react\";\nimport Layout from \"~/components/Layout\";\nimport RequireAdmin from \"~/components/RequireAdmin\";\n\nconst AdminHome = () => {\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireAdmin>\n\t\t\t\t<>\n\t\t\t\t\t<h1 className=\"mb-4\">Admin</h1>\n\t\t\t\t\t<Link to=\"/admin/verification-requests\">\n\t\t\t\t\t\t<a className=\"block mb-2\">Manage Verification Requests</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/admin/takedown-requests\">\n\t\t\t\t\t\t<a className=\"block mb-2\">Manage Takedown Requests</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/admin/submissions\">\n\t\t\t\t\t\t<a className=\"block mb-6\">Manage Submissions</a>\n\t\t\t\t\t</Link>\n\n\t\t\t\t\t<Link to=\"/entities/audio-items/new\">\n\t\t\t\t\t\t<a className=\"block mb-2\">Create Audio Item</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/people/new\">\n\t\t\t\t\t\t<a className=\"block mb-2\">Create Person</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/instruments/new\">\n\t\t\t\t\t\t<a className=\"block mb-2\">Create Instrument</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/places/new\">\n\t\t\t\t\t\t<a className=\"block mb-2\">Create Place</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/collections/new\">\n\t\t\t\t\t\t<a className=\"block mb-2\">Create Collection</a>\n\t\t\t\t\t</Link>\n\t\t\t\t</>\n\t\t\t</RequireAdmin>\n\t\t</Layout>\n\t);\n};\n\nexport default AdminHome;\n", "import { Link } from \"@remix-run/react\";\n\nimport useSavedItemsForUser from \"~/hooks/useSavedItemsForUser\";\nimport useFilters from \"~/hooks/useFilters\";\nimport { ViewAs } from \"~/types\";\n\nimport Layout from \"~/components/Layout\";\nimport RequireUser from \"~/components/RequireUser\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport AudioItem from \"~/components/AudioItem\";\n\nconst SavedItems = () => {\n\tconst [savedItems, { loading, error }] = useSavedItemsForUser();\n\n\tconst { Filters, filtersProps, viewAs } = useFilters({\n\t\tdefaultViewAs: ViewAs.List,\n\t});\n\n\treturn (\n\t\t<Layout>\n\t\t\t<RequireUser>\n\t\t\t\t<div className=\"flex flex-col\">\n\t\t\t\t\t<h1 className=\"mb-6\">Saved Items</h1>\n\n\t\t\t\t\t{savedItems?.length > 0 && (\n\t\t\t\t\t\t<Filters {...filtersProps} className=\"mb-6\" />\n\t\t\t\t\t)}\n\n\t\t\t\t\t{error && (\n\t\t\t\t\t\t<div className=\"text-red-600 mb-4\">Could not fetch saved items</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{loading && !savedItems && (\n\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\t<LoadingBlock />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{!loading && savedItems?.length === 0 && (\n\t\t\t\t\t\t<div className=\"text-gray-500\">\n\t\t\t\t\t\t\tNothing saved yet - try browsing some{\" \"}\n\t\t\t\t\t\t\t<Link to=\"/\">Audio Items</Link>!\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{savedItems?.map(({ audioItem }, index) => (\n\t\t\t\t\t\t<AudioItem\n\t\t\t\t\t\t\tviewAs={viewAs}\n\t\t\t\t\t\t\taudioItem={audioItem}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName={viewAs === ViewAs.List ? \"mb-4\" : \"mb-6\"}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</RequireUser>\n\t\t</Layout>\n\t);\n};\n\nexport default SavedItems;\n", "import { useEffect } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\nimport { Link } from \"@remix-run/react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport { UserFragments } from \"~/fragments\";\nimport type { User } from \"~/types\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\n\nimport Layout from \"~/components/Layout\";\nimport LoadingCircle from \"~/components/LoadingCircle\";\n\nconst AUTHENTICATE_WITH_AUTO_LOGIN_TOKEN = gql`\n\tmutation AuthenticateWithAutoLoginToken(\n\t\t$input: AuthenticateWithAutoLoginTokenInput!\n\t) {\n\t\tauthenticateWithAutoLoginToken(input: $input) {\n\t\t\t...CurrentUser\n\t\t}\n\t}\n\t${UserFragments.currentUser}\n`;\n\ninterface MutationData {\n\tauthenticateWithAutoLoginToken: User;\n}\ninterface MutationVars {\n\tinput: {\n\t\ttokenUnhashed: string;\n\t\tuserEmail: string;\n\t};\n}\n\nconst AutoLogin = () => {\n\tconst navigate = useNavigate();\n\tconst { tokenUnhashed, userEmail, redirectTo } = navigate.query;\n\n\tconst [\n\t\tcurrentUser,\n\t\t{ loading: currentUserLoading, refetch: refetchCurrentUser },\n\t] = useCurrentUser();\n\n\tconst [\n\t\tauthenticateWithAutoLoginToken,\n\t\t{ loading: authenticateLoading, data, error },\n\t] = useMutation<MutationData, MutationVars>(\n\t\tAUTHENTICATE_WITH_AUTO_LOGIN_TOKEN\n\t);\n\n\t// When a token and email are present in query params, attempt to authenticate\n\tuseEffect(() => {\n\t\tif (typeof tokenUnhashed !== \"string\" || typeof userEmail !== \"string\") {\n\t\t\treturn;\n\t\t}\n\t\tconst authenticate = async () => {\n\t\t\ttry {\n\t\t\t\tawait authenticateWithAutoLoginToken({\n\t\t\t\t\tvariables: { input: { tokenUnhashed, userEmail } },\n\t\t\t\t});\n\t\t\t} catch {\n\t\t\t\t//\n\t\t\t}\n\t\t};\n\t\tauthenticate();\n\t}, [tokenUnhashed, authenticateWithAutoLoginToken]);\n\n\t// Once auto-login token is authenticated, a cookie will now be set with JWT.\n\t// Refetch current user with that cookie.\n\tuseEffect(() => {\n\t\tif (data?.authenticateWithAutoLoginToken) {\n\t\t\trefetchCurrentUser();\n\t\t}\n\t}, [data, refetchCurrentUser]);\n\n\t// If the current user is logged in or there is no token/email set, redirect.\n\tuseEffect(() => {\n\t\tif (currentUser) {\n\t\t\tnavigate(typeof redirectTo === \"string\" ? redirectTo : \"/\");\n\t\t}\n\t}, [currentUser]);\n\n\t// Return a loading indicator while the redirect is happening\n\tif (currentUser) {\n\t\treturn (\n\t\t\t<Layout>\n\t\t\t\t<div className=\"flex flex-row items-center justify-center\">\n\t\t\t\t\t<LoadingCircle className=\"mr-4\" />\n\t\t\t\t\t<span className=\"text-gray-500\">Loading...</span>\n\t\t\t\t</div>\n\t\t\t</Layout>\n\t\t);\n\t}\n\n\tif (error) {\n\t\treturn (\n\t\t\t<Layout>\n\t\t\t\t<div className=\"text-red-600 mb-4\">\n\t\t\t\t\tError: {error?.graphQLErrors?.map(({ message }) => message)}\n\t\t\t\t</div>\n\t\t\t\t<Link\n\t\t\t\t\thref={{\n\t\t\t\t\t\tpathname: \"/login\",\n\t\t\t\t\t\tquery: redirectTo ? { redirectTo } : undefined,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tSend a new login link\n\t\t\t\t</Link>\n\t\t\t</Layout>\n\t\t);\n\t}\n\n\tif (authenticateLoading || currentUserLoading) {\n\t\treturn (\n\t\t\t<Layout>\n\t\t\t\t<div className=\"flex flex-row items-center justify-center\">\n\t\t\t\t\t<LoadingCircle className=\"mr-4\" />\n\t\t\t\t\t<span className=\"text-gray-500\">Loading...</span>\n\t\t\t\t</div>\n\t\t\t</Layout>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-3\">Check your email</h1>\n\t\t\t<div className=\"flex flex-row mb-6\">\n\t\t\t\t<i className=\"material-icons mr-2\">mail_outline</i>\n\t\t\t\tWe've emailed a magic link to you. Click it to log in.\n\t\t\t</div>\n\t\t\t<div className=\"text-gray-500\">\n\t\t\t\tDidn't get it? Check your spam folder or{\" \"}\n\t\t\t\t<Link\n\t\t\t\t\thref={{\n\t\t\t\t\t\tpathname: \"/login\",\n\t\t\t\t\t\tquery: redirectTo ? { redirectTo } : undefined,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tsend a new one\n\t\t\t\t</Link>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n};\n\nexport default AutoLogin;\n", "import { useMemo } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\nimport { Link } from \"@remix-run/react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport { UserFragments } from \"~/fragments\";\nimport type { User } from \"~/types\";\nimport { ViewAs } from \"~/types\";\nimport DateTimeService from \"~/services/DateTime\";\nimport EntityService from \"~/services/Entity\";\nimport useAudioItemsCreatedByUser from \"~/hooks/useAudioItemsCreatedByUser\";\nimport useFilters from \"~/hooks/useFilters\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport AudioItem from \"~/components/AudioItem\";\n\nconst USER_QUERY = gql`\n\tquery User($id: String!) {\n\t\tuser(id: $id) {\n\t\t\t...User\n\t\t}\n\t}\n\t${UserFragments.user}\n`;\n\nconst ViewUserById = () => {\n\tconst navigate = useNavigate();\n\tconst { id } = navigate.query;\n\n\tconst { data: userData, error: userError } = useQuery<{ user: User }>(\n\t\tUSER_QUERY,\n\t\t{\n\t\t\tvariables: { id },\n\t\t\tskip: !id,\n\t\t}\n\t);\n\tconst { username, createdAt, verifiedPerson } = userData?.user ?? {};\n\n\tconst [\n\t\taudioItems = [],\n\t\t{ loading: audioItemsLoading, error: audioItemsError },\n\t] = useAudioItemsCreatedByUser(userData?.user);\n\n\tconst { Filters, filtersProps, viewAs } = useFilters({\n\t\tdefaultViewAs: ViewAs.Cards,\n\t});\n\n\tconst aboutMarkup = useMemo(\n\t\t() => (\n\t\t\t<>\n\t\t\t\t{verifiedPerson && (\n\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\t\t\t<i className=\"material-icons text-base mr-2\">verified</i>\n\t\t\t\t\t\t\tVerified As Person:\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(verifiedPerson)}>\n\t\t\t\t\t\t\t{verifiedPerson.name}\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\tAccount Created:\n\t\t\t\t\t<br />\n\t\t\t\t\t<span className=\"text-gray-500\">\n\t\t\t\t\t\t{DateTimeService.formatDateYear(createdAt)}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t),\n\t\t[verifiedPerson, createdAt]\n\t);\n\n\tlet statusMessage;\n\tif (!userData && !userError) {\n\t\tstatusMessage = <LoadingBlock />;\n\t} else if (!userData && userError) {\n\t\tstatusMessage = `Error fetching User with id ${id}`;\n\t}\n\n\tif (statusMessage) {\n\t\treturn <Layout>{statusMessage}</Layout>;\n\t}\n\n\tconst noAudioItemsFound =\n\t\t!audioItemsLoading && !audioItemsError && audioItems.length === 0;\n\n\treturn (\n\t\t<Layout pageTitle={`Trad Archive - ${username}`}>\n\t\t\t<div className=\"flex flex-col-reverse md:flex-row\">\n\t\t\t\t<div className=\"flex flex-1 flex-col pb-8\">\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t\titems={[{ label: \"Users\" }, { label: username }]}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div className=\"flex-col mb-8 md:hidden\">{aboutMarkup}</div>\n\n\t\t\t\t\t{audioItemsLoading && <LoadingBlock />}\n\t\t\t\t\t{audioItemsError && (\n\t\t\t\t\t\t<div className=\"text-red-600\">Error fetching Audio Items</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{noAudioItemsFound && (\n\t\t\t\t\t\t<div className=\"text-gray-500\">\n\t\t\t\t\t\t\t{username} hasn't added any Audio Items yet\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{audioItems.length > 0 && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Filters {...filtersProps} className=\"mb-6\" />\n\t\t\t\t\t\t\t{audioItems.map((audioItem, index) => (\n\t\t\t\t\t\t\t\t<AudioItem\n\t\t\t\t\t\t\t\t\tviewAs={viewAs}\n\t\t\t\t\t\t\t\t\taudioItem={audioItem}\n\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\tclassName=\"mb-8\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"hidden md:flex flex-col items-start pb-8 md:ml-8 md:pl-8 md:w-1/4 md:border-l md:border-gray-300\">\n\t\t\t\t\t<h3 className=\"mb-4\">About</h3>\n\t\t\t\t\t{aboutMarkup}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewUserById;\n", "import { useEffect } from \"react\";\nimport { useLazyQuery, gql, LazyQueryResult } from \"@apollo/client\";\nimport { User, AudioItem } from \"types\";\nimport { EntityFragments } from \"~/fragments\";\n\nexport const AUDIO_ITEMS_CREATED_BY_USER_QUERY = gql`\n\tquery AudioItemsCreatedByUser($input: AudioItemsCreatedByUserInput!) {\n\t\taudioItemsCreatedByUser(input: $input) {\n\t\t\t...AudioItem\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n`;\n\ninterface QueryData {\n\taudioItemsCreatedByUser?: AudioItem[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\tuserId: string;\n\t\ttake?: number;\n\t\tskip?: number;\n\t};\n}\n\nconst useAudioItemsCreatedByUser = (\n\tuser?: User\n): [AudioItem[] | undefined, LazyQueryResult<QueryData, QueryVariables>] => {\n\tconst [makeQuery, query] = useLazyQuery<QueryData, QueryVariables>(\n\t\tAUDIO_ITEMS_CREATED_BY_USER_QUERY,\n\t\t{\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tuserId: user?.id,\n\t\t\t\t},\n\t\t\t},\n\t\t}\n\t);\n\n\tuseEffect(() => {\n\t\tif (user) {\n\t\t\tmakeQuery();\n\t\t}\n\t}, [makeQuery, user]);\n\n\tconst audioItems = query.data?.audioItemsCreatedByUser;\n\n\treturn [audioItems, query];\n};\n\nexport default useAudioItemsCreatedByUser;\n", "import { useEffect } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport Layout from \"~/components/Layout\";\n\nconst LOG_OUT_MUTATION = gql`\n\tmutation LogOut {\n\t\tlogOut\n\t}\n`;\n\nconst LogOut = () => {\n\tconst navigate = useNavigate();\n\n\tconst [logOut, { data: logOutData }] = useMutation(LOG_OUT_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\n\tuseEffect(() => {\n\t\tlogOut();\n\t}, [logOut]);\n\n\tuseEffect(() => {\n\t\tif (logOutData?.logOut) {\n\t\t\twindow.location.href = window.location.origin;\n\t\t}\n\t}, [logOutData]);\n\n\treturn (\n\t\t<Layout>\n\t\t\t<span className=\"text-gray-500\">Logging out...</span>\n\t\t</Layout>\n\t);\n};\n\nexport default LogOut;\n", "import { useEffect, useState } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\nimport { Link } from \"@remix-run/react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\nimport Layout from \"~/components/Layout\";\nimport type { User } from \"~/types\";\nimport { UserFragments } from \"~/fragments\";\n\nconst SIGN_UP_MUTATION = gql`\n\tmutation SignUp($input: SignUpInput!) {\n\t\tsignUp(input: $input) {\n\t\t\t...CurrentUser\n\t\t}\n\t}\n\t${UserFragments.currentUser}\n`;\ninterface MutationData {\n\tsignUp: User;\n}\n\nconst SignUp = () => {\n\tconst navigate = useNavigate();\n\tconst { redirectTo } = navigate.query;\n\tconst [currentUser] = useCurrentUser();\n\n\tconst [email, setEmail] = useState(\"\");\n\tconst [username, setUsername] = useState(\"\");\n\tconst [validationError, setValidationError] = useState(\"\");\n\n\tconst [signUp, { loading, data, error }] = useMutation<MutationData>(\n\t\tSIGN_UP_MUTATION,\n\t\t{\n\t\t\terrorPolicy: \"all\",\n\t\t}\n\t);\n\tconst onSignUp = (event) => {\n\t\tevent.preventDefault();\n\t\tsetValidationError(\"\");\n\t\tconst cleanedEmail = email.trim().toLowerCase();\n\t\tsignUp({\n\t\t\tvariables: {\n\t\t\t\tinput: { email: cleanedEmail, username, redirectTo },\n\t\t\t},\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.signUp) {\n\t\t\tnavigate(\"/auto-login\");\n\t\t}\n\t}, [data, navigate]);\n\n\tif (currentUser) {\n\t\tnavigate(typeof redirectTo === \"string\" ? redirectTo : \"/\");\n\t}\n\n\tconst logInLinkQueryParams = redirectTo ? { redirectTo } : undefined;\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">\n\t\t\t\t{redirectTo ? \"Create an account to continue\" : \"Create your account\"}\n\t\t\t</h1>\n\t\t\t<div className=\"flex flex-col align-start max-w-xs\">\n\t\t\t\t<form onSubmit={onSignUp}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Your email\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\tonChange={(event) => setEmail(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Your full name\"\n\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\tvalue={username}\n\t\t\t\t\t\tonChange={(event) => setUsername(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Sign Up\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\n\t\t\t\t{validationError && (\n\t\t\t\t\t<div className=\"text-red-600 mb-4\">{validationError}</div>\n\t\t\t\t)}\n\t\t\t\t{error && <div className=\"text-red-600 mb-4\">{error.message}</div>}\n\n\t\t\t\t<div>\n\t\t\t\t\tAlready have an account?{\" \"}\n\t\t\t\t\t<Link to={{ pathname: \"/login\", query: logInLinkQueryParams }}>\n\t\t\t\t\t\tLog in\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n};\n\nexport default SignUp;\n", "import { useEffect, useMemo, useCallback, useState } from \"react\";\nimport { gql } from \"@apollo/client\";\nimport { Link } from \"@remix-run/react\";\n\nimport { EntityStatus, SortBy, ViewAs } from \"~/types\";\nimport useAudioItems, { AUDIO_ITEMS_QUERY } from \"~/hooks/useAudioItems\";\nimport useComments, { COMMENTS_QUERY } from \"~/hooks/useComments\";\nimport useCollections, { COLLECTIONS_QUERY } from \"~/hooks/useCollections\";\nimport useFilters from \"~/hooks/useFilters\";\nimport EntityService from \"~/services/Entity\";\nimport CommentService from \"~/services/Comment\";\nimport LocalStorageService from \"~/services/LocalStorage\";\n\nimport Layout from \"~/components/Layout\";\nimport ProjectIntro from \"~/components/ProjectIntro\";\nimport AudioItemComponent from \"~/components/AudioItem\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst NUM_AUDIO_ITEMS_TO_FETCH = 10;\nconst NUM_COMMENTS_TO_FETCH = 6;\nconst NUM_COLLECTIONS_TO_FETCH = 5;\n\nexport default function Home() {\n\tconst { Filters, filtersProps, sortBy, viewAs } = useFilters({\n\t\tdefaultSortBy: SortBy.RecentlyTagged,\n\t\tdefaultViewAs: ViewAs.Cards,\n\t\tenableQueryParams: false,\n\t});\n\n\t// These queries skip the initial network request if the cache was\n\t// pre-populated via static props\n\tconst [\n\t\tfetchedAudioItems,\n\t\t{ loading: audioItemsLoading, error: audioItemsError },\n\t\tfetchNextPage,\n\t] = useAudioItems({\n\t\tsortBy,\n\t\tresultsPerPage: NUM_AUDIO_ITEMS_TO_FETCH,\n\t\tqueryOptions: {\n\t\t\tfetchPolicy: \"cache-only\",\n\t\t},\n\t});\n\tconst {\n\t\tcomments: fetchedComments,\n\t\tcommentsQuery: { loading: commentsLoading },\n\t} = useComments({\n\t\tresultsPerPage: NUM_COMMENTS_TO_FETCH,\n\t\tqueryOptions: {\n\t\t\tfetchPolicy: \"cache-only\",\n\t\t},\n\t});\n\tconst [fetchedCollections, { loading: collectionsLoading }] = useCollections({\n\t\tresultsPerPage: NUM_COLLECTIONS_TO_FETCH,\n\t\tsortBy: SortBy.RecentlyAdded,\n\t\tqueryOptions: {\n\t\t\tfetchPolicy: \"cache-only\",\n\t\t},\n\t});\n\n\tconst audioItems = fetchedAudioItems;\n\n\tconst comments = useMemo(() => {\n\t\tconst data = fetchedComments ?? [];\n\t\tconst sorted = CommentService.sortByCreatedAtDesc(data);\n\t\treturn sorted.slice(0, NUM_COMMENTS_TO_FETCH);\n\t}, [fetchedComments]);\n\n\tconst collections = useMemo(() => {\n\t\tconst data = fetchedCollections ?? [];\n\t\treturn data.slice(0, NUM_COLLECTIONS_TO_FETCH);\n\t}, [fetchedCollections]);\n\n\t// Due to static rendering, we need to check localStorage for intro status\n\t// after client-side hydration.\n\tconst [shouldShowIntro, setShouldShowIntro] = useState(false);\n\tuseEffect(() => {\n\t\tif (LocalStorageService.getItem(\"SHOULD_SHOW_INTRO\") !== \"false\") {\n\t\t\tsetShouldShowIntro(true);\n\t\t}\n\t}, []);\n\tconst onCloseIntro = useCallback(() => {\n\t\tLocalStorageService.setItem(\"SHOULD_SHOW_INTRO\", \"false\");\n\t\tsetShouldShowIntro(false);\n\t}, []);\n\n\treturn (\n\t\t<Layout pageTitle=\"Trad Archive - Home\">\n\t\t\t{shouldShowIntro && (\n\t\t\t\t<ProjectIntro\n\t\t\t\t\tclassName=\"mb-8 md:mt-4 md:mb-12\"\n\t\t\t\t\tonClose={onCloseIntro}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t<div className=\"flex flex-col md:flex-row\">\n\t\t\t\t<div className=\"flex flex-1 flex-col pb-8\">\n\t\t\t\t\t<h1 className=\"mb-6\">Explore</h1>\n\n\t\t\t\t\t<Filters {...filtersProps} className=\"mb-6\" />\n\n\t\t\t\t\t{!audioItems && audioItemsError && (\n\t\t\t\t\t\t<div className=\"text-red-600\">{audioItemsError.message}</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{!audioItemsLoading && audioItems?.length === 0 && (\n\t\t\t\t\t\t<div className=\"text-gray-500\">No Audio Items found</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{audioItems?.map((audioItem, index) => (\n\t\t\t\t\t\t<AudioItemComponent\n\t\t\t\t\t\t\tviewAs={viewAs}\n\t\t\t\t\t\t\taudioItem={audioItem}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName={viewAs === ViewAs.List ? \"mb-4\" : \"mb-6\"}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t\t{audioItemsLoading && <LoadingBlock />}\n\t\t\t\t\t{!audioItemsLoading && audioItems?.length > 0 && (\n\t\t\t\t\t\t<div className=\"flex flex-row justify-center\">\n\t\t\t\t\t\t\t<button className=\"btn-text\" onClick={fetchNextPage}>\n\t\t\t\t\t\t\t\tLoad More\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"flex flex-col items-start md:ml-8 md:pl-8 md:w-1/4 md:border-l md:border-gray-300\">\n\t\t\t\t\t<h3 className=\"mb-4\">Browse</h3>\n\t\t\t\t\t<Link to=\"/entities/people\">\n\t\t\t\t\t\t<a className=\"mb-2\">People</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/instruments\">\n\t\t\t\t\t\t<a className=\"mb-2\">Instruments</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/places\">\n\t\t\t\t\t\t<a className=\"mb-2\">Places</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/tunes\">\n\t\t\t\t\t\t<a className=\"mb-2\">Tunes</a>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/collections\">\n\t\t\t\t\t\t<a className=\"mb-2\">Collections</a>\n\t\t\t\t\t</Link>\n\n\t\t\t\t\t{/* {prefetchedStats && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<h3 className=\"mt-6 mb-4\">Stats</h3>\n\t\t\t\t\t\t\t<span className=\"mb-2 text-gray-500\">\n\t\t\t\t\t\t\t\t{prefetchedStats.numAudioItemsAllTime} Audio Items\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span className=\"mb-2 text-gray-500\">\n\t\t\t\t\t\t\t\t{prefetchedStats.numTagsAllTime} Tags\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span className=\"mb-2 text-gray-500\">\n\t\t\t\t\t\t\t\t{prefetchedStats.numCommentsAllTime} Comments\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)} */}\n\n\t\t\t\t\t<h3 className=\"mt-6 mb-4\">Latest Collections</h3>\n\t\t\t\t\t{collectionsLoading && collections?.length === 0 && <LoadingBlock />}\n\t\t\t\t\t{!collectionsLoading && collections?.length === 0 && (\n\t\t\t\t\t\t<div className=\"text-gray-500\">None</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{collections?.map((collection, index) => {\n\t\t\t\t\t\tconst { name } = collection;\n\t\t\t\t\t\tif (!name) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"mb-2 text-gray-500\" key={index}>\n\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(collection)}>\n\t\t\t\t\t\t\t\t\t{collection.name}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\n\t\t\t\t\t<h3 className=\"mt-6 mb-4\">Latest Features + Fixes</h3>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\thref=\"https://github.com/dgurns/trad-archive/pulls?q=is%3Apr+is%3Amerged+sort%3Aupdated-desc\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t>\n\t\t\t\t\t\tView on GitHub <i className=\"material-icons text-sm\">launch</i>\n\t\t\t\t\t</a>\n\n\t\t\t\t\t<h3 className=\"mt-6 mb-4\">Latest Comments</h3>\n\t\t\t\t\t{commentsLoading && comments?.length === 0 && <LoadingBlock />}\n\t\t\t\t\t{!commentsLoading && comments?.length === 0 && (\n\t\t\t\t\t\t<div className=\"text-gray-500\">None</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{comments?.map((comment, index) => {\n\t\t\t\t\t\tconst { createdByUser, parentAudioItem, text } = comment;\n\t\t\t\t\t\tif (!createdByUser) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"mb-4 text-gray-500\" key={index}>\n\t\t\t\t\t\t\t\t<div className=\" mb-1\">\n\t\t\t\t\t\t\t\t\t<Link to={`/users/${createdByUser.id}`}>\n\t\t\t\t\t\t\t\t\t\t{createdByUser.username}\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t{` commented on `}\n\t\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(parentAudioItem)}>\n\t\t\t\t\t\t\t\t\t\t{parentAudioItem.name}\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t{\":\"}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"whitespace-pre-line text-sm\">{text}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n", "import compareDesc from \"date-fns/compareDesc\";\n\nimport type { Comment } from \"~/types\";\n\nconst sortByCreatedAtDesc = (comments: Comment[]) => {\n\tlet sortedComments = [...comments];\n\tsortedComments.sort((a, b) => {\n\t\treturn compareDesc(new Date(a.createdAt), new Date(b.createdAt));\n\t});\n\treturn sortedComments;\n};\n\nconst CommentService = {\n\tsortByCreatedAtDesc,\n};\nexport default CommentService;\n", "const localStorageIsAvailable =\n\ttypeof window !== \"undefined\" && window?.localStorage;\n\nconst setItem = (key: string, value: string) => {\n\tif (localStorageIsAvailable) {\n\t\twindow.localStorage.setItem(key, value);\n\t}\n};\nconst getItem = (key: string): string | null | undefined => {\n\tif (localStorageIsAvailable) {\n\t\treturn window.localStorage.getItem(key);\n\t}\n\treturn undefined;\n};\n\nconst LocalStorageService = {\n\tsetItem,\n\tgetItem,\n};\nexport default LocalStorageService;\n", "interface Props {\n\tclassName?: string;\n\tonClose?: () => void;\n}\n\nconst ProjectIntro = ({ className, onClose }: Props) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-col flex-grow bg-gray-200 rounded p-4 pl-16 lg:pl-20 relative ${\n\t\t\t\tclassName ?? \"\"\n\t\t\t}`}\n\t\t>\n\t\t\t<img\n\t\t\t\tsrc=\"/logo-square.png\"\n\t\t\t\tclassName=\"absolute top-5 -left-1 lg:-left-8 w-12 lg:w-20 -rotate-12\"\n\t\t\t/>\n\t\t\t<strong>Welcome!</strong>\n\t\t\t<br />\n\t\t\tTrad Archive is an open source experiment by the Irish Traditional Music\n\t\t\tArchive and Dan Gurney.\n\t\t\t<br />\n\t\t\t<br />\n\t\t\tYou can...\n\t\t\t<br />\n\t\t\t<ul className=\"list-disc list-inside\">\n\t\t\t\t<li>Listen to previously unreleased archival recordings</li>\n\t\t\t\t<li>\n\t\t\t\t\tHelp by tagging each recording with People, Places, Tunes,\n\t\t\t\t\tInstruments, and Collections\n\t\t\t\t</li>\n\t\t\t\t<li>Save favorites to listen later</li>\n\t\t\t</ul>\n\t\t\t<button className=\"absolute top-2 right-2 btn-icon\" onClick={onClose}>\n\t\t\t\t<i className=\"material-icons\">close</i>\n\t\t\t</button>\n\t\t</div>\n\t);\n};\n\nexport default ProjectIntro;\n", "import { useEffect, useState } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\nimport { Link } from \"@remix-run/react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\nimport Layout from \"~/components/Layout\";\nimport type { User } from \"~/types\";\nimport { UserFragments } from \"~/fragments\";\n\nconst LOG_IN_MUTATION = gql`\n\tmutation LogIn($input: LogInInput!) {\n\t\tlogIn(input: $input) {\n\t\t\t...CurrentUser\n\t\t}\n\t}\n\t${UserFragments.currentUser}\n`;\ninterface MutationData {\n\tlogIn: User;\n}\n\nconst Login = () => {\n\tconst navigate = useNavigate();\n\tconst { redirectTo } = navigate.query;\n\tconst [currentUser] = useCurrentUser();\n\n\tconst [email, setEmail] = useState(\"\");\n\n\tconst [logIn, { loading, data, error }] = useMutation<MutationData>(\n\t\tLOG_IN_MUTATION,\n\t\t{\n\t\t\terrorPolicy: \"all\",\n\t\t}\n\t);\n\n\tconst onLogIn = (event) => {\n\t\tevent.preventDefault();\n\t\tconst cleanedEmail = email.trim().toLowerCase();\n\t\tlogIn({\n\t\t\tvariables: { input: { email: cleanedEmail, redirectTo } },\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tif (data?.logIn) {\n\t\t\tnavigate(\"/auto-login\");\n\t\t}\n\t}, [data, navigate]);\n\n\tif (currentUser) {\n\t\tnavigate(typeof redirectTo === \"string\" ? redirectTo : \"/\");\n\t}\n\n\tconst signUpLinkQueryParams = redirectTo ? { redirectTo } : undefined;\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">\n\t\t\t\tLog in to {redirectTo ? \"continue\" : \"Trad Archive\"}\n\t\t\t</h1>\n\t\t\t<div className=\"flex flex-col align-start max-w-xs\">\n\t\t\t\t<form onSubmit={onLogIn}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Your email\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\tonChange={(event) => setEmail(event.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tvalue=\"Log In\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t\t{error && <div className=\"text-red-600 mb-4\">{error.message}</div>}\n\t\t\t\t<div>\n\t\t\t\t\tDon't have an account yet?{\" \"}\n\t\t\t\t\t<Link to={{ pathname: \"/signup\", query: signUpLinkQueryParams }}>\n\t\t\t\t\t\tSign Up\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n};\n\nexport default Login;\n", "export default {'version':'4cfda7d7','entry':{'module':'/build/entry.client-B3YHXAIT.js','imports':['/build/_shared/chunk-FLLJNSWK.js']},'routes':{'root':{'id':'root','parentId':undefined,'path':'','index':undefined,'caseSensitive':undefined,'module':'/build/root-JT3SIGMM.js','imports':['/build/_shared/chunk-KIIWXZTD.js','/build/_shared/chunk-LAMARZU6.js','/build/_shared/chunk-VRHS5C76.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/account/index':{'id':'routes/account/index','parentId':'root','path':'account','index':true,'caseSensitive':undefined,'module':'/build/routes/account/index-AYIG7JTZ.js','imports':['/build/_shared/chunk-7LWQ72M3.js','/build/_shared/chunk-4IYCYPOC.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/account/submissions/[id]/upload':{'id':'routes/account/submissions/[id]/upload','parentId':'root','path':'account/submissions/id/upload','index':undefined,'caseSensitive':undefined,'module':'/build/routes/account/submissions/[id]/upload-XZM7NRAO.js','imports':['/build/_shared/chunk-ENZPEVYP.js','/build/_shared/chunk-LLYMHSPL.js','/build/_shared/chunk-4IYCYPOC.js','/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/account/submissions/index':{'id':'routes/account/submissions/index','parentId':'root','path':'account/submissions','index':true,'caseSensitive':undefined,'module':'/build/routes/account/submissions/index-D3LBLEX3.js','imports':['/build/_shared/chunk-ENZPEVYP.js','/build/_shared/chunk-LLYMHSPL.js','/build/_shared/chunk-4IYCYPOC.js','/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/account/submissions/new':{'id':'routes/account/submissions/new','parentId':'root','path':'account/submissions/new','index':undefined,'caseSensitive':undefined,'module':'/build/routes/account/submissions/new-57MXMC7T.js','imports':['/build/_shared/chunk-LLYMHSPL.js','/build/_shared/chunk-4IYCYPOC.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/account/verify':{'id':'routes/account/verify','parentId':'root','path':'account/verify','index':undefined,'caseSensitive':undefined,'module':'/build/routes/account/verify-TWFLJFMW.js','imports':['/build/_shared/chunk-7LWQ72M3.js','/build/_shared/chunk-LLYMHSPL.js','/build/_shared/chunk-4IYCYPOC.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/admin/index':{'id':'routes/admin/index','parentId':'root','path':'admin','index':true,'caseSensitive':undefined,'module':'/build/routes/admin/index-P2QQBZZ6.js','imports':['/build/_shared/chunk-X7GPRPOX.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/admin/submissions/[id]':{'id':'routes/admin/submissions/[id]','parentId':'root','path':'admin/submissions/id','index':undefined,'caseSensitive':undefined,'module':'/build/routes/admin/submissions/[id]-F3WRHYGP.js','imports':['/build/_shared/chunk-X7GPRPOX.js','/build/_shared/chunk-ENZPEVYP.js','/build/_shared/chunk-LLYMHSPL.js','/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/admin/submissions/index':{'id':'routes/admin/submissions/index','parentId':'root','path':'admin/submissions','index':true,'caseSensitive':undefined,'module':'/build/routes/admin/submissions/index-ENWZI3AP.js','imports':['/build/_shared/chunk-X7GPRPOX.js','/build/_shared/chunk-ENZPEVYP.js','/build/_shared/chunk-LLYMHSPL.js','/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/admin/takedown-requests':{'id':'routes/admin/takedown-requests','parentId':'root','path':'admin/takedown-requests','index':undefined,'caseSensitive':undefined,'module':'/build/routes/admin/takedown-requests-YAVIYRA4.js','imports':['/build/_shared/chunk-X7GPRPOX.js','/build/_shared/chunk-2QUGVLAY.js','/build/_shared/chunk-ENZPEVYP.js','/build/_shared/chunk-LLYMHSPL.js','/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/admin/verification-requests':{'id':'routes/admin/verification-requests','parentId':'root','path':'admin/verification-requests','index':undefined,'caseSensitive':undefined,'module':'/build/routes/admin/verification-requests-LX2RFED7.js','imports':['/build/_shared/chunk-X7GPRPOX.js','/build/_shared/chunk-2QUGVLAY.js','/build/_shared/chunk-ENZPEVYP.js','/build/_shared/chunk-LLYMHSPL.js','/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/auto-login':{'id':'routes/auto-login','parentId':'root','path':'auto-login','index':undefined,'caseSensitive':undefined,'module':'/build/routes/auto-login-6BCTSJ6M.js','imports':['/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/[slug]':{'id':'routes/entities/audio-items/[slug]','parentId':'root','path':'entities/audio-items/slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/[slug]-WJPEU26U.js','imports':['/build/_shared/chunk-B3DB75ZZ.js','/build/_shared/chunk-ZZLNVVVK.js','/build/_shared/chunk-2QUGVLAY.js','/build/_shared/chunk-ENZPEVYP.js','/build/_shared/chunk-LLYMHSPL.js','/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/[slug]/about':{'id':'routes/entities/audio-items/[slug]/about','parentId':'routes/entities/audio-items/[slug]','path':'about','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/[slug]/about-6SNMTON7.js','imports':['/build/_shared/chunk-KIIWXZTD.js','/build/_shared/chunk-LAMARZU6.js','/build/_shared/chunk-VRHS5C76.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/[slug]/edit':{'id':'routes/entities/audio-items/[slug]/edit','parentId':'routes/entities/audio-items/[slug]','path':'edit','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/[slug]/edit-Z6XGGZAS.js','imports':['/build/_shared/chunk-4IYCYPOC.js','/build/_shared/chunk-LAMARZU6.js','/build/_shared/chunk-VRHS5C76.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/[slug]/tags':{'id':'routes/entities/audio-items/[slug]/tags','parentId':'routes/entities/audio-items/[slug]','path':'tags','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/[slug]/tags-JPHTSR7F.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/index':{'id':'routes/entities/audio-items/index','parentId':'root','path':'entities/audio-items','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/index-KZGTKDMM.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/new':{'id':'routes/entities/audio-items/new','parentId':'root','path':'entities/audio-items/new','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/new-5JDM27YS.js','imports':['/build/_shared/chunk-BXI6BDQN.js','/build/_shared/chunk-X7GPRPOX.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/random':{'id':'routes/entities/audio-items/random','parentId':'root','path':'entities/audio-items/random','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/random-Q3HPHDZQ.js','imports':['/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/collections/[slug]':{'id':'routes/entities/collections/[slug]','parentId':'root','path':'entities/collections/slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/collections/[slug]-CYFGKF4M.js','imports':['/build/_shared/chunk-OETW3RPP.js','/build/_shared/chunk-UKZHEFXV.js','/build/_shared/chunk-GKDZXAYJ.js','/build/_shared/chunk-ZZLNVVVK.js','/build/_shared/chunk-2QUGVLAY.js','/build/_shared/chunk-ENZPEVYP.js','/build/_shared/chunk-LLYMHSPL.js','/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/collections/[slug]/about':{'id':'routes/entities/collections/[slug]/about','parentId':'routes/entities/collections/[slug]','path':'about','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/collections/[slug]/about-4W24JJ2D.js','imports':['/build/_shared/chunk-KIIWXZTD.js','/build/_shared/chunk-LAMARZU6.js','/build/_shared/chunk-VRHS5C76.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/collections/[slug]/edit':{'id':'routes/entities/collections/[slug]/edit','parentId':'routes/entities/collections/[slug]','path':'edit','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/collections/[slug]/edit-G5CFA5UZ.js','imports':['/build/_shared/chunk-4IYCYPOC.js','/build/_shared/chunk-LAMARZU6.js','/build/_shared/chunk-VRHS5C76.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/collections/[slug]/tags':{'id':'routes/entities/collections/[slug]/tags','parentId':'routes/entities/collections/[slug]','path':'tags','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/collections/[slug]/tags-JLAXKHXU.js','imports':['/build/_shared/chunk-QFB5P7GO.js','/build/_shared/chunk-KIIWXZTD.js','/build/_shared/chunk-LAMARZU6.js','/build/_shared/chunk-VRHS5C76.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/collections/index':{'id':'routes/entities/collections/index','parentId':'root','path':'entities/collections','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/collections/index-6A4M3L6W.js','imports':['/build/_shared/chunk-WNJDALNM.js','/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/collections/new':{'id':'routes/entities/collections/new','parentId':'root','path':'entities/collections/new','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/collections/new-FKF7NU2U.js','imports':['/build/_shared/chunk-4IYCYPOC.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/instruments/[slug]':{'id':'routes/entities/instruments/[slug]','parentId':'root','path':'entities/instruments/slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/instruments/[slug]-LWP447LW.js','imports':['/build/_shared/chunk-RRHTKVRL.js','/build/_shared/chunk-UKZHEFXV.js','/build/_shared/chunk-GKDZXAYJ.js','/build/_shared/chunk-ZZLNVVVK.js','/build/_shared/chunk-2QUGVLAY.js','/build/_shared/chunk-ENZPEVYP.js','/build/_shared/chunk-LLYMHSPL.js','/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/instruments/[slug]/about':{'id':'routes/entities/instruments/[slug]/about','parentId':'routes/entities/instruments/[slug]','path':'about','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/instruments/[slug]/about-4UN7SQXZ.js','imports':['/build/_shared/chunk-KIIWXZTD.js','/build/_shared/chunk-LAMARZU6.js','/build/_shared/chunk-VRHS5C76.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/instruments/[slug]/edit':{'id':'routes/entities/instruments/[slug]/edit','parentId':'routes/entities/instruments/[slug]','path':'edit','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/instruments/[slug]/edit-K62AXD2V.js','imports':['/build/_shared/chunk-4IYCYPOC.js','/build/_shared/chunk-LAMARZU6.js','/build/_shared/chunk-VRHS5C76.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/instruments/[slug]/tags':{'id':'routes/entities/instruments/[slug]/tags','parentId':'routes/entities/instruments/[slug]','path':'tags','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/instruments/[slug]/tags-ZG7ALVVN.js','imports':['/build/_shared/chunk-QFB5P7GO.js','/build/_shared/chunk-KIIWXZTD.js','/build/_shared/chunk-LAMARZU6.js','/build/_shared/chunk-VRHS5C76.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/instruments/index':{'id':'routes/entities/instruments/index','parentId':'root','path':'entities/instruments','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/instruments/index-HC22DDF6.js','imports':['/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/instruments/new':{'id':'routes/entities/instruments/new','parentId':'root','path':'entities/instruments/new','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/instruments/new-ZCH7RODU.js','imports':['/build/_shared/chunk-4IYCYPOC.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/people/[slug]':{'id':'routes/entities/people/[slug]','parentId':'root','path':'entities/people/slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/people/[slug]-WAY2SLXI.js','imports':['/build/_shared/chunk-K7NMSXNA.js','/build/_shared/chunk-UKZHEFXV.js','/build/_shared/chunk-GKDZXAYJ.js','/build/_shared/chunk-ZZLNVVVK.js','/build/_shared/chunk-2QUGVLAY.js','/build/_shared/chunk-ENZPEVYP.js','/build/_shared/chunk-LLYMHSPL.js','/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/people/[slug]/about':{'id':'routes/entities/people/[slug]/about','parentId':'routes/entities/people/[slug]','path':'about','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/people/[slug]/about-IQJNYKUP.js','imports':['/build/_shared/chunk-KIIWXZTD.js','/build/_shared/chunk-LAMARZU6.js','/build/_shared/chunk-VRHS5C76.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/people/[slug]/edit':{'id':'routes/entities/people/[slug]/edit','parentId':'routes/entities/people/[slug]','path':'edit','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/people/[slug]/edit-JQWQYZGR.js','imports':['/build/_shared/chunk-4IYCYPOC.js','/build/_shared/chunk-LAMARZU6.js','/build/_shared/chunk-VRHS5C76.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/people/[slug]/tags':{'id':'routes/entities/people/[slug]/tags','parentId':'routes/entities/people/[slug]','path':'tags','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/people/[slug]/tags-65HZCNO4.js','imports':['/build/_shared/chunk-QFB5P7GO.js','/build/_shared/chunk-KIIWXZTD.js','/build/_shared/chunk-LAMARZU6.js','/build/_shared/chunk-VRHS5C76.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/people/index':{'id':'routes/entities/people/index','parentId':'root','path':'entities/people','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/people/index-7EMPBOQG.js','imports':['/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/people/new':{'id':'routes/entities/people/new','parentId':'root','path':'entities/people/new','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/people/new-GY6T5KWN.js','imports':['/build/_shared/chunk-4IYCYPOC.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/places/[slug]':{'id':'routes/entities/places/[slug]','parentId':'root','path':'entities/places/slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/places/[slug]-FOTKF5DW.js','imports':['/build/_shared/chunk-IIM3AE4S.js','/build/_shared/chunk-UKZHEFXV.js','/build/_shared/chunk-GKDZXAYJ.js','/build/_shared/chunk-ZZLNVVVK.js','/build/_shared/chunk-2QUGVLAY.js','/build/_shared/chunk-ENZPEVYP.js','/build/_shared/chunk-LLYMHSPL.js','/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/places/[slug]/about':{'id':'routes/entities/places/[slug]/about','parentId':'routes/entities/places/[slug]','path':'about','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/places/[slug]/about-LFXCWL4P.js','imports':['/build/_shared/chunk-KIIWXZTD.js','/build/_shared/chunk-LAMARZU6.js','/build/_shared/chunk-VRHS5C76.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/places/[slug]/edit':{'id':'routes/entities/places/[slug]/edit','parentId':'routes/entities/places/[slug]','path':'edit','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/places/[slug]/edit-PASNZKXE.js','imports':['/build/_shared/chunk-4IYCYPOC.js','/build/_shared/chunk-LAMARZU6.js','/build/_shared/chunk-VRHS5C76.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/places/[slug]/tags':{'id':'routes/entities/places/[slug]/tags','parentId':'routes/entities/places/[slug]','path':'tags','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/places/[slug]/tags-7MVJ66DC.js','imports':['/build/_shared/chunk-QFB5P7GO.js','/build/_shared/chunk-KIIWXZTD.js','/build/_shared/chunk-LAMARZU6.js','/build/_shared/chunk-VRHS5C76.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/places/index':{'id':'routes/entities/places/index','parentId':'root','path':'entities/places','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/places/index-W2ANEYJT.js','imports':['/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/places/new':{'id':'routes/entities/places/new','parentId':'root','path':'entities/places/new','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/places/new-ZWWSBKR2.js','imports':['/build/_shared/chunk-4IYCYPOC.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/tunes/[slug]':{'id':'routes/entities/tunes/[slug]','parentId':'root','path':'entities/tunes/slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/tunes/[slug]-OS2ZYD4I.js','imports':['/build/_shared/chunk-F4Q57ZOB.js','/build/_shared/chunk-UKZHEFXV.js','/build/_shared/chunk-GKDZXAYJ.js','/build/_shared/chunk-ZZLNVVVK.js','/build/_shared/chunk-2QUGVLAY.js','/build/_shared/chunk-ENZPEVYP.js','/build/_shared/chunk-LLYMHSPL.js','/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/tunes/[slug]/about':{'id':'routes/entities/tunes/[slug]/about','parentId':'routes/entities/tunes/[slug]','path':'about','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/tunes/[slug]/about-RLF46GW4.js','imports':['/build/_shared/chunk-KIIWXZTD.js','/build/_shared/chunk-LAMARZU6.js','/build/_shared/chunk-VRHS5C76.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/tunes/[slug]/tags':{'id':'routes/entities/tunes/[slug]/tags','parentId':'routes/entities/tunes/[slug]','path':'tags','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/tunes/[slug]/tags-NQHEQIGR.js','imports':['/build/_shared/chunk-QFB5P7GO.js','/build/_shared/chunk-KIIWXZTD.js','/build/_shared/chunk-LAMARZU6.js','/build/_shared/chunk-VRHS5C76.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/tunes/index':{'id':'routes/entities/tunes/index','parentId':'root','path':'entities/tunes','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/tunes/index-S7OW7P7D.js','imports':['/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/index':{'id':'routes/index','parentId':'root','path':undefined,'index':true,'caseSensitive':undefined,'module':'/build/routes/index-CC5ZUQQK.js','imports':['/build/_shared/chunk-WNJDALNM.js','/build/_shared/chunk-BXI6BDQN.js','/build/_shared/chunk-GKDZXAYJ.js','/build/_shared/chunk-ZZLNVVVK.js','/build/_shared/chunk-2QUGVLAY.js','/build/_shared/chunk-ENZPEVYP.js','/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/login':{'id':'routes/login','parentId':'root','path':'login','index':undefined,'caseSensitive':undefined,'module':'/build/routes/login-P6U67QTE.js','imports':['/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/logout':{'id':'routes/logout','parentId':'root','path':'logout','index':undefined,'caseSensitive':undefined,'module':'/build/routes/logout-VLLNZE65.js','imports':['/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/saved-items':{'id':'routes/saved-items','parentId':'root','path':'saved-items','index':undefined,'caseSensitive':undefined,'module':'/build/routes/saved-items-7UHHYPFL.js','imports':['/build/_shared/chunk-GKDZXAYJ.js','/build/_shared/chunk-ZZLNVVVK.js','/build/_shared/chunk-2QUGVLAY.js','/build/_shared/chunk-ENZPEVYP.js','/build/_shared/chunk-4IYCYPOC.js','/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/signup':{'id':'routes/signup','parentId':'root','path':'signup','index':undefined,'caseSensitive':undefined,'module':'/build/routes/signup-KZTBQCHJ.js','imports':['/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/users/[id]':{'id':'routes/users/[id]','parentId':'root','path':'users/id','index':undefined,'caseSensitive':undefined,'module':'/build/routes/users/[id]-M7JFTKWP.js','imports':['/build/_shared/chunk-GKDZXAYJ.js','/build/_shared/chunk-ZZLNVVVK.js','/build/_shared/chunk-2QUGVLAY.js','/build/_shared/chunk-ENZPEVYP.js','/build/_shared/chunk-LLYMHSPL.js','/build/_shared/chunk-A5RP5Q4K.js','/build/_shared/chunk-UUVQVH4L.js'],'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false}},'url':'/build/manifest-4CFDA7D7.js'};"],
  "mappings": "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",
  "names": []
}
