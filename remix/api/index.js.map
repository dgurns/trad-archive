{
  "version": 3,
  "sources": ["<stdin>", "../node_modules/@remix-run/dev/dist/config/defaults/node/entry.server.react-stream.tsx", "../app/root.tsx", "../app/sessions.server.ts", "../app/utils/db.server.ts", "../app/components/PlayerContextProvider.tsx", "../app/components/Player.tsx", "../app/hooks/usePlayerContext.ts", "../app/types/index.ts", "../app/components/AudioPlayer.tsx", "../app/components/Header.tsx", "../app/services/Entity.ts", "../app/components/Modal.tsx", "../app/components/SearchEntities.tsx", "../app/components/LoadingCircle.tsx", "../app/components/CreateNewEntities.tsx", "../app/components/CreatePersonForm.tsx", "../app/components/CreateInstrumentForm.tsx", "../app/components/Footer.tsx", "../app/routes/entities/audio-items/random.tsx", "../app/routes/entities/audio-items/$slug.tsx", "../app/components/Layout.tsx", "../app/components/AudioItemCard.tsx", "../app/services/DateTime.ts", "../app/components/Tags.tsx", "../app/services/Tag.ts", "../app/components/AddTagButton.tsx", "../app/components/CreateTagForm.tsx", "../app/components/SelectRelationship.tsx", "../app/components/TimestampInput.tsx", "../app/components/EditTagsButton.tsx", "../app/components/SaveItemButton.tsx", "../app/components/ViewCommentsButton.tsx", "../app/components/CreateCommentForm.tsx", "../app/components/TimeMarkers.tsx", "../app/components/AudioItemCompact.tsx", "../app/components/AudioItemTextOnly.tsx", "../app/components/AudioItem.tsx", "../app/components/Breadcrumb.tsx", "../app/routes/entities/audio-items/index.tsx", "../app/routes/entities/collections/$slug.tsx", "../app/components/ViewEntityAndAudioItems.tsx", "../app/hooks/useFilters.ts", "../app/components/Filters.tsx", "../app/routes/entities/collections/index.tsx", "../app/routes/entities/instruments/$slug.tsx", "../app/routes/entities/instruments/index.tsx", "../app/routes/entities/people/$slug.tsx", "../app/routes/entities/people/index.tsx", "../app/routes/entities/places/$slug.tsx", "../app/routes/entities/places/index.tsx", "../app/routes/entities/tunes/$slug.tsx", "../app/routes/entities/tunes/index.tsx", "../app/routes/choose-new-password.tsx", "../app/routes/reset-password.tsx", "../app/routes/account/index.tsx", "../app/routes/relationships.tsx", "../app/routes/saved-items.tsx", "../app/routes/users/$id.tsx", "../app/routes/comments.tsx", "../app/routes/logout.tsx", "../app/routes/search.tsx", "../app/routes/signup.tsx", "../app/routes/index.tsx", "../app/services/LocalStorage.ts", "../app/components/ProjectIntro.tsx", "../app/routes/login.tsx", "../app/routes/tags.tsx", "server-assets-manifest:@remix-run/dev/assets-manifest", "server-entry-module:@remix-run/dev/server-build"],
  "sourcesContent": ["export * from \"@remix-run/dev/server-build\";", "import { PassThrough } from \"stream\";\nimport type { EntryContext } from \"@remix-run/node\";\nimport { Response } from \"@remix-run/node\";\nimport { RemixServer } from \"@remix-run/react\";\nimport isbot from \"isbot\";\nimport { renderToPipeableStream } from \"react-dom/server\";\n\nconst ABORT_DELAY = 5000;\n\nexport default function handleRequest(\n  request: Request,\n  responseStatusCode: number,\n  responseHeaders: Headers,\n  remixContext: EntryContext\n) {\n  return isbot(request.headers.get(\"user-agent\"))\n    ? handleBotRequest(\n        request,\n        responseStatusCode,\n        responseHeaders,\n        remixContext\n      )\n    : handleBrowserRequest(\n        request,\n        responseStatusCode,\n        responseHeaders,\n        remixContext\n      );\n}\n\nfunction handleBotRequest(\n  request: Request,\n  responseStatusCode: number,\n  responseHeaders: Headers,\n  remixContext: EntryContext\n) {\n  return new Promise((resolve, reject) => {\n    const { pipe, abort } = renderToPipeableStream(\n      <RemixServer\n        context={remixContext}\n        url={request.url}\n        abortDelay={ABORT_DELAY}\n      />,\n      {\n        onAllReady() {\n          const body = new PassThrough();\n\n          responseHeaders.set(\"Content-Type\", \"text/html\");\n\n          resolve(\n            new Response(body, {\n              headers: responseHeaders,\n              status: responseStatusCode,\n            })\n          );\n\n          pipe(body);\n        },\n        onShellError(error: unknown) {\n          reject(error);\n        },\n        onError(error: unknown) {\n          responseStatusCode = 500;\n          console.error(error);\n        },\n      }\n    );\n\n    setTimeout(abort, ABORT_DELAY);\n  });\n}\n\nfunction handleBrowserRequest(\n  request: Request,\n  responseStatusCode: number,\n  responseHeaders: Headers,\n  remixContext: EntryContext\n) {\n  return new Promise((resolve, reject) => {\n    const { pipe, abort } = renderToPipeableStream(\n      <RemixServer\n        context={remixContext}\n        url={request.url}\n        abortDelay={ABORT_DELAY}\n      />,\n      {\n        onShellReady() {\n          const body = new PassThrough();\n\n          responseHeaders.set(\"Content-Type\", \"text/html\");\n\n          resolve(\n            new Response(body, {\n              headers: responseHeaders,\n              status: responseStatusCode,\n            })\n          );\n\n          pipe(body);\n        },\n        onShellError(error: unknown) {\n          reject(error);\n        },\n        onError(error: unknown) {\n          console.error(error);\n          responseStatusCode = 500;\n        },\n      }\n    );\n\n    setTimeout(abort, ABORT_DELAY);\n  });\n}\n", "import type { LoaderFunction, V2_MetaFunction } from \"@remix-run/node\";\nimport { json } from \"@remix-run/node\";\nimport {\n\tLinks,\n\tLiveReload,\n\tMeta,\n\tOutlet,\n\tScripts,\n\tScrollRestoration,\n\tuseLoaderData,\n\tuseRouteError,\n} from \"@remix-run/react\";\nimport styles from \"~/styles/globals-generated-do-not-edit.css\";\n\nimport { getSession } from \"~/sessions.server\";\nimport { db } from \"~/utils/db.server\";\n\nimport PlayerContextProvider from \"~/components/PlayerContextProvider\";\nimport Header from \"~/components/Header\";\nimport Footer from \"~/components/Footer\";\nimport type { User } from \"@prisma/client\";\n\nexport const meta: V2_MetaFunction = () => {\n\treturn [{ title: \"Trad Archive\" }];\n};\n\nexport function links() {\n\treturn [\n\t\t{ rel: \"stylesheet\", href: styles },\n\t\t{ rel: \"dns-prefetch\", href: \"https://fonts.googleapis.com\" },\n\t\t{ rel: \"preconnect\", href: \"https://fonts.gstatic.com/\" },\n\t\t{\n\t\t\trel: \"stylesheet\",\n\t\t\thref: \"https://fonts.googleapis.com/icon?family=Material+Icons\",\n\t\t},\n\t\t{\n\t\t\trel: \"apple-touch-icon\",\n\t\t\tsizes: \"180x180\",\n\t\t\thref: \"/favicons/apple-touch-icon.png\",\n\t\t},\n\t\t{\n\t\t\trel: \"icon\",\n\t\t\ttype: \"image/png\",\n\t\t\tsizes: \"192x192\",\n\t\t\thref: \"/favicons/android-chrome-192x192.png\",\n\t\t},\n\t\t{\n\t\t\trel: \"icon\",\n\t\t\ttype: \"image/png\",\n\t\t\tsizes: \"32x32\",\n\t\t\thref: \"/favicons/favicon-32x32.png\",\n\t\t},\n\t\t{\n\t\t\trel: \"icon\",\n\t\t\ttype: \"image/png\",\n\t\t\tsizes: \"16x16\",\n\t\t\thref: \"/favicons/favicon-16x16.png\",\n\t\t},\n\t\t{\n\t\t\trel: \"shortcut icon\",\n\t\t\thref: \"/favicons/favicon.ico\",\n\t\t},\n\t];\n}\n\nexport function headers() {\n\t// check if there is a new version of the page; if not, use the cached version\n\treturn {\n\t\t\"Cache-Control\": \"private, max-age=0, must-revalidate\",\n\t};\n}\n\ninterface LoaderData {\n\tcurrentUser: User | null;\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\tlet currentUser: User | null = null;\n\tif (userId) {\n\t\tcurrentUser = await db.user.findUnique({ where: { id: userId } });\n\t}\n\n\tconst data = { currentUser };\n\treturn json<LoaderData>(data);\n};\n\nexport default function App() {\n\tconst { currentUser } = useLoaderData<typeof loader>();\n\n\treturn (\n\t\t<html lang=\"en\">\n\t\t\t<head>\n\t\t\t\t<Meta />\n\t\t\t\t<meta charSet=\"utf-8\" />\n\t\t\t\t<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n\t\t\t\t<Links />\n\t\t\t</head>\n\t\t\t<PlayerContextProvider>\n\t\t\t\t<body className=\"bg-gray-100\">\n\t\t\t\t\t<div className=\"flex flex-col w-full relative pt-12\">\n\t\t\t\t\t\t<div className=\"flex flex-col justify-start items-center\">\n\t\t\t\t\t\t\t<div className=\"w-full min-h-screen lg:max-w-5xl px-4 pt-6 pb-44\">\n\t\t\t\t\t\t\t\t<Outlet />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Footer />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Add header to the DOM after child content so its modals overlay */}\n\t\t\t\t\t\t<div className=\"fixed top-0 right-0 left-0\" id=\"header\">\n\t\t\t\t\t\t\t<Header currentUser={currentUser} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<ScrollRestoration />\n\t\t\t\t\t<Scripts />\n\t\t\t\t\t<LiveReload />\n\t\t\t\t</body>\n\t\t\t</PlayerContextProvider>\n\t\t</html>\n\t);\n}\n\nexport function ErrorBoundary() {\n\tconst error = useRouteError();\n\n\treturn (\n\t\t<html lang=\"en\">\n\t\t\t<head>\n\t\t\t\t<Meta />\n\t\t\t\t<Links />\n\t\t\t</head>\n\t\t\t<PlayerContextProvider>\n\t\t\t\t<body className=\"bg-gray-100\">\n\t\t\t\t\t<div className=\"flex flex-col w-full relative pt-12\">\n\t\t\t\t\t\t<div className=\"flex flex-col justify-start items-center\">\n\t\t\t\t\t\t\t<div className=\"w-full min-h-screen lg:max-w-5xl px-4 pt-6 pb-44 text-center\">\n\t\t\t\t\t\t\t\t<h1>Oops! There was an error.</h1>\n\t\t\t\t\t\t\t\t<p className=\"text-red-500 mt-2\">{(error as Error).message}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Footer />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Add header to the DOM after child content so its modals overlay */}\n\t\t\t\t\t\t<div className=\"fixed top-0 right-0 left-0\" id=\"header\">\n\t\t\t\t\t\t\t<Header />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<ScrollRestoration />\n\t\t\t\t\t<Scripts />\n\t\t\t\t\t<LiveReload />\n\t\t\t\t</body>\n\t\t\t</PlayerContextProvider>\n\t\t</html>\n\t);\n}\n", "import { createCookieSessionStorage } from \"@remix-run/node\";\n\nconst { getSession, commitSession, destroySession } =\n\tcreateCookieSessionStorage({\n\t\tcookie: {\n\t\t\tname: \"jwt\",\n\t\t\thttpOnly: true,\n\t\t\tmaxAge: 60 * 60 * 24 * 30, // 30 days\n\t\t\tpath: \"/\",\n\t\t\tsameSite: \"none\",\n\t\t\tsecure: true,\n\t\t\tsecrets: [process.env.JWT_SECRET_KEY ?? \"jwt_secret_key\"],\n\t\t},\n\t});\n\nexport { getSession, commitSession, destroySession };\n", "import { PrismaClient } from \"@prisma/client\";\n\nlet db: PrismaClient;\n\ndeclare global {\n\tvar __db: PrismaClient | undefined;\n}\n\n// this is needed because in development we don't want to restart\n// the server with every change, but we want to make sure we don't\n// create a new connection to the DB with every change either.\nif (process.env.NODE_ENV === \"production\") {\n\tdb = new PrismaClient();\n} else {\n\tif (!global.__db) {\n\t\tglobal.__db = new PrismaClient();\n\t}\n\tdb = global.__db;\n}\n\nexport { db };\n", "import React, { useEffect, useState } from \"react\";\nimport Player from \"~/components/Player\";\nimport { AudioItem } from \"~/types\";\n\ninterface PlayerContextValue {\n\tactiveAudioItem: AudioItem | null;\n\tsetActiveAudioItem: React.Dispatch<React.SetStateAction<AudioItem>>;\n\tactiveItemDurationSeconds: number | undefined;\n\tsetActiveItemDurationSeconds: React.Dispatch<\n\t\tReact.SetStateAction<number | undefined>\n\t>;\n\tplaybackPositionSeconds: number | undefined;\n\tsetPlaybackPositionSeconds: React.Dispatch<\n\t\tReact.SetStateAction<number | undefined>\n\t>;\n\tseekPositionSeconds: number | undefined;\n\tsetSeekPositionSeconds: React.Dispatch<\n\t\tReact.SetStateAction<number | undefined>\n\t>;\n}\n\nexport const PlayerContext = React.createContext<PlayerContextValue>(null);\n\ninterface PlayerContextProviderProps {\n\tchildren: React.ReactChild | React.ReactChild[];\n}\n\nfunction PlayerContextProvider({ children }: PlayerContextProviderProps) {\n\tconst [activeAudioItem, setActiveAudioItem] = useState<AudioItem>(null);\n\tconst [activeItemDurationSeconds, setActiveItemDurationSeconds] = useState<\n\t\tnumber | undefined\n\t>(undefined);\n\tconst [playbackPositionSeconds, setPlaybackPositionSeconds] = useState<\n\t\tnumber | undefined\n\t>(undefined);\n\tconst [seekPositionSeconds, setSeekPositionSeconds] = useState<\n\t\tnumber | undefined\n\t>(undefined);\n\n\t// Reset PlayerContext when there is no active item\n\tuseEffect(() => {\n\t\tif (!activeAudioItem) {\n\t\t\tsetActiveItemDurationSeconds(undefined);\n\t\t\tsetPlaybackPositionSeconds(undefined);\n\t\t\tsetSeekPositionSeconds(undefined);\n\t\t}\n\t}, [activeAudioItem]);\n\n\treturn (\n\t\t<PlayerContext.Provider\n\t\t\tvalue={{\n\t\t\t\tactiveAudioItem,\n\t\t\t\tsetActiveAudioItem,\n\t\t\t\tactiveItemDurationSeconds,\n\t\t\t\tsetActiveItemDurationSeconds,\n\t\t\t\tplaybackPositionSeconds,\n\t\t\t\tsetPlaybackPositionSeconds,\n\t\t\t\tseekPositionSeconds,\n\t\t\t\tsetSeekPositionSeconds,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\n\t\t\t{/* Player is rendered here so it is persistent across all routes */}\n\t\t\t{activeAudioItem && (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"fixed bottom-0 left-0 right-0\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tboxShadow:\n\t\t\t\t\t\t\t\"0 -10px 15px -3px rgba(0, 0, 0, 0.1), 0 -4px 6px -2px rgba(0, 0, 0, 0.05)\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Player />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</PlayerContext.Provider>\n\t);\n}\n\nexport default PlayerContextProvider;\n", "import { useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\nimport { isAudioItem } from \"~/types\";\n\nimport AudioPlayer from \"~/components/AudioPlayer\";\n\nconst Player = () => {\n\tconst { activeAudioItem, setActiveAudioItem } = usePlayerContext();\n\n\tconst itemHref = useMemo(() => {\n\t\tif (isAudioItem(activeAudioItem)) {\n\t\t\treturn `/entities/audio-items/${activeAudioItem.slug}`;\n\t\t}\n\t\treturn window.location.href;\n\t}, [activeAudioItem]);\n\n\tif (!activeAudioItem) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className=\"flex flex-col align-center justify-center px-4 pb-4 pt-2 bg-white\">\n\t\t\t<div className=\"flex flex-row justify-between mb-2\">\n\t\t\t\t<div className=\"leading-8\">\n\t\t\t\t\tNow playing:{\" \"}\n\t\t\t\t\t<span className=\"text-gray-500\">{activeAudioItem.name}</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex flex-row items-center ml-4\">\n\t\t\t\t\t<Link to={itemHref} className=\"whitespace-nowrap\">\n\t\t\t\t\t\tView\n\t\t\t\t\t</Link>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn-icon flex ml-2 md:ml-4\"\n\t\t\t\t\t\tonClick={() => setActiveAudioItem(null)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className=\"material-icons\">close</i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<AudioPlayer item={activeAudioItem} key={activeAudioItem.id} />\n\t\t</div>\n\t);\n};\n\nexport default Player;\n", "import { useContext } from \"react\";\nimport { PlayerContext } from \"~/components/PlayerContextProvider\";\n\nconst usePlayerContext = () => {\n\tconst playerContext = useContext(PlayerContext);\n\treturn playerContext;\n};\n\nexport default usePlayerContext;\n", "import type {\n\tUser,\n\tAudioItem,\n\tCollection,\n\tInstrument,\n\tPerson,\n\tPlace,\n\tTune,\n} from \"@prisma/client\";\nimport { Prisma } from \"@prisma/client\";\n\nexport enum PerPage {\n\tTen = 10,\n\tTwenty = 20,\n\tFifty = 50,\n\tHundred = 100,\n}\n\nexport enum SortBy {\n\tDateAddedOldToNew = \"DateAddedOldToNew\",\n\tDateSavedOldToNew = \"DateSavedOldToNew\",\n\tRecentlyTagged = \"RecentlyTagged\",\n}\n\nexport enum ViewAs {\n\tCards = \"Cards\",\n\tCompact = \"Compact\",\n\tList = \"List\",\n}\n\nexport type Entity =\n\t| AudioItem\n\t| AudioItemWithRelations\n\t| Collection\n\t| CollectionWithRelations\n\t| Instrument\n\t| Person\n\t| Place\n\t| Tune;\n\nconst audioItemWithRelations = Prisma.validator<Prisma.AudioItemArgs>()({\n\tinclude: {\n\t\ttagsAsSubject: {\n\t\t\tinclude: {\n\t\t\t\tobjectAudioItem: true,\n\t\t\t\tobjectCollection: true,\n\t\t\t\tobjectInstrument: true,\n\t\t\t\tobjectPerson: true,\n\t\t\t\tobjectPlace: true,\n\t\t\t\tobjectTune: true,\n\t\t\t\trelationship: true,\n\t\t\t},\n\t\t},\n\t\tcreatedByUser: true,\n\t\tupdatedByUser: true,\n\t\tcomments: {\n\t\t\tinclude: {\n\t\t\t\tcreatedByUser: true,\n\t\t\t},\n\t\t},\n\t\tsavedItems: true,\n\t},\n});\nexport type AudioItemWithRelations = Prisma.AudioItemGetPayload<\n\ttypeof audioItemWithRelations\n>;\n\nconst collectionWithRelations = Prisma.validator<Prisma.CollectionArgs>()({\n\tinclude: { tagsAsSubject: true, createdByUser: true, updatedByUser: true },\n});\nexport type CollectionWithRelations = Prisma.CollectionGetPayload<\n\ttypeof collectionWithRelations\n>;\n\nconst commentWithRelations = Prisma.validator<Prisma.CommentArgs>()({\n\tinclude: { parentAudioItem: true, createdByUser: true },\n});\nexport type CommentWithRelations = Prisma.CommentGetPayload<\n\ttypeof commentWithRelations\n>;\n\nconst tagWithRelations = Prisma.validator<Prisma.TagArgs>()({\n\tinclude: {\n\t\tobjectAudioItem: true,\n\t\tobjectCollection: true,\n\t\tobjectInstrument: true,\n\t\tobjectPerson: true,\n\t\tobjectPlace: true,\n\t\tobjectTune: true,\n\t\trelationship: true,\n\t},\n});\nexport type TagWithRelations = Prisma.TagGetPayload<typeof tagWithRelations>;\n\n// EVERYTHING BELOW THIS LINE SHOULD BE GRADUALLY DEPRECATED\n\nexport enum EntityType {\n\tAudioItem = \"AudioItem\",\n\tPerson = \"Person\",\n\tInstrument = \"Instrument\",\n\tPlace = \"Place\",\n\tTune = \"Tune\",\n\tCollection = \"Collection\",\n}\n\nexport enum UserRole {\n\tUser = \"User\",\n\tAdmin = \"Admin\",\n}\n\nexport enum CopyrightPermissionStatus {\n\tFullNonCommercialGranted = \"FullNonCommercialGranted\",\n}\n\nexport enum EntityStatus {\n\tPublished = \"PUBLISHED\",\n\tTakenDown = \"TAKEN_DOWN\",\n}\n\nexport function isAudioItem(entity: Entity): entity is AudioItem {\n\treturn (entity as AudioItem).entityType === EntityType.AudioItem;\n}\nexport function isPerson(entity: Entity): entity is Person {\n\treturn (entity as Person).entityType === EntityType.Person;\n}\nexport function isInstrument(entity: Entity): entity is Instrument {\n\treturn (entity as Instrument).entityType === EntityType.Instrument;\n}\nexport function isPlace(entity: Entity): entity is Place {\n\treturn (entity as Place).entityType === EntityType.Place;\n}\nexport function isTune(entity: Entity): entity is Tune {\n\treturn (entity as Tune).entityType === EntityType.Tune;\n}\nexport function isCollection(entity: Entity): entity is Collection {\n\treturn (entity as Collection).entityType === EntityType.Collection;\n}\nexport interface Relationship {\n\tid: string;\n\tname: string;\n\tsubjectEntityType: EntityType;\n\tobjectEntityType: EntityType;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedAt: string;\n}\n\nexport interface Comment {\n\tid: string;\n\tparentAudioItem?: AudioItem | null;\n\ttext: string;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedAt: string;\n}\n\nexport interface SavedItem {\n\tid: string;\n\taudioItem?: AudioItem | null;\n\tuser?: User | null;\n\tcreatedAt: string;\n}\n\nexport enum TakedownRequestType {\n\tPerformer = \"Performer\",\n\tCopyright = \"Copyright\",\n}\n\nexport enum TakedownRequestStatus {\n\tPending = \"Pending\",\n\tApproved = \"Approved\",\n\tDenied = \"Denied\",\n}\n\nexport interface TakedownRequest {\n\tid: string;\n\tentity?: Entity;\n\ttype: TakedownRequestType;\n\tmessage: string | null;\n\tstatus: TakedownRequestStatus;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedByUser: User;\n\tupdatedAt: string;\n}\n\nexport const isPendingTakedownRequest = (takedownRequest: TakedownRequest) =>\n\ttakedownRequest.status.valueOf() === \"Pending\";\n\nexport const isApprovedTakedownRequest = (takedownRequest: TakedownRequest) =>\n\ttakedownRequest.status.valueOf() === \"Approved\";\n\nexport const isDeniedTakedownRequest = (takedownRequest: TakedownRequest) =>\n\ttakedownRequest.status.valueOf() === \"Denied\";\n\nexport enum VerificationRequestStatus {\n\tPending = \"Pending\",\n\tApproved = \"Approved\",\n\tDenied = \"Denied\",\n}\nexport interface VerificationRequest {\n\tid: string;\n\tperson: Person;\n\tpresignedImageDownloadUrl: string | null;\n\tcopyrightPermissionStatus: CopyrightPermissionStatus | null;\n\tstatus: VerificationRequestStatus;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedByUser: User;\n\tupdatedAt: string;\n}\n\nexport const isPendingVerificationRequest = (\n\tverificationRequest: VerificationRequest\n) => verificationRequest.status.valueOf() === \"Pending\";\n\nexport const isApprovedVerificationRequest = (\n\tverificationRequest: VerificationRequest\n) => verificationRequest.status.valueOf() === \"Approved\";\n\nexport const isDeniedVerificationRequest = (\n\tverificationRequest: VerificationRequest\n) => verificationRequest.status.valueOf() === \"Denied\";\n\nexport enum SubmissionStatus {\n\tPending = \"Pending\",\n\tApproved = \"Approved\",\n\tDenied = \"Denied\",\n}\nexport enum SubmissionMaterialType {\n\tAudio = \"Audio\",\n\tVideo = \"Video\",\n\tImage = \"Image\",\n\tDocument = \"Document\",\n}\nexport interface Submission {\n\tid: string;\n\tstatus: SubmissionStatus;\n\tmaterialTypes: SubmissionMaterialType[];\n\tuserControlsCopyright: boolean;\n\tcopyrightDetails: string | null;\n\tdescription: string | null;\n\ts3DirectoryKey: string | null;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedByUser: User;\n\tupdatedAt: string;\n}\n\nexport interface Stats {\n\tnumAudioItemsAllTime: number;\n\tnumTagsAllTime: number;\n\tnumCommentsAllTime: number;\n}\n", "import { useEffect, useRef } from \"react\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\nimport { AudioItem } from \"~/types\";\n\ninterface AudioPlayerProps {\n\titem: AudioItem;\n}\nconst AudioPlayer = ({ item }: AudioPlayerProps) => {\n\tconst audioPlayerRef = useRef<HTMLAudioElement>();\n\n\tconst {\n\t\tsetActiveItemDurationSeconds,\n\t\tsetPlaybackPositionSeconds,\n\t\tseekPositionSeconds,\n\t\tsetSeekPositionSeconds,\n\t} = usePlayerContext();\n\n\t// Set up event callbacks on the audio tag\n\tuseEffect(() => {\n\t\tconst audioPlayer = audioPlayerRef.current;\n\t\tif (audioPlayer) {\n\t\t\t// When the audio item's duration changes, update PlayerContext\n\t\t\taudioPlayer.ondurationchange = () => {\n\t\t\t\tconst duration = audioPlayer.duration;\n\t\t\t\tif (typeof duration === \"number\") {\n\t\t\t\t\tconst durationSeconds = Math.floor(audioPlayer.duration);\n\t\t\t\t\tsetActiveItemDurationSeconds(durationSeconds);\n\t\t\t\t}\n\t\t\t};\n\t\t\t// As the audio tag's playback position changes, update PlayerContext with the\n\t\t\t// new value\n\t\t\taudioPlayer.ontimeupdate = () => {\n\t\t\t\tconst playbackPositionSeconds = Math.floor(audioPlayer.currentTime);\n\t\t\t\tsetPlaybackPositionSeconds(playbackPositionSeconds);\n\t\t\t};\n\t\t}\n\t}, []);\n\n\t// If a seek position is set in PlayerContext, update audio tag's playback\n\t// position to match and ensure audio is playing\n\tuseEffect(() => {\n\t\tconst audioPlayer = audioPlayerRef.current;\n\t\tif (audioPlayer && typeof seekPositionSeconds === \"number\") {\n\t\t\taudioPlayer.currentTime = seekPositionSeconds;\n\t\t\tsetSeekPositionSeconds(undefined);\n\t\t\tif (audioPlayer.paused) {\n\t\t\t\taudioPlayer.play();\n\t\t\t}\n\t\t}\n\t}, [seekPositionSeconds]);\n\n\treturn (\n\t\t<audio\n\t\t\tref={audioPlayerRef}\n\t\t\tid=\"audio\"\n\t\t\tpreload=\"metadata\"\n\t\t\tautoPlay\n\t\t\tcontrols\n\t\t\tcontrolsList=\"nodownload\"\n\t\t\tclassName=\"w-full outline-none\"\n\t\t>\n\t\t\t<source src={item.urlSource} type=\"audio/mpeg\" />\n\t\t</audio>\n\t);\n};\n\nexport default AudioPlayer;\n", "import React, { useState, useCallback } from \"react\";\nimport { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\nimport { useHotkeys } from \"react-hotkeys-hook\";\n\nimport type { Entity } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\n\nimport Modal from \"~/components/Modal\";\nimport SearchEntities from \"~/components/SearchEntities\";\nimport type { User } from \"@prisma/client\";\n\ninterface Props {\n\tcurrentUser?: User | null;\n}\n\nconst Header = ({ currentUser }: Props) => {\n\tconst navigate = useNavigate();\n\n\tconst [searchModalIsVisible, setSearchModalIsVisible] = useState(false);\n\n\tconst openSearchModal = (\n\t\tevent: KeyboardEvent | React.SyntheticEvent<HTMLButtonElement>\n\t) => {\n\t\tevent.preventDefault();\n\t\tsetSearchModalIsVisible(true);\n\t};\n\tconst closeSearchModal = () => {\n\t\tsetSearchModalIsVisible(false);\n\t};\n\n\tuseHotkeys(\"/\", openSearchModal);\n\n\tconst onSelectSearchResult = useCallback(\n\t\t(entity: Entity) => {\n\t\t\tsetSearchModalIsVisible(false);\n\t\t\tnavigate(EntityService.makeHrefForView(entity));\n\t\t},\n\t\t[navigate]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-row py-3 px-4 justify-between text-white items-center bg-teal-700\">\n\t\t\t\t<div className=\"flex flex-row\">\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto=\"/\"\n\t\t\t\t\t\tclassName=\"whitespace-nowrap no-underline text-yellow-200 hover:text-gray-400\"\n\t\t\t\t\t>\n\t\t\t\t\t\tTrad Archive\n\t\t\t\t\t</Link>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"flex flex-row items-center whitespace-nowrap text-white hover:text-gray-400 group ml-4\"\n\t\t\t\t\t\tonClick={openSearchModal}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className=\"material-icons\">search</i>\n\t\t\t\t\t\t<span className=\"hidden md:block md:pl-1\">Search</span>\n\t\t\t\t\t\t<span className=\"hidden md:block border border-gray-300 group-hover:border-gray-400 rounded text-xs px-1.5 ml-2.5\">{`/`}</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto=\"/entities/audio-items/random\"\n\t\t\t\t\t\tclassName=\"flex flex-row items-center no-underline text-white hover:text-gray-400 ml-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"block h-6\">\n\t\t\t\t\t\t\t<i className=\"material-icons\">shuffle</i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"md:pl-2 hidden md:block\">Random</div>\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\n\t\t\t\t{!currentUser ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"/login\"\n\t\t\t\t\t\t\tclassName=\"whitespace-nowrap text-white no-underline hover:text-gray-400 ml-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tLog In\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"/signup\"\n\t\t\t\t\t\t\tclassName=\"btn text-current no-underline whitespace-nowrap hover:text-current ml-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSign Up\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"/saved-items\"\n\t\t\t\t\t\t\tclassName=\"flex flex-row items-center whitespace-nowrap text-white no-underline hover:text-gray-400 ml-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i className=\"material-icons\">bookmark</i>\n\t\t\t\t\t\t\t<span className=\"hidden md:block md:pl-1\">Saved</span>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"/account\"\n\t\t\t\t\t\t\tclassName=\"flex flex-row items-center whitespace-nowrap text-white no-underline hover:text-gray-400 ml-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i className=\"material-icons\">account_circle</i>\n\t\t\t\t\t\t\t<span className=\"hidden md:block md:pl-1\">Account</span>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Search\"\n\t\t\t\tisVisible={searchModalIsVisible}\n\t\t\t\tonClose={closeSearchModal}\n\t\t\t>\n\t\t\t\t<SearchEntities onSelect={onSelectSearchResult} />\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default Header;\n", "import { EntityType } from \"@prisma/client\";\n\nconst cleanSlug = (rawSlug: string) => {\n\tconst slugWithHyphens = rawSlug.replace(/[\\s]/g, \"-\");\n\treturn slugWithHyphens.replace(/[^a-zA-Z0-9-]/g, \"\").toLowerCase();\n};\n\ninterface EntityArg {\n\tentityType: EntityType | null;\n\tslug: string;\n}\n\nconst makeHrefForTopLevel = (entity?: EntityArg | null) => {\n\tswitch (entity?.entityType) {\n\t\tcase EntityType.AudioItem:\n\t\t\treturn \"/entities/audio-items\";\n\t\tcase EntityType.Person:\n\t\t\treturn \"/entities/people\";\n\t\tcase EntityType.Instrument:\n\t\t\treturn \"/entities/instruments\";\n\t\tcase EntityType.Place:\n\t\t\treturn \"/entities/places\";\n\t\tcase EntityType.Tune:\n\t\t\treturn \"/entities/tunes\";\n\t\tcase EntityType.Collection:\n\t\t\treturn \"/entities/collections\";\n\t\tdefault:\n\t\t\treturn \"\";\n\t}\n};\n\nconst makeHrefForView = (entity?: EntityArg | null) => {\n\tif (!entity) {\n\t\treturn \"\";\n\t}\n\treturn `${makeHrefForTopLevel(entity)}/${entity.slug}`;\n};\n\nconst makeHrefForEdit = (entity?: EntityArg | null) => {\n\tif (!entity) {\n\t\treturn \"\";\n\t}\n\treturn `${makeHrefForView(entity)}/edit`;\n};\n\nconst makeHrefForAbout = (entity?: EntityArg | null) => {\n\tif (!entity) {\n\t\treturn \"\";\n\t}\n\treturn `${makeHrefForView(entity)}/about`;\n};\n\nconst makeHrefForTags = (entity?: EntityArg | null) => {\n\tif (!entity) {\n\t\treturn \"\";\n\t}\n\treturn `${makeHrefForView(entity)}/tags`;\n};\n\nconst makeReadableNamePlural = (entity?: EntityArg | null) => {\n\tswitch (entity?.entityType) {\n\t\tcase EntityType.AudioItem:\n\t\t\treturn \"Audio Items\";\n\t\tcase EntityType.Person:\n\t\t\treturn \"People\";\n\t\tcase EntityType.Instrument:\n\t\t\treturn \"Instruments\";\n\t\tcase EntityType.Place:\n\t\t\treturn \"Places\";\n\t\tcase EntityType.Tune:\n\t\t\treturn \"Tunes\";\n\t\tcase EntityType.Collection:\n\t\t\treturn \"Collections\";\n\t\tdefault:\n\t\t\treturn \"\";\n\t}\n};\n\nconst EntityService = {\n\tcleanSlug,\n\tmakeHrefForTopLevel,\n\tmakeHrefForView,\n\tmakeHrefForEdit,\n\tmakeHrefForAbout,\n\tmakeHrefForTags,\n\tmakeReadableNamePlural,\n};\nexport default EntityService;\n", "import React from \"react\";\nimport { useHotkeys } from \"react-hotkeys-hook\";\n\ninterface Props {\n\tchildren: React.ReactNode;\n\tisVisible: boolean;\n\tonClose: () => void;\n\ttitle?: string;\n\tclassName?: string;\n}\n\nconst Modal = ({\n\tchildren,\n\tisVisible = false,\n\tonClose,\n\ttitle,\n\tclassName,\n}: Props) => {\n\t// Close the modal when escape key is pressed, even if a form field is focused\n\tuseHotkeys(\n\t\t\"esc\",\n\t\tonClose,\n\t\t{\n\t\t\tenableOnTags: [\"INPUT\", \"TEXTAREA\"],\n\t\t},\n\t\t[onClose]\n\t);\n\n\tif (!isVisible) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`${\n\t\t\t\tisVisible ? \"visible\" : \"hidden\"\n\t\t\t} z-40 fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center`}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName=\"absolute top-0 left-0 right-0 bottom-0 bg-black bg-opacity-40\"\n\t\t\t\tonClick={onClose}\n\t\t\t/>\n\n\t\t\t<div\n\t\t\t\tclassName={`bg-white cursor-auto rounded relative w-full px-4 pb-4 pt-3 m-2 max-h-[90vh] overflow-y-auto overflow-x-hidden md:max-w-xl ${\n\t\t\t\t\tclassName ?? \"\"\n\t\t\t\t}`}\n\t\t\t>\n\t\t\t\t<div className=\"flex flex-row justify-between items-center mb-4 text-black\">\n\t\t\t\t\t<h2>{title}</h2>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn-icon flex flex-row items-center justify-center ml-4 mb-0.5\"\n\t\t\t\t\t\tonClick={onClose}\n\t\t\t\t\t\taria-label=\"Close\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className=\"hidden md:block border border-gray-300 group-hover:border-gray-400 rounded text-xs px-1.5 ml-0.5 mr-3\">\n\t\t\t\t\t\t\tESC\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<i className=\"material-icons\">close</i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Add some style resets so that the Modal's parent doesn't affect the content */}\n\t\t\t\t<div className=\"text-base text-black font-normal whitespace-normal text-left cursor-auto\">\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Modal;\n", "import { Link, useFetcher } from \"@remix-run/react\";\nimport { type ChangeEvent } from \"react\";\nimport debounce from \"lodash/debounce\";\nimport { EntityType } from \"@prisma/client\";\n\nimport { type Entity } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\n\nimport LoadingCircle from \"~/components/LoadingCircle\";\nimport CreateNewEntities from \"~/components/CreateNewEntities\";\n\ninterface Props {\n\tentityTypes?: EntityType[];\n\ttake?: number;\n\tonSelect: (entity: Entity) => void;\n\tonNewEntityCreated?: (entity: Entity) => void;\n\tclassName?: string;\n}\nconst SearchEntities = ({\n\tentityTypes,\n\ttake,\n\tonSelect,\n\tonNewEntityCreated,\n\tclassName,\n}: Props) => {\n\tconst fetcher = useFetcher<{ results: Entity[]; error?: string }>();\n\tconst searchResults = fetcher.data?.results;\n\n\tfunction onChangeSearchTerm(e: ChangeEvent<HTMLInputElement>) {\n\t\tconst searchTerm = e.target.value;\n\t\tif (searchTerm.length < 3) {\n\t\t\treturn;\n\t\t}\n\t\tconst params = new URLSearchParams({\n\t\t\tsearchTerm,\n\t\t});\n\t\tif (typeof take === \"number\") {\n\t\t\tparams.set(\"take\", String(take));\n\t\t}\n\t\tif (entityTypes) {\n\t\t\tentityTypes.forEach((e) => params.append(\"entityTypes\", e));\n\t\t}\n\t\tfetcher.load(`/search?${params.toString()}`);\n\t}\n\n\treturn (\n\t\t<div className={className ?? \"\"}>\n\t\t\t<div className=\"relative\">\n\t\t\t\t<input\n\t\t\t\t\tautoFocus\n\t\t\t\t\tplaceholder=\"Start typing...\"\n\t\t\t\t\tonChange={debounce(onChangeSearchTerm, 300, {\n\t\t\t\t\t\ttrailing: true,\n\t\t\t\t\t})}\n\t\t\t\t/>\n\t\t\t\t{fetcher.state !== \"idle\" && (\n\t\t\t\t\t<div className=\"absolute top-2 right-2\">\n\t\t\t\t\t\t<LoadingCircle />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{fetcher.data?.error && (\n\t\t\t\t<div className=\"text-red-600 mt-4 ml-2\">{fetcher.data.error}</div>\n\t\t\t)}\n\n\t\t\t{searchResults && (\n\t\t\t\t<div className=\"mt-4\">\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{searchResults.map((entity, index) => (\n\t\t\t\t\t\t\t<li className=\"flex flex-row\" key={index}>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"flex flex-1 justify-between items-center text-left p-2 rounded cursor-pointer hover:bg-gray-200\"\n\t\t\t\t\t\t\t\t\tonClick={() => onSelect(entity)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t{entity.name}\n\t\t\t\t\t\t\t\t\t\t{entity.entityType === EntityType.Tune\n\t\t\t\t\t\t\t\t\t\t\t? ` (${entity.entityType})`\n\t\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span className=\"uppercase text-gray-500 text-sm\">\n\t\t\t\t\t\t\t\t\t\t{entity.entityType}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tto={EntityService.makeHrefForView(entity)}\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\taria-label={`Open ${entity.name} in New Tab`}\n\t\t\t\t\t\t\t\t\tclassName=\"btn-icon w-auto\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span className=\"px-1.5\">\u2197</span>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\n\t\t\t\t\t{searchResults.length === 0 && (\n\t\t\t\t\t\t<div className=\"p-2 block text-gray-500\">No results</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<div className=\"mt-2 ml-2\">\n\t\t\t\t\t\t<CreateNewEntities\n\t\t\t\t\t\t\tentityTypes={[EntityType.Person, EntityType.Instrument]}\n\t\t\t\t\t\t\tonNewEntityCreated={onNewEntityCreated}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default SearchEntities;\n", "interface Props {\n\tclassName?: string;\n}\n\nconst LoadingCircle = ({ className }: Props) => (\n\t<div className=\"h-6\">\n\t\t<i\n\t\t\tclassName={`material-icons animate-spin text-gray-500 ${className ?? \"\"}`}\n\t\t>\n\t\t\tscatter_plot\n\t\t</i>\n\t</div>\n);\n\nexport default LoadingCircle;\n", "import { useState, useCallback } from \"react\";\nimport { type Person, type Instrument, EntityType } from \"@prisma/client\";\n\nimport type { Entity } from \"~/types\";\n\nimport Modal from \"~/components/Modal\";\nimport CreatePersonForm from \"~/components/CreatePersonForm\";\nimport CreateInstrumentForm from \"~/components/CreateInstrumentForm\";\n\ninterface Props {\n\tentityTypes?: EntityType[];\n\tonNewEntityCreated?: (entity: Entity) => void;\n}\nconst CreateNewEntities = ({ entityTypes, onNewEntityCreated }: Props) => {\n\tconst [createPersonModalIsVisible, setCreatePersonModalIsVisible] =\n\t\tuseState(false);\n\tconst [createInstrumentModalIsVisible, setCreateInstrumentModalIsVisible] =\n\t\tuseState(false);\n\n\tconst onNewPersonCreated = useCallback(\n\t\t(person: Person) => {\n\t\t\tsetCreatePersonModalIsVisible(false);\n\t\t\tif (onNewEntityCreated) {\n\t\t\t\tonNewEntityCreated(person);\n\t\t\t}\n\t\t},\n\t\t[onNewEntityCreated]\n\t);\n\n\tconst onNewInstrumentCreated = useCallback(\n\t\t(instrument: Instrument) => {\n\t\t\tsetCreateInstrumentModalIsVisible(false);\n\t\t\tif (onNewEntityCreated) {\n\t\t\t\tonNewEntityCreated(instrument);\n\t\t\t}\n\t\t},\n\t\t[onNewEntityCreated]\n\t);\n\n\tconst shouldShowCreatePerson =\n\t\ttypeof entityTypes === \"undefined\" ||\n\t\tentityTypes.includes(EntityType.Person);\n\tconst shouldShowCreateInstrument =\n\t\ttypeof entityTypes === \"undefined\" ||\n\t\tentityTypes.includes(EntityType.Instrument);\n\n\tconst shouldShowCommaAfterCreatePerson =\n\t\t!entityTypes || shouldShowCreateInstrument;\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"text-gray-500\">\n\t\t\t\tCan't find it? Create new:{\" \"}\n\t\t\t\t{shouldShowCreatePerson && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"btn-text\"\n\t\t\t\t\t\t\tonClick={() => setCreatePersonModalIsVisible(true)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tPerson\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{shouldShowCommaAfterCreatePerson && \", \"}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{shouldShowCreateInstrument && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"btn-text\"\n\t\t\t\t\t\t\tonClick={() => setCreateInstrumentModalIsVisible(true)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tInstrument\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Create New Person\"\n\t\t\t\tisVisible={createPersonModalIsVisible}\n\t\t\t\tonClose={() => setCreatePersonModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t<CreatePersonForm onSuccess={onNewPersonCreated} />\n\t\t\t</Modal>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Create New Instrument\"\n\t\t\t\tisVisible={createInstrumentModalIsVisible}\n\t\t\t\tonClose={() => setCreateInstrumentModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t<CreateInstrumentForm onSuccess={onNewInstrumentCreated} />\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default CreateNewEntities;\n", "import { useEffect, useState, useRef } from \"react\";\nimport { type Person } from \"@prisma/client\";\n\nimport EntityService from \"~/services/Entity\";\nimport { useFetcher } from \"@remix-run/react\";\n\ninterface Props {\n\tonSuccess?: (person: Person) => void;\n}\nexport default function CreatePersonForm({ onSuccess }: Props) {\n\tconst formRef = useRef<HTMLFormElement>(null);\n\tconst fetcher = useFetcher<{ error?: string; person?: Person }>();\n\n\tuseEffect(() => {\n\t\tif (onSuccess && fetcher.type === \"done\" && fetcher.data.person) {\n\t\t\tonSuccess(fetcher.data.person);\n\t\t}\n\t}, [fetcher, onSuccess]);\n\n\t// Keep track of first/middle/last name and use them to suggest a slug\n\tconst [firstNameDraft, setFirstNameDraft] = useState(\"\");\n\tconst [middleNameDraft, setMiddleNameDraft] = useState(\"\");\n\tconst [lastNameDraft, setLastNameDraft] = useState(\"\");\n\tconst [slug, setSlug] = useState(\"\");\n\tuseEffect(() => {\n\t\tlet proposedSlug = \"\";\n\t\tif (firstNameDraft) {\n\t\t\tproposedSlug = firstNameDraft;\n\t\t}\n\t\tif (middleNameDraft) {\n\t\t\tproposedSlug = `${proposedSlug}-${middleNameDraft}`;\n\t\t}\n\t\tif (lastNameDraft) {\n\t\t\tproposedSlug = `${proposedSlug}-${lastNameDraft}`;\n\t\t}\n\t\tsetSlug(EntityService.cleanSlug(proposedSlug));\n\t}, [firstNameDraft, middleNameDraft, lastNameDraft]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<fetcher.Form\n\t\t\t\t\tref={formRef}\n\t\t\t\t\tmethod=\"POST\"\n\t\t\t\t\taction=\"/entities/people?index\"\n\t\t\t\t>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"First name\"\n\t\t\t\t\t\tname=\"first_name\"\n\t\t\t\t\t\tonChange={(e) => setFirstNameDraft(e.target.value)}\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Middle name (optional)\"\n\t\t\t\t\t\tname=\"middle_name\"\n\t\t\t\t\t\tonChange={(e) => setMiddleNameDraft(e.target.value)}\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Last name\"\n\t\t\t\t\t\tname=\"last_name\"\n\t\t\t\t\t\tonChange={(e) => setLastNameDraft(e.target.value)}\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"URL slug (ie. kitty-hayes)\"\n\t\t\t\t\t\tname=\"slug\"\n\t\t\t\t\t\tvalue={slug}\n\t\t\t\t\t\tonChange={(e) => setSlug(e.target.value)}\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tThis will be used for the URL of this Person, for example{\" \"}\n\t\t\t\t\t\t{`https://trad-archive.com/entities/people/${\n\t\t\t\t\t\t\tslug || \"kitty-hayes\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<input placeholder=\"Aliases\" name=\"aliases\" className=\"mb-2\" />\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Person. For example:{\" \"}\n\t\t\t\t\t\t<em>Tony D, The Tradfather, Tony from the County Calamari</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\trows={5}\n\t\t\t\t\t/>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={fetcher.state !== \"idle\"}\n\t\t\t\t\t>\n\t\t\t\t\t\tCreate\n\t\t\t\t\t</button>\n\t\t\t\t</fetcher.Form>\n\t\t\t</div>\n\n\t\t\t{fetcher.data?.error && (\n\t\t\t\t<div className=\"text-red-600\">{fetcher.data.error}</div>\n\t\t\t)}\n\t\t</>\n\t);\n}\n", "import { useEffect, useState, useRef } from \"react\";\nimport { type Person } from \"@prisma/client\";\n\nimport EntityService from \"~/services/Entity\";\nimport { useFetcher } from \"@remix-run/react\";\n\ninterface Props {\n\tonSuccess?: (instrument: Person) => void;\n}\nexport default function CreateInstrumentForm({ onSuccess }: Props) {\n\tconst formRef = useRef<HTMLFormElement>(null);\n\tconst fetcher = useFetcher<{ error?: string; instrument?: Person }>();\n\n\tuseEffect(() => {\n\t\tif (onSuccess && fetcher.type === \"done\" && fetcher.data.instrument) {\n\t\t\tonSuccess(fetcher.data.instrument);\n\t\t}\n\t}, [fetcher, onSuccess]);\n\n\t// Keep track of name and use it to suggest a slug\n\tconst [nameDraft, setNameDraft] = useState(\"\");\n\tconst [slug, setSlug] = useState(\"\");\n\tuseEffect(() => {\n\t\tsetSlug(EntityService.cleanSlug(nameDraft));\n\t}, [nameDraft]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-col align-start\">\n\t\t\t\t<fetcher.Form\n\t\t\t\t\tref={formRef}\n\t\t\t\t\tmethod=\"POST\"\n\t\t\t\t\taction=\"/entities/instruments?index\"\n\t\t\t\t>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\tonChange={(e) => setNameDraft(e.target.value)}\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"URL slug (ie. button-accordion)\"\n\t\t\t\t\t\tname=\"slug\"\n\t\t\t\t\t\tvalue={slug}\n\t\t\t\t\t\tonChange={(e) => setSlug(e.target.value)}\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tThis will be used for the URL of this Instrument, for example{\" \"}\n\t\t\t\t\t\t{`https://trad-archive.com/entities/instruments/${\n\t\t\t\t\t\t\tslug || \"button-accordion\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<input placeholder=\"Aliases\" name=\"aliases\" className=\"mb-2\" />\n\t\t\t\t\t<div className=\"text-sm text-gray-400 mb-2 ml-2\">\n\t\t\t\t\t\tA list of comma-separated aliases for this Instrument. For example:{\" \"}\n\t\t\t\t\t\t<em>Bosca Ceoil, Squeezebox, Stomach Steinway</em>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\trows={5}\n\t\t\t\t\t/>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={fetcher.state !== \"idle\"}\n\t\t\t\t\t>\n\t\t\t\t\t\tCreate\n\t\t\t\t\t</button>\n\t\t\t\t</fetcher.Form>\n\t\t\t</div>\n\n\t\t\t{fetcher.data?.error && (\n\t\t\t\t<div className=\"text-red-600\">{fetcher.data.error}</div>\n\t\t\t)}\n\t\t</>\n\t);\n}\n", "export default function Footer() {\n\treturn (\n\t\t<div className=\"flex flex-col items-start w-full p-4 pt-7 pb-24 bg-gray-900 text-gray-100 space-y-4\">\n\t\t\t<div>\n\t\t\t\tThis project is a collaboration between the{\" \"}\n\t\t\t\t<a href=\"https://www.itma.ie/\" target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\tIrish Traditional Music Archive \u2197\n\t\t\t\t</a>{\" \"}\n\t\t\t\tand{\" \"}\n\t\t\t\t<a href=\"https://dangurney.net\" target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\tDan Gurney \u2197\n\t\t\t\t</a>\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\tSpecial thanks to{\" \"}\n\t\t\t\t<a href=\"https://thesession.org/\" target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\tThe Session \u2197\n\t\t\t\t</a>{\" \"}\n\t\t\t\tfor providing tune data.\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\tAll of the code is open source on{\" \"}\n\t\t\t\t<a\n\t\t\t\t\thref=\"https://github.com/dgurns/trad-archive\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t>\n\t\t\t\t\tGitHub \u2197\n\t\t\t\t</a>\n\t\t\t\t. We welcome community contributors.\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<a href=\"mailto:dan@dangurney.net\" target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\tShare feedback or request a takedown \u2197\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n", "import { db } from \"~/utils/db.server\";\nimport { redirect } from \"@remix-run/node\";\n\nexport async function loader() {\n\tconst totalAudioItems = await db.audioItem.count();\n\tconst randomSkip = Math.round(Math.random() * (totalAudioItems - 1));\n\tconst [audioItem] = await db.audioItem.findMany({\n\t\ttake: 1,\n\t\tskip: randomSkip,\n\t});\n\treturn redirect(`/entities/audio-items/${audioItem.slug}`);\n}\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\n\nimport { db } from \"~/utils/db.server\";\nimport { ViewAs, type AudioItemWithRelations } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport { getSession } from \"~/sessions.server\";\n\nimport Layout from \"~/components/Layout\";\nimport AudioItemComponent from \"~/components/AudioItem\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\n\ninterface LoaderData {\n\taudioItem: AudioItemWithRelations;\n}\n\nexport async function loader({\n\trequest,\n\tparams,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\n\tconst { slug } = params;\n\tconst audioItem = await db.audioItem.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t\tinclude: {\n\t\t\ttagsAsSubject: {\n\t\t\t\tinclude: {\n\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\tobjectTune: true,\n\t\t\t\t\trelationship: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\tcreatedByUser: true,\n\t\t\tupdatedByUser: true,\n\t\t\tcomments: {\n\t\t\t\tinclude: {\n\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t},\n\t\t\t\torderBy: {\n\t\t\t\t\tcreatedAt: \"asc\",\n\t\t\t\t},\n\t\t\t},\n\t\t\tsavedItems: {\n\t\t\t\twhere: {\n\t\t\t\t\tuserId,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t});\n\tif (!audioItem) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this AudioItem\",\n\t\t});\n\t}\n\treturn {\n\t\taudioItem,\n\t};\n}\n\nconst ViewAudioItemBySlug = () => {\n\tconst { audioItem } = useLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<div className=\"mb-6\">\n\t\t\t\t<Breadcrumb\n\t\t\t\t\titems={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: EntityService.makeReadableNamePlural(audioItem),\n\t\t\t\t\t\t\thref: EntityService.makeHrefForTopLevel(audioItem),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: audioItem.name },\n\t\t\t\t\t]}\n\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<AudioItemComponent\n\t\t\t\taudioItem={audioItem}\n\t\t\t\tviewAs={ViewAs.Cards}\n\t\t\t\tshowTitle={false}\n\t\t\t/>\n\n\t\t\t<div className=\"mt-8 text-sm\">\n\t\t\t\t<a\n\t\t\t\t\thref={`https://itma-atom.arkivum.net/index.php/${audioItem.itmaAtomSlug}`}\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t>\n\t\t\t\t\tView in ITMA AtoM catalog \u2197\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewAudioItemBySlug;\n", "interface Props {\n\tchildren: React.ReactNode;\n}\n\nconst Layout = ({ children }: Props) => {\n\treturn (\n\t\t<div className=\"flex flex-col justify-start items-center\">\n\t\t\t<div className=\"w-full min-h-screen lg:max-w-5xl pb-44\">{children}</div>\n\t\t</div>\n\t);\n};\n\nexport default Layout;\n", "import { useCallback, useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\nimport type { Tag } from \"@prisma/client\";\n\nimport type { AudioItemWithRelations } from \"~/types\";\nimport DateTime from \"~/services/DateTime\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\n\nimport Tags from \"~/components/Tags\";\nimport SaveItemButton from \"~/components/SaveItemButton\";\nimport ViewCommentsButton from \"~/components/ViewCommentsButton\";\nimport TimeMarkers from \"~/components/TimeMarkers\";\n\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n\tshowTitle?: boolean;\n\tclassName?: string;\n}\nconst AudioItemCard = ({ audioItem, showTitle = true, className }: Props) => {\n\tconst {\n\t\tname,\n\t\tslug,\n\t\tdescription,\n\t\ttagsAsSubject: tags,\n\t\tstatus,\n\t\tcreatedByUser,\n\t\tcreatedAt,\n\t} = audioItem;\n\n\tconst {\n\t\tactiveAudioItem,\n\t\tsetActiveAudioItem,\n\t\tactiveItemDurationSeconds,\n\t\tplaybackPositionSeconds,\n\t} = usePlayerContext();\n\n\tconst audioItemIsInPlayer = activeAudioItem?.id === audioItem.id;\n\tconst tagsWithTimeMarkers: Tag[] = useMemo(() => {\n\t\tif (!Array.isArray(tags)) {\n\t\t\treturn [];\n\t\t}\n\t\treturn tags.filter(\n\t\t\t(tag) => typeof tag.subjectTimeMarkerSeconds === \"number\"\n\t\t);\n\t}, [tags]);\n\n\tconst onPlayPressed = useCallback(() => {\n\t\tsetActiveAudioItem(audioItem);\n\t}, [audioItem, setActiveAudioItem]);\n\n\tconst shouldShowPositionAndDuration =\n\t\taudioItemIsInPlayer &&\n\t\ttypeof playbackPositionSeconds === \"number\" &&\n\t\ttypeof activeItemDurationSeconds === \"number\";\n\tconst positionAndDuration = `${DateTime.formatSecondsAsDuration(\n\t\tplaybackPositionSeconds ?? 0\n\t)} / ${DateTime.formatSecondsAsDuration(activeItemDurationSeconds ?? 0)}`;\n\n\tconst isTakenDown = status === \"TAKEN_DOWN\";\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-col justify-start items-start bg-white shadow-md rounded p-4 pb-3 ${\n\t\t\t\tclassName ?? \"\"\n\t\t\t}`}\n\t\t>\n\t\t\t{showTitle && (\n\t\t\t\t<h2 className=\"mb-2\">\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto={`/entities/audio-items/${slug}`}\n\t\t\t\t\t\tclassName=\"no-underline text-gray-700\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{name}\n\t\t\t\t\t</Link>\n\t\t\t\t</h2>\n\t\t\t)}\n\n\t\t\t<div className=\"mb-4\">\n\t\t\t\t<Tags audioItem={audioItem} />\n\t\t\t</div>\n\n\t\t\t<div className=\"flex flex-col w-full border border-gray-200 rounded mb-2\">\n\t\t\t\t{isTakenDown ? (\n\t\t\t\t\t<div className=\"flex flex-row items-center px-4 py-6 text-gray-500\">\n\t\t\t\t\t\tThis Audio Item has been removed via an approved Takedown Request\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"flex flex-row justify-start items-center pr-4 h-16\">\n\t\t\t\t\t\t\t<div className=\"flex flex-1\">\n\t\t\t\t\t\t\t\t{audioItemIsInPlayer ? (\n\t\t\t\t\t\t\t\t\t<div className=\"pl-4 text-gray-500\">Playing</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tstyle={{ lineHeight: 0 }}\n\t\t\t\t\t\t\t\t\t\tonClick={onPlayPressed}\n\t\t\t\t\t\t\t\t\t\taria-label=\"Play\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i className=\"material-icons text-teal-600 hover:text-teal-800\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-6xl\">play_arrow</span>\n\t\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={`ml-4 text-gray-500 opacity-0 ${\n\t\t\t\t\t\t\t\t\t\tshouldShowPositionAndDuration\n\t\t\t\t\t\t\t\t\t\t\t? \"opacity-100 transition-opacity delay-500 duration-400\"\n\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{positionAndDuration}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{tagsWithTimeMarkers.length > 0 && (\n\t\t\t\t\t<div className=\"mx-4 mb-2 pt-3 border-t border-gray-200\">\n\t\t\t\t\t\t<TimeMarkers audioItem={audioItem} />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<div className=\"mt-4\">\n\t\t\t\t<div className=\"text-gray-500 text-sm flex flex-row\">\n\t\t\t\t\tAdded\n\t\t\t\t\t{createdByUser && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t\tby{\" \"}\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tto={`/users/${createdByUser.id}`}\n\t\t\t\t\t\t\t\tclassName=\"flex flex-row px-0 sm:px-1\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{createdByUser.username}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}{\" \"}\n\t\t\t\t\t{DateTime.formatDateYearTime(createdAt)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"text-sm mt-1 text-gray-900 whitespace-pre-wrap\">\n\t\t\t\t\t{description || \"No description\"}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"border-t border-gray-200 mt-4 pt-3 w-full flex flex-row justify-between items-center\">\n\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\t<ViewCommentsButton audioItem={audioItem} />\n\n\t\t\t\t\t<div className=\"ml-2\">\n\t\t\t\t\t\t<SaveItemButton audioItem={audioItem} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AudioItemCard;\n", "import format from \"date-fns/format\";\nimport isToday from \"date-fns/isToday\";\nimport isYesterday from \"date-fns/isYesterday\";\n\n/**\n * @param {number} inputSeconds\n * \t- Number of seconds to convert to a duration\n * @returns {string}\n * \t- Readable duration in the format 10:01:01 (hours:minutes:seconds)\n */\nconst formatSecondsAsDuration = (inputSeconds: number) => {\n\tconst hours = Math.floor(inputSeconds / (60 * 60));\n\tconst minutes = Math.floor((inputSeconds - hours * 60 * 60) / 60);\n\tconst minutesAsTwoCharString = minutes < 10 ? `0${minutes}` : `${minutes}`;\n\tconst seconds = inputSeconds - hours * 60 * 60 - minutes * 60;\n\tconst secondsAsTwoCharString = seconds < 10 ? `0${seconds}` : `${seconds}`;\n\tlet output = `${minutes}:${secondsAsTwoCharString}`;\n\tif (hours > 0) {\n\t\toutput = `${hours}:${minutesAsTwoCharString}:${secondsAsTwoCharString}`;\n\t}\n\treturn output;\n};\n\nconst formatDateYear = (\n\tdate?: Date | number | string,\n\tshouldCapitalize: boolean | undefined = false\n) => {\n\tif (!date) {\n\t\treturn \"\";\n\t}\n\tconst dateObject = date instanceof Date ? date : new Date(date);\n\tif (isToday(dateObject)) {\n\t\treturn format(dateObject, `'${shouldCapitalize ? \"T\" : \"t\"}oday`);\n\t} else if (isYesterday(dateObject)) {\n\t\treturn format(dateObject, `'${shouldCapitalize ? \"Y\" : \"y\"}esterday`);\n\t} else {\n\t\treturn format(new Date(date), `LLLL d, y`);\n\t}\n};\n\nconst formatDateYearTime = (\n\tdate?: Date | number | string,\n\tshouldCapitalize: boolean | undefined = false\n) => {\n\tif (!date) {\n\t\treturn \"\";\n\t}\n\tconst dateObject = date instanceof Date ? date : new Date(date);\n\tif (isToday(dateObject)) {\n\t\treturn format(\n\t\t\tdateObject,\n\t\t\t`'${shouldCapitalize ? \"T\" : \"t\"}oday at' h:mm a`\n\t\t);\n\t} else if (isYesterday(dateObject)) {\n\t\treturn format(\n\t\t\tdateObject,\n\t\t\t`'${shouldCapitalize ? \"Y\" : \"y\"}esterday at' h:mm a`\n\t\t);\n\t} else {\n\t\treturn format(new Date(date), `LLLL d, y 'at' h:mm a`);\n\t}\n};\n\nconst DateTimeService = {\n\tformatSecondsAsDuration,\n\tformatDateYear,\n\tformatDateYearTime,\n};\nexport default DateTimeService;\n", "import { useMemo, useState, useCallback, useEffect } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport type { TagWithRelations, AudioItemWithRelations } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport TagService from \"~/services/Tag\";\n\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\n\ninterface TagProps {\n\ttag: TagWithRelations;\n}\nconst TagLink = ({ tag }: TagProps) => {\n\tconst [tooltipIsVisible, setTooltipIsVisible] = useState(false);\n\tconst [timeoutFunc, setTimeoutFunc] = useState<NodeJS.Timeout>();\n\n\tconst onMouseEnter = useCallback(() => {\n\t\tsetTimeoutFunc(setTimeout(() => setTooltipIsVisible(true), 400));\n\t}, []);\n\n\tconst onMouseLeave = useCallback(() => {\n\t\tif (timeoutFunc) {\n\t\t\tclearTimeout(timeoutFunc);\n\t\t\tsetTimeoutFunc(undefined);\n\t\t}\n\t\tsetTooltipIsVisible(false);\n\t}, [timeoutFunc]);\n\n\t// Clean up the timeout function when component unmounts\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (timeoutFunc) {\n\t\t\t\tclearTimeout(timeoutFunc);\n\t\t\t\tsetTimeoutFunc(undefined);\n\t\t\t}\n\t\t};\n\t}, [timeoutFunc]);\n\n\tconst { relationship } = tag;\n\tconst objectEntity = TagService.getObjectEntity(tag);\n\tconst href = EntityService.makeHrefForView(objectEntity);\n\tif (!objectEntity || !href) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<Link\n\t\t\tto={href}\n\t\t\tclassName=\"block p-1 px-2 mb-2 no-underline border border-teal-600 rounded hover:border-teal-800\"\n\t\t\tonMouseEnter={onMouseEnter}\n\t\t\tonMouseLeave={onMouseLeave}\n\t\t>\n\t\t\t{objectEntity.name}\n\t\t\t<div\n\t\t\t\tclassName={`${\n\t\t\t\t\ttooltipIsVisible ? \"hidden md:flex\" : \"hidden\" // always hide on mobile\n\t\t\t\t} absolute -top-8 left-0 text-center px-2 py-1 text-sm whitespace-nowrap bg-gray-700 rounded text-white`}\n\t\t\t>\n\t\t\t\t{relationship.name} {objectEntity.entityType?.toUpperCase()}\n\t\t\t</div>\n\t\t</Link>\n\t);\n};\n\ninterface TagsProps {\n\taudioItem: AudioItemWithRelations;\n}\nconst Tags = ({ audioItem }: TagsProps) => {\n\tconst { tagsAsSubject } = audioItem;\n\n\tconst sortedTags = useMemo(() => {\n\t\tif (!Array.isArray(tagsAsSubject)) {\n\t\t\treturn [];\n\t\t}\n\t\tconst tagsWithoutTimeMarkers = tagsAsSubject.filter(\n\t\t\t(tag) => typeof tag.subjectTimeMarkerSeconds !== \"number\"\n\t\t);\n\t\treturn TagService.sort(tagsWithoutTimeMarkers);\n\t}, [tagsAsSubject]);\n\n\treturn (\n\t\t<div className=\"flex flex-row items-center flex-wrap\">\n\t\t\t{sortedTags.map((tag, index) => (\n\t\t\t\t<div className=\"mr-2\" key={index}>\n\t\t\t\t\t<TagLink tag={tag} />\n\t\t\t\t</div>\n\t\t\t))}\n\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\ttagsAsSubject && tagsAsSubject.length > 0 ? \"mb-2 ml-1\" : undefined\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<AddTagButton entity={audioItem} />\n\t\t\t</div>\n\n\t\t\t{tagsAsSubject && tagsAsSubject.length > 0 && (\n\t\t\t\t<div className=\"flex ml-1 mb-2\">\n\t\t\t\t\t<span className=\"text-gray-500 mr-1\">/</span>\n\t\t\t\t\t<EditTagsButton tags={tagsAsSubject} />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default Tags;\n", "import compareAsc from \"date-fns/compareAsc\";\nimport compareDesc from \"date-fns/compareDesc\";\nimport type {\n\tAudioItem,\n\tCollection,\n\tInstrument,\n\tPerson,\n\tPlace,\n\tTune,\n} from \"@prisma/client\";\nimport type { Entity, TagWithRelations } from \"~/types\";\n\nenum TagSortStrategy {\n\tCreatedAtThenTimeMarker = \"CREATED_AT_THEN_TIME_MARKER\",\n\tCreatedAtDesc = \"CREATED_AT_DESC\",\n}\n\n/**\n * Sort with the following logic:\n *   1) Tags without time markers, sorted by `createdAt` ASC\n *   2) Tags with time markers, sorted by time marker ASC\n */\nconst sortByCreatedAtThenTimeMarker = (tags: TagWithRelations[]) => {\n\tconst sortedTags = [...(tags ?? [])];\n\tsortedTags.sort((a, b) => {\n\t\tif (\n\t\t\ttypeof a.subjectTimeMarkerSeconds !== \"number\" &&\n\t\t\ttypeof b.subjectTimeMarkerSeconds !== \"number\"\n\t\t) {\n\t\t\treturn compareAsc(new Date(a.createdAt), new Date(b.createdAt));\n\t\t}\n\t\tif (\n\t\t\ttypeof a.subjectTimeMarkerSeconds !== \"number\" &&\n\t\t\ttypeof b.subjectTimeMarkerSeconds === \"number\"\n\t\t) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn (\n\t\t\t(a.subjectTimeMarkerSeconds ?? 0) - (b.subjectTimeMarkerSeconds ?? 0)\n\t\t);\n\t});\n\treturn sortedTags;\n};\n\n/**\n * Sort Tags by `createdAt` DESC\n */\nconst sortByCreatedAtDesc = (tags: TagWithRelations[]) => {\n\tconst sortedTags = [...(tags ?? [])];\n\tsortedTags.sort((a, b) => {\n\t\treturn compareDesc(new Date(a.createdAt), new Date(b.createdAt));\n\t});\n\treturn sortedTags;\n};\n\nconst sort = (\n\ttags: TagWithRelations[] = [],\n\tsortStrategy = TagSortStrategy.CreatedAtThenTimeMarker\n) => {\n\tswitch (sortStrategy) {\n\t\tcase TagSortStrategy.CreatedAtThenTimeMarker:\n\t\t\treturn sortByCreatedAtThenTimeMarker(tags);\n\t\tcase TagSortStrategy.CreatedAtDesc:\n\t\t\treturn sortByCreatedAtDesc(tags);\n\t\tdefault:\n\t\t\treturn tags;\n\t}\n};\n\nconst getObjectEntity = (tag: TagWithRelations): Entity | null => {\n\treturn (\n\t\ttag.objectAudioItem ??\n\t\ttag.objectCollection ??\n\t\ttag.objectInstrument ??\n\t\ttag.objectPerson ??\n\t\ttag.objectPlace ??\n\t\ttag.objectTune\n\t);\n};\n\nexport default {\n\tTagSortStrategy,\n\tsort,\n\tgetObjectEntity,\n};\n", "import { useState } from \"react\";\n\nimport { type Entity } from \"~/types\";\nimport Modal from \"~/components/Modal\";\nimport CreateTagForm from \"~/components/CreateTagForm\";\n\ninterface Props {\n\tentity: Entity;\n\tclassName?: string;\n\tchildren?: React.ReactChild | React.ReactChild[];\n}\nconst AddTagButton = ({ entity, className, children }: Props) => {\n\tconst [modalIsVisible, setModalIsVisible] = useState(false);\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName={`btn-text whitespace-pre ${className ?? \"\"}`}\n\t\t\t\tonClick={() => setModalIsVisible(true)}\n\t\t\t>\n\t\t\t\t{children ?? \"+ Add Tag\"}\n\t\t\t</button>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Add Tag\"\n\t\t\t\tisVisible={modalIsVisible}\n\t\t\t\tonClose={() => setModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t<CreateTagForm\n\t\t\t\t\tentity={entity}\n\t\t\t\t\tonSuccess={() => setModalIsVisible(false)}\n\t\t\t\t/>\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default AddTagButton;\n", "import { useEffect, useState, useCallback } from \"react\";\nimport { type Tag, EntityType } from \"@prisma/client\";\nimport { useFetcher } from \"@remix-run/react\";\n\nimport type { Entity } from \"~/types\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\n\nimport SearchEntities from \"~/components/SearchEntities\";\nimport SelectRelationship from \"~/components/SelectRelationship\";\nimport TimestampInput from \"~/components/TimestampInput\";\n\ninterface Props {\n\tentity: Entity;\n\tonSuccess: (tag: Tag) => void;\n}\nconst CreateTagForm = ({ entity, onSuccess }: Props) => {\n\tconst fetcher = useFetcher<{\n\t\terror?: string;\n\t\ttag?: Tag;\n\t\ttagInverse?: Tag;\n\t}>();\n\n\t// Call onSuccess once the tag has been created and data revalidated\n\tconst createdTag = fetcher.data?.tag;\n\tconst isSubmittingOrLoading =\n\t\tfetcher.state === \"submitting\" || fetcher.state === \"loading\";\n\tuseEffect(() => {\n\t\tif (createdTag && !isSubmittingOrLoading) {\n\t\t\tonSuccess(createdTag);\n\t\t}\n\t}, [createdTag, onSuccess, isSubmittingOrLoading]);\n\n\tconst {\n\t\tactiveAudioItem,\n\t\tplaybackPositionSeconds,\n\t\tactiveItemDurationSeconds,\n\t} = usePlayerContext();\n\n\tconst isActiveAudioItem = activeAudioItem?.id === entity.id;\n\tconst defaultTimeMarkerValue = isActiveAudioItem\n\t\t? playbackPositionSeconds\n\t\t: undefined;\n\n\tconst [shouldAddTimeMarker, setShouldAddTimeMarker] = useState(false);\n\tconst [timeMarkerValue, setTimeMarkerValue] = useState<number | undefined>(\n\t\tdefaultTimeMarkerValue\n\t);\n\n\tconst [selectedEntity, setSelectedEntity] = useState<Entity>();\n\tconst [selectedRelationshipId, setSelectedRelationshipId] = useState(\"\");\n\tconst [selectedInverseRelationshipId, setSelectedInverseRelationshipId] =\n\t\tuseState(\"\");\n\n\tconst onSelectEntity = useCallback(\n\t\t(selectedEntityFromResults: Entity) => {\n\t\t\tif (selectedEntityFromResults.id === entity.id) {\n\t\t\t\treturn window.alert(\"Cannot tag an entity with itself\");\n\t\t\t}\n\t\t\tsetSelectedEntity(selectedEntityFromResults);\n\t\t},\n\t\t[entity]\n\t);\n\n\tconst onNewEntityCreated = useCallback((entity: Entity) => {\n\t\tsetSelectedEntity(entity);\n\t}, []);\n\n\tconst onTimeMarkerValueChanged = useCallback(\n\t\t(newTimeMarkerValueSeconds: number) => {\n\t\t\tsetShouldAddTimeMarker(true);\n\t\t\tif (\n\t\t\t\ttypeof activeItemDurationSeconds !== \"undefined\" &&\n\t\t\t\tnewTimeMarkerValueSeconds >= activeItemDurationSeconds\n\t\t\t) {\n\t\t\t\tsetTimeMarkerValue(activeItemDurationSeconds);\n\t\t\t} else if (newTimeMarkerValueSeconds <= 0) {\n\t\t\t\tsetTimeMarkerValue(0);\n\t\t\t} else {\n\t\t\t\tsetTimeMarkerValue(newTimeMarkerValueSeconds);\n\t\t\t}\n\t\t},\n\t\t[activeItemDurationSeconds]\n\t);\n\n\tconst onSelectRelationship = useCallback(\n\t\t(relationshipId: string) => {\n\t\t\tsetSelectedRelationshipId(relationshipId);\n\t\t},\n\t\t[setSelectedRelationshipId]\n\t);\n\n\tconst onSelectInverseRelationship = useCallback(\n\t\t(relationshipId: string) => {\n\t\t\tsetSelectedInverseRelationshipId(relationshipId);\n\t\t},\n\t\t[setSelectedInverseRelationshipId]\n\t);\n\n\tconst onCreateTagClicked = async () => {\n\t\tif (!selectedEntity?.entityType || !entity.entityType) {\n\t\t\treturn;\n\t\t}\n\t\tlet subjectTimeMarkerSeconds: number | undefined;\n\t\tif (shouldAddTimeMarker && typeof timeMarkerValue === \"number\") {\n\t\t\tsubjectTimeMarkerSeconds = timeMarkerValue;\n\t\t}\n\t\tawait fetcher.submit(\n\t\t\t{\n\t\t\t\trelationshipId: selectedRelationshipId,\n\t\t\t\tinverseRelationshipId: selectedInverseRelationshipId,\n\t\t\t\tsubjectEntityType: entity.entityType,\n\t\t\t\tsubjectEntityId: entity.id,\n\t\t\t\tobjectEntityType: selectedEntity.entityType,\n\t\t\t\tobjectEntityId: selectedEntity.id,\n\t\t\t\tsubjectTimeMarkerSeconds: String(subjectTimeMarkerSeconds ?? \"\"),\n\t\t\t},\n\t\t\t{ method: \"POST\", action: \"/tags\" }\n\t\t);\n\t};\n\n\tif (!selectedEntity) {\n\t\treturn (\n\t\t\t<SearchEntities\n\t\t\t\tonSelect={onSelectEntity}\n\t\t\t\tonNewEntityCreated={onNewEntityCreated}\n\t\t\t/>\n\t\t);\n\t}\n\n\t// Only show the time marker option if the subject entity is an AudioItem\n\tconst shouldShowTimeMarkerCheckbox =\n\t\tentity.entityType === EntityType.AudioItem &&\n\t\ttypeof defaultTimeMarkerValue !== \"undefined\";\n\n\treturn (\n\t\t<>\n\t\t\t<div>What is the relationship between these two entities?</div>\n\n\t\t\t<div className=\"mt-2 pl-4\">\n\t\t\t\t<SelectRelationship\n\t\t\t\t\tsubjectEntity={entity}\n\t\t\t\t\tobjectEntity={selectedEntity}\n\t\t\t\t\tonSelect={onSelectRelationship}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<div className=\"mt-6\">...and what is the inverse relationship?</div>\n\n\t\t\t<div className=\"mt-2 pl-4\">\n\t\t\t\t<SelectRelationship\n\t\t\t\t\tsubjectEntity={selectedEntity}\n\t\t\t\t\tobjectEntity={entity}\n\t\t\t\t\tonSelect={onSelectInverseRelationship}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t{shouldShowTimeMarkerCheckbox && (\n\t\t\t\t<div className=\"mt-6 flex flex-row items-start justify-start\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tid=\"time-marker\"\n\t\t\t\t\t\tclassName=\"mt-1\"\n\t\t\t\t\t\tchecked={shouldAddTimeMarker}\n\t\t\t\t\t\tonChange={(event) => setShouldAddTimeMarker(event.target.checked)}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor=\"time-marker\" className=\"ml-2\">\n\t\t\t\t\t\t<div className=\"flex flex-col items-start\">\n\t\t\t\t\t\t\t<div className=\"mb-2\">Mark this Tag at time:</div>\n\t\t\t\t\t\t\t<TimestampInput\n\t\t\t\t\t\t\t\tvalueInSeconds={timeMarkerValue ?? 0}\n\t\t\t\t\t\t\t\tonChange={onTimeMarkerValueChanged}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<button\n\t\t\t\tclassName=\"btn mt-6\"\n\t\t\t\tonClick={onCreateTagClicked}\n\t\t\t\tdisabled={!selectedRelationshipId || fetcher.state !== \"idle\"}\n\t\t\t>\n\t\t\t\tSave\n\t\t\t</button>\n\n\t\t\t{fetcher.data?.error && (\n\t\t\t\t<div className=\"text-red-600 mt-4\">{fetcher.data.error}</div>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default CreateTagForm;\n", "import { useEffect, useState, useMemo } from \"react\";\nimport { type Relationship } from \"@prisma/client\";\nimport { useFetcher } from \"@remix-run/react\";\n\nimport type { Entity } from \"~/types\";\nimport LoadingCircle from \"./LoadingCircle\";\n\ninterface Props {\n\tsubjectEntity: Entity;\n\tobjectEntity: Entity;\n\tonSelect: (relationshipId: string) => void;\n}\nexport default function SelectRelationship({\n\tsubjectEntity,\n\tobjectEntity,\n\tonSelect,\n}: Props) {\n\tconst fetcher = useFetcher<{\n\t\terror?: string;\n\t\trelationships?: Relationship[];\n\t}>();\n\tuseEffect(() => {\n\t\tconst params = new URLSearchParams({\n\t\t\tsubjectEntityType: String(subjectEntity.entityType),\n\t\t\tobjectEntityType: String(objectEntity.entityType),\n\t\t});\n\t\tfetcher.load(`/relationships?${params.toString()}`);\n\t}, [subjectEntity, objectEntity]); // fetcher object changes on every render, so intentionally leave it out\n\n\tconst relationshipOptions = useMemo(\n\t\t() => fetcher.data?.relationships ?? [],\n\t\t[fetcher.data]\n\t);\n\n\tconst [selectedRelationshipId, setSelectedRelationshipId] = useState(\"\");\n\tuseEffect(() => {\n\t\tif (relationshipOptions.length > 0) {\n\t\t\tsetSelectedRelationshipId(relationshipOptions[0].id);\n\t\t}\n\t}, [relationshipOptions]);\n\n\tuseEffect(() => {\n\t\tif (onSelect && selectedRelationshipId) {\n\t\t\tonSelect(selectedRelationshipId);\n\t\t}\n\t}, [onSelect, selectedRelationshipId]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"mb-2 text-gray-500\">\n\t\t\t\t<span className=\"text-sm uppercase pr-2\">\n\t\t\t\t\t{subjectEntity.entityType}\n\t\t\t\t</span>\n\t\t\t\t{subjectEntity.name}\n\t\t\t</div>\n\n\t\t\t{fetcher.state === \"loading\" ? (\n\t\t\t\t<LoadingCircle />\n\t\t\t) : (\n\t\t\t\t<select\n\t\t\t\t\tvalue={selectedRelationshipId}\n\t\t\t\t\tonChange={(event) => setSelectedRelationshipId(event.target.value)}\n\t\t\t\t>\n\t\t\t\t\t{relationshipOptions.map((relationship, index) => (\n\t\t\t\t\t\t<option value={relationship.id} key={index}>\n\t\t\t\t\t\t\t{relationship.name}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t))}\n\t\t\t\t</select>\n\t\t\t)}\n\n\t\t\t<div className=\"text-gray-500 mt-2\">\n\t\t\t\t<span className=\"text-sm uppercase pr-2\">\n\t\t\t\t\t{objectEntity.entityType}\n\t\t\t\t</span>\n\t\t\t\t{objectEntity.name}\n\t\t\t</div>\n\n\t\t\t{fetcher.data?.error && (\n\t\t\t\t<div className=\"text-red-600 mt-4\">{fetcher.data.error}</div>\n\t\t\t)}\n\t\t</>\n\t);\n}\n", "interface Props {\n\tvalueInSeconds: number;\n\tonChange: (valueInSeconds: number) => void;\n\tclassName?: string;\n}\n\nconst TimestampInput = ({ valueInSeconds, onChange, className }: Props) => {\n\tconst hrs = Math.floor(valueInSeconds / 3600);\n\tconst mins = Math.floor((valueInSeconds - hrs * 3600) / 60);\n\tconst secs = valueInSeconds - hrs * 3600 - mins * 60;\n\n\tconst onChangeHrs = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst newHrs = parseInt(event.target.value, 10) || 0;\n\t\tconst newValueInSeconds = newHrs * 3600 + mins * 60 + secs;\n\t\tonChange(newValueInSeconds);\n\t};\n\n\tconst onChangeMins = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst newMins = parseInt(event.target.value, 10) || 0;\n\t\tconst newValueInSeconds = hrs * 3600 + newMins * 60 + secs;\n\t\tonChange(newValueInSeconds);\n\t};\n\n\tconst onChangeSecs = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst newSecs = parseInt(event.target.value, 10) || 0;\n\t\tconst newValueInSeconds = hrs * 3600 + mins * 60 + newSecs;\n\t\tonChange(newValueInSeconds);\n\t};\n\n\treturn (\n\t\t<div className={`flex flex-row items-center ${className ?? \"\"}`}>\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tid=\"hrs\"\n\t\t\t\tclassName=\"flex max-w-[50px]\"\n\t\t\t\tvalue={hrs || \"\"}\n\t\t\t\tplaceholder=\"0\"\n\t\t\t\tonChange={onChangeHrs}\n\t\t\t/>\n\t\t\t<label htmlFor=\"hours\" className=\"px-2\">\n\t\t\t\thr{hrs !== 1 && \"s\"}\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tid=\"mins\"\n\t\t\t\tclassName=\"flex max-w-[55px]\"\n\t\t\t\tvalue={mins || \"\"}\n\t\t\t\tplaceholder=\"0\"\n\t\t\t\tonChange={onChangeMins}\n\t\t\t/>\n\t\t\t<label htmlFor=\"mins\" className=\"px-2\">\n\t\t\t\tmin{mins !== 1 ? \"s\" : \"\"}\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tid=\"secs\"\n\t\t\t\tclassName=\"flex max-w-[55px]\"\n\t\t\t\tvalue={secs || \"\"}\n\t\t\t\tplaceholder=\"0\"\n\t\t\t\tonChange={onChangeSecs}\n\t\t\t/>\n\t\t\t<label htmlFor=\"secs\" className=\"px-2\">\n\t\t\t\tsec{secs !== 1 ? \"s\" : \"\"}\n\t\t\t</label>\n\t\t</div>\n\t);\n};\n\nexport default TimestampInput;\n", "import { useState, useCallback, useMemo, useEffect } from \"react\";\n\nimport { type TagWithRelations } from \"~/types\";\nimport DateTimeService from \"~/services/DateTime\";\nimport TagService from \"~/services/Tag\";\n\nimport Modal from \"~/components/Modal\";\nimport { useFetcher } from \"@remix-run/react\";\n\ninterface Props {\n\ttags: TagWithRelations[];\n\tclassName?: string;\n\tchildren?: React.ReactChild | React.ReactChild[];\n\tonSuccess?: () => void;\n}\nconst EditTagsButton = ({ tags, className, children, onSuccess }: Props) => {\n\tconst fetcher = useFetcher<{ error?: string }>();\n\tconst isSubmittingOrLoading =\n\t\tfetcher.state === \"submitting\" || fetcher.state === \"loading\";\n\tconst data = fetcher.data;\n\tuseEffect(() => {\n\t\tif (onSuccess && data && !data.error && !isSubmittingOrLoading) {\n\t\t\tonSuccess();\n\t\t}\n\t}, [data, isSubmittingOrLoading, onSuccess]);\n\n\tconst [modalIsVisible, setModalIsVisible] = useState(false);\n\n\tconst onDeleteTag = useCallback(async (id: string) => {\n\t\tif (window.confirm(\"Are you sure you want to delete this Tag?\")) {\n\t\t\tawait fetcher.submit(\n\t\t\t\t{ tagId: id },\n\t\t\t\t{ method: \"delete\", action: \"/tags\" }\n\t\t\t);\n\t\t}\n\t}, []); // intentionally leave out fetcher from deps array since it triggers unwanted re-renders\n\n\tuseEffect(() => {\n\t\tif (data?.error) {\n\t\t\twindow.alert(`Error deleting Tag: ${data.error}`);\n\t\t}\n\t}, [data]);\n\n\tconst sortedTags = useMemo(() => {\n\t\tif (!Array.isArray(tags)) {\n\t\t\treturn [];\n\t\t}\n\t\treturn TagService.sort(tags);\n\t}, [tags]);\n\n\tif (!sortedTags || sortedTags.length === 0) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName={`btn-text whitespace-pre ${className ?? \"\"}`}\n\t\t\t\tonClick={() => setModalIsVisible(true)}\n\t\t\t>\n\t\t\t\t{children ?? \"Edit Tags\"}\n\t\t\t</button>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Edit Tags\"\n\t\t\t\tisVisible={modalIsVisible}\n\t\t\t\tonClose={() => setModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t{sortedTags.map((tag, index) => {\n\t\t\t\t\tconst { id, relationship, subjectTimeMarkerSeconds } = tag;\n\t\t\t\t\tconst objectEntity = TagService.getObjectEntity(tag);\n\t\t\t\t\tif (!objectEntity) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"flex flex-row items-start justify-start\"\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"flex flex-col flex-1 justify-start align-start mb-4 pr-4\">\n\t\t\t\t\t\t\t\t<div className=\"italic text-gray-500\">{relationship.name}</div>\n\t\t\t\t\t\t\t\t<div className=\"uppercase text-sm text-gray-500 pr-2\">\n\t\t\t\t\t\t\t\t\t{objectEntity.entityType}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{objectEntity.name}\n\t\t\t\t\t\t\t\t{typeof subjectTimeMarkerSeconds === \"number\" && (\n\t\t\t\t\t\t\t\t\t<span className=\"italic text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t{`at ${DateTimeService.formatSecondsAsDuration(\n\t\t\t\t\t\t\t\t\t\t\tsubjectTimeMarkerSeconds\n\t\t\t\t\t\t\t\t\t\t)}`}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"btn-text\"\n\t\t\t\t\t\t\t\tonClick={() => onDeleteTag(id)}\n\t\t\t\t\t\t\t\tdisabled={fetcher.state !== \"idle\"}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tDelete Tag\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default EditTagsButton;\n", "import { useFetcher } from \"@remix-run/react\";\nimport { type AudioItemWithRelations } from \"~/types\";\n\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n}\nexport default function SaveItemButton({ audioItem }: Props) {\n\tconst fetcher = useFetcher<{ error?: string; ok: boolean }>();\n\n\tfunction onButtonClicked() {\n\t\tfetcher.submit(\n\t\t\t{ audioItemId: audioItem.id },\n\t\t\t{ method: \"POST\", action: \"/saved-items\" }\n\t\t);\n\t}\n\n\tconst isSaved = audioItem.savedItems.length === 1;\n\n\treturn (\n\t\t<button\n\t\t\tclassName={`btn-secondary ${\n\t\t\t\tisSaved ? \"btn-secondary-active\" : \"\"\n\t\t\t} pl-0.5`}\n\t\t\tonClick={onButtonClicked}\n\t\t\tdisabled={fetcher.state !== \"idle\"}\n\t\t\taria-label={isSaved ? \"Unsave\" : \"Save\"}\n\t\t>\n\t\t\t{isSaved ? (\n\t\t\t\t<>\n\t\t\t\t\t<i className=\"material-icons\">bookmark</i>\n\t\t\t\t\tSaved\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<i className=\"material-icons\">bookmark_border</i>\n\t\t\t\t\tSave\n\t\t\t\t</>\n\t\t\t)}\n\t\t</button>\n\t);\n}\n", "import { useCallback, useState, useEffect, useRef } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport type { AudioItemWithRelations } from \"~/types\";\nimport DateTimeService from \"~/services/DateTime\";\n\nimport Modal from \"~/components/Modal\";\nimport CreateCommentForm from \"~/components/CreateCommentForm\";\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n}\nconst ViewCommentsButton = ({ audioItem }: Props) => {\n\tconst { comments } = audioItem;\n\tconst commentsCount = comments.length;\n\n\tconst commentsRef = useRef<HTMLDivElement>();\n\tconst [modalIsVisible, setModalIsVisible] = useState(false);\n\n\tconst onViewCommentsButtonClicked = useCallback(async () => {\n\t\tsetModalIsVisible(true);\n\t}, []);\n\n\tconst onCloseModal = useCallback(() => setModalIsVisible(false), []);\n\n\tuseEffect(() => {\n\t\t// If comments have loaded, scroll to the bottom\n\t\tif (!commentsRef.current) {\n\t\t\treturn;\n\t\t}\n\t\tconst commentsHeight = commentsRef.current?.scrollHeight ?? 0;\n\t\tif (modalIsVisible && commentsHeight > 0 && comments.length > 0) {\n\t\t\tcommentsRef.current.scrollTo({\n\t\t\t\ttop: commentsHeight,\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t});\n\t\t}\n\t}, [comments, modalIsVisible]);\n\n\tconst modalTitle =\n\t\tcommentsCount > 0\n\t\t\t? `${commentsCount} Comment${commentsCount === 1 ? \"\" : \"s\"}`\n\t\t\t: \"No Comments\";\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName=\"btn-secondary\"\n\t\t\t\tonClick={onViewCommentsButtonClicked}\n\t\t\t\taria-label=\"View Comments\"\n\t\t\t>\n\t\t\t\t<i className=\"material-icons mr-0.5\">chat_bubble_outline</i>\n\t\t\t\t{commentsCount > 0 ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{commentsCount}\n\t\t\t\t\t\t<span className=\"hidden md:block md:pl-1\">\n\t\t\t\t\t\t\tComment{commentsCount === 1 ? \"\" : \"s\"}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className=\"md:hidden\">0</span>\n\t\t\t\t\t\t<span className=\"hidden md:block\">No Comments</span>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</button>\n\n\t\t\t<Modal\n\t\t\t\ttitle={modalTitle}\n\t\t\t\tisVisible={modalIsVisible}\n\t\t\t\tonClose={onCloseModal}\n\t\t\t>\n\t\t\t\t{comments.length > 0 && (\n\t\t\t\t\t<div className=\"max-h-1/2 overflow-auto\">\n\t\t\t\t\t\t{comments.map(({ createdByUser, createdAt, text }, index) => (\n\t\t\t\t\t\t\t<div className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t\t<div className=\"text-gray-500 text-sm mb-1 flex flex-row items-center\">\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tto={`/users/${createdByUser?.id}`}\n\t\t\t\t\t\t\t\t\t\tclassName=\"mr-1 flex flex-row items-center\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span>{createdByUser?.username}</span>\n\t\t\t\t\t\t\t\t\t</Link>{\" \"}\n\t\t\t\t\t\t\t\t\t{DateTimeService.formatDateYearTime(createdAt)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"text-sm whitespace-pre-line text-gray-900\">\n\t\t\t\t\t\t\t\t\t{text}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"mt-4\">\n\t\t\t\t\t<CreateCommentForm parentAudioItem={audioItem} />\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default ViewCommentsButton;\n", "import { useFetcher } from \"@remix-run/react\";\nimport type { AudioItem, Comment } from \"@prisma/client\";\nimport { useEffect, useRef } from \"react\";\n\ninterface Props {\n\tparentAudioItem: AudioItem;\n}\nconst CreateCommentForm = ({ parentAudioItem }: Props) => {\n\tconst formRef = useRef<HTMLFormElement>(null);\n\tconst fetcher = useFetcher<{ error?: string; comment?: Comment }>();\n\n\tuseEffect(() => {\n\t\tif (fetcher.type === \"done\" && fetcher.data.comment) {\n\t\t\tformRef.current?.reset();\n\t\t}\n\t}, [fetcher]);\n\n\treturn (\n\t\t<fetcher.Form\n\t\t\tref={formRef}\n\t\t\tmethod=\"POST\"\n\t\t\taction=\"/comments\"\n\t\t\tclassName=\"w-full\"\n\t\t>\n\t\t\t<textarea\n\t\t\t\tplaceholder=\"Add a comment...\"\n\t\t\t\trows={3}\n\t\t\t\trequired\n\t\t\t\tminLength={1}\n\t\t\t\tname=\"text\"\n\t\t\t/>\n\t\t\t<input\n\t\t\t\ttype=\"hidden\"\n\t\t\t\tname=\"parentAudioItemId\"\n\t\t\t\tvalue={parentAudioItem.id}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\tclassName=\"btn mt-3 w-auto\"\n\t\t\t\ttype=\"submit\"\n\t\t\t\tdisabled={fetcher.state !== \"idle\"}\n\t\t\t>\n\t\t\t\tAdd Comment\n\t\t\t</button>\n\t\t\t{fetcher.data?.error && (\n\t\t\t\t<div className=\"text-red-600 mt-3\">{fetcher.data.error}</div>\n\t\t\t)}\n\t\t</fetcher.Form>\n\t);\n};\n\nexport default CreateCommentForm;\n", "import { useCallback, useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport type { AudioItemWithRelations, TagWithRelations } from \"~/types\";\nimport { EntityType } from \"~/types\";\nimport DateTime from \"~/services/DateTime\";\nimport Entity from \"~/services/Entity\";\nimport TagService from \"~/services/Tag\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\nimport type { Tune } from \"@prisma/client\";\n\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n}\nconst TimeMarkers = ({ audioItem }: Props) => {\n\tconst { tagsAsSubject } = audioItem;\n\n\tconst {\n\t\tactiveAudioItem,\n\t\tsetActiveAudioItem,\n\t\tplaybackPositionSeconds,\n\t\tsetSeekPositionSeconds,\n\t} = usePlayerContext();\n\n\ttype TimeMarkersWithTags = {\n\t\t[timeMarker: string]: TagWithRelations[];\n\t};\n\tconst timeMarkersWithTags: TimeMarkersWithTags = useMemo(() => {\n\t\tconst output: Record<number, TagWithRelations[]> = {};\n\t\tif (!tagsAsSubject) {\n\t\t\treturn output;\n\t\t}\n\t\t// Filter out tags without time markers\n\t\tconst filteredTags = tagsAsSubject.filter(\n\t\t\t(tag) => typeof tag.subjectTimeMarkerSeconds === \"number\"\n\t\t);\n\t\t// Sort array so that time markers are ascending, and thus object keys will\n\t\t// be created in ascending order\n\t\tfilteredTags.sort(\n\t\t\t(a, b) =>\n\t\t\t\ta.subjectTimeMarkerSeconds ?? 0 - (b.subjectTimeMarkerSeconds ?? 0)\n\t\t);\n\t\tfilteredTags.forEach((tag) => {\n\t\t\tif (typeof tag.subjectTimeMarkerSeconds !== \"number\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst existingTagsAtTimeMarker: TagWithRelations[] | undefined =\n\t\t\t\toutput[tag.subjectTimeMarkerSeconds] ?? [];\n\t\t\toutput[tag.subjectTimeMarkerSeconds] = [...existingTagsAtTimeMarker, tag];\n\t\t});\n\t\treturn output;\n\t}, [tagsAsSubject]);\n\n\tconst onTimeMarkerClicked = useCallback(\n\t\t(event, timeMarker) => {\n\t\t\tif (event.target.id === \"time-marker-tag-link\") {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (activeAudioItem?.id !== audioItem.id) {\n\t\t\t\tsetActiveAudioItem(audioItem);\n\t\t\t}\n\t\t\tsetSeekPositionSeconds(parseInt(timeMarker));\n\t\t},\n\t\t[audioItem, activeAudioItem, setActiveAudioItem, setSeekPositionSeconds]\n\t);\n\n\tconst audioItemIsInPlayer = activeAudioItem?.id === audioItem.id;\n\tconst activeTimeMarker: string | undefined = useMemo(() => {\n\t\tif (!audioItemIsInPlayer) {\n\t\t\treturn undefined;\n\t\t}\n\t\tlet result: string | undefined;\n\t\tObject.keys(timeMarkersWithTags).forEach((timeMarker) => {\n\t\t\tif (parseInt(timeMarker) <= (playbackPositionSeconds ?? 0)) {\n\t\t\t\tresult = timeMarker;\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}, [audioItemIsInPlayer, timeMarkersWithTags, playbackPositionSeconds]);\n\n\treturn (\n\t\t<div className=\"flex flex-col\">\n\t\t\t{Object.entries(timeMarkersWithTags).map(\n\t\t\t\t([timeMarker, tagsAsSubjectAtTimeMarker], index) => {\n\t\t\t\t\tconst isActive = activeTimeMarker === timeMarker;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"flex flex-row items-start md:items-center justify-start mb-2 last:mb-1 text-sm\"\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"flex flex-row w-16 flex-shrink-0\">\n\t\t\t\t\t\t\t\t<div className=\"w-3 text-left\">{isActive && \">\"}</div>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t\tonClick={(event) => onTimeMarkerClicked(event, timeMarker)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{DateTime.formatSecondsAsDuration(parseInt(timeMarker))}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex flex-col md:flex-row\">\n\t\t\t\t\t\t\t\t{tagsAsSubjectAtTimeMarker.map((tag, index) => {\n\t\t\t\t\t\t\t\t\tconst objectEntity = TagService.getObjectEntity(tag);\n\t\t\t\t\t\t\t\t\tif (!objectEntity) {\n\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<span className=\"flex flex-row items-center\" key={index}>\n\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\tto={Entity.makeHrefForView(objectEntity)}\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"time-marker-tag-link\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{objectEntity.name}\n\t\t\t\t\t\t\t\t\t\t\t\t{objectEntity.entityType === EntityType.Tune\n\t\t\t\t\t\t\t\t\t\t\t\t\t? ` (${(objectEntity as Tune).type})`\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t{index !== tagsAsSubjectAtTimeMarker.length - 1 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"hidden md:block mr-1\">,</span>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default TimeMarkers;\n", "import { useCallback, useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\nimport { type Tune } from \"@prisma/client\";\n\nimport type { AudioItemWithRelations } from \"~/types\";\nimport { EntityStatus, EntityType } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport TagService from \"~/services/Tag\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\n\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\nimport Menu from \"~/components/Menu\";\nimport SaveItemButton from \"~/components/SaveItemButton\";\nimport ViewCommentsButton from \"~/components/ViewCommentsButton\";\n\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n\tclassName?: string;\n}\nconst AudioItemCompact = ({ audioItem, className }: Props) => {\n\tconst { name, slug, description, tagsAsSubject, status } = audioItem;\n\tconst isTakenDown = status === EntityStatus.TakenDown;\n\tconst sortedTags = useMemo(\n\t\t() => TagService.sort(tagsAsSubject),\n\t\t[tagsAsSubject]\n\t);\n\n\tconst { activeAudioItem, setActiveAudioItem } = usePlayerContext();\n\n\tconst onPlayPressed = useCallback(() => {\n\t\tsetActiveAudioItem(audioItem);\n\t}, [audioItem, setActiveAudioItem]);\n\n\tconst playButtonMarkup = useMemo(() => {\n\t\tconst audioItemIsInPlayer = activeAudioItem?.id === audioItem.id;\n\t\tif (isTakenDown) {\n\t\t\treturn <div className=\"text-gray-500\">Taken Down</div>;\n\t\t}\n\t\tif (audioItemIsInPlayer) {\n\t\t\treturn <div className=\"text-gray-500\">Playing</div>;\n\t\t}\n\t\treturn (\n\t\t\t<button\n\t\t\t\tstyle={{ lineHeight: 0 }}\n\t\t\t\tonClick={onPlayPressed}\n\t\t\t\taria-label=\"Play\"\n\t\t\t>\n\t\t\t\t<i className=\"material-icons text-teal-600 hover:text-teal-800\">\n\t\t\t\t\t<span className=\"text-6xl\">play_arrow</span>\n\t\t\t\t</i>\n\t\t\t</button>\n\t\t);\n\t}, [isTakenDown, activeAudioItem, audioItem, onPlayPressed]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-row justify-start items-start bg-white shadow-md rounded pt-2 px-3 pb-1 ${\n\t\t\t\tclassName ?? \"\"\n\t\t\t}`}\n\t\t>\n\t\t\t<div className=\"flex justify-center items-center w-14 mr-3\">\n\t\t\t\t{playButtonMarkup}\n\t\t\t</div>\n\n\t\t\t<div className=\"flex flex-1 flex-col overflow-hidden\">\n\t\t\t\t<Link to={`/entities/audio-items/${slug}`}>{name}</Link>\n\n\t\t\t\t<div className=\"flex flex-row flex-wrap text-sm mt-1 mb-1\">\n\t\t\t\t\tTags:\n\t\t\t\t\t{sortedTags.map((tag, index) => {\n\t\t\t\t\t\tconst objectEntity = TagService.getObjectEntity(tag);\n\t\t\t\t\t\tif (!objectEntity) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={index} className=\"ml-1 whitespace-pre\">\n\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(objectEntity)}>\n\t\t\t\t\t\t\t\t\t{objectEntity.name}\n\t\t\t\t\t\t\t\t\t{objectEntity.entityType === EntityType.Tune\n\t\t\t\t\t\t\t\t\t\t? ` (${(objectEntity as Tune).type})`\n\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t{index !== sortedTags.length - 1 && \", \"}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<AddTagButton entity={audioItem} className=\"ml-2\" />\n\t\t\t\t\t{tagsAsSubject?.length > 0 && (\n\t\t\t\t\t\t<div className=\"flex ml-1\">\n\t\t\t\t\t\t\t<span className=\"text-gray-500 mr-1\">/</span>\n\t\t\t\t\t\t\t<EditTagsButton tags={audioItem.tagsAsSubject} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{description && (\n\t\t\t\t\t<div className=\"text-gray-500 text-sm\">{description}</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"border-t border-gray-200 mt-2 pt-1 w-full flex flex-row justify-between items-center\">\n\t\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\t\t<ViewCommentsButton audioItem={audioItem} />\n\n\t\t\t\t\t\t<div className=\"ml-2\">\n\t\t\t\t\t\t\t<SaveItemButton audioItem={audioItem} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AudioItemCompact;\n", "import { useCallback, useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport type { AudioItemWithRelations } from \"~/types\";\nimport { EntityStatus } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport TagService from \"~/services/Tag\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\n\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n\tclassName?: string;\n}\nconst AudioItemTextOnly = ({ audioItem, className }: Props) => {\n\tconst { name, slug, tagsAsSubject, status } = audioItem;\n\tconst isTakenDown = status === EntityStatus.TakenDown;\n\tconst sortedTags = useMemo(\n\t\t() => TagService.sort(tagsAsSubject),\n\t\t[tagsAsSubject]\n\t);\n\n\tconst { activeAudioItem, setActiveAudioItem } = usePlayerContext();\n\n\tconst onPlayPressed = useCallback(() => {\n\t\tsetActiveAudioItem(audioItem);\n\t}, [audioItem, setActiveAudioItem]);\n\n\tconst playButtonMarkup = useMemo(() => {\n\t\tconst audioItemIsInPlayer = activeAudioItem?.id === audioItem.id;\n\t\tif (isTakenDown) {\n\t\t\treturn <div className=\"text-gray-500\">Taken Down</div>;\n\t\t}\n\t\tif (audioItemIsInPlayer) {\n\t\t\treturn <div className=\"text-gray-500\">Playing</div>;\n\t\t}\n\t\treturn (\n\t\t\t<button\n\t\t\t\tstyle={{ lineHeight: 0 }}\n\t\t\t\tonClick={onPlayPressed}\n\t\t\t\taria-label=\"Play\"\n\t\t\t>\n\t\t\t\t<i className=\"material-icons text-teal-600 hover:text-teal-800\">\n\t\t\t\t\t<span className=\"text-3xl\">play_arrow</span>\n\t\t\t\t</i>\n\t\t\t</button>\n\t\t);\n\t}, [isTakenDown, activeAudioItem, audioItem, onPlayPressed]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-row justify-start items-start ${className ?? \"\"}`}\n\t\t>\n\t\t\t<div className=\"flex justify-center items-center w-14 mr-3\">\n\t\t\t\t{playButtonMarkup}\n\t\t\t</div>\n\n\t\t\t<div className=\"flex flex-1 flex-col overflow-hidden\">\n\t\t\t\t<Link to={`/entities/audio-items/${slug}`}>{name}</Link>\n\n\t\t\t\t<div className=\"flex flex-row flex-wrap text-sm mt-1 mb-1\">\n\t\t\t\t\t<span className=\"text-gray-500\">Tags:</span>\n\t\t\t\t\t{sortedTags.map((tag, index) => {\n\t\t\t\t\t\tconst objectEntity = TagService.getObjectEntity(tag);\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={index} className=\"ml-1 whitespace-pre\">\n\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(objectEntity)}>\n\t\t\t\t\t\t\t\t\t{objectEntity?.name}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t{index !== sortedTags.length - 1 && \", \"}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AudioItemTextOnly;\n", "import type { AudioItemWithRelations } from \"~/types\";\nimport { ViewAs } from \"~/types\";\n\nimport AudioItemCard from \"~/components/AudioItemCard\";\nimport AudioItemCompact from \"~/components/AudioItemCompact\";\nimport AudioItemTextOnly from \"~/components/AudioItemTextOnly\";\n\ninterface Props {\n\tviewAs?: ViewAs;\n\taudioItem: AudioItemWithRelations;\n\tshowTitle?: boolean;\n\tclassName?: string;\n}\n\n// AudioItem handles wrapping the different variants of AudioItem components. It\n// returns the variant requested in the `viewAs` prop. Default is Card.\nconst AudioItemComponent = ({\n\tviewAs,\n\taudioItem,\n\tshowTitle,\n\tclassName,\n}: Props) => {\n\tif (viewAs === ViewAs.Cards) {\n\t\treturn (\n\t\t\t<AudioItemCard\n\t\t\t\taudioItem={audioItem}\n\t\t\t\tshowTitle={showTitle}\n\t\t\t\tclassName={className}\n\t\t\t/>\n\t\t);\n\t} else if (viewAs === ViewAs.Compact) {\n\t\treturn <AudioItemCompact audioItem={audioItem} className={className} />;\n\t} else if (viewAs === ViewAs.List) {\n\t\treturn <AudioItemTextOnly audioItem={audioItem} className={className} />;\n\t} else {\n\t\treturn null;\n\t}\n};\n\nexport default AudioItemComponent;\n", "import { Link } from \"@remix-run/react\";\n\ninterface BreadcrumbItem {\n\tlabel: string;\n\thref?: string;\n}\n\ninterface Props {\n\titems: BreadcrumbItem[];\n\tclassName?: string;\n}\n\nconst Breadcrumb = ({ items = [], className }: Props) => {\n\tif (items.length === 0) {\n\t\treturn null;\n\t}\n\tif (items.length === 1) {\n\t\treturn <h1 className={className ?? \"\"}>{items[0].label}</h1>;\n\t}\n\n\tconst subItems = items.slice(0, items.length - 1);\n\tconst finalItem = items[items.length - 1];\n\n\treturn (\n\t\t<div className={`flex flex-col ${className ?? \"\"}`}>\n\t\t\t<div className=\"flex flex-row items-center mb-1\">\n\t\t\t\t{subItems.map(({ label, href }, index) => (\n\t\t\t\t\t<div className=\"flex\" key={index}>\n\t\t\t\t\t\t{href ? (\n\t\t\t\t\t\t\t<Link to={href}>{label}</Link>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{label}</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<i className=\"material-icons text-gray-500 text-base ml-1\">\n\t\t\t\t\t\t\tkeyboard_arrow_right\n\t\t\t\t\t\t</i>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\n\t\t\t<h1>{finalItem.label}</h1>\n\t\t</div>\n\t);\n};\n\nexport default Breadcrumb;\n", "import { useEffect } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nconst ViewAudioItems = () => {\n\tconst navigate = useNavigate();\n\n\tuseEffect(() => {\n\t\tnavigate(\"/\");\n\t}, [navigate]);\n\n\treturn null;\n};\n\nexport default ViewAudioItems;\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\nimport type { Prisma, Collection } from \"@prisma/client\";\n\nimport { type AudioItemWithRelations, SortBy } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport { getSession } from \"~/sessions.server\";\nimport Layout from \"~/components/Layout\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\ninterface LoaderData {\n\tcollection: Collection;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n}\n\nexport async function loader({\n\tparams,\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst { slug } = params;\n\tconst collection = await db.collection.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t});\n\tif (!collection) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this Collection\",\n\t\t});\n\t}\n\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst sortBy = searchParams.get(\"sortBy\") ?? SortBy.DateAddedOldToNew;\n\tconst audioItemsOrderBy: Prisma.Enumerable<Prisma.AudioItemOrderByWithRelationInput> =\n\t\tsortBy === SortBy.DateAddedOldToNew\n\t\t\t? { createdAt: \"asc\" }\n\t\t\t: { createdAt: \"desc\" };\n\n\tconst [audioItems, totalAudioItems] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t\torderBy: {\n\t\t\t\t\t\tcreatedAt: \"asc\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: {\n\t\t\t\t\twhere: {\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectCollectionId: collection.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\torderBy: audioItemsOrderBy,\n\t\t}),\n\t\tdb.audioItem.count({\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectCollectionId: collection.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t]);\n\treturn {\n\t\tcollection,\n\t\taudioItems,\n\t\ttotalAudioItems,\n\t};\n}\n\nconst ViewCollectionBySlug = () => {\n\tconst { collection, audioItems, totalAudioItems } =\n\t\tuseLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<ViewEntityAndAudioItems\n\t\t\t\tentity={collection}\n\t\t\t\taudioItems={audioItems}\n\t\t\t\ttotalAudioItems={totalAudioItems}\n\t\t\t/>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewCollectionBySlug;\n", "import { useLocation } from \"@remix-run/react\";\n\nimport type { AudioItemWithRelations, Entity } from \"~/types\";\nimport { SortBy } from \"~/types\";\nimport { ViewAs } from \"~/types\";\nimport useFilters from \"~/hooks/useFilters\";\nimport EntityService from \"~/services/Entity\";\n\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport AudioItem from \"~/components/AudioItem\";\nimport type { Tune } from \"@prisma/client\";\nimport { EntityType } from \"@prisma/client\";\n\ninterface Props {\n\tentity: Entity;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n\tclassName?: string;\n}\nconst ViewEntityAndAudioItems = ({\n\tentity,\n\taudioItems,\n\ttotalAudioItems,\n\tclassName,\n}: Props) => {\n\tconst { name } = entity ?? {};\n\n\tconst { search } = useLocation();\n\tconst queryParams = new URLSearchParams(search);\n\tconst viewAs = queryParams.get(\"viewAs\") as ViewAs;\n\n\tconst { Filters, filtersProps } = useFilters({\n\t\ttotalItems: totalAudioItems,\n\t});\n\n\treturn (\n\t\t<div className={`flex flex-1 flex-col ${className ?? \"\"}`}>\n\t\t\t<Breadcrumb\n\t\t\t\titems={[\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: EntityService.makeReadableNamePlural(entity),\n\t\t\t\t\t\thref: EntityService.makeHrefForTopLevel(entity),\n\t\t\t\t\t},\n\t\t\t\t\t{ label: name },\n\t\t\t\t]}\n\t\t\t\tclassName=\"mb-2\"\n\t\t\t/>\n\n\t\t\t<div className=\"text-gray-500 text-sm flex-col space-y-2\">\n\t\t\t\t{entity.description && <p>{entity.description}</p>}\n\t\t\t\t{entity.aliases && <p>Also known as: {entity.aliases}</p>}\n\t\t\t\t{entity.entityType === EntityType.Tune && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<p>Type: {(entity as Tune).type}</p>\n\t\t\t\t\t\t<p>Meter: {(entity as Tune).meter}</p>\n\t\t\t\t\t\t<p>Mode: {(entity as Tune).mode}</p>\n\t\t\t\t\t\t<p>ABC: {(entity as Tune).abc}</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={`https://thesession.org/tunes/${\n\t\t\t\t\t\t\t\t\t(entity as Tune).theSessionTuneId\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView or Edit This Tune on The Session \u2197\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{totalAudioItems > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"sticky py-3 px-2 mt-4 -ml-2 -mr-2 mb-2 bg-gray-100 top-[48px]\">\n\t\t\t\t\t\t<Filters\n\t\t\t\t\t\t\t{...filtersProps}\n\t\t\t\t\t\t\tsortByOptions={[SortBy.DateAddedOldToNew]}\n\t\t\t\t\t\t\tsortBy={SortBy.DateAddedOldToNew}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{audioItems.map((audioItem, index) => (\n\t\t\t\t\t\t<AudioItem\n\t\t\t\t\t\t\tviewAs={viewAs ?? ViewAs.Cards}\n\t\t\t\t\t\t\taudioItem={audioItem}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName={viewAs === ViewAs.List ? \"mb-4\" : \"mb-6\"}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default ViewEntityAndAudioItems;\n", "import type React from \"react\";\nimport { useCallback, useMemo } from \"react\";\nimport { useLocation, useNavigate } from \"@remix-run/react\";\n\nimport type { PerPage } from \"~/types\";\nimport { SortBy, ViewAs } from \"~/types\";\n\nimport type { Props as FiltersProps } from \"~/components/Filters\";\nimport Filters from \"~/components/Filters\";\n\ninterface Args {\n\ttotalItems?: number;\n\tdefaultPage?: number; // Starts at 1\n\tdefaultPerPage?: PerPage;\n\tdefaultSortBy?: SortBy;\n\tdefaultViewAs?: ViewAs;\n\tenableQueryParams?: boolean;\n}\ninterface ReturnValue {\n\tFilters: (props: FiltersProps) => React.ReactElement;\n\tfiltersProps: FiltersProps;\n\tpage?: number;\n\tperPage?: PerPage;\n\tsortBy?: SortBy;\n\tviewAs?: ViewAs;\n}\n\n// useFilters takes default values for sortBy and viewAs and returns the Filters\n// component along with props to pass to it, plus the current sortBy and\n// viewAs values.\nconst useFilters = ({\n\ttotalItems,\n\tdefaultPage = 1,\n\tdefaultPerPage = 20,\n\tdefaultSortBy = SortBy.DateAddedOldToNew,\n\tdefaultViewAs = ViewAs.Cards,\n}: Args = {}): ReturnValue => {\n\tconst navigate = useNavigate();\n\tconst { pathname, search } = useLocation();\n\tconst queryParams = new URLSearchParams(search);\n\n\t// Pull filter values from query params. If not set, use defaults.\n\tconst page = parseInt(queryParams.get(\"page\") ?? \"1\", 10) || defaultPage;\n\tconst perPage =\n\t\tparseInt(queryParams.get(\"perPage\") ?? \"20\", 10) || defaultPerPage;\n\tconst sortBy = (queryParams.get(\"sortBy\") as SortBy) ?? defaultSortBy;\n\tconst viewAs = (queryParams.get(\"viewAs\") as ViewAs) ?? defaultViewAs;\n\n\tconst updateQueryParams = useCallback(\n\t\t(paramsToUpdate: Record<string, string | null> = {}) => {\n\t\t\tconst queryParams = new URLSearchParams(search);\n\n\t\t\tconst paramNames = Object.keys(paramsToUpdate);\n\t\t\tparamNames.forEach((paramName) => {\n\t\t\t\tconst value = paramsToUpdate[paramName];\n\t\t\t\tif (value) {\n\t\t\t\t\tqueryParams.set(paramName, value);\n\t\t\t\t} else {\n\t\t\t\t\tqueryParams.delete(paramName);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn navigate(`${pathname}?${queryParams.toString()}`);\n\t\t},\n\t\t[navigate, pathname, search]\n\t);\n\n\tconst onChangePage = useCallback(\n\t\t(event: React.ChangeEvent<HTMLSelectElement>) =>\n\t\t\tupdateQueryParams({ page: event.target.value }),\n\t\t[updateQueryParams]\n\t);\n\tconst onChangePerPage = useCallback(\n\t\t(event: React.ChangeEvent<HTMLSelectElement>) =>\n\t\t\tupdateQueryParams({ perPage: event.target.value, page: \"1\" }),\n\t\t[updateQueryParams]\n\t);\n\tconst onChangeSortBy = useCallback(\n\t\t(event: React.ChangeEvent<HTMLSelectElement>) =>\n\t\t\tupdateQueryParams({ sortBy: event.target.value as SortBy }),\n\t\t[updateQueryParams]\n\t);\n\tconst onChangeViewAs = useCallback(\n\t\t(event: React.ChangeEvent<HTMLSelectElement>) =>\n\t\t\tupdateQueryParams({ viewAs: event.target.value as ViewAs }),\n\t\t[updateQueryParams]\n\t);\n\n\tconst returnValue = useMemo(\n\t\t() => ({\n\t\t\tFilters,\n\t\t\tfiltersProps: {\n\t\t\t\ttotalItems,\n\t\t\t\tpage,\n\t\t\t\tonChangePage,\n\t\t\t\tperPage,\n\t\t\t\tonChangePerPage,\n\t\t\t\tsortBy,\n\t\t\t\tonChangeSortBy,\n\t\t\t\tviewAs,\n\t\t\t\tonChangeViewAs,\n\t\t\t},\n\t\t\tpage,\n\t\t\tperPage,\n\t\t\tsortBy,\n\t\t\tviewAs,\n\t\t}),\n\t\t[\n\t\t\ttotalItems,\n\t\t\tpage,\n\t\t\tonChangePage,\n\t\t\tperPage,\n\t\t\tonChangePerPage,\n\t\t\tsortBy,\n\t\t\tonChangeSortBy,\n\t\t\tviewAs,\n\t\t\tonChangeViewAs,\n\t\t]\n\t);\n\n\treturn returnValue;\n};\n\nexport default useFilters;\n", "import React, { useMemo } from \"react\";\nimport { PerPage, SortBy, ViewAs } from \"~/types\";\n\nexport interface Props {\n\ttotalItems?: number;\n\tpage?: number;\n\tonChangePage?: (event: React.ChangeEvent<HTMLSelectElement>) => void;\n\tperPage?: PerPage;\n\tonChangePerPage?: (event: React.ChangeEvent<HTMLSelectElement>) => void;\n\tsortByOptions?: SortBy[];\n\tsortBy?: SortBy;\n\tonChangeSortBy?: (event: React.ChangeEvent<HTMLSelectElement>) => void;\n\tviewAs?: ViewAs;\n\tonChangeViewAs?: (event: React.ChangeEvent<HTMLSelectElement>) => void;\n\tclassName?: string;\n}\n\nconst Filters = ({\n\ttotalItems,\n\tpage,\n\tonChangePage,\n\tperPage,\n\tonChangePerPage,\n\tsortByOptions = [],\n\tsortBy,\n\tonChangeSortBy,\n\tviewAs,\n\tonChangeViewAs,\n\tclassName,\n}: Props) => {\n\tconst shouldRenderPagination =\n\t\ttypeof totalItems === \"number\" &&\n\t\ttypeof page === \"number\" &&\n\t\tonChangePage &&\n\t\tperPage &&\n\t\tonChangePerPage;\n\tconst shouldRenderSortBy =\n\t\tsortByOptions.length > 0 && sortBy && onChangeSortBy;\n\tconst shouldRenderViewAs = viewAs && onChangeViewAs;\n\n\tconst totalPages = useMemo<number>(() => {\n\t\tif (\n\t\t\ttypeof totalItems !== \"number\" ||\n\t\t\ttypeof perPage === \"undefined\" ||\n\t\t\ttotalItems === 0\n\t\t) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn Math.ceil(totalItems / perPage);\n\t}, [totalItems, perPage]);\n\n\tconst pageSelectOptions = useMemo(() => {\n\t\tconst output: React.ReactNode[] = [];\n\t\tlet i = 1;\n\t\twhile (i <= totalPages) {\n\t\t\toutput.push(\n\t\t\t\t<option value={i} key={i}>\n\t\t\t\t\t{i}\n\t\t\t\t</option>\n\t\t\t);\n\t\t\ti++;\n\t\t}\n\t\treturn output;\n\t}, [totalPages]);\n\n\tconst perPageOptions = useMemo(() => {\n\t\tconst output: React.ReactNode[] = [];\n\t\tfor (const value in PerPage) {\n\t\t\tif (isNaN(Number(value))) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\toutput.push(\n\t\t\t\t<option value={value} key={value}>\n\t\t\t\t\t{value}\n\t\t\t\t</option>\n\t\t\t);\n\t\t}\n\t\treturn output;\n\t}, []);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-col md:flex-row flex-wrap justify-start items-start md:items-center text-gray-500 space-y-4 space-x-0 md:space-y-0 md:space-x-5 ${\n\t\t\t\tclassName ?? \"\"\n\t\t\t}`}\n\t\t>\n\t\t\t{shouldRenderPagination && (\n\t\t\t\t<div className=\"flex flex-row items-center space-x-5\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{totalItems.toLocaleString()} Item{totalItems === 1 ? \"\" : \"s\"}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\tPage{\" \"}\n\t\t\t\t\t\t<select value={page} onChange={onChangePage}>\n\t\t\t\t\t\t\t{pageSelectOptions}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t{totalPages ? ` of ${totalPages}` : \"\"}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<select value={perPage} onChange={onChangePerPage}>\n\t\t\t\t\t\t\t{perPageOptions}\n\t\t\t\t\t\t</select>{\" \"}\n\t\t\t\t\t\tper page\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{shouldRenderSortBy && (\n\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\tSort by\n\t\t\t\t\t<select className=\"ml-1\" value={sortBy} onChange={onChangeSortBy}>\n\t\t\t\t\t\t{sortByOptions.includes(SortBy.RecentlyTagged) && (\n\t\t\t\t\t\t\t<option value={SortBy.RecentlyTagged}>Recently Tagged</option>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{sortByOptions.includes(SortBy.DateAddedOldToNew) && (\n\t\t\t\t\t\t\t<option value={SortBy.DateAddedOldToNew}>\n\t\t\t\t\t\t\t\tDate Added (Old to New)\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{sortByOptions.includes(SortBy.DateSavedOldToNew) && (\n\t\t\t\t\t\t\t<option value={SortBy.DateSavedOldToNew}>\n\t\t\t\t\t\t\t\tDate Saved (Old to New)\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{shouldRenderViewAs && (\n\t\t\t\t<div className=\"hidden md:flex flex-row items-center\">\n\t\t\t\t\tView as\n\t\t\t\t\t<select className=\"ml-1\" value={viewAs} onChange={onChangeViewAs}>\n\t\t\t\t\t\t<option value={ViewAs.Cards}>Cards</option>\n\t\t\t\t\t\t<option value={ViewAs.Compact}>Compact</option>\n\t\t\t\t\t\t<option value={ViewAs.List}>List</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default Filters;\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport { type Collection } from \"@prisma/client\";\n\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport { db } from \"~/utils/db.server\";\n\nexport function meta() {\n\treturn [\n\t\t{\n\t\t\ttitle: \"Trad Archive - Collections\",\n\t\t},\n\t];\n}\n\nexport function loader(): Promise<Collection[]> {\n\treturn db.collection.findMany({\n\t\torderBy: {\n\t\t\tname: \"asc\",\n\t\t},\n\t});\n}\n\nconst Collections = () => {\n\tconst collections = useLoaderData<Collection[]>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">Collections</h1>\n\t\t\t{collections.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No Collections found</div>\n\t\t\t)}\n\t\t\t{collections.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{collections.map((collection, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(collection)}>\n\t\t\t\t\t\t\t\t{collection.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default Collections;\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\nimport type { Prisma, Instrument } from \"@prisma/client\";\n\nimport { type AudioItemWithRelations, SortBy } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport { getSession } from \"~/sessions.server\";\n\nimport Layout from \"~/components/Layout\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\ninterface LoaderData {\n\tinstrument: Instrument;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n}\n\nexport async function loader({\n\tparams,\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst { slug } = params;\n\tconst instrument = await db.instrument.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t});\n\tif (!instrument) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this Instrument\",\n\t\t});\n\t}\n\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst sortBy = searchParams.get(\"sortBy\") ?? SortBy.DateAddedOldToNew;\n\tconst audioItemsOrderBy: Prisma.Enumerable<Prisma.AudioItemOrderByWithRelationInput> =\n\t\tsortBy === SortBy.DateAddedOldToNew\n\t\t\t? { createdAt: \"asc\" }\n\t\t\t: { createdAt: \"desc\" };\n\n\tconst [audioItems, totalAudioItems] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t\torderBy: {\n\t\t\t\t\t\tcreatedAt: \"asc\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: {\n\t\t\t\t\twhere: {\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectInstrumentId: instrument.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\torderBy: audioItemsOrderBy,\n\t\t}),\n\t\tdb.audioItem.count({\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectInstrumentId: instrument.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t]);\n\treturn {\n\t\tinstrument,\n\t\taudioItems,\n\t\ttotalAudioItems,\n\t};\n}\n\nconst ViewInstrumentBySlug = () => {\n\tconst { instrument, audioItems, totalAudioItems } =\n\t\tuseLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<ViewEntityAndAudioItems\n\t\t\t\tentity={instrument}\n\t\t\t\taudioItems={audioItems}\n\t\t\t\ttotalAudioItems={totalAudioItems}\n\t\t\t/>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewInstrumentBySlug;\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport { type ActionFunction, json, redirect } from \"@remix-run/node\";\nimport { type Instrument } from \"@prisma/client\";\n\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport { db } from \"~/utils/db.server\";\nimport { getSession } from \"~/sessions.server\";\n\nexport function meta() {\n\treturn [\n\t\t{\n\t\t\ttitle: \"Trad Archive - Instruments\",\n\t\t},\n\t];\n}\n\nexport function loader(): Promise<Instrument[]> {\n\treturn db.instrument.findMany({\n\t\torderBy: {\n\t\t\tname: \"asc\",\n\t\t},\n\t});\n}\n\ninterface ActionData {\n\terror?: string;\n\tinstrument?: Instrument;\n}\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\tconst referer = String(request.headers.get(\"referer\") ?? \"\");\n\n\tconst redirectTo = encodeURIComponent(\n\t\treferer ? new URL(referer).pathname : \"/\"\n\t);\n\tif (!userId) {\n\t\treturn redirect(`/login?redirectTo=${redirectTo}`);\n\t}\n\n\tconst formData = await request.formData();\n\tconst name = String(formData.get(\"name\") ?? \"\");\n\tconst slug = String(formData.get(\"slug\") ?? \"\");\n\tconst description = String(formData.get(\"description\") ?? \"\");\n\tconst aliases = String(formData.get(\"aliases\") ?? \"\");\n\n\tconst cleanedSlug = EntityService.cleanSlug(slug);\n\n\tlet error;\n\tif (!name || !slug) {\n\t\terror = \"Must enter a name and slug\";\n\t}\n\tif (error) {\n\t\treturn json<ActionData>({ error }, { status: 400 });\n\t}\n\n\tconst existing = await db.instrument.findFirst({\n\t\twhere: { slug: cleanedSlug },\n\t});\n\tif (existing) {\n\t\treturn json<ActionData>(\n\t\t\t{\n\t\t\t\terror: `This slug is already being used for an existing Instrument: ${existing.name}`,\n\t\t\t},\n\t\t\t{ status: 400 }\n\t\t);\n\t}\n\n\ttry {\n\t\tconst instrument = await db.instrument.create({\n\t\t\tdata: {\n\t\t\t\tname,\n\t\t\t\tslug: cleanedSlug,\n\t\t\t\tdescription,\n\t\t\t\taliases,\n\t\t\t\tcreatedByUserId: userId,\n\t\t\t\tupdatedByUserId: userId,\n\t\t\t},\n\t\t});\n\t\treturn json<ActionData>({ instrument }, { status: 201 });\n\t} catch {\n\t\treturn json<ActionData>(\n\t\t\t{ error: \"Error creating Instrument\" },\n\t\t\t{ status: 500 }\n\t\t);\n\t}\n};\n\nconst Instruments = () => {\n\tconst instruments = useLoaderData<Instrument[]>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">Instruments</h1>\n\t\t\t{instruments.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No Instruments found</div>\n\t\t\t)}\n\t\t\t{instruments.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{instruments.map((instrument, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(instrument)}>\n\t\t\t\t\t\t\t\t{instrument.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default Instruments;\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\nimport type { Prisma, Person } from \"@prisma/client\";\n\nimport { type AudioItemWithRelations, SortBy } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport { getSession } from \"~/sessions.server\";\nimport Layout from \"~/components/Layout\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\ninterface LoaderData {\n\tperson: Person;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n}\n\nexport async function loader({\n\tparams,\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst { slug } = params;\n\tconst person = await db.person.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t});\n\tif (!person) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this Person\",\n\t\t});\n\t}\n\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst sortBy = searchParams.get(\"sortBy\") ?? SortBy.DateAddedOldToNew;\n\tconst audioItemsOrderBy: Prisma.Enumerable<Prisma.AudioItemOrderByWithRelationInput> =\n\t\tsortBy === SortBy.DateAddedOldToNew\n\t\t\t? { createdAt: \"asc\" }\n\t\t\t: { createdAt: \"desc\" };\n\n\tconst [audioItems, totalAudioItems] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t\torderBy: {\n\t\t\t\t\t\tcreatedAt: \"asc\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: {\n\t\t\t\t\twhere: {\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectPersonId: person.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\torderBy: audioItemsOrderBy,\n\t\t}),\n\t\tdb.audioItem.count({\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectPersonId: person.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t]);\n\treturn {\n\t\tperson,\n\t\taudioItems,\n\t\ttotalAudioItems,\n\t};\n}\n\nconst ViewPersonBySlug = () => {\n\tconst { person, audioItems, totalAudioItems } = useLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<ViewEntityAndAudioItems\n\t\t\t\tentity={person}\n\t\t\t\taudioItems={audioItems}\n\t\t\t\ttotalAudioItems={totalAudioItems}\n\t\t\t/>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewPersonBySlug;\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport { type ActionFunction, json, redirect } from \"@remix-run/node\";\nimport { type Person } from \"@prisma/client\";\n\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport { db } from \"~/utils/db.server\";\nimport { getSession } from \"~/sessions.server\";\n\nexport function meta() {\n\treturn [\n\t\t{\n\t\t\ttitle: \"Trad Archive - People\",\n\t\t},\n\t];\n}\n\nexport function loader(): Promise<Person[]> {\n\treturn db.person.findMany({\n\t\torderBy: {\n\t\t\tname: \"asc\",\n\t\t},\n\t});\n}\n\ninterface ActionData {\n\terror?: string;\n\tperson?: Person;\n}\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\tconst referer = String(request.headers.get(\"referer\") ?? \"\");\n\n\tconst redirectTo = encodeURIComponent(\n\t\treferer ? new URL(referer).pathname : \"/\"\n\t);\n\tif (!userId) {\n\t\treturn redirect(`/login?redirectTo=${redirectTo}`);\n\t}\n\n\tconst formData = await request.formData();\n\tconst firstName = String(formData.get(\"first_name\") ?? \"\");\n\tconst middleName = String(formData.get(\"middle_name\") ?? \"\");\n\tconst lastName = String(formData.get(\"last_name\") ?? \"\");\n\tconst slug = String(formData.get(\"slug\") ?? \"\");\n\tconst description = String(formData.get(\"description\") ?? \"\");\n\tconst aliases = String(formData.get(\"aliases\") ?? \"\");\n\n\tconst name = middleName\n\t\t? `${firstName} ${middleName} ${lastName}`\n\t\t: `${firstName} ${lastName}`;\n\tconst cleanedSlug = EntityService.cleanSlug(slug);\n\n\tlet error;\n\tif (!firstName || !lastName || !slug) {\n\t\terror = \"Must enter first name, last name, and slug\";\n\t}\n\tif (error) {\n\t\treturn json<ActionData>({ error }, { status: 400 });\n\t}\n\n\tconst existing = await db.person.findFirst({ where: { slug: cleanedSlug } });\n\tif (existing) {\n\t\treturn json<ActionData>(\n\t\t\t{\n\t\t\t\terror: `This slug is already being used for an existing Person: ${existing.name}`,\n\t\t\t},\n\t\t\t{ status: 400 }\n\t\t);\n\t}\n\n\ttry {\n\t\tconst person = await db.person.create({\n\t\t\tdata: {\n\t\t\t\tfirstName,\n\t\t\t\tmiddleName,\n\t\t\t\tlastName,\n\t\t\t\tname,\n\t\t\t\tslug: cleanedSlug,\n\t\t\t\tdescription,\n\t\t\t\taliases,\n\t\t\t\tcreatedByUserId: userId,\n\t\t\t\tupdatedByUserId: userId,\n\t\t\t},\n\t\t});\n\t\treturn json<ActionData>({ person }, { status: 201 });\n\t} catch {\n\t\treturn json<ActionData>(\n\t\t\t{ error: \"Error creating Person\" },\n\t\t\t{ status: 500 }\n\t\t);\n\t}\n};\n\nconst People = () => {\n\tconst people = useLoaderData<Person[]>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">People</h1>\n\t\t\t{people.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No People found</div>\n\t\t\t)}\n\t\t\t{people.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{people.map((person, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(person)}>\n\t\t\t\t\t\t\t\t{person.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default People;\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\nimport type { Prisma, Place } from \"@prisma/client\";\n\nimport { type AudioItemWithRelations, SortBy } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport { getSession } from \"~/sessions.server\";\nimport Layout from \"~/components/Layout\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\ninterface LoaderData {\n\tplace: Place;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n}\n\nexport async function loader({\n\tparams,\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst { slug } = params;\n\tconst place = await db.place.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t});\n\tif (!place) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this Place\",\n\t\t});\n\t}\n\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst sortBy = searchParams.get(\"sortBy\") ?? SortBy.DateAddedOldToNew;\n\tconst audioItemsOrderBy: Prisma.Enumerable<Prisma.AudioItemOrderByWithRelationInput> =\n\t\tsortBy === SortBy.DateAddedOldToNew\n\t\t\t? { createdAt: \"asc\" }\n\t\t\t: { createdAt: \"desc\" };\n\n\tconst [audioItems, totalAudioItems] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t\torderBy: {\n\t\t\t\t\t\tcreatedAt: \"asc\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: {\n\t\t\t\t\twhere: {\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectPlaceId: place.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\torderBy: audioItemsOrderBy,\n\t\t}),\n\t\tdb.audioItem.count({\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectPlaceId: place.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t]);\n\treturn {\n\t\tplace,\n\t\taudioItems,\n\t\ttotalAudioItems,\n\t};\n}\n\nconst ViewPlaceBySlug = () => {\n\tconst { place, audioItems, totalAudioItems } = useLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<ViewEntityAndAudioItems\n\t\t\t\tentity={place}\n\t\t\t\taudioItems={audioItems}\n\t\t\t\ttotalAudioItems={totalAudioItems}\n\t\t\t/>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewPlaceBySlug;\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport { type Place } from \"@prisma/client\";\n\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport { db } from \"~/utils/db.server\";\n\nexport function meta() {\n\treturn [\n\t\t{\n\t\t\ttitle: \"Trad Archive - Places\",\n\t\t},\n\t];\n}\n\nexport function loader(): Promise<Place[]> {\n\treturn db.place.findMany({\n\t\torderBy: {\n\t\t\tname: \"asc\",\n\t\t},\n\t});\n}\n\nconst Places = () => {\n\tconst places = useLoaderData<Place[]>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">Places</h1>\n\t\t\t{places.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No Places found</div>\n\t\t\t)}\n\t\t\t{places.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{places.map((place, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(place)}>\n\t\t\t\t\t\t\t\t{place.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default Places;\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\nimport type { Prisma, Tune } from \"@prisma/client\";\n\nimport { type AudioItemWithRelations, SortBy } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport { getSession } from \"~/sessions.server\";\nimport Layout from \"~/components/Layout\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\ninterface LoaderData {\n\ttune: Tune;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n}\n\nexport async function loader({\n\tparams,\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst { slug } = params;\n\tconst tune = await db.tune.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t});\n\tif (!tune) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this Tune\",\n\t\t});\n\t}\n\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst sortBy = searchParams.get(\"sortBy\") ?? SortBy.DateAddedOldToNew;\n\tconst audioItemsOrderBy: Prisma.Enumerable<Prisma.AudioItemOrderByWithRelationInput> =\n\t\tsortBy === SortBy.DateAddedOldToNew\n\t\t\t? { createdAt: \"asc\" }\n\t\t\t: { createdAt: \"desc\" };\n\n\tconst [audioItems, totalAudioItems] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t\torderBy: {\n\t\t\t\t\t\tcreatedAt: \"asc\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: {\n\t\t\t\t\twhere: {\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectTuneId: tune.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\torderBy: audioItemsOrderBy,\n\t\t}),\n\t\tdb.audioItem.count({\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectTuneId: tune.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t]);\n\treturn {\n\t\ttune,\n\t\taudioItems,\n\t\ttotalAudioItems,\n\t};\n}\n\nconst ViewTuneBySlug = () => {\n\tconst { tune, audioItems, totalAudioItems } = useLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<ViewEntityAndAudioItems\n\t\t\t\tentity={tune}\n\t\t\t\taudioItems={audioItems}\n\t\t\t\ttotalAudioItems={totalAudioItems}\n\t\t\t/>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewTuneBySlug;\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport { type DataFunctionArgs } from \"@remix-run/node\";\nimport { type Tune } from \"@prisma/client\";\n\nimport EntityService from \"~/services/Entity\";\nimport useFilters from \"~/hooks/useFilters\";\n\nimport Layout from \"~/components/Layout\";\nimport { db } from \"~/utils/db.server\";\n\nexport function meta() {\n\treturn [\n\t\t{\n\t\t\ttitle: \"Trad Archive - Tunes\",\n\t\t},\n\t];\n}\n\nconst PER_PAGE = 100;\n\ninterface LoaderData {\n\ttunes: Tune[];\n\ttotalTunes: number;\n}\n\nexport async function loader({\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst url = new URL(request.url);\n\tconst params = new URLSearchParams(url.search);\n\tconst page = Number(params.get(\"page\") ?? 1);\n\tconst perPage = Number(params.get(\"perPage\") ?? PER_PAGE);\n\n\tconst [tunes, totalTunes] = await Promise.all([\n\t\tdb.tune.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\torderBy: {\n\t\t\t\tname: \"asc\",\n\t\t\t},\n\t\t}),\n\t\tdb.tune.count(),\n\t]);\n\n\treturn {\n\t\ttunes,\n\t\ttotalTunes,\n\t};\n}\n\nconst Tunes = () => {\n\tconst { tunes, totalTunes } = useLoaderData<LoaderData>();\n\n\tconst { Filters, filtersProps } = useFilters({\n\t\ttotalItems: totalTunes,\n\t\tdefaultPerPage: PER_PAGE,\n\t});\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1>Tunes</h1>\n\n\t\t\t<div className=\"text-gray-500 text-sm mt-2\">\n\t\t\t\tAll tunes are sourced from{\" \"}\n\t\t\t\t<a href=\"https://thesession.org\" target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\tThe Session \u2197\n\t\t\t\t</a>\n\t\t\t</div>\n\n\t\t\t<Filters\n\t\t\t\t{...filtersProps}\n\t\t\t\tsortBy={undefined}\n\t\t\t\tviewAs={undefined}\n\t\t\t\tclassName=\"sticky left-0 right-0 py-3 bg-gray-100 top-[48px] mt-4 mb-6\"\n\t\t\t/>\n\n\t\t\t{tunes.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No Tunes found</div>\n\t\t\t)}\n\t\t\t{tunes.length > 0 && (\n\t\t\t\t<ul className=\"space-y-2\">\n\t\t\t\t\t{tunes.map((tune, index) => (\n\t\t\t\t\t\t<li key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(tune)}>{tune.name}</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default Tunes;\n", "import {\n\ttype ActionFunction,\n\ttype LoaderFunction,\n\tjson,\n\tredirect,\n} from \"@remix-run/node\";\nimport {\n\tLink,\n\tuseLoaderData,\n\tuseTransition,\n\tuseSearchParams,\n} from \"@remix-run/react\";\nimport bcrypt from \"bcryptjs\";\nimport isAfter from \"date-fns/isAfter\";\n\nimport { db } from \"~/utils/db.server\";\nimport { getSession, commitSession } from \"~/sessions.server\";\nimport Layout from \"~/components/Layout\";\n\ninterface LoaderData {\n\tvalidationError: string | null;\n\terror: string | null;\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst validationError = session.get(\"validationError\") || null;\n\tlet error: string | null = null;\n\n\tconst url = new URL(request.url);\n\tconst params = url.searchParams;\n\tconst userEmail = params.get(\"userEmail\") ?? \"\";\n\tconst tokenUnhashed = params.get(\"tokenUnhashed\") ?? \"\";\n\n\tconst user = await db.user.findUnique({ where: { email: userEmail } });\n\tif (!user || !user.autoLoginTokenHashed || !user.autoLoginTokenExpiry) {\n\t\treturn redirect(\"/reset-password\");\n\t}\n\n\t// Check token. If valid, set user on session and redirect to homepage.\n\tconst tokenIsMatch = await bcrypt.compare(\n\t\ttokenUnhashed,\n\t\tuser.autoLoginTokenHashed\n\t);\n\tconst expiryIsValid = isAfter(\n\t\tnew Date(user.autoLoginTokenExpiry),\n\t\tnew Date()\n\t);\n\tif (!tokenIsMatch || !expiryIsValid) {\n\t\terror =\n\t\t\t\"Reset password link is invalid or expired. Please request another one.\";\n\t}\n\n\treturn json(\n\t\t{ validationError, error },\n\t\t{\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t}\n\t);\n};\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst { searchParams } = new URL(request.url);\n\n\tconst formData = await request.formData();\n\tconst email = String(formData.get(\"email\") ?? \"\");\n\tconst password = String(formData.get(\"password\") ?? \"\");\n\tconst passwordConfirm = String(formData.get(\"password_confirm\") ?? \"\");\n\tif (password !== passwordConfirm) {\n\t\tsession.flash(\"validationError\", \"Passwords don't match\");\n\t\treturn redirect(`/choose-new-password?${searchParams.toString()}`, {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\tconst user = await db.user.findUnique({ where: { email } });\n\tif (!user) {\n\t\treturn redirect(\"/reset-password\");\n\t}\n\n\t// Update the user in DB, set in session cookie, and redirect to homepage\n\tconst newPasswordHashed = bcrypt.hashSync(password, 10);\n\tawait db.user.update({\n\t\twhere: { email },\n\t\tdata: {\n\t\t\tpasswordHashed: newPasswordHashed,\n\t\t\tautoLoginTokenHashed: null,\n\t\t\tautoLoginTokenExpiry: null,\n\t\t},\n\t});\n\tsession.set(\"userId\", user.id);\n\treturn redirect(\"/\", {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport default function ChooseNewPassword() {\n\tconst transition = useTransition();\n\tconst { error, validationError } = useLoaderData<LoaderData>();\n\tconst [searchParams] = useSearchParams();\n\tconst email = searchParams.get(\"userEmail\") ?? \"\";\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">Choose a new password</h1>\n\n\t\t\t{error ? (\n\t\t\t\t<div>\n\t\t\t\t\t<p className=\"text-red-600 mb-6\">{error}</p>\n\t\t\t\t\t<Link to=\"/reset-password\">Reset Password</Link>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<div className=\"flex flex-col align-start max-w-xs\">\n\t\t\t\t\t<form method=\"POST\" className=\"space-y-4 mb-6\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tplaceholder=\"New password\"\n\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tplaceholder=\"New password (again)\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tname=\"password_confirm\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input type=\"hidden\" name=\"email\" value={email} />\n\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tclassName=\"btn w-auto\"\n\t\t\t\t\t\t\tdisabled={transition.state === \"submitting\"}\n\t\t\t\t\t\t\tvalue=\"Save\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</form>\n\n\t\t\t\t\t{validationError && (\n\t\t\t\t\t\t<div className=\"text-red-600\">{validationError}</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Layout>\n\t);\n}\n", "import {\n\ttype ActionFunction,\n\ttype LoaderFunction,\n\tjson,\n\tredirect,\n} from \"@remix-run/node\";\nimport { Link, useLoaderData, useTransition } from \"@remix-run/react\";\nimport sendgrid from \"@sendgrid/mail\";\nimport bcrypt from \"bcryptjs\";\nimport { v4 as uuid } from \"uuid\";\nimport addMinutes from \"date-fns/addMinutes\";\n\nimport { db } from \"~/utils/db.server\";\nimport { getSession, commitSession } from \"~/sessions.server\";\nimport Layout from \"~/components/Layout\";\n\ninterface LoaderData {\n\terror: string | null;\n\tconfirmation: string | null;\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst error = session.get(\"error\") || null;\n\tconst confirmation = session.get(\"confirmation\") || null;\n\treturn json(\n\t\t{ error, confirmation },\n\t\t{\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t}\n\t);\n};\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst formData = await request.formData();\n\tconst email = String(formData.get(\"email\") ?? \"\");\n\n\tconst user = await db.user.findUnique({ where: { email } });\n\tif (!user) {\n\t\tsession.flash(\"error\", \"Could not find a user with that email\");\n\t\treturn redirect(\"/reset-password\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\t// create an auto-login token for the user and save hashed version in DB\n\tconst autoLoginTokenUnhashed = uuid();\n\tconst autoLoginTokenHashed = await bcrypt.hash(autoLoginTokenUnhashed, 10);\n\tconst autoLoginTokenExpiry = addMinutes(new Date(), 10);\n\tawait db.user.update({\n\t\twhere: { id: user.id },\n\t\tdata: { autoLoginTokenHashed, autoLoginTokenExpiry },\n\t});\n\n\t// email a link with unhashed auto-login token to the user\n\tsendgrid.setApiKey(process.env.SENDGRID_API_KEY ?? \"\");\n\n\tconst params = new URLSearchParams({\n\t\ttokenUnhashed: autoLoginTokenUnhashed,\n\t\tuserEmail: email,\n\t});\n\tconst origin = new URL(request.url).origin;\n\tconst url = `${origin}/choose-new-password?${params.toString()}`;\n\n\tconst data = {\n\t\tto: user.email,\n\t\tfrom: \"no-reply@tradarchive.com\",\n\t\tsubject: \"Reset your password for Trad Archive\",\n\t\ttext: `Hi ${user.username}, click this link to reset your password for Trad Archive: ${url} . This link will be valid for the next 10 minutes. If you didn't request this, you can ignore this email.`,\n\t\thtml: `\n\t\t\tHi ${user.username},\n\t\t\t<br /><br />\n\t\t\t<a href=\"${url}\">Click here to reset your password for Trad Archive</a>\n\t\t\t<br /><br />\n\t\t\tThis link will be valid for the next 10 minutes.\n\t\t\t<br /><br />\n\t\t\t- - -\n\t\t\t<br /><br />\n\t\t\tIf it doesn't work, copy and paste this URL into your browser:\n\t\t\t<br /><br />\n\t\t\t<em>${url}</em>\n\t\t`,\n\t};\n\n\tawait sendgrid.send(data);\n\n\tsession.flash(\n\t\t\"confirmation\",\n\t\t\"Check your email for a link to reset your password\"\n\t);\n\treturn redirect(\"/reset-password\", {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport default function ResetPassword() {\n\tconst transition = useTransition();\n\tconst { error, confirmation } = useLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-4\">Reset your password</h1>\n\n\t\t\t{confirmation ? (\n\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\t<i className=\"material-icons mr-1\">mail_outline</i>\n\t\t\t\t\t{confirmation}\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<p className=\"text-gray-500 mb-4\">\n\t\t\t\t\t\tWe'll send you an email with a link to reset your password.\n\t\t\t\t\t</p>\n\t\t\t\t\t<div className=\"flex flex-col align-start max-w-xs\">\n\t\t\t\t\t\t<form method=\"POST\" className=\"space-y-4 mb-6\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tclassName=\"btn w-auto\"\n\t\t\t\t\t\t\t\tdisabled={transition.state === \"submitting\"}\n\t\t\t\t\t\t\t\tvalue=\"Send Email\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</form>\n\n\t\t\t\t\t\t{error && <div className=\"text-red-600 mb-6\">{error}</div>}\n\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<Link to=\"/login\">Go back</Link>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n}\n", "import { Link } from \"@remix-run/react\";\nimport type { LoaderFunction } from \"@remix-run/node\";\nimport { json, redirect } from \"@remix-run/node\";\nimport type { User } from \"@prisma/client\";\n\nimport Layout from \"~/components/Layout\";\nimport { getSession } from \"~/sessions.server\";\nimport { db } from \"~/utils/db.server\";\n\ninterface LoaderData {\n\tcurrentUser: User;\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst currentUserId = String(session.get(\"userId\") ?? \"\");\n\tconst currentUser = await db.user.findUnique({\n\t\twhere: { id: currentUserId },\n\t});\n\tif (!currentUser) {\n\t\tconst params = new URLSearchParams();\n\t\tparams.set(\"redirectTo\", \"/account\");\n\t\treturn redirect(`/login?${params.toString()}`);\n\t}\n\treturn json<LoaderData>({ currentUser });\n};\n\nexport default function AccountHome() {\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">Account</h1>\n\t\t\t<div className=\"flex flex-col space-y-2\">\n\t\t\t\t<Link to=\"/reset-password\">Change Password</Link>\n\t\t\t\t<Link to=\"/logout\">Log Out </Link>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n", "import { type EntityType, type Relationship } from \"@prisma/client\";\nimport { json, type LoaderFunction } from \"@remix-run/node\";\nimport { db } from \"~/utils/db.server\";\n\ninterface LoaderData {\n\trelationships?: Relationship[];\n\terror?: string;\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst url = new URL(request.url);\n\tconst subjectEntityType = url.searchParams.get(\"subjectEntityType\");\n\tconst objectEntityType = url.searchParams.get(\"objectEntityType\");\n\tif (!subjectEntityType || !objectEntityType) {\n\t\treturn json<LoaderData>(\n\t\t\t{ error: \"Must specify subject entity type and object entity type\" },\n\t\t\t{ status: 400 }\n\t\t);\n\t}\n\tconst relationships = await db.relationship.findMany({\n\t\twhere: {\n\t\t\tsubjectEntityType: subjectEntityType as EntityType,\n\t\t\tobjectEntityType: objectEntityType as EntityType,\n\t\t},\n\t});\n\treturn json<LoaderData>({ relationships }, { status: 200 });\n};\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport {\n\ttype ActionFunction,\n\tjson,\n\tredirect,\n\ttype LoaderFunction,\n} from \"@remix-run/node\";\n\nimport useFilters from \"~/hooks/useFilters\";\nimport { type AudioItemWithRelations, ViewAs, SortBy } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport { getSession } from \"~/sessions.server\";\n\nimport Layout from \"~/components/Layout\";\nimport AudioItem from \"~/components/AudioItem\";\n\ninterface LoaderData {\n\tsavedItems: AudioItemWithRelations[];\n\ttotalSavedItems: number;\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\n\tconst { pathname, searchParams } = new URL(request.url);\n\tconst redirectParams = new URLSearchParams({\n\t\tredirectTo: pathname,\n\t});\n\tif (!userId) {\n\t\treturn redirect(`/login?${redirectParams.toString()}`);\n\t}\n\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\n\t// Get saved items from old to new. Also fetch total for use in the UI.\n\tconst [savedItems, totalSavedItems] = await Promise.all([\n\t\tdb.savedItem.findMany({\n\t\t\twhere: {\n\t\t\t\tuserId,\n\t\t\t},\n\t\t\tskip: (page - 1) * perPage,\n\t\t\ttake: perPage,\n\t\t\torderBy: {\n\t\t\t\tcreatedAt: \"asc\",\n\t\t\t},\n\t\t}),\n\t\tdb.savedItem.count({ where: { userId } }),\n\t]);\n\tconst savedAudioItemIds = savedItems.map((s) => s.audioItemId);\n\n\tconst audioItems = await db.audioItem.findMany({\n\t\twhere: {\n\t\t\tid: {\n\t\t\t\tin: savedAudioItemIds,\n\t\t\t},\n\t\t},\n\t\tinclude: {\n\t\t\ttagsAsSubject: {\n\t\t\t\tinclude: {\n\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\tobjectTune: true,\n\t\t\t\t\trelationship: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\tcreatedByUser: true,\n\t\t\tupdatedByUser: true,\n\t\t\tcomments: {\n\t\t\t\tinclude: {\n\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t},\n\t\t\t\torderBy: {\n\t\t\t\t\tcreatedAt: \"asc\",\n\t\t\t\t},\n\t\t\t},\n\t\t\tsavedItems: {\n\t\t\t\twhere: {\n\t\t\t\t\tuserId,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t});\n\n\t// the IN operator does not guarantee order so we need to manually order them\n\tconst orderedAudioItems: AudioItemWithRelations[] = [];\n\tfor (let id of savedAudioItemIds) {\n\t\tfor (let a of audioItems) {\n\t\t\tif (a.id === id) {\n\t\t\t\torderedAudioItems.push(a);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn json<LoaderData>({ savedItems: orderedAudioItems, totalSavedItems });\n};\n\ninterface ActionData {\n\terror?: string;\n\tok: boolean;\n}\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\tconst referer = String(request.headers.get(\"referer\") ?? \"\");\n\tconst redirectParams = new URLSearchParams({\n\t\tredirectTo: referer ? new URL(referer).pathname : \"/\",\n\t});\n\tif (!userId) {\n\t\treturn redirect(`/login?${redirectParams.toString()}`);\n\t}\n\n\tconst formData = await request.formData();\n\tconst audioItemId = String(formData.get(\"audioItemId\") ?? \"\");\n\tconst existing = await db.savedItem.findUnique({\n\t\twhere: {\n\t\t\tuserId_audioItemId: {\n\t\t\t\tuserId,\n\t\t\t\taudioItemId,\n\t\t\t},\n\t\t},\n\t});\n\tif (existing) {\n\t\tawait db.savedItem.delete({ where: { id: existing.id } });\n\t} else {\n\t\tawait db.savedItem.create({ data: { userId, audioItemId } });\n\t}\n\treturn json<ActionData>({ ok: true }, { status: 200 });\n};\n\nexport default function SavedItems() {\n\tconst { savedItems, totalSavedItems } = useLoaderData<LoaderData>();\n\n\tconst { Filters, filtersProps, viewAs } = useFilters({\n\t\ttotalItems: totalSavedItems,\n\t\tdefaultViewAs: ViewAs.Compact,\n\t});\n\n\treturn (\n\t\t<Layout>\n\t\t\t<div className=\"flex flex-col\">\n\t\t\t\t<h1 className=\"mb-6\">Saved Items</h1>\n\n\t\t\t\t{savedItems.length > 0 && (\n\t\t\t\t\t<Filters\n\t\t\t\t\t\t{...filtersProps}\n\t\t\t\t\t\tsortByOptions={[SortBy.DateSavedOldToNew]}\n\t\t\t\t\t\tsortBy={SortBy.DateSavedOldToNew}\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t/>\n\t\t\t\t)}\n\n\t\t\t\t{savedItems.length === 0 && (\n\t\t\t\t\t<div className=\"text-gray-500\">\n\t\t\t\t\t\tNothing saved yet - try browsing some{\" \"}\n\t\t\t\t\t\t<Link to=\"/\">Audio Items</Link>!\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{savedItems.map((s, index) => (\n\t\t\t\t\t<AudioItem\n\t\t\t\t\t\tviewAs={viewAs}\n\t\t\t\t\t\taudioItem={s}\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tclassName={viewAs === ViewAs.List ? \"mb-4\" : \"mb-6\"}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { LoaderFunction } from \"@remix-run/node\";\nimport { json } from \"@remix-run/node\";\n\nimport DateTimeService from \"~/services/DateTime\";\nimport { db } from \"~/utils/db.server\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport type { User } from \"@prisma/client\";\n\ninterface LoaderData {\n\tuser: User;\n}\n\nexport const loader: LoaderFunction = async ({ params }) => {\n\tconst user = await db.user.findUnique({ where: { id: params.id } });\n\tif (!user) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find a user with this ID\",\n\t\t});\n\t}\n\treturn json<LoaderData>({ user });\n};\n\nconst ViewUserById = () => {\n\tconst { user } = useLoaderData<LoaderData>();\n\tconst { username, createdAt } = user;\n\n\treturn (\n\t\t<Layout>\n\t\t\t<div className=\"flex flex-col-reverse md:flex-row\">\n\t\t\t\t<div className=\"flex flex-1 flex-col pb-8\">\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t\titems={[{ label: \"Users\" }, { label: username }]}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div className=\"flex-col mb-8\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tAccount Created:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">\n\t\t\t\t\t\t\t\t{DateTimeService.formatDateYear(createdAt)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewUserById;\n", "import { type Comment } from \"@prisma/client\";\nimport { type ActionFunction, json, redirect } from \"@remix-run/node\";\nimport { getSession } from \"~/sessions.server\";\nimport { db } from \"~/utils/db.server\";\n\ninterface ActionData {\n\terror?: string;\n\tcomment?: Comment;\n}\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\tconst referer = String(request.headers.get(\"referer\") ?? \"\");\n\n\tconst redirectTo = encodeURIComponent(\n\t\treferer ? new URL(referer).pathname : \"/\"\n\t);\n\tif (!userId) {\n\t\treturn redirect(`/login?redirectTo=${redirectTo}`);\n\t}\n\n\tconst formData = await request.formData();\n\tconst text = String(formData.get(\"text\") ?? \"\");\n\tconst parentAudioItemId = String(formData.get(\"parentAudioItemId\") ?? \"\");\n\tlet error;\n\tif (!text) {\n\t\terror = \"Comment cannot be empty\";\n\t} else if (!parentAudioItemId) {\n\t\terror = \"Parent audio item ID not defined\";\n\t}\n\tif (error) {\n\t\treturn json<ActionData>({ error }, { status: 400 });\n\t}\n\tconst comment = await db.comment.create({\n\t\tdata: {\n\t\t\ttext,\n\t\t\tparentAudioItemId,\n\t\t\tcreatedByUserId: userId,\n\t\t},\n\t});\n\treturn json<ActionData>({ comment }, { status: 201 });\n};\n", "import type { LoaderFunction } from \"@remix-run/node\";\nimport { redirect } from \"@remix-run/node\";\nimport { getSession, destroySession } from \"~/sessions.server\";\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\treturn redirect(\"/login\", {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await destroySession(session),\n\t\t},\n\t});\n};\n", "import { EntityType } from \"@prisma/client\";\nimport { json, type LoaderFunction } from \"@remix-run/node\";\nimport { type Entity } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\n\ninterface LoaderData {\n\terror?: string;\n\tresults?: Entity[];\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst url = new URL(request.url);\n\tconst searchTerm = url.searchParams.get(\"searchTerm\") || \"\";\n\tlet entityTypes = url.searchParams.getAll(\"entityTypes\");\n\tif (entityTypes.length === 0) {\n\t\tentityTypes = [\n\t\t\tEntityType.Person,\n\t\t\tEntityType.Instrument,\n\t\t\tEntityType.Place,\n\t\t\tEntityType.Tune,\n\t\t\tEntityType.Collection,\n\t\t\tEntityType.AudioItem,\n\t\t];\n\t}\n\tconst take = Number(url.searchParams.get(\"take\") ?? 24);\n\n\tif (searchTerm.length < 3) {\n\t\treturn json<LoaderData>(\n\t\t\t{ error: \"Must include a search term of at least 3 letters\" },\n\t\t\t{ status: 400 }\n\t\t);\n\t}\n\tconst cleanedSearchTerm = searchTerm.toLowerCase();\n\tconst takeFromEach = Math.round(take / entityTypes.length);\n\n\tconst personQuery = db.person.findMany({\n\t\tinclude: {\n\t\t\tcreatedByUser: true,\n\t\t},\n\t\twhere: {\n\t\t\tOR: [\n\t\t\t\t{\n\t\t\t\t\tname: {\n\t\t\t\t\t\tcontains: cleanedSearchTerm,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{ aliases: { contains: cleanedSearchTerm } },\n\t\t\t\t{ description: { contains: cleanedSearchTerm } },\n\t\t\t],\n\t\t},\n\t\ttake: takeFromEach,\n\t});\n\tconst instrumentQuery = db.instrument.findMany({\n\t\tinclude: {\n\t\t\tcreatedByUser: true,\n\t\t},\n\t\twhere: {\n\t\t\tOR: [\n\t\t\t\t{\n\t\t\t\t\tname: {\n\t\t\t\t\t\tcontains: cleanedSearchTerm,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{ aliases: { contains: cleanedSearchTerm } },\n\t\t\t\t{ description: { contains: cleanedSearchTerm } },\n\t\t\t],\n\t\t},\n\t\ttake: takeFromEach,\n\t});\n\tconst placeQuery = db.place.findMany({\n\t\tinclude: {\n\t\t\tcreatedByUser: true,\n\t\t},\n\t\twhere: {\n\t\t\tOR: [\n\t\t\t\t{\n\t\t\t\t\tname: {\n\t\t\t\t\t\tcontains: cleanedSearchTerm,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{ aliases: { contains: cleanedSearchTerm } },\n\t\t\t\t{ description: { contains: cleanedSearchTerm } },\n\t\t\t],\n\t\t},\n\t\ttake: takeFromEach,\n\t});\n\tconst tuneQuery = db.tune.findMany({\n\t\tinclude: {\n\t\t\tcreatedByUser: true,\n\t\t},\n\t\twhere: {\n\t\t\tOR: [\n\t\t\t\t{\n\t\t\t\t\tname: {\n\t\t\t\t\t\tcontains: cleanedSearchTerm,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{ aliases: { contains: cleanedSearchTerm } },\n\t\t\t\t{ theSessionTuneId: { equals: cleanedSearchTerm } },\n\t\t\t],\n\t\t},\n\t\ttake: takeFromEach,\n\t});\n\tconst collectionQuery = db.collection.findMany({\n\t\tinclude: {\n\t\t\tcreatedByUser: true,\n\t\t},\n\t\twhere: {\n\t\t\tOR: [\n\t\t\t\t{\n\t\t\t\t\tname: {\n\t\t\t\t\t\tcontains: cleanedSearchTerm,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{ aliases: { contains: cleanedSearchTerm } },\n\t\t\t\t{ description: { contains: cleanedSearchTerm } },\n\t\t\t],\n\t\t},\n\t\ttake: takeFromEach,\n\t});\n\tconst audioItemQuery = db.audioItem.findMany({\n\t\tinclude: {\n\t\t\tcreatedByUser: true,\n\t\t},\n\t\twhere: {\n\t\t\tOR: [\n\t\t\t\t{\n\t\t\t\t\tname: {\n\t\t\t\t\t\tcontains: cleanedSearchTerm,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{ aliases: { contains: cleanedSearchTerm } },\n\t\t\t\t{ description: { contains: cleanedSearchTerm } },\n\t\t\t],\n\t\t},\n\t\ttake: takeFromEach,\n\t});\n\n\t// Determine which queries to make\n\tconst queryPromises: Promise<Entity[]>[] = [];\n\tfor (const entityType of entityTypes) {\n\t\tswitch (entityType) {\n\t\t\tcase EntityType.Person:\n\t\t\t\tqueryPromises.push(personQuery);\n\t\t\t\tbreak;\n\t\t\tcase EntityType.Tune:\n\t\t\t\tqueryPromises.push(tuneQuery);\n\t\t\t\tbreak;\n\t\t\tcase EntityType.Instrument:\n\t\t\t\tqueryPromises.push(instrumentQuery);\n\t\t\t\tbreak;\n\t\t\tcase EntityType.Place:\n\t\t\t\tqueryPromises.push(placeQuery);\n\t\t\t\tbreak;\n\t\t\tcase EntityType.Collection:\n\t\t\t\tqueryPromises.push(collectionQuery);\n\t\t\t\tbreak;\n\t\t\tcase EntityType.AudioItem:\n\t\t\t\tqueryPromises.push(audioItemQuery);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tconst queryResults = await Promise.all(queryPromises);\n\tconst results = queryResults.reduce(\n\t\t(prevVal, curVal) => [...prevVal, ...curVal],\n\t\t[]\n\t);\n\treturn json<LoaderData>({ results }, { status: 200 });\n};\n", "import {\n\tuseLocation,\n\tLink,\n\tuseLoaderData,\n\tuseTransition,\n} from \"@remix-run/react\";\nimport bcrypt from \"bcryptjs\";\n\nimport Layout from \"~/components/Layout\";\nimport type { ActionFunction, LoaderFunction } from \"@remix-run/node\";\nimport { redirect, json } from \"@remix-run/node\";\nimport { commitSession, getSession } from \"~/sessions.server\";\nimport { db } from \"~/utils/db.server\";\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst url = new URL(request.url);\n\tconst redirectTo = url.searchParams.get(\"redirectTo\");\n\tif (session.has(\"userId\")) {\n\t\treturn redirect(redirectTo || \"/\");\n\t}\n\n\tconst data = { error: session.get(\"error\") };\n\treturn json(data, {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst url = new URL(request.url);\n\tconst redirectTo = url.searchParams.get(\"redirectTo\");\n\n\tconst formData = await request.formData();\n\tconst email = String(formData.get(\"email\") ?? \"\");\n\tconst fullName = String(formData.get(\"full_name\") ?? \"\");\n\tconst password = String(formData.get(\"password\") ?? \"\");\n\tconst passwordConfirm = String(formData.get(\"password_confirm\") ?? \"\");\n\n\t// Check for an existing user with this email\n\tconst user = await db.user.findUnique({ where: { email } });\n\tif (user) {\n\t\tsession.flash(\n\t\t\t\"error\",\n\t\t\t\"There is already a user with this email address. Try logging in?\"\n\t\t);\n\t\treturn redirect(\"/signup\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\t// Validate inputs\n\tconst emailValidityRegex = new RegExp(\n\t\t/^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i\n\t);\n\tconst emailIsValid = emailValidityRegex.test(email);\n\tif (!emailIsValid) {\n\t\tsession.flash(\"error\", \"Email is not valid\");\n\t\treturn redirect(\"/signup\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\tconst fullNameIsValid = fullName.split(\" \").length >= 2;\n\tif (!fullNameIsValid) {\n\t\tsession.flash(\"error\", \"Please enter your full name\");\n\t\treturn redirect(\"/signup\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\tconst passwordsMatch = password === passwordConfirm;\n\tif (!passwordsMatch) {\n\t\tsession.flash(\"error\", \"Passwords don't match\");\n\t\treturn redirect(\"/signup\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\tconst passwordIsValid = password.length >= 8;\n\tif (!passwordIsValid) {\n\t\tsession.flash(\"error\", \"Password must be at least 8 characters long\");\n\t\treturn redirect(\"/signup\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\t// Everything is valid - create the user and set it in a cookie\n\tconst passwordHashed = bcrypt.hashSync(password, 10);\n\tconst newUser = await db.user.create({\n\t\tdata: {\n\t\t\temail,\n\t\t\tusername: fullName,\n\t\t\tpasswordHashed,\n\t\t},\n\t});\n\tsession.set(\"userId\", newUser.id);\n\treturn redirect(redirectTo || \"/\", {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport default function SignUp() {\n\tconst { error } = useLoaderData();\n\tconst { state } = useTransition();\n\n\tconst { search } = useLocation();\n\tconst params = new URLSearchParams(search);\n\tconst redirectTo = params.get(\"redirectTo\");\n\n\tconst logInLinkQueryParams = new URLSearchParams(\n\t\tredirectTo ? { redirectTo } : undefined\n\t);\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">\n\t\t\t\t{redirectTo ? \"Create an account to continue\" : \"Create your account\"}\n\t\t\t</h1>\n\t\t\t<div className=\"flex flex-col align-start max-w-xs\">\n\t\t\t\t<form method=\"POST\" className=\"space-y-4 mb-6\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\tplaceholder=\"Your email\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"full_name\"\n\t\t\t\t\t\tplaceholder=\"Your full name\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tplaceholder=\"Choose a password\"\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tname=\"password_confirm\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tplaceholder=\"Password (again)\"\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={state === \"submitting\"}\n\t\t\t\t\t\tvalue=\"Sign Up\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\n\t\t\t\t{error && <div className=\"text-red-600 mb-6\">{error}</div>}\n\n\t\t\t\t<div>\n\t\t\t\t\tAlready have an account?{\" \"}\n\t\t\t\t\t<Link to={`/login?${logInLinkQueryParams.toString()}`}>Log in</Link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n", "import { useEffect, useCallback, useState } from \"react\";\nimport { Link, useLoaderData, useLocation } from \"@remix-run/react\";\nimport { type DataFunctionArgs } from \"@remix-run/node\";\nimport subMinutes from \"date-fns/subMinutes\";\n\nimport {\n\ttype CollectionWithRelations,\n\ttype CommentWithRelations,\n\ttype AudioItemWithRelations,\n\tSortBy,\n} from \"~/types\";\nimport { ViewAs } from \"~/types\";\nimport useFilters from \"~/hooks/useFilters\";\nimport EntityService from \"~/services/Entity\";\nimport LocalStorageService from \"~/services/LocalStorage\";\nimport { db } from \"~/utils/db.server\";\nimport { getSession } from \"~/sessions.server\";\n\nimport Layout from \"~/components/Layout\";\nimport ProjectIntro from \"~/components/ProjectIntro\";\nimport AudioItemComponent from \"~/components/AudioItem\";\n\ninterface LoaderData {\n\taudioItems: AudioItemWithRelations[];\n\tcollections: CollectionWithRelations[];\n\tcomments: CommentWithRelations[];\n\tnumAudioItemsAllTime: number;\n\tnumTagsAllTime: number;\n\tnumCommentsAllTime: number;\n}\n\nexport async function loader({\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\n\t// Get the most recent tags so we can fetch those AudioItem IDs\n\tconst recentTags = await db.tag.findMany({\n\t\tselect: {\n\t\t\tsubjectAudioItemId: true,\n\t\t\tcreatedAt: true,\n\t\t},\n\t\twhere: {\n\t\t\tsubjectAudioItemId: {\n\t\t\t\tnot: null,\n\t\t\t},\n\t\t\t// exclude Tags created in the last 5 minutes, so that as you're tagging\n\t\t\t// the list of AudioItems won't unexpectedly refresh\n\t\t\tcreatedAt: {\n\t\t\t\tlt: subMinutes(new Date(), 5),\n\t\t\t},\n\t\t},\n\t\tdistinct: [\"subjectAudioItemId\"],\n\t\torderBy: {\n\t\t\tcreatedAt: \"desc\",\n\t\t},\n\t\tskip: (page - 1) * perPage,\n\t\ttake: perPage,\n\t});\n\tconst recentlyTaggedAudioItemIds: string[] = [];\n\tfor (const r of recentTags) {\n\t\tif (r.subjectAudioItemId) {\n\t\t\trecentlyTaggedAudioItemIds.push(r.subjectAudioItemId);\n\t\t}\n\t}\n\n\tconst [\n\t\taudioItems,\n\t\tcollections,\n\t\tcomments,\n\t\tnumAudioItemsAllTime,\n\t\tnumTagsAllTime,\n\t\tnumCommentsAllTime,\n\t] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\twhere: {\n\t\t\t\tid: {\n\t\t\t\t\tin: recentlyTaggedAudioItemIds,\n\t\t\t\t},\n\t\t\t},\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t\torderBy: {\n\t\t\t\t\t\tcreatedAt: \"asc\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: {\n\t\t\t\t\twhere: {\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t\tdb.collection.findMany({\n\t\t\ttake: 5,\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: true,\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t},\n\t\t\torderBy: {\n\t\t\t\tcreatedAt: \"desc\",\n\t\t\t},\n\t\t}),\n\t\tdb.comment.findMany({\n\t\t\ttake: 6,\n\t\t\tinclude: {\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tparentAudioItem: true,\n\t\t\t},\n\t\t\torderBy: {\n\t\t\t\tcreatedAt: \"desc\",\n\t\t\t},\n\t\t}),\n\t\tdb.audioItem.count(),\n\t\tdb.tag.count(),\n\t\tdb.comment.count(),\n\t]);\n\n\t// the IN operator does not guarantee order so we need to manually order them\n\tconst orderedAudioItems: AudioItemWithRelations[] = [];\n\tfor (let id of recentlyTaggedAudioItemIds) {\n\t\tfor (let a of audioItems) {\n\t\t\tif (a.id === id) {\n\t\t\t\torderedAudioItems.push(a);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn {\n\t\taudioItems: orderedAudioItems,\n\t\tcollections,\n\t\tcomments,\n\t\tnumAudioItemsAllTime,\n\t\tnumTagsAllTime,\n\t\tnumCommentsAllTime,\n\t};\n}\n\nexport default function Home() {\n\tconst {\n\t\taudioItems,\n\t\tcollections,\n\t\tcomments,\n\t\tnumAudioItemsAllTime,\n\t\tnumTagsAllTime,\n\t\tnumCommentsAllTime,\n\t} = useLoaderData<LoaderData>();\n\tconst { search } = useLocation();\n\tconst params = new URLSearchParams(search);\n\tconst viewAs = (params.get(\"viewAs\") as ViewAs) ?? ViewAs.Cards;\n\n\tconst { Filters, filtersProps } = useFilters({\n\t\ttotalItems: numAudioItemsAllTime,\n\t});\n\n\t// Due to static rendering, we need to check localStorage for intro status\n\t// after client-side hydration.\n\tconst [shouldShowIntro, setShouldShowIntro] = useState(false);\n\tuseEffect(() => {\n\t\tif (LocalStorageService.getItem(\"SHOULD_SHOW_INTRO\") !== \"false\") {\n\t\t\tsetShouldShowIntro(true);\n\t\t}\n\t}, []);\n\tconst onCloseIntro = useCallback(() => {\n\t\tLocalStorageService.setItem(\"SHOULD_SHOW_INTRO\", \"false\");\n\t\tsetShouldShowIntro(false);\n\t}, []);\n\n\treturn (\n\t\t<Layout>\n\t\t\t{shouldShowIntro && (\n\t\t\t\t<ProjectIntro\n\t\t\t\t\tclassName=\"mb-8 md:mt-4 md:mb-12\"\n\t\t\t\t\tonClose={onCloseIntro}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t<div className=\"flex flex-col md:flex-row\">\n\t\t\t\t<div className=\"flex flex-1 flex-col pb-8\">\n\t\t\t\t\t<h1>Explore</h1>\n\n\t\t\t\t\t<Filters\n\t\t\t\t\t\t{...filtersProps}\n\t\t\t\t\t\tviewAs={undefined}\n\t\t\t\t\t\tsortBy={SortBy.RecentlyTagged}\n\t\t\t\t\t\tsortByOptions={[SortBy.RecentlyTagged]}\n\t\t\t\t\t\tclassName=\"sticky left-0 right-0 py-3 px-2 -ml-2 -mr-2 mt-1 mb-2 bg-gray-100 top-[48px]\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{audioItems.map((audioItem, index) => (\n\t\t\t\t\t\t<AudioItemComponent\n\t\t\t\t\t\t\tviewAs={viewAs}\n\t\t\t\t\t\t\taudioItem={audioItem}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName={viewAs === ViewAs.List ? \"mb-4\" : \"mb-6\"}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"flex flex-col items-start md:ml-8 md:pl-8 md:w-1/4 md:border-l md:border-gray-300\">\n\t\t\t\t\t<h3 className=\"mb-4\">Browse</h3>\n\t\t\t\t\t<Link to=\"/entities/people\" className=\"mb-2\">\n\t\t\t\t\t\tPeople\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/tunes\" className=\"mb-2\">\n\t\t\t\t\t\tTunes\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/instruments\" className=\"mb-2\">\n\t\t\t\t\t\tInstruments\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/collections\" className=\"mb-2\">\n\t\t\t\t\t\tCollections\n\t\t\t\t\t</Link>\n\n\t\t\t\t\t<h3 className=\"mt-6 mb-4\">Stats</h3>\n\t\t\t\t\t<span className=\"mb-2 text-gray-500\">\n\t\t\t\t\t\t{numAudioItemsAllTime} Audio Items\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className=\"mb-2 text-gray-500\">{numTagsAllTime} Tags</span>\n\t\t\t\t\t<span className=\"mb-2 text-gray-500\">\n\t\t\t\t\t\t{numCommentsAllTime} Comments\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<h3 className=\"mt-6 mb-4\">Latest Collections</h3>\n\t\t\t\t\t{collections.map((collection, index) => {\n\t\t\t\t\t\tconst { name } = collection;\n\t\t\t\t\t\tif (!name) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"mb-2 text-gray-500\" key={index}>\n\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(collection)}>\n\t\t\t\t\t\t\t\t\t{collection.name}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\n\t\t\t\t\t<h3 className=\"mt-6 mb-4\">Latest Features + Fixes</h3>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\thref=\"https://github.com/dgurns/trad-archive/pulls?q=is%3Apr+is%3Amerged+sort%3Aupdated-desc\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t>\n\t\t\t\t\t\tView on GitHub \u2197\n\t\t\t\t\t</a>\n\n\t\t\t\t\t<h3 className=\"mt-6 mb-4\">Latest Comments</h3>\n\t\t\t\t\t{comments.map((comment, index) => {\n\t\t\t\t\t\tconst { createdByUser, parentAudioItem, text } = comment;\n\t\t\t\t\t\tif (!createdByUser || !parentAudioItem) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"mb-4 text-gray-500\" key={index}>\n\t\t\t\t\t\t\t\t<div className=\" mb-1\">\n\t\t\t\t\t\t\t\t\t<Link to={`/users/${createdByUser.id}`}>\n\t\t\t\t\t\t\t\t\t\t{createdByUser.username}\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t{` commented on `}\n\t\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(parentAudioItem)}>\n\t\t\t\t\t\t\t\t\t\t{parentAudioItem.name}\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t{\":\"}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"whitespace-pre-line text-sm\">{text}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n", "const localStorageIsAvailable =\n\ttypeof window !== \"undefined\" && window?.localStorage;\n\nconst setItem = (key: string, value: string) => {\n\tif (localStorageIsAvailable) {\n\t\twindow.localStorage.setItem(key, value);\n\t}\n};\nconst getItem = (key: string): string | null | undefined => {\n\tif (localStorageIsAvailable) {\n\t\treturn window.localStorage.getItem(key);\n\t}\n\treturn undefined;\n};\n\nconst LocalStorageService = {\n\tsetItem,\n\tgetItem,\n};\nexport default LocalStorageService;\n", "interface Props {\n\tclassName?: string;\n\tonClose?: () => void;\n}\n\nconst ProjectIntro = ({ className, onClose }: Props) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-col flex-grow bg-gray-200 rounded p-4 pl-16 lg:pl-20 relative ${\n\t\t\t\tclassName ?? \"\"\n\t\t\t}`}\n\t\t>\n\t\t\t<img\n\t\t\t\tsrc=\"/images/logo-square.png\"\n\t\t\t\tclassName=\"absolute top-5 -left-1 lg:-left-8 w-12 lg:w-20 -rotate-12\"\n\t\t\t\talt=\"Logo\"\n\t\t\t/>\n\t\t\t<strong>Welcome!</strong>\n\t\t\t<br />\n\t\t\tTrad Archive is an open source experiment by the Irish Traditional Music\n\t\t\tArchive and Dan Gurney.\n\t\t\t<br />\n\t\t\t<br />\n\t\t\tYou can...\n\t\t\t<br />\n\t\t\t<ul className=\"list-disc list-inside\">\n\t\t\t\t<li>Listen to previously unreleased archival recordings</li>\n\t\t\t\t<li>\n\t\t\t\t\tHelp by tagging each recording with People, Tunes, Instruments, and\n\t\t\t\t\tCollections\n\t\t\t\t</li>\n\t\t\t\t<li>Save favorites to listen later</li>\n\t\t\t</ul>\n\t\t\t<button className=\"absolute top-2 right-2 btn-icon\" onClick={onClose}>\n\t\t\t\t<i className=\"material-icons\">close</i>\n\t\t\t</button>\n\t\t</div>\n\t);\n};\n\nexport default ProjectIntro;\n", "import {\n\tuseLocation,\n\tLink,\n\tuseLoaderData,\n\tuseTransition,\n} from \"@remix-run/react\";\nimport type { ActionFunction, LoaderFunction } from \"@remix-run/node\";\nimport { redirect, json } from \"@remix-run/node\";\nimport bcrypt from \"bcryptjs\";\n\nimport { db } from \"~/utils/db.server\";\nimport { getSession, commitSession } from \"~/sessions.server\";\nimport Layout from \"~/components/Layout\";\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst url = new URL(request.url);\n\tconst redirectTo = url.searchParams.get(\"redirectTo\");\n\tif (session.has(\"userId\")) {\n\t\treturn redirect(redirectTo || \"/\");\n\t}\n\n\tconst data = { error: session.get(\"error\") };\n\treturn json(data, {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst url = new URL(request.url);\n\tconst redirectTo = url.searchParams.get(\"redirectTo\");\n\n\tconst formData = await request.formData();\n\tconst email = String(formData.get(\"email\") ?? \"\");\n\tconst password = String(formData.get(\"password\") ?? \"\");\n\n\tconst user = await db.user.findUnique({ where: { email } });\n\tif (!user) {\n\t\tsession.flash(\"error\", \"Could not find a user with this email\");\n\t\treturn redirect(\"/login\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\tif (!user.passwordHashed) {\n\t\tsession.flash(\n\t\t\t\"error\",\n\t\t\t\"This user does not have a password. TODO: Redirect to /reset-password page\"\n\t\t);\n\t\treturn redirect(\"/login\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\tconst passwordIsValid = bcrypt.compareSync(password, user.passwordHashed);\n\tif (!passwordIsValid) {\n\t\tsession.flash(\"error\", \"Incorrect password\");\n\t\treturn redirect(\"/login\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\t// Email and password are valid; set the userId in a session cookie and\n\t// redirect\n\tsession.set(\"userId\", user.id);\n\treturn redirect(redirectTo || \"/\", {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport default function Login() {\n\tconst { error } = useLoaderData();\n\tconst transition = useTransition();\n\n\tconst { search } = useLocation();\n\tconst params = new URLSearchParams(search);\n\tconst redirectTo = params.get(\"redirectTo\");\n\n\tconst signUpLinkQueryParams = new URLSearchParams(\n\t\tredirectTo ? { redirectTo } : undefined\n\t);\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">\n\t\t\t\tLog in to {redirectTo ? \"continue\" : \"Trad Archive\"}\n\t\t\t</h1>\n\t\t\t<div className=\"flex flex-col align-start max-w-xs\">\n\t\t\t\t<form method=\"POST\" className=\"space-y-4 mb-6\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn w-auto\"\n\t\t\t\t\t\tdisabled={transition.state === \"submitting\"}\n\t\t\t\t\t\tvalue=\"Log In\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\n\t\t\t\t{error && <div className=\"text-red-600 mb-6\">{error}</div>}\n\n\t\t\t\t<p className=\"mb-2\">\n\t\t\t\t\tDon't have an account yet?{\" \"}\n\t\t\t\t\t<Link to={`/signup?${signUpLinkQueryParams.toString()}`}>\n\t\t\t\t\t\tSign up\n\t\t\t\t\t</Link>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<Link to=\"/reset-password\">Forgot password?</Link>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n", "import { EntityType, type Tag } from \"@prisma/client\";\nimport { type ActionFunction, json, redirect } from \"@remix-run/node\";\nimport { getSession } from \"~/sessions.server\";\nimport { db } from \"~/utils/db.server\";\n\ninterface PostActionData {\n\terror?: string;\n\ttag?: Tag;\n\ttagInverse?: Tag;\n}\n\ninterface DeleteActionData {\n\terror?: string;\n}\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\tconst referer = String(request.headers.get(\"referer\") ?? \"\");\n\n\tconst redirectTo = encodeURIComponent(\n\t\treferer ? new URL(referer).pathname : \"/\"\n\t);\n\tif (!userId) {\n\t\treturn redirect(`/login?redirectTo=${redirectTo}`);\n\t}\n\n\tif (request.method === \"POST\") {\n\t\tconst formData = await request.formData();\n\t\tconst relationshipId = String(formData.get(\"relationshipId\") ?? \"\");\n\t\tconst inverseRelationshipId = String(\n\t\t\tformData.get(\"inverseRelationshipId\") ?? \"\"\n\t\t);\n\t\tconst subjectEntityType = String(formData.get(\"subjectEntityType\") ?? \"\");\n\t\tconst subjectEntityId = String(formData.get(\"subjectEntityId\") ?? \"\");\n\t\tconst objectEntityType = String(formData.get(\"objectEntityType\") ?? \"\");\n\t\tconst objectEntityId = String(formData.get(\"objectEntityId\") ?? \"\");\n\t\tconst rawSubjectTimeMarkerSeconds = String(\n\t\t\tformData.get(\"subjectTimeMarkerSeconds\") ?? \"\"\n\t\t);\n\t\tconst subjectTimeMarkerSeconds =\n\t\t\trawSubjectTimeMarkerSeconds === \"\"\n\t\t\t\t? undefined\n\t\t\t\t: Number(rawSubjectTimeMarkerSeconds);\n\n\t\tif (\n\t\t\t!relationshipId ||\n\t\t\t!inverseRelationshipId ||\n\t\t\t!subjectEntityType ||\n\t\t\t!subjectEntityId ||\n\t\t\t!objectEntityType ||\n\t\t\t!objectEntityId\n\t\t) {\n\t\t\treturn json<PostActionData>(\n\t\t\t\t{ error: \"Missing required fields for creating Tag\" },\n\t\t\t\t{ status: 400 }\n\t\t\t);\n\t\t}\n\t\tconst [existing, existingInverse] = await Promise.all([\n\t\t\tdb.tag.findFirst({\n\t\t\t\twhere: {\n\t\t\t\t\t[`subject${subjectEntityType}Id`]: subjectEntityId,\n\t\t\t\t\t[`object${objectEntityType}Id`]: objectEntityId,\n\t\t\t\t\trelationshipId,\n\t\t\t\t\tsubjectTimeMarkerSeconds:\n\t\t\t\t\t\tsubjectEntityType === EntityType.AudioItem\n\t\t\t\t\t\t\t? subjectTimeMarkerSeconds\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t},\n\t\t\t}),\n\t\t\tdb.tag.findFirst({\n\t\t\t\twhere: {\n\t\t\t\t\t[`subject${objectEntityType}Id`]: objectEntityId,\n\t\t\t\t\t[`object${subjectEntityType}Id`]: subjectEntityId,\n\t\t\t\t\trelationshipId: inverseRelationshipId,\n\t\t\t\t\tsubjectTimeMarkerSeconds:\n\t\t\t\t\t\tobjectEntityType === EntityType.AudioItem\n\t\t\t\t\t\t\t? subjectTimeMarkerSeconds\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t},\n\t\t\t}),\n\t\t]);\n\t\tif (existing && existingInverse) {\n\t\t\treturn json<PostActionData>(\n\t\t\t\t{ error: \"This Tag has already been created\" },\n\t\t\t\t{ status: 400 }\n\t\t\t);\n\t\t}\n\n\t\t// Create the tag and its inverse if they don't already exist\n\t\tlet tag: Tag | undefined;\n\t\tif (!existing) {\n\t\t\ttag = await db.tag.create({\n\t\t\t\tdata: {\n\t\t\t\t\t[`subject${subjectEntityType}Id`]: subjectEntityId,\n\t\t\t\t\t[`object${objectEntityType}Id`]: objectEntityId,\n\t\t\t\t\trelationshipId,\n\t\t\t\t\tsubjectTimeMarkerSeconds:\n\t\t\t\t\t\tsubjectEntityType === EntityType.AudioItem\n\t\t\t\t\t\t\t? subjectTimeMarkerSeconds\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tlet tagInverse: Tag | undefined;\n\t\tif (!existingInverse) {\n\t\t\ttagInverse = await db.tag.create({\n\t\t\t\tdata: {\n\t\t\t\t\t[`subject${objectEntityType}Id`]: objectEntityId,\n\t\t\t\t\t[`object${subjectEntityType}Id`]: subjectEntityId,\n\t\t\t\t\trelationshipId: inverseRelationshipId,\n\t\t\t\t\tsubjectTimeMarkerSeconds:\n\t\t\t\t\t\tobjectEntityType === EntityType.AudioItem\n\t\t\t\t\t\t\t? subjectTimeMarkerSeconds\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\treturn json<PostActionData>({ tag, tagInverse }, { status: 201 });\n\t}\n\n\tif (request.method === \"DELETE\") {\n\t\tconst formData = await request.formData();\n\t\tconst tagId = String(formData.get(\"tagId\") ?? \"\");\n\t\tawait db.tag.delete({ where: { id: tagId } });\n\t\treturn json<DeleteActionData>({}, { status: 200 });\n\t}\n\n\treturn null;\n};\n", "export default {'version':'b94da72f','entry':{'module':'/build/entry.client-TSMCFMUV.js','imports':['/build/_shared/chunk-E4POIEVB.js','/build/_shared/chunk-QS3GJO57.js','/build/_shared/chunk-CUPSZOF3.js']},'routes':{'root':{'id':'root','parentId':undefined,'path':'','index':undefined,'caseSensitive':undefined,'module':'/build/root-VD2RZH7A.js','imports':['/build/_shared/chunk-XD23K4ZD.js','/build/_shared/chunk-SBX4NKV4.js','/build/_shared/chunk-6MFXEF3F.js','/build/_shared/chunk-FF66HNX7.js','/build/_shared/chunk-LFDIS6R5.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':true},'routes/account/index':{'id':'routes/account/index','parentId':'root','path':'account','index':true,'caseSensitive':undefined,'module':'/build/routes/account/index-W4FZDM77.js','imports':['/build/_shared/chunk-43JJPWIC.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/choose-new-password':{'id':'routes/choose-new-password','parentId':'root','path':'choose-new-password','index':undefined,'caseSensitive':undefined,'module':'/build/routes/choose-new-password-SZ5CTA63.js','imports':['/build/_shared/chunk-RZD3QUYA.js','/build/_shared/chunk-43JJPWIC.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/comments':{'id':'routes/comments','parentId':'root','path':'comments','index':undefined,'caseSensitive':undefined,'module':'/build/routes/comments-TE4UCUVI.js','imports':undefined,'hasAction':true,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/$slug':{'id':'routes/entities/audio-items/$slug','parentId':'root','path':'entities/audio-items/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/$slug-IR7CUAXU.js','imports':['/build/_shared/chunk-3O2QNSSL.js','/build/_shared/chunk-HM2UVJMW.js','/build/_shared/chunk-SINXZYOU.js','/build/_shared/chunk-43JJPWIC.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/index':{'id':'routes/entities/audio-items/index','parentId':'root','path':'entities/audio-items','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/index-E3SI33KS.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/random':{'id':'routes/entities/audio-items/random','parentId':'root','path':'entities/audio-items/random','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/random-4HQM4E2D.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/collections/$slug':{'id':'routes/entities/collections/$slug','parentId':'root','path':'entities/collections/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/collections/$slug-4S34WU2F.js','imports':['/build/_shared/chunk-SI53EVXF.js','/build/_shared/chunk-IGPGF2YZ.js','/build/_shared/chunk-3O2QNSSL.js','/build/_shared/chunk-HM2UVJMW.js','/build/_shared/chunk-SINXZYOU.js','/build/_shared/chunk-43JJPWIC.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/collections/index':{'id':'routes/entities/collections/index','parentId':'root','path':'entities/collections','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/collections/index-N7WIWN4J.js','imports':['/build/_shared/chunk-43JJPWIC.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/instruments/$slug':{'id':'routes/entities/instruments/$slug','parentId':'root','path':'entities/instruments/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/instruments/$slug-M2BYOI3U.js','imports':['/build/_shared/chunk-SI53EVXF.js','/build/_shared/chunk-IGPGF2YZ.js','/build/_shared/chunk-3O2QNSSL.js','/build/_shared/chunk-HM2UVJMW.js','/build/_shared/chunk-SINXZYOU.js','/build/_shared/chunk-43JJPWIC.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/instruments/index':{'id':'routes/entities/instruments/index','parentId':'root','path':'entities/instruments','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/instruments/index-BHZELHAG.js','imports':['/build/_shared/chunk-43JJPWIC.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/people/$slug':{'id':'routes/entities/people/$slug','parentId':'root','path':'entities/people/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/people/$slug-JNEKSOLV.js','imports':['/build/_shared/chunk-SI53EVXF.js','/build/_shared/chunk-IGPGF2YZ.js','/build/_shared/chunk-3O2QNSSL.js','/build/_shared/chunk-HM2UVJMW.js','/build/_shared/chunk-SINXZYOU.js','/build/_shared/chunk-43JJPWIC.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/people/index':{'id':'routes/entities/people/index','parentId':'root','path':'entities/people','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/people/index-7QOFBSUQ.js','imports':['/build/_shared/chunk-43JJPWIC.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/places/$slug':{'id':'routes/entities/places/$slug','parentId':'root','path':'entities/places/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/places/$slug-L6JK5UJY.js','imports':['/build/_shared/chunk-SI53EVXF.js','/build/_shared/chunk-IGPGF2YZ.js','/build/_shared/chunk-3O2QNSSL.js','/build/_shared/chunk-HM2UVJMW.js','/build/_shared/chunk-SINXZYOU.js','/build/_shared/chunk-43JJPWIC.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/places/index':{'id':'routes/entities/places/index','parentId':'root','path':'entities/places','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/places/index-YZDLTG67.js','imports':['/build/_shared/chunk-43JJPWIC.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/tunes/$slug':{'id':'routes/entities/tunes/$slug','parentId':'root','path':'entities/tunes/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/tunes/$slug-QUYROJ6I.js','imports':['/build/_shared/chunk-SI53EVXF.js','/build/_shared/chunk-IGPGF2YZ.js','/build/_shared/chunk-3O2QNSSL.js','/build/_shared/chunk-HM2UVJMW.js','/build/_shared/chunk-SINXZYOU.js','/build/_shared/chunk-43JJPWIC.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/tunes/index':{'id':'routes/entities/tunes/index','parentId':'root','path':'entities/tunes','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/tunes/index-5DF2FW3B.js','imports':['/build/_shared/chunk-IGPGF2YZ.js','/build/_shared/chunk-43JJPWIC.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/index':{'id':'routes/index','parentId':'root','path':undefined,'index':true,'caseSensitive':undefined,'module':'/build/routes/index-4UI5TM32.js','imports':['/build/_shared/chunk-IGPGF2YZ.js','/build/_shared/chunk-3O2QNSSL.js','/build/_shared/chunk-SINXZYOU.js','/build/_shared/chunk-43JJPWIC.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/login':{'id':'routes/login','parentId':'root','path':'login','index':undefined,'caseSensitive':undefined,'module':'/build/routes/login-DVQME63M.js','imports':['/build/_shared/chunk-RZD3QUYA.js','/build/_shared/chunk-43JJPWIC.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/logout':{'id':'routes/logout','parentId':'root','path':'logout','index':undefined,'caseSensitive':undefined,'module':'/build/routes/logout-QCIOKXNT.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/relationships':{'id':'routes/relationships','parentId':'root','path':'relationships','index':undefined,'caseSensitive':undefined,'module':'/build/routes/relationships-NVSTW3YI.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/reset-password':{'id':'routes/reset-password','parentId':'root','path':'reset-password','index':undefined,'caseSensitive':undefined,'module':'/build/routes/reset-password-KBNBUXZ3.js','imports':['/build/_shared/chunk-RZD3QUYA.js','/build/_shared/chunk-43JJPWIC.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/saved-items':{'id':'routes/saved-items','parentId':'root','path':'saved-items','index':undefined,'caseSensitive':undefined,'module':'/build/routes/saved-items-A7VFI3MC.js','imports':['/build/_shared/chunk-IGPGF2YZ.js','/build/_shared/chunk-3O2QNSSL.js','/build/_shared/chunk-SINXZYOU.js','/build/_shared/chunk-43JJPWIC.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/search':{'id':'routes/search','parentId':'root','path':'search','index':undefined,'caseSensitive':undefined,'module':'/build/routes/search-242MWHLE.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/signup':{'id':'routes/signup','parentId':'root','path':'signup','index':undefined,'caseSensitive':undefined,'module':'/build/routes/signup-5OPADG5A.js','imports':['/build/_shared/chunk-RZD3QUYA.js','/build/_shared/chunk-43JJPWIC.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/tags':{'id':'routes/tags','parentId':'root','path':'tags','index':undefined,'caseSensitive':undefined,'module':'/build/routes/tags-B6DTFF6T.js','imports':undefined,'hasAction':true,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/users/$id':{'id':'routes/users/$id','parentId':'root','path':'users/:id','index':undefined,'caseSensitive':undefined,'module':'/build/routes/users/$id-2HNC2HKB.js','imports':['/build/_shared/chunk-HM2UVJMW.js','/build/_shared/chunk-SINXZYOU.js','/build/_shared/chunk-43JJPWIC.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false}},'cssBundleHref':undefined,'hmr':undefined,'url':'/build/manifest-B94DA72F.js'};", "\nimport * as entryServer from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/node_modules/@remix-run/dev/dist/config/defaults/node/entry.server.react-stream.tsx\";\nimport * as route0 from \"./root.tsx\";\nimport * as route1 from \"./routes/entities/audio-items/random.tsx\";\nimport * as route2 from \"./routes/entities/audio-items/$slug.tsx\";\nimport * as route3 from \"./routes/entities/audio-items/index.tsx\";\nimport * as route4 from \"./routes/entities/collections/$slug.tsx\";\nimport * as route5 from \"./routes/entities/collections/index.tsx\";\nimport * as route6 from \"./routes/entities/instruments/$slug.tsx\";\nimport * as route7 from \"./routes/entities/instruments/index.tsx\";\nimport * as route8 from \"./routes/entities/people/$slug.tsx\";\nimport * as route9 from \"./routes/entities/people/index.tsx\";\nimport * as route10 from \"./routes/entities/places/$slug.tsx\";\nimport * as route11 from \"./routes/entities/places/index.tsx\";\nimport * as route12 from \"./routes/entities/tunes/$slug.tsx\";\nimport * as route13 from \"./routes/entities/tunes/index.tsx\";\nimport * as route14 from \"./routes/choose-new-password.tsx\";\nimport * as route15 from \"./routes/reset-password.tsx\";\nimport * as route16 from \"./routes/account/index.tsx\";\nimport * as route17 from \"./routes/relationships.tsx\";\nimport * as route18 from \"./routes/saved-items.tsx\";\nimport * as route19 from \"./routes/users/$id.tsx\";\nimport * as route20 from \"./routes/comments.tsx\";\nimport * as route21 from \"./routes/logout.tsx\";\nimport * as route22 from \"./routes/search.tsx\";\nimport * as route23 from \"./routes/signup.tsx\";\nimport * as route24 from \"./routes/index.tsx\";\nimport * as route25 from \"./routes/login.tsx\";\nimport * as route26 from \"./routes/tags.tsx\";\n  export { default as assets } from \"@remix-run/dev/assets-manifest\";\n  export const assetsBuildDirectory = \"public/build\";\n  export const future = {\"unstable_cssModules\":false,\"unstable_cssSideEffectImports\":false,\"unstable_dev\":false,\"unstable_postcss\":false,\"unstable_tailwind\":false,\"unstable_vanillaExtract\":false,\"v2_errorBoundary\":true,\"v2_meta\":true,\"v2_normalizeFormMethod\":true,\"v2_routeConvention\":false};\n  export const publicPath = \"/build/\";\n  export const entry = { module: entryServer };\n  \n  export const routes = {\n    \"root\": {\n      id: \"root\",\n      parentId: undefined,\n      path: \"\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route0\n    },\n  \"routes/entities/audio-items/random\": {\n      id: \"routes/entities/audio-items/random\",\n      parentId: \"root\",\n      path: \"entities/audio-items/random\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route1\n    },\n  \"routes/entities/audio-items/$slug\": {\n      id: \"routes/entities/audio-items/$slug\",\n      parentId: \"root\",\n      path: \"entities/audio-items/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route2\n    },\n  \"routes/entities/audio-items/index\": {\n      id: \"routes/entities/audio-items/index\",\n      parentId: \"root\",\n      path: \"entities/audio-items\",\n      index: true,\n      caseSensitive: undefined,\n      module: route3\n    },\n  \"routes/entities/collections/$slug\": {\n      id: \"routes/entities/collections/$slug\",\n      parentId: \"root\",\n      path: \"entities/collections/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route4\n    },\n  \"routes/entities/collections/index\": {\n      id: \"routes/entities/collections/index\",\n      parentId: \"root\",\n      path: \"entities/collections\",\n      index: true,\n      caseSensitive: undefined,\n      module: route5\n    },\n  \"routes/entities/instruments/$slug\": {\n      id: \"routes/entities/instruments/$slug\",\n      parentId: \"root\",\n      path: \"entities/instruments/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route6\n    },\n  \"routes/entities/instruments/index\": {\n      id: \"routes/entities/instruments/index\",\n      parentId: \"root\",\n      path: \"entities/instruments\",\n      index: true,\n      caseSensitive: undefined,\n      module: route7\n    },\n  \"routes/entities/people/$slug\": {\n      id: \"routes/entities/people/$slug\",\n      parentId: \"root\",\n      path: \"entities/people/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route8\n    },\n  \"routes/entities/people/index\": {\n      id: \"routes/entities/people/index\",\n      parentId: \"root\",\n      path: \"entities/people\",\n      index: true,\n      caseSensitive: undefined,\n      module: route9\n    },\n  \"routes/entities/places/$slug\": {\n      id: \"routes/entities/places/$slug\",\n      parentId: \"root\",\n      path: \"entities/places/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route10\n    },\n  \"routes/entities/places/index\": {\n      id: \"routes/entities/places/index\",\n      parentId: \"root\",\n      path: \"entities/places\",\n      index: true,\n      caseSensitive: undefined,\n      module: route11\n    },\n  \"routes/entities/tunes/$slug\": {\n      id: \"routes/entities/tunes/$slug\",\n      parentId: \"root\",\n      path: \"entities/tunes/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route12\n    },\n  \"routes/entities/tunes/index\": {\n      id: \"routes/entities/tunes/index\",\n      parentId: \"root\",\n      path: \"entities/tunes\",\n      index: true,\n      caseSensitive: undefined,\n      module: route13\n    },\n  \"routes/choose-new-password\": {\n      id: \"routes/choose-new-password\",\n      parentId: \"root\",\n      path: \"choose-new-password\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route14\n    },\n  \"routes/reset-password\": {\n      id: \"routes/reset-password\",\n      parentId: \"root\",\n      path: \"reset-password\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route15\n    },\n  \"routes/account/index\": {\n      id: \"routes/account/index\",\n      parentId: \"root\",\n      path: \"account\",\n      index: true,\n      caseSensitive: undefined,\n      module: route16\n    },\n  \"routes/relationships\": {\n      id: \"routes/relationships\",\n      parentId: \"root\",\n      path: \"relationships\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route17\n    },\n  \"routes/saved-items\": {\n      id: \"routes/saved-items\",\n      parentId: \"root\",\n      path: \"saved-items\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route18\n    },\n  \"routes/users/$id\": {\n      id: \"routes/users/$id\",\n      parentId: \"root\",\n      path: \"users/:id\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route19\n    },\n  \"routes/comments\": {\n      id: \"routes/comments\",\n      parentId: \"root\",\n      path: \"comments\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route20\n    },\n  \"routes/logout\": {\n      id: \"routes/logout\",\n      parentId: \"root\",\n      path: \"logout\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route21\n    },\n  \"routes/search\": {\n      id: \"routes/search\",\n      parentId: \"root\",\n      path: \"search\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route22\n    },\n  \"routes/signup\": {\n      id: \"routes/signup\",\n      parentId: \"root\",\n      path: \"signup\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route23\n    },\n  \"routes/index\": {\n      id: \"routes/index\",\n      parentId: \"root\",\n      path: undefined,\n      index: true,\n      caseSensitive: undefined,\n      module: route24\n    },\n  \"routes/login\": {\n      id: \"routes/login\",\n      parentId: \"root\",\n      path: \"login\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route25\n    },\n  \"routes/tags\": {\n      id: \"routes/tags\",\n      parentId: \"root\",\n      path: \"tags\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route26\n    }\n  };"],
  "mappings": "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",
  "names": ["isbot", "import_node", "import_react", "import_node", "import_react", "import_react", "import_react", "import_client", "PerPage", "import_react", "import_jsx_dev_runtime", "import_jsx_dev_runtime", "import_jsx_dev_runtime", "React", "import_react", "import_react_hotkeys_hook", "import_client", "import_jsx_dev_runtime", "import_react", "import_client", "import_jsx_dev_runtime", "import_react", "import_client", "import_react", "import_react", "import_jsx_dev_runtime", "import_react", "import_react", "import_jsx_dev_runtime", "import_jsx_dev_runtime", "import_jsx_dev_runtime", "e", "debounce", "import_jsx_dev_runtime", "import_jsx_dev_runtime", "import_jsx_dev_runtime", "loader", "import_node", "loader", "loader", "import_react", "import_jsx_dev_runtime", "import_react", "isToday", "format", "isYesterday", "import_react", "TagSortStrategy", "compareAsc", "compareDesc", "import_react", "import_react", "import_client", "import_react", "import_jsx_dev_runtime", "_a", "import_jsx_dev_runtime", "import_jsx_dev_runtime", "entity", "import_jsx_dev_runtime", "import_react", "import_react", "import_jsx_dev_runtime", "import_jsx_dev_runtime", "import_react", "import_jsx_dev_runtime", "import_react", "import_react", "import_jsx_dev_runtime", "_a", "import_jsx_dev_runtime", "import_react", "import_jsx_dev_runtime", "index", "import_jsx_dev_runtime", "import_react", "import_jsx_dev_runtime", "import_react", "import_jsx_dev_runtime", "import_jsx_dev_runtime", "import_react", "import_jsx_dev_runtime", "import_jsx_dev_runtime", "loader", "import_react", "slug_exports", "slug_default", "loader", "import_react", "import_react", "import_react", "import_react", "import_jsx_dev_runtime", "queryParams", "import_client", "import_jsx_dev_runtime", "Filters", "import_jsx_dev_runtime", "loader", "slug_default", "loader", "meta", "import_react", "import_jsx_dev_runtime", "meta", "loader", "slug_exports", "slug_default", "loader", "import_react", "import_jsx_dev_runtime", "loader", "slug_default", "loader", "meta", "import_react", "import_node", "import_jsx_dev_runtime", "meta", "loader", "slug_exports", "slug_default", "loader", "import_react", "import_jsx_dev_runtime", "loader", "slug_default", "action", "loader", "meta", "import_react", "import_node", "import_jsx_dev_runtime", "meta", "loader", "action", "slug_exports", "slug_default", "loader", "import_react", "import_jsx_dev_runtime", "loader", "slug_default", "loader", "meta", "import_react", "import_jsx_dev_runtime", "meta", "loader", "slug_exports", "slug_default", "loader", "import_react", "import_jsx_dev_runtime", "loader", "slug_default", "loader", "meta", "import_react", "import_jsx_dev_runtime", "meta", "loader", "Filters", "action", "loader", "import_node", "import_react", "import_jsx_dev_runtime", "loader", "bcrypt", "isAfter", "action", "action", "loader", "import_node", "import_react", "import_bcryptjs", "import_jsx_dev_runtime", "loader", "action", "uuid", "bcrypt", "addMinutes", "sendgrid", "loader", "import_react", "import_node", "import_jsx_dev_runtime", "loader", "loader", "import_node", "loader", "action", "loader", "import_react", "import_node", "import_jsx_dev_runtime", "loader", "action", "Filters", "loader", "import_react", "import_node", "import_jsx_dev_runtime", "loader", "action", "import_node", "action", "loader", "import_node", "loader", "loader", "import_client", "import_node", "loader", "action", "loader", "import_react", "import_bcryptjs", "import_node", "import_jsx_dev_runtime", "loader", "action", "bcrypt", "loader", "import_react", "import_jsx_dev_runtime", "import_jsx_dev_runtime", "loader", "subMinutes", "Filters", "action", "loader", "import_react", "import_node", "import_bcryptjs", "import_jsx_dev_runtime", "loader", "action", "bcrypt", "action", "import_client", "import_node", "action", "slug_exports"]
}
