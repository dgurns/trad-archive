{
  "version": 3,
  "sources": ["<stdin>", "../node_modules/@remix-run/dev/dist/compiler/shims/react.ts", "../app/entry.server.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/root.tsx", "../app/sessions.server.ts", "../app/utils/db.server.ts", "../app/components/PlayerContextProvider.tsx", "../app/components/Player.tsx", "../app/hooks/usePlayerContext.ts", "../app/types/index.ts", "../app/components/AudioPlayer.tsx", "../app/components/Header.tsx", "../app/services/Entity.ts", "../app/components/Modal.tsx", "../app/components/SearchEntities.tsx", "../app/components/LoadingCircle.tsx", "../app/components/Footer.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/random.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/$slug.tsx", "../app/components/Layout.tsx", "../app/components/AudioItemCard.tsx", "../app/services/DateTime.ts", "../app/components/Tags.tsx", "../app/services/Tag.ts", "../app/components/AddTagButton.tsx", "../app/fragments/index.ts", "../app/hooks/useRequireLogin.ts", "../app/hooks/useCurrentUser.ts", "../app/components/LoadingBlock.tsx", "../app/components/CreateTagForm.tsx", "../app/hooks/useTags.ts", "../app/components/SelectRelationship.tsx", "../app/components/TimestampInput.tsx", "../app/components/EditTagsButton.tsx", "../app/components/SaveItemButton.tsx", "../app/components/ViewCommentsButton.tsx", "../app/components/CreateCommentForm.tsx", "../app/components/TimeMarkers.tsx", "../app/components/AudioItemCompact.tsx", "../app/components/Menu.tsx", "../app/components/RequestTakedownButton.tsx", "../app/components/CreateTakedownRequestForm.tsx", "../app/components/AudioItemTextOnly.tsx", "../app/components/AudioItem.tsx", "../app/components/Breadcrumb.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/$slug.tsx", "../app/components/ViewEntityAndAudioItems.tsx", "../app/hooks/useFilters.ts", "../app/components/Filters.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/$slug.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/$slug.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/$slug.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/$slug.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/choose-new-password.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/reset-password.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/index.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/saved-items.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/users/$id.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/comments.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/logout.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/search.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/signup.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/index.tsx", "../app/services/LocalStorage.ts", "../app/components/ProjectIntro.tsx", "/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/login.tsx", "server-assets-manifest:@remix-run/dev/assets-manifest", "server-entry-module:@remix-run/dev/server-build"],
  "sourcesContent": ["export * from \"@remix-run/dev/server-build\";", "// eslint-disable-next-line import/no-extraneous-dependencies\nimport * as React from \"react\";\nexport { React };\n", "import type { EntryContext } from \"@remix-run/node\";\nimport { RemixServer } from \"@remix-run/react\";\nimport { renderToString } from \"react-dom/server\";\n\nexport default function handleRequest(\n\trequest: Request,\n\tresponseStatusCode: number,\n\tresponseHeaders: Headers,\n\tremixContext: EntryContext\n) {\n\tlet markup = renderToString(\n\t\t<RemixServer context={remixContext} url={request.url} />\n\t);\n\n\tresponseHeaders.set(\"Content-Type\", \"text/html\");\n\n\treturn new Response(\"<!DOCTYPE html>\" + markup, {\n\t\tstatus: responseStatusCode,\n\t\theaders: responseHeaders,\n\t});\n}\n", "import type { LoaderFunction, MetaFunction } from \"@remix-run/node\";\nimport { json } from \"@remix-run/node\";\nimport {\n\tLinks,\n\tLiveReload,\n\tMeta,\n\tOutlet,\n\tScripts,\n\tScrollRestoration,\n\tuseCatch,\n\tuseLoaderData,\n} from \"@remix-run/react\";\nimport { ApolloProvider, ApolloClient, InMemoryCache } from \"@apollo/client\";\nimport styles from \"~/styles/globals-generated-do-not-edit.css\";\n\nimport { getSession } from \"~/sessions.server\";\nimport { db } from \"~/utils/db.server\";\n\nimport PlayerContextProvider from \"~/components/PlayerContextProvider\";\nimport Header from \"~/components/Header\";\nimport Footer from \"~/components/Footer\";\nimport type { User } from \"@prisma/client\";\n\n// TODO: Remove this\nconst apolloClient = new ApolloClient({ cache: new InMemoryCache() });\n\nexport const meta: MetaFunction = () => ({\n\tcharset: \"utf-8\",\n\ttitle: \"Trad Archive\",\n\tviewport: \"width=device-width,initial-scale=1\",\n});\n\nexport function links() {\n\treturn [\n\t\t{ rel: \"stylesheet\", href: styles },\n\t\t{ rel: \"dns-prefetch\", href: \"https://fonts.googleapis.com\" },\n\t\t{ rel: \"preconnect\", href: \"https://fonts.gstatic.com/\" },\n\t\t{\n\t\t\trel: \"stylesheet\",\n\t\t\thref: \"https://fonts.googleapis.com/icon?family=Material+Icons\",\n\t\t},\n\t\t{\n\t\t\trel: \"apple-touch-icon\",\n\t\t\tsizes: \"180x180\",\n\t\t\thref: \"/favicons/apple-touch-icon.png\",\n\t\t},\n\t\t{\n\t\t\trel: \"icon\",\n\t\t\ttype: \"image/png\",\n\t\t\tsizes: \"192x192\",\n\t\t\thref: \"/favicons/android-chrome-192x192.png\",\n\t\t},\n\t\t{\n\t\t\trel: \"icon\",\n\t\t\ttype: \"image/png\",\n\t\t\tsizes: \"32x32\",\n\t\t\thref: \"/favicons/favicon-32x32.png\",\n\t\t},\n\t\t{\n\t\t\trel: \"icon\",\n\t\t\ttype: \"image/png\",\n\t\t\tsizes: \"16x16\",\n\t\t\thref: \"/favicons/favicon-16x16.png\",\n\t\t},\n\t\t{\n\t\t\trel: \"shortcut icon\",\n\t\t\thref: \"/favicons/favicon.ico\",\n\t\t},\n\t];\n}\n\ninterface LoaderData {\n\tcurrentUser: User | null;\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\tlet currentUser: User | null = null;\n\tif (userId) {\n\t\tcurrentUser = await db.user.findUnique({ where: { id: userId } });\n\t}\n\n\tconst data = { currentUser };\n\treturn json<LoaderData>(data);\n};\n\nexport default function App() {\n\tconst { currentUser } = useLoaderData<LoaderData>();\n\n\treturn (\n\t\t<html lang=\"en\">\n\t\t\t<head>\n\t\t\t\t<Meta />\n\t\t\t\t<Links />\n\t\t\t</head>\n\t\t\t<ApolloProvider client={apolloClient}>\n\t\t\t\t<PlayerContextProvider>\n\t\t\t\t\t<body className=\"bg-gray-100\">\n\t\t\t\t\t\t<div className=\"flex flex-col w-full relative pt-12\">\n\t\t\t\t\t\t\t<div className=\"flex flex-col justify-start items-center\">\n\t\t\t\t\t\t\t\t<div className=\"w-full min-h-screen lg:max-w-5xl px-4 pt-6 pb-44\">\n\t\t\t\t\t\t\t\t\t<Outlet />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Footer />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Add header to the DOM after child content so its modals overlay */}\n\t\t\t\t\t\t\t<div className=\"fixed top-0 right-0 left-0\" id=\"header\">\n\t\t\t\t\t\t\t\t<Header currentUser={currentUser} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<ScrollRestoration />\n\t\t\t\t\t\t<Scripts />\n\t\t\t\t\t\t<LiveReload />\n\t\t\t\t\t</body>\n\t\t\t\t</PlayerContextProvider>\n\t\t\t</ApolloProvider>\n\t\t</html>\n\t);\n}\n\ninterface ErrorBoundaryArgs {\n\terror: Error;\n}\nexport function ErrorBoundary({ error }: ErrorBoundaryArgs) {\n\treturn (\n\t\t<html lang=\"en\">\n\t\t\t<head>\n\t\t\t\t<Meta />\n\t\t\t\t<Links />\n\t\t\t</head>\n\t\t\t<ApolloProvider client={apolloClient}>\n\t\t\t\t<PlayerContextProvider>\n\t\t\t\t\t<body className=\"bg-gray-100\">\n\t\t\t\t\t\t<div className=\"flex flex-col w-full relative pt-12\">\n\t\t\t\t\t\t\t<div className=\"flex flex-col justify-start items-center\">\n\t\t\t\t\t\t\t\t<div className=\"w-full min-h-screen lg:max-w-5xl px-4 pt-6 pb-44 text-center\">\n\t\t\t\t\t\t\t\t\t<h1>Oops! There was an error.</h1>\n\t\t\t\t\t\t\t\t\t<p className=\"text-red-500 mt-2\">{error.message}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Footer />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Add header to the DOM after child content so its modals overlay */}\n\t\t\t\t\t\t\t<div className=\"fixed top-0 right-0 left-0\" id=\"header\">\n\t\t\t\t\t\t\t\t<Header />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<ScrollRestoration />\n\t\t\t\t\t\t<Scripts />\n\t\t\t\t\t\t<LiveReload />\n\t\t\t\t\t</body>\n\t\t\t\t</PlayerContextProvider>\n\t\t\t</ApolloProvider>\n\t\t</html>\n\t);\n}\n\nexport function CatchBoundary() {\n\tconst { currentUser } = useLoaderData<LoaderData>();\n\n\tconst caught = useCatch();\n\treturn (\n\t\t<html lang=\"en\">\n\t\t\t<head>\n\t\t\t\t<Meta />\n\t\t\t\t<Links />\n\t\t\t</head>\n\t\t\t<ApolloProvider client={apolloClient}>\n\t\t\t\t<PlayerContextProvider>\n\t\t\t\t\t<body className=\"bg-gray-100\">\n\t\t\t\t\t\t<div className=\"flex flex-col w-full relative pt-12\">\n\t\t\t\t\t\t\t<div className=\"flex flex-col justify-start items-center\">\n\t\t\t\t\t\t\t\t<div className=\"w-full min-h-screen lg:max-w-5xl px-4 pt-6 pb-44 text-center\">\n\t\t\t\t\t\t\t\t\t<h1>Oops! There was an error.</h1>\n\t\t\t\t\t\t\t\t\t<p className=\"text-red-500 mt-2\">\n\t\t\t\t\t\t\t\t\t\t{caught.status} - {caught.statusText}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Footer />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Add header to the DOM after child content so its modals overlay */}\n\t\t\t\t\t\t\t<div className=\"fixed top-0 right-0 left-0\" id=\"header\">\n\t\t\t\t\t\t\t\t<Header currentUser={currentUser} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<ScrollRestoration />\n\t\t\t\t\t\t<Scripts />\n\t\t\t\t\t\t<LiveReload />\n\t\t\t\t\t</body>\n\t\t\t\t</PlayerContextProvider>\n\t\t\t</ApolloProvider>\n\t\t</html>\n\t);\n}\n", "import { createCookieSessionStorage } from \"@remix-run/node\";\n\nconst { getSession, commitSession, destroySession } =\n\tcreateCookieSessionStorage({\n\t\tcookie: {\n\t\t\tname: \"jwt\",\n\t\t\thttpOnly: true,\n\t\t\tmaxAge: 60 * 60 * 24 * 30, // 30 days\n\t\t\tpath: \"/\",\n\t\t\tsameSite: \"none\",\n\t\t\tsecure: true,\n\t\t\tsecrets: [process.env.JWT_SECRET_KEY ?? \"jwt_secret_key\"],\n\t\t},\n\t});\n\nexport { getSession, commitSession, destroySession };\n", "import { PrismaClient } from \"@prisma/client\";\n\nlet db: PrismaClient;\n\ndeclare global {\n\tvar __db: PrismaClient | undefined;\n}\n\n// this is needed because in development we don't want to restart\n// the server with every change, but we want to make sure we don't\n// create a new connection to the DB with every change either.\nif (process.env.NODE_ENV === \"production\") {\n\tdb = new PrismaClient();\n} else {\n\tif (!global.__db) {\n\t\tglobal.__db = new PrismaClient();\n\t}\n\tdb = global.__db;\n}\n\nexport { db };\n", "import React, { useEffect, useState } from \"react\";\nimport Player from \"~/components/Player\";\nimport { AudioItem } from \"~/types\";\n\ninterface PlayerContextValue {\n\tactiveAudioItem: AudioItem | null;\n\tsetActiveAudioItem: React.Dispatch<React.SetStateAction<AudioItem>>;\n\tactiveItemDurationSeconds: number | undefined;\n\tsetActiveItemDurationSeconds: React.Dispatch<\n\t\tReact.SetStateAction<number | undefined>\n\t>;\n\tplaybackPositionSeconds: number | undefined;\n\tsetPlaybackPositionSeconds: React.Dispatch<\n\t\tReact.SetStateAction<number | undefined>\n\t>;\n\tseekPositionSeconds: number | undefined;\n\tsetSeekPositionSeconds: React.Dispatch<\n\t\tReact.SetStateAction<number | undefined>\n\t>;\n}\n\nexport const PlayerContext = React.createContext<PlayerContextValue>(null);\n\ninterface PlayerContextProviderProps {\n\tchildren: React.ReactChild | React.ReactChild[];\n}\n\nfunction PlayerContextProvider({ children }: PlayerContextProviderProps) {\n\tconst [activeAudioItem, setActiveAudioItem] = useState<AudioItem>(null);\n\tconst [activeItemDurationSeconds, setActiveItemDurationSeconds] = useState<\n\t\tnumber | undefined\n\t>(undefined);\n\tconst [playbackPositionSeconds, setPlaybackPositionSeconds] = useState<\n\t\tnumber | undefined\n\t>(undefined);\n\tconst [seekPositionSeconds, setSeekPositionSeconds] = useState<\n\t\tnumber | undefined\n\t>(undefined);\n\n\t// Reset PlayerContext when there is no active item\n\tuseEffect(() => {\n\t\tif (!activeAudioItem) {\n\t\t\tsetActiveItemDurationSeconds(undefined);\n\t\t\tsetPlaybackPositionSeconds(undefined);\n\t\t\tsetSeekPositionSeconds(undefined);\n\t\t}\n\t}, [activeAudioItem]);\n\n\treturn (\n\t\t<PlayerContext.Provider\n\t\t\tvalue={{\n\t\t\t\tactiveAudioItem,\n\t\t\t\tsetActiveAudioItem,\n\t\t\t\tactiveItemDurationSeconds,\n\t\t\t\tsetActiveItemDurationSeconds,\n\t\t\t\tplaybackPositionSeconds,\n\t\t\t\tsetPlaybackPositionSeconds,\n\t\t\t\tseekPositionSeconds,\n\t\t\t\tsetSeekPositionSeconds,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\n\t\t\t{/* Player is rendered here so it is persistent across all routes */}\n\t\t\t{activeAudioItem && (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"fixed bottom-0 left-0 right-0\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tboxShadow:\n\t\t\t\t\t\t\t\"0 -10px 15px -3px rgba(0, 0, 0, 0.1), 0 -4px 6px -2px rgba(0, 0, 0, 0.05)\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Player />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</PlayerContext.Provider>\n\t);\n}\n\nexport default PlayerContextProvider;\n", "import { useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\nimport { isAudioItem } from \"~/types\";\n\nimport AudioPlayer from \"~/components/AudioPlayer\";\n\nconst Player = () => {\n\tconst { activeAudioItem, setActiveAudioItem } = usePlayerContext();\n\n\tconst itemHref = useMemo(() => {\n\t\tif (isAudioItem(activeAudioItem)) {\n\t\t\treturn `/entities/audio-items/${activeAudioItem.slug}`;\n\t\t}\n\t\treturn window.location.href;\n\t}, [activeAudioItem]);\n\n\tif (!activeAudioItem) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className=\"flex flex-col align-center justify-center px-4 pb-4 pt-2 bg-white\">\n\t\t\t<div className=\"flex flex-row justify-between mb-2\">\n\t\t\t\t<div className=\"leading-8\">\n\t\t\t\t\tNow playing:{\" \"}\n\t\t\t\t\t<span className=\"text-gray-500\">{activeAudioItem.name}</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex flex-row items-center ml-4\">\n\t\t\t\t\t<Link to={itemHref} className=\"whitespace-nowrap\">\n\t\t\t\t\t\tView\n\t\t\t\t\t</Link>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn-icon flex ml-2 md:ml-4\"\n\t\t\t\t\t\tonClick={() => setActiveAudioItem(null)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className=\"material-icons\">close</i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<AudioPlayer item={activeAudioItem} key={activeAudioItem.id} />\n\t\t</div>\n\t);\n};\n\nexport default Player;\n", "import { useContext } from \"react\";\nimport { PlayerContext } from \"~/components/PlayerContextProvider\";\n\nconst usePlayerContext = () => {\n\tconst playerContext = useContext(PlayerContext);\n\treturn playerContext;\n};\n\nexport default usePlayerContext;\n", "import type {\n\tUser,\n\tAudioItem,\n\tCollection,\n\tInstrument,\n\tPerson,\n\tPlace,\n\tTune,\n} from \"@prisma/client\";\nimport { Prisma } from \"@prisma/client\";\n\nexport type Entity =\n\t| AudioItem\n\t| AudioItemWithRelations\n\t| Collection\n\t| CollectionWithRelations\n\t| Instrument\n\t| Person\n\t| Place\n\t| Tune;\n\nconst audioItemWithRelations = Prisma.validator<Prisma.AudioItemArgs>()({\n\tinclude: {\n\t\ttagsAsSubject: {\n\t\t\tinclude: {\n\t\t\t\tobjectAudioItem: true,\n\t\t\t\tobjectCollection: true,\n\t\t\t\tobjectInstrument: true,\n\t\t\t\tobjectPerson: true,\n\t\t\t\tobjectPlace: true,\n\t\t\t\tobjectTune: true,\n\t\t\t\trelationship: true,\n\t\t\t},\n\t\t},\n\t\tcreatedByUser: true,\n\t\tupdatedByUser: true,\n\t\tcomments: {\n\t\t\tinclude: {\n\t\t\t\tcreatedByUser: true,\n\t\t\t},\n\t\t},\n\t\tsavedItems: true,\n\t},\n});\nexport type AudioItemWithRelations = Prisma.AudioItemGetPayload<\n\ttypeof audioItemWithRelations\n>;\n\nconst collectionWithRelations = Prisma.validator<Prisma.CollectionArgs>()({\n\tinclude: { tagsAsSubject: true, createdByUser: true, updatedByUser: true },\n});\nexport type CollectionWithRelations = Prisma.CollectionGetPayload<\n\ttypeof collectionWithRelations\n>;\n\nconst commentWithRelations = Prisma.validator<Prisma.CommentArgs>()({\n\tinclude: { parentAudioItem: true, createdByUser: true },\n});\nexport type CommentWithRelations = Prisma.CommentGetPayload<\n\ttypeof commentWithRelations\n>;\n\nconst tagWithRelations = Prisma.validator<Prisma.TagArgs>()({\n\tinclude: {\n\t\tobjectAudioItem: true,\n\t\tobjectCollection: true,\n\t\tobjectInstrument: true,\n\t\tobjectPerson: true,\n\t\tobjectPlace: true,\n\t\tobjectTune: true,\n\t\trelationship: true,\n\t},\n});\nexport type TagWithRelations = Prisma.TagGetPayload<typeof tagWithRelations>;\n\n// EVERYTHING BELOW THIS LINE SHOULD BE GRADUALLY DEPRECATED\n\nexport enum EntityType {\n\tAudioItem = \"AudioItem\",\n\tPerson = \"Person\",\n\tInstrument = \"Instrument\",\n\tPlace = \"Place\",\n\tTune = \"Tune\",\n\tCollection = \"Collection\",\n}\n\nexport enum PerPage {\n\tTen = 10,\n\tTwenty = 20,\n\tFifty = 50,\n\tHundred = 100,\n}\n\nexport enum SortBy {\n\tRecentlyTagged = \"RecentlyTagged\",\n\tRecentlyAdded = \"RecentlyAdded\",\n\tAToZ = \"AToZ\",\n}\n\nexport enum ViewAs {\n\tCards = \"Cards\",\n\tCompact = \"Compact\",\n\tList = \"List\",\n}\n\nexport enum UserRole {\n\tUser = \"User\",\n\tAdmin = \"Admin\",\n}\n\nexport enum CopyrightPermissionStatus {\n\tFullNonCommercialGranted = \"FullNonCommercialGranted\",\n}\n\nexport enum EntityStatus {\n\tPublished = \"PUBLISHED\",\n\tTakenDown = \"TAKEN_DOWN\",\n}\n\nexport function isAudioItem(entity: Entity): entity is AudioItem {\n\treturn (entity as AudioItem).entityType === EntityType.AudioItem;\n}\nexport function isPerson(entity: Entity): entity is Person {\n\treturn (entity as Person).entityType === EntityType.Person;\n}\nexport function isInstrument(entity: Entity): entity is Instrument {\n\treturn (entity as Instrument).entityType === EntityType.Instrument;\n}\nexport function isPlace(entity: Entity): entity is Place {\n\treturn (entity as Place).entityType === EntityType.Place;\n}\nexport function isTune(entity: Entity): entity is Tune {\n\treturn (entity as Tune).entityType === EntityType.Tune;\n}\nexport function isCollection(entity: Entity): entity is Collection {\n\treturn (entity as Collection).entityType === EntityType.Collection;\n}\nexport interface Relationship {\n\tid: string;\n\tname: string;\n\tsubjectEntityType: EntityType;\n\tobjectEntityType: EntityType;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedAt: string;\n}\n\nexport interface Comment {\n\tid: string;\n\tparentAudioItem?: AudioItem | null;\n\ttext: string;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedAt: string;\n}\n\nexport interface SavedItem {\n\tid: string;\n\taudioItem?: AudioItem | null;\n\tuser?: User | null;\n\tcreatedAt: string;\n}\n\nexport enum TakedownRequestType {\n\tPerformer = \"Performer\",\n\tCopyright = \"Copyright\",\n}\n\nexport enum TakedownRequestStatus {\n\tPending = \"Pending\",\n\tApproved = \"Approved\",\n\tDenied = \"Denied\",\n}\n\nexport interface TakedownRequest {\n\tid: string;\n\tentity?: Entity;\n\ttype: TakedownRequestType;\n\tmessage: string | null;\n\tstatus: TakedownRequestStatus;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedByUser: User;\n\tupdatedAt: string;\n}\n\nexport const isPendingTakedownRequest = (takedownRequest: TakedownRequest) =>\n\ttakedownRequest.status.valueOf() === \"Pending\";\n\nexport const isApprovedTakedownRequest = (takedownRequest: TakedownRequest) =>\n\ttakedownRequest.status.valueOf() === \"Approved\";\n\nexport const isDeniedTakedownRequest = (takedownRequest: TakedownRequest) =>\n\ttakedownRequest.status.valueOf() === \"Denied\";\n\nexport enum VerificationRequestStatus {\n\tPending = \"Pending\",\n\tApproved = \"Approved\",\n\tDenied = \"Denied\",\n}\nexport interface VerificationRequest {\n\tid: string;\n\tperson: Person;\n\tpresignedImageDownloadUrl: string | null;\n\tcopyrightPermissionStatus: CopyrightPermissionStatus | null;\n\tstatus: VerificationRequestStatus;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedByUser: User;\n\tupdatedAt: string;\n}\n\nexport const isPendingVerificationRequest = (\n\tverificationRequest: VerificationRequest\n) => verificationRequest.status.valueOf() === \"Pending\";\n\nexport const isApprovedVerificationRequest = (\n\tverificationRequest: VerificationRequest\n) => verificationRequest.status.valueOf() === \"Approved\";\n\nexport const isDeniedVerificationRequest = (\n\tverificationRequest: VerificationRequest\n) => verificationRequest.status.valueOf() === \"Denied\";\n\nexport enum SubmissionStatus {\n\tPending = \"Pending\",\n\tApproved = \"Approved\",\n\tDenied = \"Denied\",\n}\nexport enum SubmissionMaterialType {\n\tAudio = \"Audio\",\n\tVideo = \"Video\",\n\tImage = \"Image\",\n\tDocument = \"Document\",\n}\nexport interface Submission {\n\tid: string;\n\tstatus: SubmissionStatus;\n\tmaterialTypes: SubmissionMaterialType[];\n\tuserControlsCopyright: boolean;\n\tcopyrightDetails: string | null;\n\tdescription: string | null;\n\ts3DirectoryKey: string | null;\n\tcreatedByUser: User;\n\tcreatedAt: string;\n\tupdatedByUser: User;\n\tupdatedAt: string;\n}\n\nexport interface Stats {\n\tnumAudioItemsAllTime: number;\n\tnumTagsAllTime: number;\n\tnumCommentsAllTime: number;\n}\n", "import { useEffect, useRef } from \"react\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\nimport { AudioItem } from \"~/types\";\n\ninterface AudioPlayerProps {\n\titem: AudioItem;\n}\nconst AudioPlayer = ({ item }: AudioPlayerProps) => {\n\tconst audioPlayerRef = useRef<HTMLAudioElement>();\n\n\tconst {\n\t\tsetActiveItemDurationSeconds,\n\t\tsetPlaybackPositionSeconds,\n\t\tseekPositionSeconds,\n\t\tsetSeekPositionSeconds,\n\t} = usePlayerContext();\n\n\t// Set up event callbacks on the audio tag\n\tuseEffect(() => {\n\t\tconst audioPlayer = audioPlayerRef.current;\n\t\tif (audioPlayer) {\n\t\t\t// When the audio item's duration changes, update PlayerContext\n\t\t\taudioPlayer.ondurationchange = () => {\n\t\t\t\tconst duration = audioPlayer.duration;\n\t\t\t\tif (typeof duration === \"number\") {\n\t\t\t\t\tconst durationSeconds = Math.floor(audioPlayer.duration);\n\t\t\t\t\tsetActiveItemDurationSeconds(durationSeconds);\n\t\t\t\t}\n\t\t\t};\n\t\t\t// As the audio tag's playback position changes, update PlayerContext with the\n\t\t\t// new value\n\t\t\taudioPlayer.ontimeupdate = () => {\n\t\t\t\tconst playbackPositionSeconds = Math.floor(audioPlayer.currentTime);\n\t\t\t\tsetPlaybackPositionSeconds(playbackPositionSeconds);\n\t\t\t};\n\t\t}\n\t}, []);\n\n\t// If a seek position is set in PlayerContext, update audio tag's playback\n\t// position to match and ensure audio is playing\n\tuseEffect(() => {\n\t\tconst audioPlayer = audioPlayerRef.current;\n\t\tif (audioPlayer && typeof seekPositionSeconds === \"number\") {\n\t\t\taudioPlayer.currentTime = seekPositionSeconds;\n\t\t\tsetSeekPositionSeconds(undefined);\n\t\t\tif (audioPlayer.paused) {\n\t\t\t\taudioPlayer.play();\n\t\t\t}\n\t\t}\n\t}, [seekPositionSeconds]);\n\n\treturn (\n\t\t<audio\n\t\t\tref={audioPlayerRef}\n\t\t\tid=\"audio\"\n\t\t\tpreload=\"metadata\"\n\t\t\tautoPlay\n\t\t\tcontrols\n\t\t\tcontrolsList=\"nodownload\"\n\t\t\tclassName=\"w-full outline-none\"\n\t\t>\n\t\t\t<source src={item.urlSource} type=\"audio/mpeg\" />\n\t\t</audio>\n\t);\n};\n\nexport default AudioPlayer;\n", "import React, { useState, useCallback } from \"react\";\nimport { Link } from \"@remix-run/react\";\nimport { useNavigate } from \"@remix-run/react\";\nimport { useHotkeys } from \"react-hotkeys-hook\";\n\nimport type { Entity } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\n\nimport Modal from \"~/components/Modal\";\nimport SearchEntities from \"~/components/SearchEntities\";\nimport type { User } from \"@prisma/client\";\n\ninterface Props {\n\tcurrentUser?: User | null;\n}\n\nconst Header = ({ currentUser }: Props) => {\n\tconst navigate = useNavigate();\n\n\tconst [searchModalIsVisible, setSearchModalIsVisible] = useState(false);\n\n\tconst openSearchModal = (\n\t\tevent: KeyboardEvent | React.SyntheticEvent<HTMLButtonElement>\n\t) => {\n\t\tevent.preventDefault();\n\t\tsetSearchModalIsVisible(true);\n\t};\n\tconst closeSearchModal = () => {\n\t\tsetSearchModalIsVisible(false);\n\t};\n\n\tuseHotkeys(\"/\", openSearchModal);\n\n\tconst onSelectSearchResult = useCallback(\n\t\t(entity: Entity) => {\n\t\t\tsetSearchModalIsVisible(false);\n\t\t\tnavigate(EntityService.makeHrefForView(entity));\n\t\t},\n\t\t[navigate]\n\t);\n\n\tconst onNewEntityCreated = useCallback(\n\t\t(entity: Entity) => {\n\t\t\tnavigate(EntityService.makeHrefForView(entity));\n\t\t},\n\t\t[navigate]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex flex-row py-3 px-4 justify-between text-white items-center bg-teal-700\">\n\t\t\t\t<div className=\"flex flex-row\">\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto=\"/\"\n\t\t\t\t\t\tclassName=\"whitespace-nowrap no-underline text-yellow-200 hover:text-gray-400\"\n\t\t\t\t\t>\n\t\t\t\t\t\tTrad Archive\n\t\t\t\t\t</Link>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"flex flex-row items-center whitespace-nowrap text-white hover:text-gray-400 group ml-4\"\n\t\t\t\t\t\tonClick={openSearchModal}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className=\"material-icons\">search</i>\n\t\t\t\t\t\t<span className=\"hidden md:block md:pl-1\">Search</span>\n\t\t\t\t\t\t<span className=\"hidden md:block border border-gray-300 group-hover:border-gray-400 rounded text-xs px-1.5 ml-2.5\">{`/`}</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto=\"/entities/audio-items/random\"\n\t\t\t\t\t\tclassName=\"flex flex-row items-center no-underline text-white hover:text-gray-400 ml-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"block h-6\">\n\t\t\t\t\t\t\t<i className=\"material-icons\">shuffle</i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"md:pl-2 hidden md:block\">Random</div>\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\n\t\t\t\t{!currentUser ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"/login\"\n\t\t\t\t\t\t\tclassName=\"whitespace-nowrap text-white no-underline hover:text-gray-400 ml-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tLog In\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"/signup\"\n\t\t\t\t\t\t\tclassName=\"btn text-current no-underline whitespace-nowrap hover:text-current ml-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSign Up\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"/saved-items\"\n\t\t\t\t\t\t\tclassName=\"flex flex-row items-center whitespace-nowrap text-white no-underline hover:text-gray-400 ml-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i className=\"material-icons\">bookmark</i>\n\t\t\t\t\t\t\t<span className=\"hidden md:block md:pl-1\">Saved</span>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"/account\"\n\t\t\t\t\t\t\tclassName=\"flex flex-row items-center whitespace-nowrap text-white no-underline hover:text-gray-400 ml-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i className=\"material-icons\">account_circle</i>\n\t\t\t\t\t\t\t<span className=\"hidden md:block md:pl-1\">Account</span>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Search\"\n\t\t\t\tisVisible={searchModalIsVisible}\n\t\t\t\tonClose={closeSearchModal}\n\t\t\t>\n\t\t\t\t<SearchEntities onSelect={onSelectSearchResult} />\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default Header;\n", "import { EntityType } from \"@prisma/client\";\n\nconst cleanSlug = (rawSlug: string) => {\n\tconst slugWithHyphens = rawSlug.replace(/[\\s]/g, \"-\");\n\treturn slugWithHyphens.replace(/[^a-zA-Z0-9-]/g, \"\").toLowerCase();\n};\n\ninterface EntityArg {\n\tentityType: EntityType | null;\n\tslug: string;\n}\n\nconst makeHrefForTopLevel = (entity?: EntityArg | null) => {\n\tswitch (entity?.entityType) {\n\t\tcase EntityType.AudioItem:\n\t\t\treturn \"/entities/audio-items\";\n\t\tcase EntityType.Person:\n\t\t\treturn \"/entities/people\";\n\t\tcase EntityType.Instrument:\n\t\t\treturn \"/entities/instruments\";\n\t\tcase EntityType.Place:\n\t\t\treturn \"/entities/places\";\n\t\tcase EntityType.Tune:\n\t\t\treturn \"/entities/tunes\";\n\t\tcase EntityType.Collection:\n\t\t\treturn \"/entities/collections\";\n\t\tdefault:\n\t\t\treturn \"\";\n\t}\n};\n\nconst makeHrefForView = (entity?: EntityArg | null) => {\n\tif (!entity) {\n\t\treturn \"\";\n\t}\n\treturn `${makeHrefForTopLevel(entity)}/${entity.slug}`;\n};\n\nconst makeHrefForEdit = (entity?: EntityArg | null) => {\n\tif (!entity) {\n\t\treturn \"\";\n\t}\n\treturn `${makeHrefForView(entity)}/edit`;\n};\n\nconst makeHrefForAbout = (entity?: EntityArg | null) => {\n\tif (!entity) {\n\t\treturn \"\";\n\t}\n\treturn `${makeHrefForView(entity)}/about`;\n};\n\nconst makeHrefForTags = (entity?: EntityArg | null) => {\n\tif (!entity) {\n\t\treturn \"\";\n\t}\n\treturn `${makeHrefForView(entity)}/tags`;\n};\n\nconst makeReadableNamePlural = (entity?: EntityArg | null) => {\n\tswitch (entity?.entityType) {\n\t\tcase EntityType.AudioItem:\n\t\t\treturn \"Audio Items\";\n\t\tcase EntityType.Person:\n\t\t\treturn \"People\";\n\t\tcase EntityType.Instrument:\n\t\t\treturn \"Instruments\";\n\t\tcase EntityType.Place:\n\t\t\treturn \"Places\";\n\t\tcase EntityType.Tune:\n\t\t\treturn \"Tunes\";\n\t\tcase EntityType.Collection:\n\t\t\treturn \"Collections\";\n\t\tdefault:\n\t\t\treturn \"\";\n\t}\n};\n\nconst EntityService = {\n\tcleanSlug,\n\tmakeHrefForTopLevel,\n\tmakeHrefForView,\n\tmakeHrefForEdit,\n\tmakeHrefForAbout,\n\tmakeHrefForTags,\n\tmakeReadableNamePlural,\n};\nexport default EntityService;\n", "import React, { useEffect } from \"react\";\nimport { useHotkeys } from \"react-hotkeys-hook\";\n\ninterface Props {\n\tchildren: React.ReactNode;\n\tisVisible: boolean;\n\tonClose: () => void;\n\ttitle?: string;\n\tclassName?: string;\n}\n\nconst Modal = ({\n\tchildren,\n\tisVisible = false,\n\tonClose,\n\ttitle,\n\tclassName,\n}: Props) => {\n\t// Close the modal when escape key is pressed, even if a form field is focused\n\tuseHotkeys(\n\t\t\"esc\",\n\t\tonClose,\n\t\t{\n\t\t\tenableOnTags: [\"INPUT\", \"TEXTAREA\"],\n\t\t},\n\t\t[onClose]\n\t);\n\n\t// \uD83D\uDEA8 Nasty ugly hack. There is something about how DOM elements are rendered\n\t// where the Filters component, even though it has a lower z-index than this,\n\t// appears above the Modal. So when the Modal is open we manually hide the\n\t// Filters.\n\tuseEffect(() => {\n\t\tif (isVisible) {\n\t\t\tdocument.querySelector(\"#filters\")?.classList.add(\"invisible\");\n\t\t} else {\n\t\t\tdocument.querySelector(\"#filters\")?.classList.remove(\"invisible\");\n\t\t}\n\t}, [isVisible]);\n\n\tif (!isVisible) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`${\n\t\t\t\tisVisible ? \"visible\" : \"hidden\"\n\t\t\t} z-40 fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center`}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName=\"absolute top-0 left-0 right-0 bottom-0 bg-black bg-opacity-40\"\n\t\t\t\tonClick={onClose}\n\t\t\t/>\n\n\t\t\t<div\n\t\t\t\tclassName={`bg-white cursor-auto rounded relative w-full px-4 pb-4 pt-3 m-2 max-h-[90vh] overflow-y-auto overflow-x-hidden md:max-w-xl ${\n\t\t\t\t\tclassName ?? \"\"\n\t\t\t\t}`}\n\t\t\t>\n\t\t\t\t<div className=\"flex flex-row justify-between items-center mb-4 text-black\">\n\t\t\t\t\t<h2>{title}</h2>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn-icon flex flex-row items-center justify-center ml-4 mb-0.5\"\n\t\t\t\t\t\tonClick={onClose}\n\t\t\t\t\t\taria-label=\"Close\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className=\"hidden md:block border border-gray-300 group-hover:border-gray-400 rounded text-xs px-1.5 ml-0.5 mr-3\">\n\t\t\t\t\t\t\tESC\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<i className=\"material-icons\">close</i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Add some style resets so that the Modal's parent doesn't affect the content */}\n\t\t\t\t<div className=\"text-base text-black font-normal whitespace-normal text-left cursor-auto\">\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Modal;\n", "import { Link, useFetcher } from \"@remix-run/react\";\nimport { type ChangeEvent } from \"react\";\nimport debounce from \"lodash/debounce\";\nimport { EntityType } from \"@prisma/client\";\n\nimport { type Entity } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\n\nimport LoadingCircle from \"~/components/LoadingCircle\";\n\ninterface Props {\n\tentityTypes?: EntityType[];\n\ttake?: number;\n\tonSelect: (entity: Entity) => void;\n\tclassName?: string;\n}\nconst SearchEntities = ({ entityTypes, take, onSelect, className }: Props) => {\n\tconst fetcher = useFetcher<{ results: Entity[]; error?: string }>();\n\tconst searchResults = fetcher.data?.results;\n\n\tfunction onChangeSearchTerm(e: ChangeEvent<HTMLInputElement>) {\n\t\tconst searchTerm = e.target.value;\n\t\tif (searchTerm.length < 3) {\n\t\t\treturn;\n\t\t}\n\t\tconst params = new URLSearchParams({\n\t\t\tsearchTerm,\n\t\t});\n\t\tif (typeof take === \"number\") {\n\t\t\tparams.set(\"take\", String(take));\n\t\t}\n\t\tif (entityTypes) {\n\t\t\tentityTypes.forEach((e) => params.append(\"entityTypes\", e));\n\t\t}\n\t\tfetcher.load(`/search?${params.toString()}`);\n\t}\n\n\treturn (\n\t\t<div className={className ?? \"\"}>\n\t\t\t<div className=\"relative\">\n\t\t\t\t<input\n\t\t\t\t\tautoFocus\n\t\t\t\t\tplaceholder=\"Start typing...\"\n\t\t\t\t\tonChange={debounce(onChangeSearchTerm, 300, {\n\t\t\t\t\t\ttrailing: true,\n\t\t\t\t\t})}\n\t\t\t\t/>\n\t\t\t\t{fetcher.state !== \"idle\" && (\n\t\t\t\t\t<div className=\"absolute top-2 right-2\">\n\t\t\t\t\t\t<LoadingCircle />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{fetcher.data?.error && (\n\t\t\t\t<div className=\"text-red-600 mt-4 ml-2\">{fetcher.data.error}</div>\n\t\t\t)}\n\n\t\t\t{searchResults && (\n\t\t\t\t<div className=\"mt-4\">\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{searchResults.map((entity, index) => (\n\t\t\t\t\t\t\t<li className=\"flex flex-row\" key={index}>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"flex flex-1 justify-between items-center text-left p-2 rounded cursor-pointer hover:bg-gray-200\"\n\t\t\t\t\t\t\t\t\tonClick={() => onSelect(entity)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t{entity.name}\n\t\t\t\t\t\t\t\t\t\t{entity.entityType === EntityType.Tune\n\t\t\t\t\t\t\t\t\t\t\t? ` (${entity.entityType})`\n\t\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span className=\"uppercase text-gray-500 text-sm\">\n\t\t\t\t\t\t\t\t\t\t{entity.entityType}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tto={EntityService.makeHrefForView(entity)}\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\taria-label={`Open ${entity.name} in New Tab`}\n\t\t\t\t\t\t\t\t\tclassName=\"btn-icon w-auto\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span className=\"px-1.5\">\u2197</span>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\n\t\t\t\t\t{searchResults.length === 0 && (\n\t\t\t\t\t\t<div className=\"p-2 block text-gray-500\">No results</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default SearchEntities;\n", "interface Props {\n\tclassName?: string;\n}\n\nconst LoadingCircle = ({ className }: Props) => (\n\t<div className=\"h-6\">\n\t\t<i\n\t\t\tclassName={`material-icons animate-spin text-gray-500 ${className ?? \"\"}`}\n\t\t>\n\t\t\tscatter_plot\n\t\t</i>\n\t</div>\n);\n\nexport default LoadingCircle;\n", "export default function Footer() {\n\treturn (\n\t\t<div className=\"flex flex-col items-start w-full p-4 pt-7 pb-24 bg-gray-900 text-gray-100\">\n\t\t\t<div className=\"mb-4\">\n\t\t\t\tThis project is a collaboration between the{\" \"}\n\t\t\t\t<a href=\"https://www.itma.ie/\" target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\tIrish Traditional Music Archive \u2197\n\t\t\t\t</a>{\" \"}\n\t\t\t\tand{\" \"}\n\t\t\t\t<a href=\"https://dangurney.net\" target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\tDan Gurney \u2197\n\t\t\t\t</a>\n\t\t\t</div>\n\n\t\t\t<div className=\"mb-4\">\n\t\t\t\tSpecial thanks to{\" \"}\n\t\t\t\t<a href=\"https://thesession.org/\" target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\tThe Session \u2197\n\t\t\t\t</a>{\" \"}\n\t\t\t\tfor providing tune data.\n\t\t\t</div>\n\n\t\t\t<div className=\"mb-4\">\n\t\t\t\tAll of the code is open source on{\" \"}\n\t\t\t\t<a\n\t\t\t\t\thref=\"https://github.com/dgurns/trad-archive\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t>\n\t\t\t\t\tGitHub \u2197\n\t\t\t\t</a>\n\t\t\t\t. We welcome community contributors.\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<a\n\t\t\t\t\thref=\"https://github.com/dgurns/trad-archive/discussions\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t>\n\t\t\t\t\tShare feedback or report a bug \u2197\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n", "import { db } from \"~/utils/db.server\";\nimport { redirect } from \"@remix-run/node\";\n\nexport async function loader() {\n\tconst totalAudioItems = await db.audioItem.count();\n\tconst randomSkip = Math.round(Math.random() * (totalAudioItems - 1));\n\tconst [audioItem] = await db.audioItem.findMany({\n\t\ttake: 1,\n\t\tskip: randomSkip,\n\t});\n\treturn redirect(`/entities/audio-items/${audioItem.slug}`);\n}\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\n\nimport { db } from \"~/utils/db.server\";\nimport { ViewAs, type AudioItemWithRelations } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport Layout from \"~/components/Layout\";\nimport AudioItemComponent from \"~/components/AudioItem\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\n\ninterface LoaderData {\n\taudioItem: AudioItemWithRelations;\n}\n\nexport async function loader({\n\tparams,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst { slug } = params;\n\tconst audioItem = await db.audioItem.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t\tinclude: {\n\t\t\ttagsAsSubject: {\n\t\t\t\tinclude: {\n\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\tobjectTune: true,\n\t\t\t\t\trelationship: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\tcreatedByUser: true,\n\t\t\tupdatedByUser: true,\n\t\t\tcomments: {\n\t\t\t\tinclude: {\n\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t},\n\t\t\t\torderBy: {\n\t\t\t\t\tcreatedAt: \"asc\",\n\t\t\t\t},\n\t\t\t},\n\t\t\tsavedItems: true,\n\t\t},\n\t});\n\tif (!audioItem) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this AudioItem\",\n\t\t});\n\t}\n\treturn {\n\t\taudioItem,\n\t};\n}\n\nconst ViewAudioItemBySlug = () => {\n\tconst { audioItem } = useLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<div className=\"mb-6\">\n\t\t\t\t<Breadcrumb\n\t\t\t\t\titems={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: EntityService.makeReadableNamePlural(audioItem),\n\t\t\t\t\t\t\thref: EntityService.makeHrefForTopLevel(audioItem),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ label: audioItem.name },\n\t\t\t\t\t]}\n\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<AudioItemComponent\n\t\t\t\taudioItem={audioItem}\n\t\t\t\tviewAs={ViewAs.Cards}\n\t\t\t\tshowTitle={false}\n\t\t\t/>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewAudioItemBySlug;\n", "interface Props {\n\tchildren: React.ReactNode;\n}\n\nconst Layout = ({ children }: Props) => {\n\treturn (\n\t\t<div className=\"flex flex-col justify-start items-center\">\n\t\t\t<div className=\"w-full min-h-screen lg:max-w-5xl pb-44\">{children}</div>\n\t\t</div>\n\t);\n};\n\nexport default Layout;\n", "import { useCallback, useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\nimport type { Tag } from \"@prisma/client\";\n\nimport type { AudioItemWithRelations } from \"~/types\";\nimport DateTime from \"~/services/DateTime\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\n\nimport Tags from \"~/components/Tags\";\nimport SaveItemButton from \"~/components/SaveItemButton\";\nimport ViewCommentsButton from \"~/components/ViewCommentsButton\";\nimport TimeMarkers from \"~/components/TimeMarkers\";\n\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n\tshowTitle?: boolean;\n\tclassName?: string;\n}\nconst AudioItemCard = ({ audioItem, showTitle = true, className }: Props) => {\n\tconst {\n\t\tname,\n\t\tslug,\n\t\tdescription,\n\t\ttagsAsSubject: tags,\n\t\tstatus,\n\t\tcreatedByUser,\n\t\tcreatedAt,\n\t} = audioItem;\n\n\tconst {\n\t\tactiveAudioItem,\n\t\tsetActiveAudioItem,\n\t\tactiveItemDurationSeconds,\n\t\tplaybackPositionSeconds,\n\t} = usePlayerContext();\n\n\tconst audioItemIsInPlayer = activeAudioItem?.id === audioItem.id;\n\tconst tagsWithTimeMarkers: Tag[] = useMemo(() => {\n\t\tif (!Array.isArray(tags)) {\n\t\t\treturn [];\n\t\t}\n\t\treturn tags.filter(\n\t\t\t(tag) => typeof tag.subjectTimeMarkerSeconds === \"number\"\n\t\t);\n\t}, [tags]);\n\n\tconst onPlayPressed = useCallback(() => {\n\t\tsetActiveAudioItem(audioItem);\n\t}, [audioItem, setActiveAudioItem]);\n\n\tconst shouldShowPositionAndDuration =\n\t\taudioItemIsInPlayer &&\n\t\ttypeof playbackPositionSeconds === \"number\" &&\n\t\ttypeof activeItemDurationSeconds === \"number\";\n\tconst positionAndDuration = `${DateTime.formatSecondsAsDuration(\n\t\tplaybackPositionSeconds ?? 0\n\t)} / ${DateTime.formatSecondsAsDuration(activeItemDurationSeconds ?? 0)}`;\n\n\tconst isTakenDown = status === \"TAKEN_DOWN\";\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-col justify-start items-start bg-white shadow-md rounded p-4 pb-3 ${\n\t\t\t\tclassName ?? \"\"\n\t\t\t}`}\n\t\t>\n\t\t\t{showTitle && (\n\t\t\t\t<h2 className=\"mb-2\">\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto={`/entities/audio-items/${slug}`}\n\t\t\t\t\t\tclassName=\"no-underline text-gray-700\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{name}\n\t\t\t\t\t</Link>\n\t\t\t\t</h2>\n\t\t\t)}\n\n\t\t\t<div className=\"mb-4\">\n\t\t\t\t<Tags audioItem={audioItem} />\n\t\t\t</div>\n\n\t\t\t<div className=\"flex flex-col w-full border border-gray-200 rounded mb-2\">\n\t\t\t\t{isTakenDown ? (\n\t\t\t\t\t<div className=\"flex flex-row items-center px-4 py-6 text-gray-500\">\n\t\t\t\t\t\tThis Audio Item has been removed via an approved Takedown Request\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"flex flex-row justify-start items-center pr-4 h-16\">\n\t\t\t\t\t\t\t<div className=\"flex flex-1\">\n\t\t\t\t\t\t\t\t{audioItemIsInPlayer ? (\n\t\t\t\t\t\t\t\t\t<div className=\"pl-4 text-gray-500\">Playing</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tstyle={{ lineHeight: 0 }}\n\t\t\t\t\t\t\t\t\t\tonClick={onPlayPressed}\n\t\t\t\t\t\t\t\t\t\taria-label=\"Play\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i className=\"material-icons text-teal-600 hover:text-teal-800\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-6xl\">play_arrow</span>\n\t\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={`ml-4 text-gray-500 opacity-0 ${\n\t\t\t\t\t\t\t\t\t\tshouldShowPositionAndDuration\n\t\t\t\t\t\t\t\t\t\t\t? \"opacity-100 transition-opacity delay-500 duration-400\"\n\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{positionAndDuration}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{tagsWithTimeMarkers.length > 0 && (\n\t\t\t\t\t<div className=\"mx-4 mb-2 pt-3 border-t border-gray-200\">\n\t\t\t\t\t\t<TimeMarkers audioItem={audioItem} />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<div className=\"mt-4\">\n\t\t\t\t<div className=\"text-gray-500 text-sm flex flex-col sm:flex-row\">\n\t\t\t\t\tAdded\n\t\t\t\t\t{createdByUser && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t\tby{\" \"}\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tto={`/users/${createdByUser.id}`}\n\t\t\t\t\t\t\t\tclassName=\"flex flex-row px-0 sm:px-1\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{createdByUser.username}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}{\" \"}\n\t\t\t\t\t{DateTime.formatDateYearTime(createdAt)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"text-sm mt-1 text-gray-900 whitespace-pre-wrap\">\n\t\t\t\t\t{description || \"No description\"}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"border-t border-gray-200 mt-4 pt-3 w-full flex flex-row justify-between items-center\">\n\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\t<ViewCommentsButton audioItem={audioItem} />\n\n\t\t\t\t\t<div className=\"ml-2\">\n\t\t\t\t\t\t<SaveItemButton audioItem={audioItem} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AudioItemCard;\n", "import format from \"date-fns/format\";\nimport isToday from \"date-fns/isToday\";\nimport isYesterday from \"date-fns/isYesterday\";\n\n/**\n * @param {number} inputSeconds\n * \t- Number of seconds to convert to a duration\n * @returns {string}\n * \t- Readable duration in the format 10:01:01 (hours:minutes:seconds)\n */\nconst formatSecondsAsDuration = (inputSeconds: number) => {\n\tconst hours = Math.floor(inputSeconds / (60 * 60));\n\tconst minutes = Math.floor((inputSeconds - hours * 60 * 60) / 60);\n\tconst minutesAsTwoCharString = minutes < 10 ? `0${minutes}` : `${minutes}`;\n\tconst seconds = inputSeconds - hours * 60 * 60 - minutes * 60;\n\tconst secondsAsTwoCharString = seconds < 10 ? `0${seconds}` : `${seconds}`;\n\tlet output = `${minutes}:${secondsAsTwoCharString}`;\n\tif (hours > 0) {\n\t\toutput = `${hours}:${minutesAsTwoCharString}:${secondsAsTwoCharString}`;\n\t}\n\treturn output;\n};\n\nconst formatDateYear = (\n\tdate?: Date | number | string,\n\tshouldCapitalize: boolean | undefined = false\n) => {\n\tif (!date) {\n\t\treturn \"\";\n\t}\n\tconst dateObject = date instanceof Date ? date : new Date(date);\n\tif (isToday(dateObject)) {\n\t\treturn format(dateObject, `'${shouldCapitalize ? \"T\" : \"t\"}oday`);\n\t} else if (isYesterday(dateObject)) {\n\t\treturn format(dateObject, `'${shouldCapitalize ? \"Y\" : \"y\"}esterday`);\n\t} else {\n\t\treturn format(new Date(date), `LLLL d, y`);\n\t}\n};\n\nconst formatDateYearTime = (\n\tdate?: Date | number | string,\n\tshouldCapitalize: boolean | undefined = false\n) => {\n\tif (!date) {\n\t\treturn \"\";\n\t}\n\tconst dateObject = date instanceof Date ? date : new Date(date);\n\tif (isToday(dateObject)) {\n\t\treturn format(\n\t\t\tdateObject,\n\t\t\t`'${shouldCapitalize ? \"T\" : \"t\"}oday at' h:mm a`\n\t\t);\n\t} else if (isYesterday(dateObject)) {\n\t\treturn format(\n\t\t\tdateObject,\n\t\t\t`'${shouldCapitalize ? \"Y\" : \"y\"}esterday at' h:mm a`\n\t\t);\n\t} else {\n\t\treturn format(new Date(date), `LLLL d, y 'at' h:mm a`);\n\t}\n};\n\nconst DateTimeService = {\n\tformatSecondsAsDuration,\n\tformatDateYear,\n\tformatDateYearTime,\n};\nexport default DateTimeService;\n", "import { useMemo, useState, useCallback, useEffect } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport type { TagWithRelations, AudioItemWithRelations } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport TagService from \"~/services/Tag\";\n\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\n\ninterface TagProps {\n\ttag: TagWithRelations;\n}\nconst TagLink = ({ tag }: TagProps) => {\n\tconst [tooltipIsVisible, setTooltipIsVisible] = useState(false);\n\tconst [timeoutFunc, setTimeoutFunc] = useState<NodeJS.Timeout>();\n\n\tconst onMouseEnter = useCallback(() => {\n\t\tsetTimeoutFunc(setTimeout(() => setTooltipIsVisible(true), 400));\n\t}, []);\n\n\tconst onMouseLeave = useCallback(() => {\n\t\tif (timeoutFunc) {\n\t\t\tclearTimeout(timeoutFunc);\n\t\t\tsetTimeoutFunc(undefined);\n\t\t}\n\t\tsetTooltipIsVisible(false);\n\t}, [timeoutFunc]);\n\n\t// Clean up the timeout function when component unmounts\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (timeoutFunc) {\n\t\t\t\tclearTimeout(timeoutFunc);\n\t\t\t\tsetTimeoutFunc(undefined);\n\t\t\t}\n\t\t};\n\t}, [timeoutFunc]);\n\n\tconst { relationship } = tag;\n\tconst objectEntity = TagService.getObjectEntity(tag);\n\tconst href = EntityService.makeHrefForView(objectEntity);\n\tif (!objectEntity || !href) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<Link\n\t\t\tto={href}\n\t\t\tclassName=\"relative block p-1 px-2 mb-2 no-underline border border-teal-600 rounded hover:border-teal-800\"\n\t\t\tonMouseEnter={onMouseEnter}\n\t\t\tonMouseLeave={onMouseLeave}\n\t\t>\n\t\t\t{objectEntity.name}\n\t\t\t<div\n\t\t\t\tclassName={`${\n\t\t\t\t\ttooltipIsVisible ? \"flex\" : \"hidden\"\n\t\t\t\t} absolute -top-8 left-0 text-center px-2 py-1 text-sm whitespace-nowrap bg-gray-700 rounded text-white`}\n\t\t\t>\n\t\t\t\t{relationship.name} {objectEntity.entityType?.toUpperCase()}\n\t\t\t</div>\n\t\t</Link>\n\t);\n};\n\ninterface TagsProps {\n\taudioItem: AudioItemWithRelations;\n}\nconst Tags = ({ audioItem }: TagsProps) => {\n\tconst { tagsAsSubject } = audioItem;\n\n\tconst sortedTags = useMemo(() => {\n\t\tif (!Array.isArray(tagsAsSubject)) {\n\t\t\treturn [];\n\t\t}\n\t\tconst tagsWithoutTimeMarkers = tagsAsSubject.filter(\n\t\t\t(tag) => typeof tag.subjectTimeMarkerSeconds !== \"number\"\n\t\t);\n\t\treturn TagService.sort(tagsWithoutTimeMarkers);\n\t}, [tagsAsSubject]);\n\n\treturn (\n\t\t<div className=\"flex flex-row items-center flex-wrap\">\n\t\t\t{sortedTags.map((tag, index) => (\n\t\t\t\t<div className=\"mr-2\" key={index}>\n\t\t\t\t\t<TagLink tag={tag} />\n\t\t\t\t</div>\n\t\t\t))}\n\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\ttagsAsSubject && tagsAsSubject.length > 0 ? \"mb-2 ml-1\" : undefined\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<AddTagButton entity={audioItem} />\n\t\t\t</div>\n\n\t\t\t{tagsAsSubject && tagsAsSubject.length > 0 && (\n\t\t\t\t<div className=\"flex ml-1 mb-2\">\n\t\t\t\t\t<span className=\"text-gray-500 mr-1\">/</span>\n\t\t\t\t\t<EditTagsButton entity={audioItem} />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default Tags;\n", "import compareAsc from \"date-fns/compareAsc\";\nimport compareDesc from \"date-fns/compareDesc\";\nimport type {\n\tAudioItem,\n\tCollection,\n\tInstrument,\n\tPerson,\n\tPlace,\n\tTune,\n} from \"@prisma/client\";\nimport type { TagWithRelations } from \"~/types\";\n\nenum TagSortStrategy {\n\tCreatedAtThenTimeMarker = \"CREATED_AT_THEN_TIME_MARKER\",\n\tCreatedAtDesc = \"CREATED_AT_DESC\",\n}\n\n/**\n * Sort with the following logic:\n *   1) Tags without time markers, sorted by `createdAt` ASC\n *   2) Tags with time markers, sorted by time marker ASC\n */\nconst sortByCreatedAtThenTimeMarker = (tags: TagWithRelations[]) => {\n\tconst sortedTags = [...(tags ?? [])];\n\tsortedTags.sort((a, b) => {\n\t\tif (\n\t\t\ttypeof a.subjectTimeMarkerSeconds !== \"number\" &&\n\t\t\ttypeof b.subjectTimeMarkerSeconds !== \"number\"\n\t\t) {\n\t\t\treturn compareAsc(new Date(a.createdAt), new Date(b.createdAt));\n\t\t}\n\t\tif (\n\t\t\ttypeof a.subjectTimeMarkerSeconds !== \"number\" &&\n\t\t\ttypeof b.subjectTimeMarkerSeconds === \"number\"\n\t\t) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn (\n\t\t\t(a.subjectTimeMarkerSeconds ?? 0) - (b.subjectTimeMarkerSeconds ?? 0)\n\t\t);\n\t});\n\treturn sortedTags;\n};\n\n/**\n * Sort Tags by `createdAt` DESC\n */\nconst sortByCreatedAtDesc = (tags: TagWithRelations[]) => {\n\tconst sortedTags = [...(tags ?? [])];\n\tsortedTags.sort((a, b) => {\n\t\treturn compareDesc(new Date(a.createdAt), new Date(b.createdAt));\n\t});\n\treturn sortedTags;\n};\n\nconst sort = (\n\ttags: TagWithRelations[] = [],\n\tsortStrategy = TagSortStrategy.CreatedAtThenTimeMarker\n) => {\n\tswitch (sortStrategy) {\n\t\tcase TagSortStrategy.CreatedAtThenTimeMarker:\n\t\t\treturn sortByCreatedAtThenTimeMarker(tags);\n\t\tcase TagSortStrategy.CreatedAtDesc:\n\t\t\treturn sortByCreatedAtDesc(tags);\n\t\tdefault:\n\t\t\treturn tags;\n\t}\n};\n\nconst getObjectEntity = (\n\ttag: TagWithRelations\n): AudioItem | Collection | Instrument | Person | Place | Tune | null => {\n\treturn (\n\t\ttag.objectAudioItem ??\n\t\ttag.objectCollection ??\n\t\ttag.objectInstrument ??\n\t\ttag.objectPerson ??\n\t\ttag.objectPlace ??\n\t\ttag.objectTune\n\t);\n};\n\nexport default {\n\tTagSortStrategy,\n\tsort,\n\tgetObjectEntity,\n};\n", "import { useState, useCallback } from \"react\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\n\nimport type { Entity, Tag } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport useRequireLogin from \"~/hooks/useRequireLogin\";\nimport EntityService from \"~/services/Entity\";\n\nimport Modal from \"~/components/Modal\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport CreateTagForm from \"~/components/CreateTagForm\";\n\nconst PARENT_ENTITY_QUERY = gql`\n\tquery Entity($id: String!) {\n\t\tentity(id: $id) {\n\t\t\t...AudioItem\n\t\t\t...Collection\n\t\t\t...Person\n\t\t\t...Place\n\t\t\t...Instrument\n\t\t\t...Tune\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n\t${EntityFragments.collection}\n\t${EntityFragments.instrument}\n\t${EntityFragments.person}\n\t${EntityFragments.place}\n\t${EntityFragments.tune}\n`;\n\ninterface Props {\n\tentity: Entity;\n\tonSuccess?: (tag: Tag) => void;\n\tclassName?: string;\n\tchildren?: React.ReactChild | React.ReactChild[];\n}\nconst AddTagButton = ({ entity, onSuccess, className, children }: Props) => {\n\tconst { currentUser, requireLogin } = useRequireLogin();\n\n\tconst [addTagModalIsVisible, setAddTagModalIsVisible] = useState(false);\n\n\tconst [getParentEntity, { loading: parentEntityLoading }] = useLazyQuery<{\n\t\tentity: Entity;\n\t}>(PARENT_ENTITY_QUERY, {\n\t\tvariables: { id: entity.id },\n\t\tfetchPolicy: \"network-only\",\n\t});\n\n\tconst onCreateTagSuccess = useCallback(\n\t\tasync (tag: Tag) => {\n\t\t\t// Refetch the parent Entity so it has updated Tags\n\t\t\tawait getParentEntity();\n\t\t\tsetAddTagModalIsVisible(false);\n\t\t\tif (onSuccess) {\n\t\t\t\tonSuccess(tag);\n\t\t\t}\n\t\t},\n\t\t[getParentEntity, setAddTagModalIsVisible, onSuccess]\n\t);\n\n\tconst onAddTagClicked = useCallback(async () => {\n\t\tif (!currentUser) {\n\t\t\tconst redirectTo = EntityService.makeHrefForView(entity);\n\t\t\treturn await requireLogin({ redirectTo });\n\t\t}\n\t\tsetAddTagModalIsVisible(true);\n\t}, [currentUser, requireLogin, entity]);\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName={`btn-text whitespace-pre ${className ?? \"\"}`}\n\t\t\t\tonClick={onAddTagClicked}\n\t\t\t>\n\t\t\t\t{children ?? \"+ Add Tag\"}\n\t\t\t</button>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Add Tag\"\n\t\t\t\tisVisible={addTagModalIsVisible}\n\t\t\t\tonClose={() => setAddTagModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t{parentEntityLoading ? (\n\t\t\t\t\t<LoadingBlock />\n\t\t\t\t) : (\n\t\t\t\t\t<CreateTagForm entity={entity} onSuccess={onCreateTagSuccess} />\n\t\t\t\t)}\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default AddTagButton;\n", "import { gql } from \"@apollo/client\";\n\nexport const UserFragments = {\n\tuser: gql`\n\t\tfragment User on User {\n\t\t\tid\n\t\t\tusername\n\t\t\tcopyrightPermissionStatus\n\t\t\tverifiedPerson {\n\t\t\t\tid\n\t\t\t\tentityType\n\t\t\t\tslug\n\t\t\t\tname\n\t\t\t}\n\t\t\tcreatedAt\n\t\t}\n\t`,\n\tcurrentUser: gql`\n\t\tfragment CurrentUser on User {\n\t\t\tid\n\t\t\trole\n\t\t\temail\n\t\t\tusername\n\t\t\tcopyrightPermissionStatus\n\t\t}\n\t`,\n};\n\nexport const RelationshipFragments = {\n\trelationship: gql`\n\t\tfragment Relationship on Relationship {\n\t\t\tid\n\t\t\tname\n\t\t\tsubjectEntityType\n\t\t\tobjectEntityType\n\t\t}\n\t`,\n};\n\nexport const TagEntityFragments = {\n\ttagAudioItem: gql`\n\t\tfragment TagAudioItem on AudioItem {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t}\n\t`,\n\ttagInstrument: gql`\n\t\tfragment TagInstrument on Instrument {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t}\n\t`,\n\ttagPerson: gql`\n\t\tfragment TagPerson on Person {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t}\n\t`,\n\ttagPlace: gql`\n\t\tfragment TagPlace on Place {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t}\n\t`,\n\ttagTune: gql`\n\t\tfragment TagTune on Tune {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\ttype\n\t\t}\n\t`,\n\ttagCollection: gql`\n\t\tfragment TagCollection on Collection {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t}\n\t`,\n};\n\nexport const TagFragments = {\n\ttag: gql`\n\t\tfragment Tag on Tag {\n\t\t\tid\n\t\t\trelationship {\n\t\t\t\t...Relationship\n\t\t\t}\n\t\t\tsubjectEntity {\n\t\t\t\t...TagAudioItem\n\t\t\t\t...TagInstrument\n\t\t\t\t...TagPerson\n\t\t\t\t...TagPlace\n\t\t\t\t...TagTune\n\t\t\t\t...TagCollection\n\t\t\t}\n\t\t\tobjectEntity {\n\t\t\t\t...TagAudioItem\n\t\t\t\t...TagInstrument\n\t\t\t\t...TagPerson\n\t\t\t\t...TagPlace\n\t\t\t\t...TagTune\n\t\t\t\t...TagCollection\n\t\t\t}\n\t\t\tsubjectTimeMarkerSeconds\n\t\t\tcreatedByUser {\n\t\t\t\t...User\n\t\t\t}\n\t\t\tcreatedAt\n\t\t}\n\t\t${RelationshipFragments.relationship}\n\t\t${TagEntityFragments.tagAudioItem}\n\t\t${TagEntityFragments.tagInstrument}\n\t\t${TagEntityFragments.tagPerson}\n\t\t${TagEntityFragments.tagPlace}\n\t\t${TagEntityFragments.tagTune}\n\t\t${TagEntityFragments.tagCollection}\n\t\t${UserFragments.user}\n\t`,\n\ttagForEntity: gql`\n\t\tfragment TagForEntity on Tag {\n\t\t\tid\n\t\t\trelationship {\n\t\t\t\t...Relationship\n\t\t\t}\n\t\t\tobjectEntity {\n\t\t\t\t...TagAudioItem\n\t\t\t\t...TagInstrument\n\t\t\t\t...TagPerson\n\t\t\t\t...TagPlace\n\t\t\t\t...TagTune\n\t\t\t\t...TagCollection\n\t\t\t}\n\t\t\tsubjectTimeMarkerSeconds\n\t\t\tcreatedByUser {\n\t\t\t\t...User\n\t\t\t}\n\t\t\tcreatedAt\n\t\t}\n\t\t${RelationshipFragments.relationship}\n\t\t${TagEntityFragments.tagAudioItem}\n\t\t${TagEntityFragments.tagInstrument}\n\t\t${TagEntityFragments.tagPerson}\n\t\t${TagEntityFragments.tagPlace}\n\t\t${TagEntityFragments.tagTune}\n\t\t${TagEntityFragments.tagCollection}\n\t\t${UserFragments.user}\n\t`,\n};\n\nexport const EntityFragments = {\n\taudioItem: gql`\n\t\tfragment AudioItem on AudioItem {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...TagForEntity\n\t\t\t}\n\t\t\tcommentsCount\n\t\t\tisSavedByUser\n\t\t\tstatus\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\tverifiedPerson {\n\t\t\t\t\tid\n\t\t\t\t\tentityType\n\t\t\t\t\tslug\n\t\t\t\t}\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedAt\n\t\t\turlSource\n\t\t\titmaAtomSlug\n\t\t}\n\t\t${TagFragments.tagForEntity}\n\t`,\n\tperson: gql`\n\t\tfragment Person on Person {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...Tag\n\t\t\t}\n\t\t\tverifiedUser {\n\t\t\t\t...User\n\t\t\t}\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedAt\n\t\t\tfirstName\n\t\t\tmiddleName\n\t\t\tlastName\n\t\t}\n\t\t${TagFragments.tag}\n\t\t${UserFragments.user}\n\t`,\n\tinstrument: gql`\n\t\tfragment Instrument on Instrument {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...Tag\n\t\t\t}\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t}\n\t\t}\n\t\t${TagFragments.tag}\n\t`,\n\tplace: gql`\n\t\tfragment Place on Place {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...Tag\n\t\t\t}\n\t\t\tlatitude\n\t\t\tlongitude\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t}\n\t\t}\n\t\t${TagFragments.tag}\n\t`,\n\ttune: gql`\n\t\tfragment Tune on Tune {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...Tag\n\t\t\t}\n\t\t\ttheSessionTuneId\n\t\t\ttype\n\t\t\tmeter\n\t\t\tmode\n\t\t\tabc\n\t\t}\n\t\t${TagFragments.tag}\n\t`,\n\tcollection: gql`\n\t\tfragment Collection on Collection {\n\t\t\tid\n\t\t\tentityType\n\t\t\tname\n\t\t\tslug\n\t\t\taliases\n\t\t\tdescription\n\t\t\ttags {\n\t\t\t\t...Tag\n\t\t\t}\n\t\t\titmaAtomSlug\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedAt\n\t\t}\n\t\t${TagFragments.tag}\n\t\t${UserFragments.user}\n\t`,\n};\n\nexport const CommentFragments = {\n\tcomment: gql`\n\t\tfragment Comment on Comment {\n\t\t\tid\n\t\t\ttext\n\t\t\tparentAudioItem {\n\t\t\t\t...AudioItem\n\t\t\t}\n\t\t\tcreatedByUser {\n\t\t\t\t...User\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedAt\n\t\t}\n\t\t${EntityFragments.audioItem}\n\t\t${UserFragments.user}\n\t`,\n\tcommentWithoutParentEntity: gql`\n\t\tfragment CommentWithoutParentEntity on Comment {\n\t\t\tid\n\t\t\ttext\n\t\t\tcreatedByUser {\n\t\t\t\t...User\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedAt\n\t\t}\n\t\t${UserFragments.user}\n\t`,\n};\n\nexport const SavedItemFragments = {\n\tsavedItem: gql`\n\t\tfragment SavedItem on SavedItem {\n\t\t\tid\n\t\t\taudioItem {\n\t\t\t\t...AudioItem\n\t\t\t}\n\t\t\tcreatedAt\n\t\t}\n\t\t${EntityFragments.audioItem}\n\t`,\n};\n\nexport const TakedownRequestFragments = {\n\ttakedownRequest: gql`\n\t\tfragment TakedownRequest on TakedownRequest {\n\t\t\tid\n\t\t\tentity {\n\t\t\t\t...AudioItem\n\t\t\t}\n\t\t\ttype\n\t\t\tmessage\n\t\t\tstatus\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tupdatedAt\n\t\t}\n\t\t${EntityFragments.audioItem}\n\t`,\n\ttakedownRequestWithoutEntity: gql`\n\t\tfragment TakedownRequestWithoutEntity on TakedownRequest {\n\t\t\tid\n\t\t\ttype\n\t\t\tmessage\n\t\t\tstatus\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tupdatedAt\n\t\t}\n\t`,\n};\n\nexport const VerificationRequestFragments = {\n\tverificationRequest: gql`\n\t\tfragment VerificationRequest on VerificationRequest {\n\t\t\tid\n\t\t\tperson {\n\t\t\t\tid\n\t\t\t\tentityType\n\t\t\t\tname\n\t\t\t\tslug\n\t\t\t}\n\t\t\tpresignedImageDownloadUrl\n\t\t\tcopyrightPermissionStatus\n\t\t\tstatus\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tupdatedAt\n\t\t}\n\t`,\n};\n\nexport const SubmissionFragments = {\n\tsubmission: gql`\n\t\tfragment Submission on Submission {\n\t\t\tid\n\t\t\tstatus\n\t\t\tmaterialTypes\n\t\t\tuserControlsCopyright\n\t\t\tcopyrightDetails\n\t\t\tdescription\n\t\t\ts3DirectoryKey\n\t\t\tcreatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tcreatedAt\n\t\t\tupdatedByUser {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\temail\n\t\t\t}\n\t\t\tupdatedAt\n\t\t}\n\t`,\n};\n", "import { useLocation, useNavigate } from \"@remix-run/react\";\nimport type { User } from \"@prisma/client\";\n\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\n\ninterface RequireLoginFunctionArgs {\n\tredirectTo?: string;\n}\n\ninterface HookReturnValue {\n\trequireLogin: (args?: RequireLoginFunctionArgs) => void;\n\tcurrentUser: User | null | undefined;\n}\n\n// useRequireLogin returns a function that will navigate to the /login page\n// and then back to the given redirect path, if specified.\nconst useRequireLogin = (): HookReturnValue => {\n\tconst navigate = useNavigate();\n\tconst { pathname } = useLocation();\n\tconst [currentUser] = useCurrentUser();\n\n\tconst requireLogin = ({ redirectTo }: RequireLoginFunctionArgs = {}) => {\n\t\tconst params = new URLSearchParams({ redirectTo: redirectTo ?? pathname });\n\t\tnavigate(`/login?${params.toString()}`);\n\t};\n\n\treturn { requireLogin, currentUser };\n};\n\nexport default useRequireLogin;\n", "import { useEffect } from \"react\";\nimport type { LazyQueryResult } from \"@apollo/client\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\n\nimport type { User } from \"~/types\";\nimport { UserFragments } from \"~/fragments\";\n\nexport const CURRENT_USER_QUERY = gql`\n\tquery CurrentUser {\n\t\tcurrentUser {\n\t\t\t...CurrentUser\n\t\t}\n\t}\n\t${UserFragments.currentUser}\n`;\n\ninterface QueryData {\n\tcurrentUser: User;\n}\n\nconst useCurrentUser = (): [\n\tUser | null | undefined,\n\tLazyQueryResult<QueryData, {}>\n] => {\n\tconst [getCurrentUser, currentUserQuery] =\n\t\tuseLazyQuery<QueryData>(CURRENT_USER_QUERY);\n\n\tuseEffect(() => {\n\t\tgetCurrentUser();\n\t}, [getCurrentUser]);\n\n\tconst currentUser = currentUserQuery.data?.currentUser;\n\n\treturn [currentUser, currentUserQuery];\n};\n\nexport default useCurrentUser;\n", "interface Props {\n\tclassName?: string;\n}\n\nconst LoadingBlock = ({ className }: Props) => (\n\t<div\n\t\tclassName={`flex flex-col justify-start items-start w-full ${\n\t\t\tclassName ?? \"\"\n\t\t}`}\n\t>\n\t\t<div className=\"flex h-5 w-2/3 rounded bg-gray-300 mb-4 animate-pulse\" />\n\t\t<div className=\"flex h-12 w-full rounded bg-gray-300 mb-4 animate-pulse\" />\n\t\t<div className=\"flex h-5 w-5/12 rounded bg-gray-300 mb-4 animate-pulse\" />\n\t</div>\n);\n\nexport default LoadingBlock;\n", "import { useEffect, useState, useCallback } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { Entity, Tag } from \"~/types\";\nimport { EntityType } from \"~/types\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\nimport useTags from \"~/hooks/useTags\";\n\nimport SearchEntities from \"~/components/SearchEntities\";\nimport SelectRelationship from \"~/components/SelectRelationship\";\nimport TimestampInput from \"~/components/TimestampInput\";\n\nconst CREATE_TAG_MUTATION = gql`\n\tmutation CreateTag($input: CreateTagInput!) {\n\t\tcreateTag(input: $input) {\n\t\t\tid\n\t\t}\n\t}\n`;\ninterface CreateTagInput {\n\trelationshipId: string;\n\tsubjectEntityType: EntityType;\n\tsubjectEntityId: string;\n\tobjectEntityType: EntityType;\n\tobjectEntityId: string;\n\tsubjectTimeMarkerSeconds?: number;\n}\ninterface Props {\n\tentity: Entity;\n\tonSuccess: (tag: Tag) => void;\n}\nconst CreateTagForm = ({ entity, onSuccess }: Props) => {\n\tconst {\n\t\tactiveAudioItem,\n\t\tplaybackPositionSeconds,\n\t\tactiveItemDurationSeconds,\n\t} = usePlayerContext();\n\n\tconst isActiveAudioItem = activeAudioItem?.id === entity.id;\n\tconst defaultTimeMarkerValue = isActiveAudioItem\n\t\t? playbackPositionSeconds\n\t\t: undefined;\n\n\tconst [shouldAddTimeMarker, setShouldAddTimeMarker] = useState(false);\n\tconst [timeMarkerValue, setTimeMarkerValue] = useState<number | undefined>(\n\t\tdefaultTimeMarkerValue\n\t);\n\n\tconst [selectedEntity, setSelectedEntity] = useState<Entity>(null);\n\tconst [selectedRelationshipId, setSelectedRelationshipId] = useState(\"\");\n\tconst [shouldCreateInverseRelationship, setShouldCreateInverseRelationship] =\n\t\tuseState(true);\n\tconst [selectedInverseRelationshipId, setSelectedInverseRelationshipId] =\n\t\tuseState(\"\");\n\n\tconst [createTag, { data, error }] = useMutation<\n\t\t{ createTag: Tag },\n\t\t{ input: CreateTagInput }\n\t>(CREATE_TAG_MUTATION, {\n\t\terrorPolicy: \"all\",\n\t});\n\tconst [tagsAreCreating, setTagsAreCreating] = useState(false);\n\tconst [primaryCreatedTag, setPrimaryCreatedTag] = useState<Tag | undefined>(\n\t\tundefined\n\t);\n\tconst [tagsAreCreated, setTagsAreCreated] = useState(false);\n\n\tconst {\n\t\ttagsQuery: { refetch: refetchTopLevelTags },\n\t} = useTags({\n\t\tqueryOptions: { fetchPolicy: \"network-only\" },\n\t});\n\n\tuseEffect(() => {\n\t\tif (!tagsAreCreated) {\n\t\t\treturn;\n\t\t}\n\t\tconst onCreateSuccess = async (tag: Tag) => {\n\t\t\t// Now that a new Tag has been created, refetch the top-level `tags` query\n\t\t\tif (refetchTopLevelTags) {\n\t\t\t\tawait refetchTopLevelTags();\n\t\t\t}\n\t\t\tawait onSuccess(tag);\n\t\t};\n\t\tif (primaryCreatedTag) {\n\t\t\tonCreateSuccess(primaryCreatedTag);\n\t\t}\n\t}, [data, refetchTopLevelTags, onSuccess, tagsAreCreated, primaryCreatedTag]);\n\n\tconst onSelectEntity = useCallback(\n\t\t(selectedEntityFromResults: Entity) => {\n\t\t\tif (selectedEntityFromResults.id === entity.id) {\n\t\t\t\treturn window.alert(\"Cannot tag an entity with itself\");\n\t\t\t}\n\t\t\tsetSelectedEntity(selectedEntityFromResults);\n\t\t},\n\t\t[entity]\n\t);\n\n\tconst onNewEntityCreated = useCallback((entity: Entity) => {\n\t\tsetSelectedEntity(entity);\n\t}, []);\n\n\tconst onTimeMarkerValueChanged = useCallback(\n\t\t(newTimeMarkerValueSeconds: number) => {\n\t\t\tsetShouldAddTimeMarker(true);\n\t\t\tif (newTimeMarkerValueSeconds >= activeItemDurationSeconds) {\n\t\t\t\tsetTimeMarkerValue(activeItemDurationSeconds);\n\t\t\t} else if (newTimeMarkerValueSeconds <= 0) {\n\t\t\t\tsetTimeMarkerValue(0);\n\t\t\t} else {\n\t\t\t\tsetTimeMarkerValue(newTimeMarkerValueSeconds);\n\t\t\t}\n\t\t},\n\t\t[activeItemDurationSeconds]\n\t);\n\n\tconst onSelectRelationship = useCallback(\n\t\t(relationshipId: string) => {\n\t\t\tsetSelectedRelationshipId(relationshipId);\n\t\t},\n\t\t[setSelectedRelationshipId]\n\t);\n\n\tconst onSelectInverseRelationship = useCallback(\n\t\t(relationshipId: string) => {\n\t\t\tsetSelectedInverseRelationshipId(relationshipId);\n\t\t},\n\t\t[setSelectedInverseRelationshipId]\n\t);\n\n\tconst onCreateTagClicked = useCallback(async () => {\n\t\tsetTagsAreCreating(true);\n\n\t\tlet subjectTimeMarkerSeconds: number | undefined;\n\t\tif (shouldAddTimeMarker && !isNaN(timeMarkerValue)) {\n\t\t\tsubjectTimeMarkerSeconds = timeMarkerValue;\n\t\t}\n\t\tconst tagInput = {\n\t\t\trelationshipId: selectedRelationshipId,\n\t\t\tsubjectEntityType: entity.entityType,\n\t\t\tsubjectEntityId: entity.id,\n\t\t\tobjectEntityType: selectedEntity.entityType,\n\t\t\tobjectEntityId: selectedEntity.id,\n\t\t\tsubjectTimeMarkerSeconds,\n\t\t};\n\t\tconst primaryTagQuery = await createTag({ variables: { input: tagInput } });\n\t\tsetPrimaryCreatedTag(primaryTagQuery.data?.createTag);\n\n\t\tif (shouldCreateInverseRelationship && selectedInverseRelationshipId) {\n\t\t\tconst inverseTagInput = {\n\t\t\t\trelationshipId: selectedInverseRelationshipId,\n\t\t\t\tsubjectEntityType: selectedEntity.entityType,\n\t\t\t\tsubjectEntityId: selectedEntity.id,\n\t\t\t\tobjectEntityType: entity.entityType,\n\t\t\t\tobjectEntityId: entity.id,\n\t\t\t\tsubjectTimeMarkerSeconds,\n\t\t\t};\n\t\t\tawait createTag({ variables: { input: inverseTagInput } });\n\t\t}\n\n\t\tsetTagsAreCreating(false);\n\t\tsetTagsAreCreated(true);\n\t}, [\n\t\tselectedRelationshipId,\n\t\tshouldCreateInverseRelationship,\n\t\tselectedInverseRelationshipId,\n\t\tentity,\n\t\tselectedEntity,\n\t\tcreateTag,\n\t\tshouldAddTimeMarker,\n\t\ttimeMarkerValue,\n\t]);\n\n\tif (!selectedEntity) {\n\t\treturn (\n\t\t\t<SearchEntities\n\t\t\t\tonSelect={onSelectEntity}\n\t\t\t\tonNewEntityCreated={onNewEntityCreated}\n\t\t\t/>\n\t\t);\n\t}\n\n\t// Only show the time marker option if the subject entity is an AudioItem\n\tconst shouldShowTimeMarkerCheckbox =\n\t\tentity.entityType === EntityType.AudioItem &&\n\t\ttypeof defaultTimeMarkerValue !== \"undefined\";\n\n\treturn (\n\t\t<>\n\t\t\t<div>What is the relationship between these two entities?</div>\n\n\t\t\t<div className=\"mt-2\">\n\t\t\t\t<SelectRelationship\n\t\t\t\t\tsubjectEntity={entity}\n\t\t\t\t\tobjectEntity={selectedEntity}\n\t\t\t\t\tonSelect={onSelectRelationship}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<div className=\"mt-6 flex flex-row items-center justify-start\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tid=\"reverse-relationship\"\n\t\t\t\t\tchecked={shouldCreateInverseRelationship}\n\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\tsetShouldCreateInverseRelationship(event.target.checked)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<label htmlFor=\"reverse-relationship\" className=\"ml-2\">\n\t\t\t\t\tAlso create the inverse relationship\n\t\t\t\t</label>\n\t\t\t</div>\n\n\t\t\t{shouldCreateInverseRelationship && (\n\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t<SelectRelationship\n\t\t\t\t\t\tsubjectEntity={selectedEntity}\n\t\t\t\t\t\tobjectEntity={entity}\n\t\t\t\t\t\tonSelect={onSelectInverseRelationship}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{shouldShowTimeMarkerCheckbox && (\n\t\t\t\t<div className=\"mt-6 flex flex-row items-start justify-start\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tid=\"time-marker\"\n\t\t\t\t\t\tclassName=\"mt-1\"\n\t\t\t\t\t\tchecked={shouldAddTimeMarker}\n\t\t\t\t\t\tonChange={(event) => setShouldAddTimeMarker(event.target.checked)}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor=\"time-marker\" className=\"ml-2\">\n\t\t\t\t\t\t<div className=\"flex flex-col items-start\">\n\t\t\t\t\t\t\t<div className=\"mb-2\">Mark this Tag at time:</div>\n\t\t\t\t\t\t\t<TimestampInput\n\t\t\t\t\t\t\t\tvalueInSeconds={timeMarkerValue}\n\t\t\t\t\t\t\t\tonChange={onTimeMarkerValueChanged}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<button\n\t\t\t\tclassName=\"btn mt-6\"\n\t\t\t\tonClick={onCreateTagClicked}\n\t\t\t\tdisabled={tagsAreCreating || !selectedRelationshipId}\n\t\t\t>\n\t\t\t\tSave\n\t\t\t</button>\n\t\t\t{error && <div className=\"text-red-600 mt-4\">{error.message}</div>}\n\t\t</>\n\t);\n};\n\nexport default CreateTagForm;\n", "import { useEffect, useCallback } from \"react\";\nimport type {\n\tLazyQueryResult,\n\tQueryLazyOptions,\n\tLazyQueryHookOptions,\n} from \"@apollo/client\";\nimport { useLazyQuery, gql } from \"@apollo/client\";\nimport type { Tag } from \"~/types\";\nimport { TagFragments } from \"~/fragments\";\n\nexport const TAGS_QUERY = gql`\n\tquery Tags($input: TagsInput!) {\n\t\ttags(input: $input) {\n\t\t\t...Tag\n\t\t}\n\t}\n\t${TagFragments.tag}\n`;\n\ninterface QueryData {\n\ttags: Tag[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\ttake?: number;\n\t\tskip?: number;\n\t};\n}\ninterface HookArgs {\n\tresultsPerPage?: number;\n\tqueryOptions?: LazyQueryHookOptions<QueryData, QueryVariables>;\n}\ninterface HookReturnValue {\n\ttags: Tag[];\n\tgetTags: (options?: QueryLazyOptions<QueryVariables>) => void;\n\ttagsQuery: LazyQueryResult<QueryData, QueryVariables>;\n\tfetchNextPageOfTags: () => void;\n}\n\nconst useTags = ({\n\tresultsPerPage = 10,\n\tqueryOptions = {},\n}: HookArgs = {}): HookReturnValue => {\n\tconst [getTags, tagsQuery] = useLazyQuery<QueryData, QueryVariables>(\n\t\tTAGS_QUERY,\n\t\t{\n\t\t\tnotifyOnNetworkStatusChange: true,\n\t\t\t...queryOptions,\n\t\t}\n\t);\n\tconst { data, fetchMore } = tagsQuery;\n\n\tuseEffect(() => {\n\t\tgetTags({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\ttake: resultsPerPage,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}, [getTags, resultsPerPage]);\n\n\tconst tags = data?.tags;\n\n\tconst fetchNextPageOfTags = useCallback(() => {\n\t\tfetchMore({\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\ttake: resultsPerPage,\n\t\t\t\t\tskip: tags.length ?? 0,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}, [fetchMore, resultsPerPage, tags]);\n\n\treturn {\n\t\ttags: tagsQuery.data?.tags,\n\t\tgetTags,\n\t\ttagsQuery,\n\t\tfetchNextPageOfTags,\n\t};\n};\n\nexport default useTags;\n", "import { useEffect, useState } from \"react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nimport type { Entity, Relationship } from \"~/types\";\nimport { RelationshipFragments } from \"~/fragments\";\n\nimport LoadingCircle from \"./LoadingCircle\";\n\nconst SEARCH_RELATIONSHIPS_QUERY = gql`\n\tquery SearchRelationships(\n\t\t$subjectEntityType: String!\n\t\t$objectEntityType: String!\n\t) {\n\t\tsearchRelationships(\n\t\t\tsubjectEntityType: $subjectEntityType\n\t\t\tobjectEntityType: $objectEntityType\n\t\t) {\n\t\t\t...Relationship\n\t\t}\n\t}\n\t${RelationshipFragments.relationship}\n`;\n\ninterface Props {\n\tsubjectEntity: Entity;\n\tobjectEntity: Entity;\n\tonSelect: (relationshipId: string) => void;\n}\nconst SelectRelationship = ({\n\tsubjectEntity,\n\tobjectEntity,\n\tonSelect,\n}: Props) => {\n\tconst [selectedRelationshipId, setSelectedRelationshipId] = useState(\"\");\n\n\tconst { loading, data, error } = useQuery<{\n\t\tsearchRelationships: Relationship[];\n\t}>(SEARCH_RELATIONSHIPS_QUERY, {\n\t\tvariables: {\n\t\t\tsubjectEntityType: subjectEntity.entityType,\n\t\t\tobjectEntityType: objectEntity.entityType,\n\t\t},\n\t\tfetchPolicy: \"no-cache\",\n\t});\n\tconst relationshipOptions = data?.searchRelationships ?? [];\n\n\tuseEffect(() => {\n\t\tif (relationshipOptions.length > 0) {\n\t\t\tonSelectRelationshipId(relationshipOptions[0].id);\n\t\t}\n\t}, [relationshipOptions]);\n\n\tconst onSelectRelationshipId = (relationshipId: string) => {\n\t\tsetSelectedRelationshipId(relationshipId);\n\t\tonSelect(relationshipId);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"mb-2 text-gray-500\">\n\t\t\t\t<span className=\"text-sm uppercase pr-2\">\n\t\t\t\t\t{subjectEntity.entityType}\n\t\t\t\t</span>\n\t\t\t\t{subjectEntity.name}\n\t\t\t</div>\n\n\t\t\t{loading ? (\n\t\t\t\t<LoadingCircle />\n\t\t\t) : (\n\t\t\t\t<select\n\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\tvalue={selectedRelationshipId}\n\t\t\t\t\tonChange={(event) => onSelectRelationshipId(event.target.value)}\n\t\t\t\t>\n\t\t\t\t\t{relationshipOptions.map((relationship, index) => (\n\t\t\t\t\t\t<option value={relationship.id} key={index}>\n\t\t\t\t\t\t\t{relationship.name}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t))}\n\t\t\t\t</select>\n\t\t\t)}\n\n\t\t\t<div className=\"text-gray-500\">\n\t\t\t\t<span className=\"text-sm uppercase pr-2\">\n\t\t\t\t\t{objectEntity.entityType}\n\t\t\t\t</span>\n\t\t\t\t{objectEntity.name}\n\t\t\t</div>\n\n\t\t\t{error && <div className=\"text-red-600 mt-4\">{error}</div>}\n\t\t</>\n\t);\n};\n\nexport default SelectRelationship;\n", "interface Props {\n\tvalueInSeconds: number;\n\tonChange: (valueInSeconds: number) => void;\n\tclassName?: string;\n}\n\nconst TimestampInput = ({ valueInSeconds, onChange, className }: Props) => {\n\tconst hrs = Math.floor(valueInSeconds / 3600);\n\tconst mins = Math.floor((valueInSeconds - hrs * 3600) / 60);\n\tconst secs = valueInSeconds - hrs * 3600 - mins * 60;\n\n\tconst onChangeHrs = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst newHrs = parseInt(event.target.value, 10) || 0;\n\t\tconst newValueInSeconds = newHrs * 3600 + mins * 60 + secs;\n\t\tonChange(newValueInSeconds);\n\t};\n\n\tconst onChangeMins = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst newMins = parseInt(event.target.value, 10) || 0;\n\t\tconst newValueInSeconds = hrs * 3600 + newMins * 60 + secs;\n\t\tonChange(newValueInSeconds);\n\t};\n\n\tconst onChangeSecs = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst newSecs = parseInt(event.target.value, 10) || 0;\n\t\tconst newValueInSeconds = hrs * 3600 + mins * 60 + newSecs;\n\t\tonChange(newValueInSeconds);\n\t};\n\n\treturn (\n\t\t<div className={`flex flex-row items-center ${className ?? \"\"}`}>\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tid=\"hrs\"\n\t\t\t\tclassName=\"flex max-w-[50px]\"\n\t\t\t\tvalue={hrs || \"\"}\n\t\t\t\tplaceholder=\"0\"\n\t\t\t\tonChange={onChangeHrs}\n\t\t\t/>\n\t\t\t<label htmlFor=\"hours\" className=\"px-2\">\n\t\t\t\thr{hrs !== 1 && \"s\"}\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tid=\"mins\"\n\t\t\t\tclassName=\"flex max-w-[55px]\"\n\t\t\t\tvalue={mins || \"\"}\n\t\t\t\tplaceholder=\"0\"\n\t\t\t\tonChange={onChangeMins}\n\t\t\t/>\n\t\t\t<label htmlFor=\"mins\" className=\"px-2\">\n\t\t\t\tmin{mins !== 1 ? \"s\" : \"\"}\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tid=\"secs\"\n\t\t\t\tclassName=\"flex max-w-[55px]\"\n\t\t\t\tvalue={secs || \"\"}\n\t\t\t\tplaceholder=\"0\"\n\t\t\t\tonChange={onChangeSecs}\n\t\t\t/>\n\t\t\t<label htmlFor=\"secs\" className=\"px-2\">\n\t\t\t\tsec{secs !== 1 ? \"s\" : \"\"}\n\t\t\t</label>\n\t\t</div>\n\t);\n};\n\nexport default TimestampInput;\n", "import { useState, useCallback, useEffect, useMemo } from \"react\";\nimport { useLazyQuery, useMutation, gql } from \"@apollo/client\";\n\nimport type { Entity } from \"~/types\";\nimport { EntityFragments } from \"~/fragments\";\nimport useRequireLogin from \"~/hooks/useRequireLogin\";\nimport useTags from \"~/hooks/useTags\";\nimport DateTimeService from \"~/services/DateTime\";\nimport TagService from \"~/services/Tag\";\n\nimport Modal from \"~/components/Modal\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\n\nconst PARENT_ENTITY_QUERY = gql`\n\tquery Entity($id: String!) {\n\t\tentity(id: $id) {\n\t\t\t...AudioItem\n\t\t\t...Collection\n\t\t\t...Person\n\t\t\t...Place\n\t\t\t...Instrument\n\t\t\t...Tune\n\t\t}\n\t}\n\t${EntityFragments.audioItem}\n\t${EntityFragments.collection}\n\t${EntityFragments.instrument}\n\t${EntityFragments.person}\n\t${EntityFragments.place}\n\t${EntityFragments.tune}\n`;\n\nconst DELETE_TAG_MUTATION = gql`\n\tmutation DeleteTag($id: String!) {\n\t\tdeleteTag(id: $id)\n\t}\n`;\n\ninterface Props {\n\tentity: Entity;\n\tclassName?: string;\n\tchildren?: React.ReactChild | React.ReactChild[];\n\tonSuccess?: () => void;\n}\nconst EditTagsButton = ({ entity, className, children, onSuccess }: Props) => {\n\tconst { currentUser, requireLogin } = useRequireLogin();\n\n\tconst [editTagsModalIsVisible, setEditTagsModalIsVisible] = useState(false);\n\n\tconst [getParentEntity, { loading: parentEntityLoading }] = useLazyQuery<{\n\t\tentity: Entity;\n\t}>(PARENT_ENTITY_QUERY, {\n\t\tvariables: { id: entity.id },\n\t\tfetchPolicy: \"network-only\",\n\t});\n\n\tconst [deleteTag, { loading: deleteTagLoading, data: deleteTagData }] =\n\t\tuseMutation(DELETE_TAG_MUTATION, { errorPolicy: \"all\" });\n\n\tconst {\n\t\ttagsQuery: { refetch: refetchTopLevelTags },\n\t} = useTags();\n\n\tconst onDeleteTag = useCallback(\n\t\tasync (id: string) => {\n\t\t\tif (!currentUser) {\n\t\t\t\treturn await requireLogin();\n\t\t\t}\n\t\t\tif (window.confirm(\"Are you sure you want to delete this Tag?\")) {\n\t\t\t\tdeleteTag({ variables: { id } });\n\t\t\t}\n\t\t},\n\t\t[deleteTag, currentUser, requireLogin]\n\t);\n\n\tuseEffect(() => {\n\t\tconst onDeleteSuccess = async () => {\n\t\t\tawait Promise.all([refetchTopLevelTags(), getParentEntity()]);\n\t\t\tsetEditTagsModalIsVisible(false);\n\t\t};\n\t\tif (deleteTagData?.deleteTag) {\n\t\t\tonDeleteSuccess();\n\t\t\tif (onSuccess) {\n\t\t\t\tonSuccess();\n\t\t\t}\n\t\t}\n\t}, [\n\t\tdeleteTagData,\n\t\tgetParentEntity,\n\t\tsetEditTagsModalIsVisible,\n\t\trefetchTopLevelTags,\n\t\tonSuccess,\n\t]);\n\n\tconst { tags } = entity;\n\n\tconst sortedTags = useMemo(() => {\n\t\tif (!Array.isArray(tags)) {\n\t\t\treturn [];\n\t\t}\n\t\treturn TagService.sort(tags);\n\t}, [tags]);\n\n\tif (!sortedTags || sortedTags.length === 0) {\n\t\treturn null;\n\t}\n\n\tconst isLoading = parentEntityLoading || deleteTagLoading;\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName={`btn-text whitespace-pre ${className ?? \"\"}`}\n\t\t\t\tonClick={() => setEditTagsModalIsVisible(true)}\n\t\t\t>\n\t\t\t\t{children ?? \"Edit Tags\"}\n\t\t\t</button>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Edit Tags\"\n\t\t\t\tisVisible={editTagsModalIsVisible}\n\t\t\t\tonClose={() => setEditTagsModalIsVisible(false)}\n\t\t\t>\n\t\t\t\t{isLoading ? (\n\t\t\t\t\t<LoadingBlock />\n\t\t\t\t) : (\n\t\t\t\t\tsortedTags.map((tag, index) => {\n\t\t\t\t\t\tconst { id, relationship, objectEntity, subjectTimeMarkerSeconds } =\n\t\t\t\t\t\t\ttag;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"flex flex-row items-start justify-start\"\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"flex flex-col flex-1 justify-start align-start mb-4 pr-4\">\n\t\t\t\t\t\t\t\t\t<div className=\"italic text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t{relationship.name}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"uppercase text-sm text-gray-500 pr-2\">\n\t\t\t\t\t\t\t\t\t\t{objectEntity.entityType}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{objectEntity.name}\n\t\t\t\t\t\t\t\t\t{typeof subjectTimeMarkerSeconds === \"number\" && (\n\t\t\t\t\t\t\t\t\t\t<span className=\"italic text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t{`at ${DateTimeService.formatSecondsAsDuration(\n\t\t\t\t\t\t\t\t\t\t\t\tsubjectTimeMarkerSeconds\n\t\t\t\t\t\t\t\t\t\t\t)}`}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button className=\"btn-text\" onClick={() => onDeleteTag(id)}>\n\t\t\t\t\t\t\t\t\tDelete Tag\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})\n\t\t\t\t)}\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default EditTagsButton;\n", "import { useFetcher } from \"@remix-run/react\";\nimport { type AudioItemWithRelations } from \"~/types\";\n\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n}\nexport default function SaveItemButton({ audioItem }: Props) {\n\tconst fetcher = useFetcher<{ error?: string; ok: boolean }>();\n\n\tfunction onButtonClicked() {\n\t\tfetcher.submit(\n\t\t\t{ audioItemId: audioItem.id },\n\t\t\t{ method: \"post\", action: \"/saved-items\" }\n\t\t);\n\t}\n\n\tconst isSaved = audioItem.savedItems.length === 1;\n\n\treturn (\n\t\t<button\n\t\t\tclassName={`btn-secondary ${\n\t\t\t\tisSaved ? \"btn-secondary-active\" : \"\"\n\t\t\t} pl-0.5`}\n\t\t\tonClick={onButtonClicked}\n\t\t\tdisabled={fetcher.state !== \"idle\"}\n\t\t\taria-label={isSaved ? \"Unsave\" : \"Save\"}\n\t\t>\n\t\t\t{isSaved ? (\n\t\t\t\t<>\n\t\t\t\t\t<i className=\"material-icons\">bookmark</i>\n\t\t\t\t\tSaved\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<i className=\"material-icons\">bookmark_border</i>\n\t\t\t\t\tSave\n\t\t\t\t</>\n\t\t\t)}\n\t\t</button>\n\t);\n}\n", "import { useCallback, useState, useEffect, useRef } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport type { AudioItemWithRelations } from \"~/types\";\nimport DateTimeService from \"~/services/DateTime\";\n\nimport Modal from \"~/components/Modal\";\nimport CreateCommentForm from \"~/components/CreateCommentForm\";\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n}\nconst ViewCommentsButton = ({ audioItem }: Props) => {\n\tconst { comments } = audioItem;\n\tconst commentsCount = comments.length;\n\n\tconst commentsRef = useRef<HTMLDivElement>();\n\tconst [modalIsVisible, setModalIsVisible] = useState(false);\n\n\tconst onViewCommentsButtonClicked = useCallback(async () => {\n\t\tsetModalIsVisible(true);\n\t}, []);\n\n\tconst onCloseModal = useCallback(() => setModalIsVisible(false), []);\n\n\tuseEffect(() => {\n\t\t// If comments have loaded, scroll to the bottom\n\t\tif (!commentsRef.current) {\n\t\t\treturn;\n\t\t}\n\t\tconst commentsHeight = commentsRef.current?.scrollHeight ?? 0;\n\t\tif (modalIsVisible && commentsHeight > 0 && comments.length > 0) {\n\t\t\tcommentsRef.current.scrollTo({\n\t\t\t\ttop: commentsHeight,\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t});\n\t\t}\n\t}, [comments, modalIsVisible]);\n\n\tconst modalTitle =\n\t\tcommentsCount > 0\n\t\t\t? `${commentsCount} Comment${commentsCount === 1 ? \"\" : \"s\"}`\n\t\t\t: \"No Comments\";\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName=\"btn-secondary\"\n\t\t\t\tonClick={onViewCommentsButtonClicked}\n\t\t\t\taria-label=\"View Comments\"\n\t\t\t>\n\t\t\t\t<i className=\"material-icons mr-0.5\">chat_bubble_outline</i>\n\t\t\t\t{commentsCount > 0 ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{commentsCount}\n\t\t\t\t\t\t<span className=\"hidden md:block md:pl-1\">\n\t\t\t\t\t\t\tComment{commentsCount === 1 ? \"\" : \"s\"}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className=\"md:hidden\">0</span>\n\t\t\t\t\t\t<span className=\"hidden md:block\">No Comments</span>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</button>\n\n\t\t\t<Modal\n\t\t\t\ttitle={modalTitle}\n\t\t\t\tisVisible={modalIsVisible}\n\t\t\t\tonClose={onCloseModal}\n\t\t\t>\n\t\t\t\t{comments.length > 0 && (\n\t\t\t\t\t<div className=\"max-h-1/2 overflow-auto\">\n\t\t\t\t\t\t{comments.map(({ createdByUser, createdAt, text }, index) => (\n\t\t\t\t\t\t\t<div className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t\t<div className=\"text-gray-500 text-sm mb-1 flex flex-row items-center\">\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tto={`/users/${createdByUser?.id}`}\n\t\t\t\t\t\t\t\t\t\tclassName=\"mr-1 flex flex-row items-center\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span>{createdByUser?.username}</span>\n\t\t\t\t\t\t\t\t\t</Link>{\" \"}\n\t\t\t\t\t\t\t\t\t{DateTimeService.formatDateYearTime(createdAt)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"text-sm whitespace-pre-line text-gray-900\">\n\t\t\t\t\t\t\t\t\t{text}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"mt-4\">\n\t\t\t\t\t<CreateCommentForm parentAudioItem={audioItem} />\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default ViewCommentsButton;\n", "import { useFetcher } from \"@remix-run/react\";\nimport type { AudioItem, Comment } from \"@prisma/client\";\nimport { useEffect, useRef } from \"react\";\n\ninterface Props {\n\tparentAudioItem: AudioItem;\n}\nconst CreateCommentForm = ({ parentAudioItem }: Props) => {\n\tconst formRef = useRef<HTMLFormElement>(null);\n\tconst fetcher = useFetcher<{ error?: string; comment?: Comment }>();\n\n\tuseEffect(() => {\n\t\tif (fetcher.type === \"done\" && fetcher.data.comment) {\n\t\t\tformRef.current?.reset();\n\t\t}\n\t}, [fetcher]);\n\n\treturn (\n\t\t<fetcher.Form\n\t\t\tref={formRef}\n\t\t\tmethod=\"post\"\n\t\t\taction=\"/comments\"\n\t\t\tclassName=\"w-full\"\n\t\t>\n\t\t\t<textarea\n\t\t\t\tplaceholder=\"Add a comment...\"\n\t\t\t\tautoFocus\n\t\t\t\trows={3}\n\t\t\t\trequired\n\t\t\t\tminLength={1}\n\t\t\t\tname=\"text\"\n\t\t\t/>\n\t\t\t<input\n\t\t\t\ttype=\"hidden\"\n\t\t\t\tname=\"parentAudioItemId\"\n\t\t\t\tvalue={parentAudioItem.id}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\tclassName=\"btn mt-3 w-auto\"\n\t\t\t\ttype=\"submit\"\n\t\t\t\tdisabled={fetcher.state !== \"idle\"}\n\t\t\t>\n\t\t\t\tAdd Comment\n\t\t\t</button>\n\t\t\t{fetcher.data?.error && (\n\t\t\t\t<div className=\"text-red-600 mt-3\">{fetcher.data.error}</div>\n\t\t\t)}\n\t\t</fetcher.Form>\n\t);\n};\n\nexport default CreateCommentForm;\n", "import { useCallback, useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport type { AudioItemWithRelations, TagWithRelations } from \"~/types\";\nimport { EntityType } from \"~/types\";\nimport DateTime from \"~/services/DateTime\";\nimport Entity from \"~/services/Entity\";\nimport TagService from \"~/services/Tag\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\nimport type { Tune } from \"@prisma/client\";\n\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n}\nconst TimeMarkers = ({ audioItem }: Props) => {\n\tconst { tagsAsSubject } = audioItem;\n\n\tconst {\n\t\tactiveAudioItem,\n\t\tsetActiveAudioItem,\n\t\tplaybackPositionSeconds,\n\t\tsetSeekPositionSeconds,\n\t} = usePlayerContext();\n\n\ttype TimeMarkersWithTags = {\n\t\t[timeMarker: string]: TagWithRelations[];\n\t};\n\tconst timeMarkersWithTags: TimeMarkersWithTags = useMemo(() => {\n\t\tconst output: Record<number, TagWithRelations[]> = {};\n\t\tif (!tagsAsSubject) {\n\t\t\treturn output;\n\t\t}\n\t\t// Filter out tags without time markers\n\t\tconst filteredTags = tagsAsSubject.filter(\n\t\t\t(tag) => typeof tag.subjectTimeMarkerSeconds === \"number\"\n\t\t);\n\t\t// Sort array so that time markers are ascending, and thus object keys will\n\t\t// be created in ascending order\n\t\tfilteredTags.sort(\n\t\t\t(a, b) =>\n\t\t\t\ta.subjectTimeMarkerSeconds ?? 0 - (b.subjectTimeMarkerSeconds ?? 0)\n\t\t);\n\t\tfilteredTags.forEach((tag) => {\n\t\t\tif (typeof tag.subjectTimeMarkerSeconds !== \"number\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst existingTagsAtTimeMarker: TagWithRelations[] | undefined =\n\t\t\t\toutput[tag.subjectTimeMarkerSeconds] ?? [];\n\t\t\toutput[tag.subjectTimeMarkerSeconds] = [...existingTagsAtTimeMarker, tag];\n\t\t});\n\t\treturn output;\n\t}, [tagsAsSubject]);\n\n\tconst onTimeMarkerClicked = useCallback(\n\t\t(event, timeMarker) => {\n\t\t\tif (event.target.id === \"time-marker-tag-link\") {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (activeAudioItem?.id !== audioItem.id) {\n\t\t\t\tsetActiveAudioItem(audioItem);\n\t\t\t}\n\t\t\tsetSeekPositionSeconds(parseInt(timeMarker));\n\t\t},\n\t\t[audioItem, activeAudioItem, setActiveAudioItem, setSeekPositionSeconds]\n\t);\n\n\tconst audioItemIsInPlayer = activeAudioItem?.id === audioItem.id;\n\tconst activeTimeMarker: string | undefined = useMemo(() => {\n\t\tif (!audioItemIsInPlayer) {\n\t\t\treturn undefined;\n\t\t}\n\t\tlet result: string | undefined;\n\t\tObject.keys(timeMarkersWithTags).forEach((timeMarker) => {\n\t\t\tif (parseInt(timeMarker) <= (playbackPositionSeconds ?? 0)) {\n\t\t\t\tresult = timeMarker;\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}, [audioItemIsInPlayer, timeMarkersWithTags, playbackPositionSeconds]);\n\n\treturn (\n\t\t<div className=\"flex flex-col\">\n\t\t\t{Object.entries(timeMarkersWithTags).map(\n\t\t\t\t([timeMarker, tagsAsSubjectAtTimeMarker], index) => {\n\t\t\t\t\tconst isActive = activeTimeMarker === timeMarker;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"flex flex-row items-start md:items-center justify-start mb-2 last:mb-1 text-sm\"\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"flex flex-row w-16 flex-shrink-0\">\n\t\t\t\t\t\t\t\t<div className=\"w-3 text-left\">{isActive && \">\"}</div>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\t\t\t\t\tonClick={(event) => onTimeMarkerClicked(event, timeMarker)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{DateTime.formatSecondsAsDuration(parseInt(timeMarker))}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex flex-col md:flex-row\">\n\t\t\t\t\t\t\t\t{tagsAsSubjectAtTimeMarker.map((tag, index) => {\n\t\t\t\t\t\t\t\t\tconst objectEntity = TagService.getObjectEntity(tag);\n\t\t\t\t\t\t\t\t\tif (!objectEntity) {\n\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<span className=\"flex flex-row items-center\" key={index}>\n\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\tto={Entity.makeHrefForView(objectEntity)}\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"time-marker-tag-link\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{objectEntity.name}\n\t\t\t\t\t\t\t\t\t\t\t\t{objectEntity.entityType === EntityType.Tune\n\t\t\t\t\t\t\t\t\t\t\t\t\t? ` (${(objectEntity as Tune).type})`\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t{index !== tagsAsSubjectAtTimeMarker.length - 1 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"hidden md:block mr-1\">,</span>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default TimeMarkers;\n", "import { useCallback, useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\nimport { type Tune } from \"@prisma/client\";\n\nimport type { AudioItemWithRelations } from \"~/types\";\nimport { EntityStatus, EntityType } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport TagService from \"~/services/Tag\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\n\nimport AddTagButton from \"~/components/AddTagButton\";\nimport EditTagsButton from \"~/components/EditTagsButton\";\nimport Menu from \"~/components/Menu\";\nimport SaveItemButton from \"~/components/SaveItemButton\";\nimport ViewCommentsButton from \"~/components/ViewCommentsButton\";\nimport RequestTakedownButton from \"~/components/RequestTakedownButton\";\n\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n\tclassName?: string;\n}\nconst AudioItemCompact = ({ audioItem, className }: Props) => {\n\tconst { name, slug, description, tagsAsSubject, status } = audioItem;\n\tconst isTakenDown = status === EntityStatus.TakenDown;\n\tconst sortedTags = useMemo(\n\t\t() => TagService.sort(tagsAsSubject),\n\t\t[tagsAsSubject]\n\t);\n\n\tconst { activeAudioItem, setActiveAudioItem } = usePlayerContext();\n\n\tconst onPlayPressed = useCallback(() => {\n\t\tsetActiveAudioItem(audioItem);\n\t}, [audioItem, setActiveAudioItem]);\n\n\tconst playButtonMarkup = useMemo(() => {\n\t\tconst audioItemIsInPlayer = activeAudioItem?.id === audioItem.id;\n\t\tif (isTakenDown) {\n\t\t\treturn <div className=\"text-gray-500\">Taken Down</div>;\n\t\t}\n\t\tif (audioItemIsInPlayer) {\n\t\t\treturn <div className=\"text-gray-500\">Playing</div>;\n\t\t}\n\t\treturn (\n\t\t\t<button\n\t\t\t\tstyle={{ lineHeight: 0 }}\n\t\t\t\tonClick={onPlayPressed}\n\t\t\t\taria-label=\"Play\"\n\t\t\t>\n\t\t\t\t<i className=\"material-icons text-teal-600 hover:text-teal-800\">\n\t\t\t\t\t<span className=\"text-6xl\">play_arrow</span>\n\t\t\t\t</i>\n\t\t\t</button>\n\t\t);\n\t}, [isTakenDown, activeAudioItem, audioItem, onPlayPressed]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-row justify-start items-start bg-white shadow-md rounded pt-2 px-3 pb-1 ${\n\t\t\t\tclassName ?? \"\"\n\t\t\t}`}\n\t\t>\n\t\t\t<div className=\"flex justify-center items-center w-14 mr-3\">\n\t\t\t\t{playButtonMarkup}\n\t\t\t</div>\n\n\t\t\t<div className=\"flex flex-1 flex-col overflow-hidden\">\n\t\t\t\t<Link to={`/entities/audio-items/${slug}`}>{name}</Link>\n\n\t\t\t\t<div className=\"flex flex-row flex-wrap text-sm mt-1 mb-1\">\n\t\t\t\t\tTags:\n\t\t\t\t\t{sortedTags.map((tag, index) => {\n\t\t\t\t\t\tconst objectEntity = TagService.getObjectEntity(tag);\n\t\t\t\t\t\tif (!objectEntity) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={index} className=\"ml-1 whitespace-pre\">\n\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(objectEntity)}>\n\t\t\t\t\t\t\t\t\t{objectEntity.name}\n\t\t\t\t\t\t\t\t\t{objectEntity.entityType === EntityType.Tune\n\t\t\t\t\t\t\t\t\t\t? ` (${(objectEntity as Tune).type})`\n\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t{index !== sortedTags.length - 1 && \", \"}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<AddTagButton entity={audioItem} className=\"ml-2\" />\n\t\t\t\t\t{tagsAsSubject?.length > 0 && (\n\t\t\t\t\t\t<div className=\"flex ml-1\">\n\t\t\t\t\t\t\t<span className=\"text-gray-500 mr-1\">/</span>\n\t\t\t\t\t\t\t<EditTagsButton entity={audioItem} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{description && (\n\t\t\t\t\t<div className=\"text-gray-500 text-sm\">{description}</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"border-t border-gray-200 mt-2 pt-1 w-full flex flex-row justify-between items-center\">\n\t\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\t\t<ViewCommentsButton audioItem={audioItem} />\n\n\t\t\t\t\t\t<div className=\"ml-2\">\n\t\t\t\t\t\t\t<SaveItemButton audioItem={audioItem} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Menu>\n\t\t\t\t\t\t{!isTakenDown && <RequestTakedownButton entity={audioItem} />}\n\t\t\t\t\t</Menu>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AudioItemCompact;\n", "import React, { useRef, useEffect, useState, useCallback } from \"react\";\n\n// Menu is a simple overlay menu that displays whatever menu items are passed to\n// it as children. For example, you can use it like:\n//\n// <Menu>\n//\t <span onClick={doSomething}>Option 1</span>\n//\t <span onClick={doSomethingElse}>Option 2</span>\n// </Menu>\n\ninterface Props {\n\tchildren: React.ReactNode | React.ReactNode[];\n}\n\nconst Menu = ({ children }: Props) => {\n\tconst containerRef = useRef<HTMLDivElement>();\n\n\tconst [shouldOpenLeft, setShouldOpenLeft] = useState(true);\n\tconst [isOpen, setIsOpen] = useState(false);\n\n\tuseEffect(() => {\n\t\tconst container = containerRef.current;\n\t\tif (container) {\n\t\t\tconst { x } = container.getBoundingClientRect();\n\t\t\tif (x < 200) {\n\t\t\t\tsetShouldOpenLeft(false);\n\t\t\t}\n\t\t}\n\t}, []);\n\n\tconst onIconClicked = useCallback((event) => {\n\t\tevent.stopPropagation();\n\t\tsetIsOpen(true);\n\t}, []);\n\n\tconst onBackgroundClicked = useCallback((event) => {\n\t\tevent.stopPropagation();\n\t\tsetIsOpen(false);\n\t}, []);\n\n\tconst childrenAsArray = Array.isArray(children) ? children : [children];\n\n\tif (!children) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className=\"relative\" ref={containerRef}>\n\t\t\t<button\n\t\t\t\tclassName=\"btn-secondary\"\n\t\t\t\tonClick={onIconClicked}\n\t\t\t\taria-label={isOpen ? \"Close Menu\" : \"Show Menu\"}\n\t\t\t>\n\t\t\t\t<i className=\"material-icons\">expand_more</i>\n\t\t\t</button>\n\n\t\t\t{isOpen && (\n\t\t\t\t<>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"fixed top-0 right-0 bottom-0 left-0\"\n\t\t\t\t\t\tonClick={onBackgroundClicked}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<ul\n\t\t\t\t\t\tclassName={`absolute top-9 ${\n\t\t\t\t\t\t\tshouldOpenLeft ? \"right-0 text-right\" : \"left-0 text-left\"\n\t\t\t\t\t\t} flex flex-col bg-white rounded shadow-xl`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{childrenAsArray.map((child, index) => (\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tclassName={`cursor-pointer first:rounded-t last:rounded-b text-sm text-gray-500 font-bold whitespace-nowrap hover:bg-gray-200 ${\n\t\t\t\t\t\t\t\t\tindex === 0 ? \"hover:rounded-t\" : \"\"\n\t\t\t\t\t\t\t\t} ${\n\t\t\t\t\t\t\t\t\tindex === childrenAsArray.length - 1 ? \"hover:rounded-b\" : \"\"\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{child}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default Menu;\n", "import { useCallback, useState, useMemo } from \"react\";\nimport { useQuery, gql } from \"@apollo/client\";\nimport type { TakedownRequest } from \"@prisma/client\";\n\nimport type { Entity, EntityType } from \"~/types\";\nimport { isPendingTakedownRequest, isApprovedTakedownRequest } from \"~/types\";\nimport useRequireLogin from \"~/hooks/useRequireLogin\";\nimport EntityService from \"~/services/Entity\";\nimport { TakedownRequestFragments } from \"~/fragments\";\n\nimport Modal from \"~/components/Modal\";\nimport CreateTakedownRequestForm from \"~/components/CreateTakedownRequestForm\";\nimport LoadingBlock from \"~/components/LoadingBlock\";\nimport DateTimeService from \"~/services/DateTime\";\nimport useAudioItem from \"~/hooks/useAudioItem\";\n\nconst TAKEDOWN_REQUESTS_FOR_ENTITY = gql`\n\tquery TakedownRequestsForEntity($input: TakedownRequestsForEntityInput!) {\n\t\ttakedownRequestsForEntity(input: $input) {\n\t\t\t...TakedownRequestWithoutEntity\n\t\t}\n\t}\n\t${TakedownRequestFragments.takedownRequestWithoutEntity}\n`;\n\ninterface QueryData {\n\ttakedownRequestsForEntity: TakedownRequest[];\n}\ninterface QueryVariables {\n\tinput: {\n\t\tentityType: EntityType;\n\t\tentityId: string;\n\t};\n}\ninterface Props {\n\tentity: Entity;\n\tonTakedownRequestCreated?: (takedownRequest: TakedownRequest) => void;\n}\n\nconst RequestTakedownButton = ({ entity, onTakedownRequestCreated }: Props) => {\n\tconst { currentUser, requireLogin } = useRequireLogin();\n\n\tconst [modalIsVisible, setModalIsVisible] = useState(false);\n\tconst closeModal = useCallback(() => setModalIsVisible(false), []);\n\n\tconst { loading, data, error, refetch } = useQuery<QueryData, QueryVariables>(\n\t\tTAKEDOWN_REQUESTS_FOR_ENTITY,\n\t\t{\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tentityType: entity.entityType,\n\t\t\t\t\tentityId: entity.id,\n\t\t\t\t},\n\t\t\t},\n\t\t\tskip: !modalIsVisible,\n\t\t}\n\t);\n\tconst takedownRequests = data?.takedownRequestsForEntity ?? [];\n\n\tconst onButtonClicked = useCallback(async () => {\n\t\tif (!currentUser) {\n\t\t\tconst redirectTo = EntityService.makeHrefForView(entity);\n\t\t\tawait requireLogin({ redirectTo });\n\t\t} else {\n\t\t\tsetModalIsVisible(true);\n\t\t}\n\t}, [currentUser, entity, requireLogin]);\n\n\tconst onSuccess = useCallback(\n\t\tasync (takedownRequest: TakedownRequest) => {\n\t\t\ttry {\n\t\t\t\tawait refetch();\n\t\t\t\tif (onTakedownRequestCreated) {\n\t\t\t\t\tawait onTakedownRequestCreated(takedownRequest);\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\t//\n\t\t\t}\n\t\t},\n\t\t[refetch, onTakedownRequestCreated]\n\t);\n\n\tconst modalContent = useMemo(() => {\n\t\tconst pendingTakedown = takedownRequests.find(isPendingTakedownRequest);\n\t\tconst approvedTakedown = takedownRequests.find(isApprovedTakedownRequest);\n\n\t\tif (loading) {\n\t\t\treturn <LoadingBlock />;\n\t\t} else if (error) {\n\t\t\treturn (\n\t\t\t\t<div className=\"text-red-600\">Error fetching Takedown Request data</div>\n\t\t\t);\n\t\t} else if (approvedTakedown) {\n\t\t\treturn (\n\t\t\t\t<div className=\"text-gray-500\">\n\t\t\t\t\tThis {entity.entityType} has an <strong>approved</strong>{\" \"}\n\t\t\t\t\t{approvedTakedown.type} Takedown Request last updated{\" \"}\n\t\t\t\t\t{DateTimeService.formatDateYearTime(approvedTakedown.updatedAt)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else if (pendingTakedown) {\n\t\t\treturn (\n\t\t\t\t<div className=\"text-gray-500\">\n\t\t\t\t\tThis {entity.entityType} has a <strong>pending</strong>{\" \"}\n\t\t\t\t\t{pendingTakedown.type} Takedown Request last updated{\" \"}\n\t\t\t\t\t{DateTimeService.formatDateYearTime(pendingTakedown.updatedAt)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"text-gray-500 mb-5\">\n\t\t\t\t\tWe exist as a community resource, and as such we place the foremost\n\t\t\t\t\timportance on performers' rights and copyright. You can request a\n\t\t\t\t\ttakedown using this form. We will be in touch to verify details.\n\t\t\t\t</div>\n\n\t\t\t\t<CreateTakedownRequestForm entity={entity} onSuccess={onSuccess} />\n\t\t\t</>\n\t\t);\n\t}, [loading, error, takedownRequests, refetch, entity]);\n\n\treturn (\n\t\t<>\n\t\t\t<span\n\t\t\t\tclassName=\"rounded flex flex-row items-center p-2\"\n\t\t\t\tonClick={onButtonClicked}\n\t\t\t>\n\t\t\t\t<i className=\"material-icons mr-0.5\">report_problem</i>\n\t\t\t\tRequest Takedown\n\t\t\t</span>\n\n\t\t\t<Modal\n\t\t\t\ttitle=\"Request Takedown\"\n\t\t\t\tisVisible={modalIsVisible}\n\t\t\t\tonClose={closeModal}\n\t\t\t>\n\t\t\t\t{modalContent}\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default RequestTakedownButton;\n", "import { useState, useCallback, useEffect } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nimport type { Entity, EntityType, TakedownRequest } from \"~/types\";\nimport { TakedownRequestType } from \"~/types\";\nimport { TakedownRequestFragments } from \"~/fragments\";\n\nconst CREATE_TAKEDOWN_REQUEST = gql`\n\tmutation CreateTakedownRequest($input: CreateTakedownRequestInput!) {\n\t\tcreateTakedownRequest(input: $input) {\n\t\t\t...TakedownRequestWithoutEntity\n\t\t}\n\t}\n\t${TakedownRequestFragments.takedownRequestWithoutEntity}\n`;\n\ninterface MutationData {\n\tcreateTakedownRequest: TakedownRequest;\n}\ninterface MutationVariables {\n\tinput: {\n\t\tentityType: EntityType;\n\t\tentityId: string;\n\t\ttype: TakedownRequestType;\n\t\tmessage: string;\n\t};\n}\ninterface Props {\n\tentity: Entity;\n\tonSuccess?: (takedownRequest: TakedownRequest) => void;\n}\n\nconst CreateTakedownRequestForm = ({ entity, onSuccess }: Props) => {\n\tconst defaultType = Object.keys(TakedownRequestType)[0];\n\tconst [type, setType] = useState(defaultType);\n\tconst [message, setMessage] = useState(\"\");\n\tconst [validationError, setValidationError] = useState(\"\");\n\n\tconst [createTakedownRequest, { loading, data, error }] = useMutation<\n\t\tMutationData,\n\t\tMutationVariables\n\t>(CREATE_TAKEDOWN_REQUEST, { errorPolicy: \"all\" });\n\n\tconst getLabelForType = (type: TakedownRequestType) => {\n\t\tswitch (TakedownRequestType[type]) {\n\t\t\tcase TakedownRequestType.Performer:\n\t\t\t\treturn \"I'm a performer in it\";\n\t\t\tcase TakedownRequestType.Copyright:\n\t\t\t\treturn \"I own the copyright\";\n\t\t\tdefault:\n\t\t\t\treturn type;\n\t\t}\n\t};\n\n\tconst onSubmitForm = useCallback(\n\t\t(event) => {\n\t\t\tevent.preventDefault();\n\t\t\tsetValidationError(\"\");\n\t\t\tif (!message) {\n\t\t\t\treturn setValidationError(\"Please include details about your request\");\n\t\t\t}\n\t\t\tconst input = {\n\t\t\t\tentityType: entity.entityType,\n\t\t\t\tentityId: entity.id,\n\t\t\t\ttype: type as TakedownRequestType,\n\t\t\t\tmessage,\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tcreateTakedownRequest({\n\t\t\t\t\tvariables: {\n\t\t\t\t\t\tinput,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t} catch {\n\t\t\t\t//\n\t\t\t}\n\t\t},\n\t\t[message, entity, type, createTakedownRequest]\n\t);\n\n\tuseEffect(() => {\n\t\tif (data?.createTakedownRequest?.id && onSuccess) {\n\t\t\tonSuccess(data.createTakedownRequest);\n\t\t}\n\t}, [data, onSuccess]);\n\n\treturn (\n\t\t<form className=\"flex flex-col items-start\" onSubmit={onSubmitForm}>\n\t\t\t<label htmlFor=\"select-type\" className=\"mb-2\">\n\t\t\t\tWhy are you requesting a takedown for this {entity.entityType}?\n\t\t\t</label>\n\t\t\t<select\n\t\t\t\tid=\"select-type\"\n\t\t\t\tclassName=\"mb-4\"\n\t\t\t\tvalue={type}\n\t\t\t\tonChange={(event) => setType(event.target.value as TakedownRequestType)}\n\t\t\t>\n\t\t\t\t{Object.keys(TakedownRequestType).map((type, index) => (\n\t\t\t\t\t<option value={type} key={index}>\n\t\t\t\t\t\t{getLabelForType(type as TakedownRequestType)}\n\t\t\t\t\t</option>\n\t\t\t\t))}\n\t\t\t</select>\n\n\t\t\t<textarea\n\t\t\t\tclassName=\"mb-4\"\n\t\t\t\tplaceholder=\"Please include as many details as you can...\"\n\t\t\t\tvalue={message}\n\t\t\t\tonChange={(event) => setMessage(event.target.value)}\n\t\t\t\trows={4}\n\t\t\t/>\n\n\t\t\t<input type=\"submit\" value=\"Submit\" disabled={loading} />\n\n\t\t\t{validationError && (\n\t\t\t\t<div className=\"mt-4 text-red-600\">{validationError}</div>\n\t\t\t)}\n\t\t\t{error && (\n\t\t\t\t<div className=\"mt-4 text-red-600\">\n\t\t\t\t\tError submitting Takedown Request. Please reload the page and try\n\t\t\t\t\tagain.\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</form>\n\t);\n};\n\nexport default CreateTakedownRequestForm;\n", "import { useCallback, useMemo } from \"react\";\nimport { Link } from \"@remix-run/react\";\n\nimport type { AudioItemWithRelations } from \"~/types\";\nimport { EntityStatus } from \"~/types\";\nimport EntityService from \"~/services/Entity\";\nimport TagService from \"~/services/Tag\";\nimport usePlayerContext from \"~/hooks/usePlayerContext\";\n\ninterface Props {\n\taudioItem: AudioItemWithRelations;\n\tclassName?: string;\n}\nconst AudioItemTextOnly = ({ audioItem, className }: Props) => {\n\tconst { name, slug, tagsAsSubject, status } = audioItem;\n\tconst isTakenDown = status === EntityStatus.TakenDown;\n\tconst sortedTags = useMemo(\n\t\t() => TagService.sort(tagsAsSubject),\n\t\t[tagsAsSubject]\n\t);\n\n\tconst { activeAudioItem, setActiveAudioItem } = usePlayerContext();\n\n\tconst onPlayPressed = useCallback(() => {\n\t\tsetActiveAudioItem(audioItem);\n\t}, [audioItem, setActiveAudioItem]);\n\n\tconst playButtonMarkup = useMemo(() => {\n\t\tconst audioItemIsInPlayer = activeAudioItem?.id === audioItem.id;\n\t\tif (isTakenDown) {\n\t\t\treturn <div className=\"text-gray-500\">Taken Down</div>;\n\t\t}\n\t\tif (audioItemIsInPlayer) {\n\t\t\treturn <div className=\"text-gray-500\">Playing</div>;\n\t\t}\n\t\treturn (\n\t\t\t<button\n\t\t\t\tstyle={{ lineHeight: 0 }}\n\t\t\t\tonClick={onPlayPressed}\n\t\t\t\taria-label=\"Play\"\n\t\t\t>\n\t\t\t\t<i className=\"material-icons text-teal-600 hover:text-teal-800\">\n\t\t\t\t\t<span className=\"text-3xl\">play_arrow</span>\n\t\t\t\t</i>\n\t\t\t</button>\n\t\t);\n\t}, [isTakenDown, activeAudioItem, audioItem, onPlayPressed]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-row justify-start items-start ${className ?? \"\"}`}\n\t\t>\n\t\t\t<div className=\"flex justify-center items-center w-14 mr-3\">\n\t\t\t\t{playButtonMarkup}\n\t\t\t</div>\n\n\t\t\t<div className=\"flex flex-1 flex-col overflow-hidden\">\n\t\t\t\t<Link to={`/entities/audio-items/${slug}`}>{name}</Link>\n\n\t\t\t\t<div className=\"flex flex-row flex-wrap text-sm mt-1 mb-1\">\n\t\t\t\t\t<span className=\"text-gray-500\">Tags:</span>\n\t\t\t\t\t{sortedTags.map((tag, index) => {\n\t\t\t\t\t\tconst objectEntity = TagService.getObjectEntity(tag);\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={index} className=\"ml-1 whitespace-pre\">\n\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(objectEntity)}>\n\t\t\t\t\t\t\t\t\t{objectEntity?.name}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t{index !== sortedTags.length - 1 && \", \"}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AudioItemTextOnly;\n", "import type { AudioItemWithRelations } from \"~/types\";\nimport { ViewAs } from \"~/types\";\n\nimport AudioItemCard from \"~/components/AudioItemCard\";\nimport AudioItemCompact from \"~/components/AudioItemCompact\";\nimport AudioItemTextOnly from \"~/components/AudioItemTextOnly\";\n\ninterface Props {\n\tviewAs?: ViewAs;\n\taudioItem: AudioItemWithRelations;\n\tshowTitle?: boolean;\n\tclassName?: string;\n}\n\n// AudioItem handles wrapping the different variants of AudioItem components. It\n// returns the variant requested in the `viewAs` prop. Default is Card.\nconst AudioItemComponent = ({\n\tviewAs,\n\taudioItem,\n\tshowTitle,\n\tclassName,\n}: Props) => {\n\tif (viewAs === ViewAs.Cards) {\n\t\treturn (\n\t\t\t<AudioItemCard\n\t\t\t\taudioItem={audioItem}\n\t\t\t\tshowTitle={showTitle}\n\t\t\t\tclassName={className}\n\t\t\t/>\n\t\t);\n\t} else if (viewAs === ViewAs.Compact) {\n\t\treturn <AudioItemCompact audioItem={audioItem} className={className} />;\n\t} else if (viewAs === ViewAs.List) {\n\t\treturn <AudioItemTextOnly audioItem={audioItem} className={className} />;\n\t} else {\n\t\treturn null;\n\t}\n};\n\nexport default AudioItemComponent;\n", "import { Link } from \"@remix-run/react\";\n\ninterface BreadcrumbItem {\n\tlabel: string;\n\thref?: string;\n}\n\ninterface Props {\n\titems: BreadcrumbItem[];\n\tclassName?: string;\n}\n\nconst Breadcrumb = ({ items = [], className }: Props) => {\n\tif (items.length === 0) {\n\t\treturn null;\n\t}\n\tif (items.length === 1) {\n\t\treturn <h1 className={className ?? \"\"}>{items[0].label}</h1>;\n\t}\n\n\tconst subItems = items.slice(0, items.length - 1);\n\tconst finalItem = items[items.length - 1];\n\n\treturn (\n\t\t<div className={`flex flex-col ${className ?? \"\"}`}>\n\t\t\t<div className=\"flex flex-row items-center mb-1\">\n\t\t\t\t{subItems.map(({ label, href }, index) => (\n\t\t\t\t\t<div className=\"flex\" key={index}>\n\t\t\t\t\t\t{href ? (\n\t\t\t\t\t\t\t<Link to={href}>{label}</Link>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">{label}</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<i className=\"material-icons text-gray-500 text-base ml-1\">\n\t\t\t\t\t\t\tkeyboard_arrow_right\n\t\t\t\t\t\t</i>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\n\t\t\t<h1>{finalItem.label}</h1>\n\t\t</div>\n\t);\n};\n\nexport default Breadcrumb;\n", "import { useEffect } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nconst ViewAudioItems = () => {\n\tconst navigate = useNavigate();\n\n\tuseEffect(() => {\n\t\tnavigate(\"/\");\n\t}, [navigate]);\n\n\treturn null;\n};\n\nexport default ViewAudioItems;\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\nimport type { Prisma, Collection } from \"@prisma/client\";\n\nimport { type AudioItemWithRelations, SortBy } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport Layout from \"~/components/Layout\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\ninterface LoaderData {\n\tcollection: Collection;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n}\n\nexport async function loader({\n\tparams,\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst { slug } = params;\n\tconst collection = await db.collection.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t});\n\tif (!collection) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this Collection\",\n\t\t});\n\t}\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst sortBy = searchParams.get(\"sortBy\") ?? SortBy.RecentlyTagged;\n\tconst audioItemsOrderBy: Prisma.Enumerable<Prisma.AudioItemOrderByWithRelationInput> =\n\t\tsortBy === SortBy.RecentlyTagged\n\t\t\t? { updatedAt: \"desc\" }\n\t\t\t: { createdAt: \"desc\" };\n\n\tconst [audioItems, totalAudioItems] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: true,\n\t\t\t},\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectCollectionId: collection.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\torderBy: audioItemsOrderBy,\n\t\t}),\n\t\tdb.audioItem.count({\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectCollectionId: collection.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t]);\n\treturn {\n\t\tcollection,\n\t\taudioItems,\n\t\ttotalAudioItems,\n\t};\n}\n\nconst ViewCollectionBySlug = () => {\n\tconst { collection, audioItems, totalAudioItems } =\n\t\tuseLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<ViewEntityAndAudioItems\n\t\t\t\tentity={collection}\n\t\t\t\taudioItems={audioItems}\n\t\t\t\ttotalAudioItems={totalAudioItems}\n\t\t\t/>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewCollectionBySlug;\n", "import { useLocation } from \"@remix-run/react\";\n\nimport type { AudioItemWithRelations, Entity } from \"~/types\";\nimport { ViewAs } from \"~/types\";\nimport useFilters from \"~/hooks/useFilters\";\nimport EntityService from \"~/services/Entity\";\n\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport AudioItem from \"~/components/AudioItem\";\nimport type { Tune } from \"@prisma/client\";\nimport { EntityType } from \"@prisma/client\";\n\ninterface Props {\n\tentity: Entity;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n\tclassName?: string;\n}\nconst ViewEntityAndAudioItems = ({\n\tentity,\n\taudioItems,\n\ttotalAudioItems,\n\tclassName,\n}: Props) => {\n\tconst { name } = entity ?? {};\n\n\tconst { search } = useLocation();\n\tconst queryParams = new URLSearchParams(search);\n\tconst viewAs = queryParams.get(\"viewAs\") as ViewAs;\n\n\tconst { Filters, filtersProps } = useFilters({\n\t\ttotalItems: totalAudioItems,\n\t});\n\n\treturn (\n\t\t<div className={`flex flex-1 flex-col ${className ?? \"\"}`}>\n\t\t\t<Breadcrumb\n\t\t\t\titems={[\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: EntityService.makeReadableNamePlural(entity),\n\t\t\t\t\t\thref: EntityService.makeHrefForTopLevel(entity),\n\t\t\t\t\t},\n\t\t\t\t\t{ label: name },\n\t\t\t\t]}\n\t\t\t\tclassName=\"mb-2\"\n\t\t\t/>\n\n\t\t\t<div className=\"text-gray-500 text-sm flex-col space-y-2\">\n\t\t\t\t{entity.description && <p>{entity.description}</p>}\n\t\t\t\t{entity.aliases && <p>Also known as: {entity.aliases}</p>}\n\t\t\t\t{entity.entityType === EntityType.Tune && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<p>Type: {(entity as Tune).type}</p>\n\t\t\t\t\t\t<p>Meter: {(entity as Tune).meter}</p>\n\t\t\t\t\t\t<p>Mode: {(entity as Tune).mode}</p>\n\t\t\t\t\t\t<p>ABC: {(entity as Tune).abc}</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={`https://thesession.org/tunes/${\n\t\t\t\t\t\t\t\t\t(entity as Tune).theSessionTuneId\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView or Edit This Tune on The Session \u2197\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{totalAudioItems > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"sticky py-3 px-2 mt-4 -ml-2 -mr-2 mb-2 bg-gray-100 top-[48px] z-10\">\n\t\t\t\t\t\t<Filters {...filtersProps} />\n\t\t\t\t\t</div>\n\t\t\t\t\t{audioItems.map((audioItem, index) => (\n\t\t\t\t\t\t<AudioItem\n\t\t\t\t\t\t\tviewAs={viewAs ?? ViewAs.Cards}\n\t\t\t\t\t\t\taudioItem={audioItem}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName={viewAs === ViewAs.List ? \"mb-4\" : \"mb-6\"}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default ViewEntityAndAudioItems;\n", "import type React from \"react\";\nimport { useCallback, useMemo } from \"react\";\nimport { useLocation, useNavigate } from \"@remix-run/react\";\n\nimport type { PerPage } from \"~/types\";\nimport { SortBy, ViewAs } from \"~/types\";\n\nimport type { Props as FiltersProps } from \"~/components/Filters\";\nimport Filters from \"~/components/Filters\";\n\ninterface Args {\n\ttotalItems?: number;\n\tdefaultPage?: number; // Starts at 1\n\tdefaultPerPage?: PerPage;\n\tdefaultSortBy?: SortBy;\n\tdefaultViewAs?: ViewAs;\n\tenableQueryParams?: boolean;\n}\ninterface ReturnValue {\n\tFilters: (props: FiltersProps) => React.ReactElement;\n\tfiltersProps: FiltersProps;\n\tpage?: number;\n\tperPage?: PerPage;\n\tsortBy?: SortBy;\n\tviewAs?: ViewAs;\n}\n\n// useFilters takes default values for sortBy and viewAs and returns the Filters\n// component along with props to pass to it, plus the current sortBy and\n// viewAs values.\nconst useFilters = ({\n\ttotalItems,\n\tdefaultPage = 1,\n\tdefaultPerPage = 20,\n\tdefaultSortBy = SortBy.RecentlyTagged,\n\tdefaultViewAs = ViewAs.Cards,\n}: Args = {}): ReturnValue => {\n\tconst navigate = useNavigate();\n\tconst { pathname, search } = useLocation();\n\tconst queryParams = new URLSearchParams(search);\n\n\t// Pull filter values from query params. If not set, use defaults.\n\tconst page = parseInt(queryParams.get(\"page\") ?? \"1\", 10) || defaultPage;\n\tconst perPage =\n\t\tparseInt(queryParams.get(\"perPage\") ?? \"20\", 10) || defaultPerPage;\n\tconst sortBy = (queryParams.get(\"sortBy\") as SortBy) ?? defaultSortBy;\n\tconst viewAs = (queryParams.get(\"viewAs\") as ViewAs) ?? defaultViewAs;\n\n\tconst updateQueryParams = useCallback(\n\t\t(paramsToUpdate: Record<string, string | null> = {}) => {\n\t\t\tconst queryParams = new URLSearchParams(search);\n\n\t\t\tconst paramNames = Object.keys(paramsToUpdate);\n\t\t\tparamNames.forEach((paramName) => {\n\t\t\t\tconst value = paramsToUpdate[paramName];\n\t\t\t\tif (value) {\n\t\t\t\t\tqueryParams.set(paramName, value);\n\t\t\t\t} else {\n\t\t\t\t\tqueryParams.delete(paramName);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn navigate(`${pathname}?${queryParams.toString()}`);\n\t\t},\n\t\t[navigate, pathname, search]\n\t);\n\n\tconst onChangePage = useCallback(\n\t\t(event: React.ChangeEvent<HTMLSelectElement>) =>\n\t\t\tupdateQueryParams({ page: event.target.value }),\n\t\t[updateQueryParams]\n\t);\n\tconst onChangePerPage = useCallback(\n\t\t(event: React.ChangeEvent<HTMLSelectElement>) =>\n\t\t\tupdateQueryParams({ perPage: event.target.value, page: \"1\" }),\n\t\t[updateQueryParams]\n\t);\n\tconst onChangeSortBy = useCallback(\n\t\t(event: React.ChangeEvent<HTMLSelectElement>) =>\n\t\t\tupdateQueryParams({ sortBy: event.target.value as SortBy }),\n\t\t[updateQueryParams]\n\t);\n\tconst onChangeViewAs = useCallback(\n\t\t(event: React.ChangeEvent<HTMLSelectElement>) =>\n\t\t\tupdateQueryParams({ viewAs: event.target.value as ViewAs }),\n\t\t[updateQueryParams]\n\t);\n\n\tconst returnValue = useMemo(\n\t\t() => ({\n\t\t\tFilters,\n\t\t\tfiltersProps: {\n\t\t\t\ttotalItems,\n\t\t\t\tpage,\n\t\t\t\tonChangePage,\n\t\t\t\tperPage,\n\t\t\t\tonChangePerPage,\n\t\t\t\tsortBy,\n\t\t\t\tonChangeSortBy,\n\t\t\t\tviewAs,\n\t\t\t\tonChangeViewAs,\n\t\t\t},\n\t\t\tpage,\n\t\t\tperPage,\n\t\t\tsortBy,\n\t\t\tviewAs,\n\t\t}),\n\t\t[\n\t\t\ttotalItems,\n\t\t\tpage,\n\t\t\tonChangePage,\n\t\t\tperPage,\n\t\t\tonChangePerPage,\n\t\t\tsortBy,\n\t\t\tonChangeSortBy,\n\t\t\tviewAs,\n\t\t\tonChangeViewAs,\n\t\t]\n\t);\n\n\treturn returnValue;\n};\n\nexport default useFilters;\n", "import React, { useMemo } from \"react\";\nimport { PerPage, SortBy, ViewAs } from \"~/types\";\n\nexport interface Props {\n\ttotalItems?: number;\n\tpage?: number;\n\tonChangePage?: (event: React.ChangeEvent<HTMLSelectElement>) => void;\n\tperPage?: PerPage;\n\tonChangePerPage?: (event: React.ChangeEvent<HTMLSelectElement>) => void;\n\tsortBy?: SortBy;\n\tonChangeSortBy?: (event: React.ChangeEvent<HTMLSelectElement>) => void;\n\tviewAs?: ViewAs;\n\tonChangeViewAs?: (event: React.ChangeEvent<HTMLSelectElement>) => void;\n\tclassName?: string;\n}\n\nconst Filters = ({\n\ttotalItems,\n\tpage,\n\tonChangePage,\n\tperPage,\n\tonChangePerPage,\n\tsortBy,\n\tonChangeSortBy,\n\tviewAs,\n\tonChangeViewAs,\n\tclassName,\n}: Props) => {\n\tconst shouldRenderPagination =\n\t\ttypeof totalItems === \"number\" &&\n\t\ttypeof page === \"number\" &&\n\t\tonChangePage &&\n\t\tperPage &&\n\t\tonChangePerPage;\n\tconst shouldRenderSortBy = sortBy && onChangeSortBy;\n\tconst shouldRenderViewAs = viewAs && onChangeViewAs;\n\n\tconst totalPages = useMemo<number>(() => {\n\t\tif (\n\t\t\ttypeof totalItems !== \"number\" ||\n\t\t\ttypeof perPage === \"undefined\" ||\n\t\t\ttotalItems === 0\n\t\t) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn Math.ceil(totalItems / perPage);\n\t}, [totalItems, perPage]);\n\n\tconst pageSelectOptions = useMemo(() => {\n\t\tconst output: React.ReactNode[] = [];\n\t\tlet i = 1;\n\t\twhile (i <= totalPages) {\n\t\t\toutput.push(\n\t\t\t\t<option value={i} key={i}>\n\t\t\t\t\t{i}\n\t\t\t\t</option>\n\t\t\t);\n\t\t\ti++;\n\t\t}\n\t\treturn output;\n\t}, [totalPages]);\n\n\tconst perPageOptions = useMemo(() => {\n\t\tconst output: React.ReactNode[] = [];\n\t\tfor (const value in PerPage) {\n\t\t\tif (isNaN(Number(value))) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\toutput.push(\n\t\t\t\t<option value={value} key={value}>\n\t\t\t\t\t{value}\n\t\t\t\t</option>\n\t\t\t);\n\t\t}\n\t\treturn output;\n\t}, []);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-col md:flex-row flex-wrap justify-start items-start md:items-center text-gray-500 text-sm space-y-4 space-x-0 md:space-y-0 md:space-x-5 ${\n\t\t\t\tclassName ?? \"\"\n\t\t\t}`}\n\t\t\tid=\"filters\"\n\t\t>\n\t\t\t{shouldRenderPagination && (\n\t\t\t\t<div className=\"flex flex-row items-center space-x-5\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{totalItems.toLocaleString()} Item{totalItems === 1 ? \"\" : \"s\"}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\tPage{\" \"}\n\t\t\t\t\t\t<select value={page} onChange={onChangePage} className=\"text-sm\">\n\t\t\t\t\t\t\t{pageSelectOptions}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t{totalPages ? ` of ${totalPages}` : \"\"}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tvalue={perPage}\n\t\t\t\t\t\t\tonChange={onChangePerPage}\n\t\t\t\t\t\t\tclassName=\"text-sm\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{perPageOptions}\n\t\t\t\t\t\t</select>{\" \"}\n\t\t\t\t\t\tper page\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{shouldRenderSortBy && (\n\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\tSort by\n\t\t\t\t\t<select\n\t\t\t\t\t\tclassName=\"ml-1 text-sm\"\n\t\t\t\t\t\tvalue={sortBy}\n\t\t\t\t\t\tonChange={onChangeSortBy}\n\t\t\t\t\t>\n\t\t\t\t\t\t<option value={SortBy.RecentlyTagged}>Recently tagged</option>\n\t\t\t\t\t\t<option value={SortBy.RecentlyAdded}>Newest</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{shouldRenderViewAs && (\n\t\t\t\t<div className=\"hidden md:flex flex-row items-center\">\n\t\t\t\t\tView as\n\t\t\t\t\t<select\n\t\t\t\t\t\tclassName=\"ml-1 text-sm\"\n\t\t\t\t\t\tvalue={viewAs}\n\t\t\t\t\t\tonChange={onChangeViewAs}\n\t\t\t\t\t>\n\t\t\t\t\t\t<option value={ViewAs.Cards}>Cards</option>\n\t\t\t\t\t\t<option value={ViewAs.Compact}>Compact</option>\n\t\t\t\t\t\t<option value={ViewAs.List}>List</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default Filters;\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport { type Collection } from \"@prisma/client\";\n\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport { db } from \"~/utils/db.server\";\n\nexport function meta() {\n\treturn {\n\t\ttitle: \"Trad Archive - Collections\",\n\t};\n}\n\nexport function loader(): Promise<Collection[]> {\n\treturn db.collection.findMany({\n\t\torderBy: {\n\t\t\tname: \"asc\",\n\t\t},\n\t});\n}\n\nconst Collections = () => {\n\tconst collections = useLoaderData<Collection[]>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">Collections</h1>\n\t\t\t{collections.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No Collections found</div>\n\t\t\t)}\n\t\t\t{collections.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{collections.map((collection, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(collection)}>\n\t\t\t\t\t\t\t\t{collection.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default Collections;\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\nimport type { Prisma, Instrument } from \"@prisma/client\";\n\nimport { type AudioItemWithRelations, SortBy } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport Layout from \"~/components/Layout\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\ninterface LoaderData {\n\tinstrument: Instrument;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n}\n\nexport async function loader({\n\tparams,\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst { slug } = params;\n\tconst instrument = await db.instrument.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t});\n\tif (!instrument) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this Instrument\",\n\t\t});\n\t}\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst sortBy = searchParams.get(\"sortBy\") ?? SortBy.RecentlyTagged;\n\tconst audioItemsOrderBy: Prisma.Enumerable<Prisma.AudioItemOrderByWithRelationInput> =\n\t\tsortBy === SortBy.RecentlyTagged\n\t\t\t? { updatedAt: \"desc\" }\n\t\t\t: { createdAt: \"desc\" };\n\n\tconst [audioItems, totalAudioItems] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: true,\n\t\t\t},\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectInstrumentId: instrument.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\torderBy: audioItemsOrderBy,\n\t\t}),\n\t\tdb.audioItem.count({\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectInstrumentId: instrument.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t]);\n\treturn {\n\t\tinstrument,\n\t\taudioItems,\n\t\ttotalAudioItems,\n\t};\n}\n\nconst ViewInstrumentBySlug = () => {\n\tconst { instrument, audioItems, totalAudioItems } =\n\t\tuseLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<ViewEntityAndAudioItems\n\t\t\t\tentity={instrument}\n\t\t\t\taudioItems={audioItems}\n\t\t\t\ttotalAudioItems={totalAudioItems}\n\t\t\t/>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewInstrumentBySlug;\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport { type Instrument } from \"@prisma/client\";\n\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport { db } from \"~/utils/db.server\";\n\nexport function meta() {\n\treturn {\n\t\ttitle: \"Trad Archive - Instruments\",\n\t};\n}\n\nexport function loader(): Promise<Instrument[]> {\n\treturn db.instrument.findMany({\n\t\torderBy: {\n\t\t\tname: \"asc\",\n\t\t},\n\t});\n}\n\nconst Instruments = () => {\n\tconst instruments = useLoaderData<Instrument[]>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">Instruments</h1>\n\t\t\t{instruments.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No Instruments found</div>\n\t\t\t)}\n\t\t\t{instruments.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{instruments.map((instrument, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(instrument)}>\n\t\t\t\t\t\t\t\t{instrument.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default Instruments;\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\nimport type { Prisma, Person } from \"@prisma/client\";\n\nimport { type AudioItemWithRelations, SortBy } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport Layout from \"~/components/Layout\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\ninterface LoaderData {\n\tperson: Person;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n}\n\nexport async function loader({\n\tparams,\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst { slug } = params;\n\tconst person = await db.person.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t});\n\tif (!person) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this Person\",\n\t\t});\n\t}\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst sortBy = searchParams.get(\"sortBy\") ?? SortBy.RecentlyTagged;\n\tconst audioItemsOrderBy: Prisma.Enumerable<Prisma.AudioItemOrderByWithRelationInput> =\n\t\tsortBy === SortBy.RecentlyTagged\n\t\t\t? { updatedAt: \"desc\" }\n\t\t\t: { createdAt: \"desc\" };\n\n\tconst [audioItems, totalAudioItems] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: true,\n\t\t\t},\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectPersonId: person.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\torderBy: audioItemsOrderBy,\n\t\t}),\n\t\tdb.audioItem.count({\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectPersonId: person.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t]);\n\treturn {\n\t\tperson,\n\t\taudioItems,\n\t\ttotalAudioItems,\n\t};\n}\n\nconst ViewPersonBySlug = () => {\n\tconst { person, audioItems, totalAudioItems } = useLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<ViewEntityAndAudioItems\n\t\t\t\tentity={person}\n\t\t\t\taudioItems={audioItems}\n\t\t\t\ttotalAudioItems={totalAudioItems}\n\t\t\t/>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewPersonBySlug;\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport { type Person } from \"@prisma/client\";\n\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport { db } from \"~/utils/db.server\";\n\nexport function meta() {\n\treturn {\n\t\ttitle: \"Trad Archive - People\",\n\t};\n}\n\nexport function loader(): Promise<Person[]> {\n\treturn db.person.findMany({\n\t\torderBy: {\n\t\t\tname: \"asc\",\n\t\t},\n\t});\n}\n\nconst People = () => {\n\tconst people = useLoaderData<Person[]>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">People</h1>\n\t\t\t{people.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No People found</div>\n\t\t\t)}\n\t\t\t{people.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{people.map((person, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(person)}>\n\t\t\t\t\t\t\t\t{person.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default People;\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\nimport type { Prisma, Place } from \"@prisma/client\";\n\nimport { type AudioItemWithRelations, SortBy } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport Layout from \"~/components/Layout\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\ninterface LoaderData {\n\tplace: Place;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n}\n\nexport async function loader({\n\tparams,\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst { slug } = params;\n\tconst place = await db.place.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t});\n\tif (!place) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this Place\",\n\t\t});\n\t}\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst sortBy = searchParams.get(\"sortBy\") ?? SortBy.RecentlyTagged;\n\tconst audioItemsOrderBy: Prisma.Enumerable<Prisma.AudioItemOrderByWithRelationInput> =\n\t\tsortBy === SortBy.RecentlyTagged\n\t\t\t? { updatedAt: \"desc\" }\n\t\t\t: { createdAt: \"desc\" };\n\n\tconst [audioItems, totalAudioItems] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: true,\n\t\t\t},\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectPlaceId: place.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\torderBy: audioItemsOrderBy,\n\t\t}),\n\t\tdb.audioItem.count({\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectPlaceId: place.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t]);\n\treturn {\n\t\tplace,\n\t\taudioItems,\n\t\ttotalAudioItems,\n\t};\n}\n\nconst ViewPlaceBySlug = () => {\n\tconst { place, audioItems, totalAudioItems } = useLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<ViewEntityAndAudioItems\n\t\t\t\tentity={place}\n\t\t\t\taudioItems={audioItems}\n\t\t\t\ttotalAudioItems={totalAudioItems}\n\t\t\t/>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewPlaceBySlug;\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport { type Place } from \"@prisma/client\";\n\nimport EntityService from \"~/services/Entity\";\n\nimport Layout from \"~/components/Layout\";\nimport { db } from \"~/utils/db.server\";\n\nexport function meta() {\n\treturn {\n\t\ttitle: \"Trad Archive - Places\",\n\t};\n}\n\nexport function loader(): Promise<Place[]> {\n\treturn db.place.findMany({\n\t\torderBy: {\n\t\t\tname: \"asc\",\n\t\t},\n\t});\n}\n\nconst Places = () => {\n\tconst places = useLoaderData<Place[]>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">Places</h1>\n\t\t\t{places.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No Places found</div>\n\t\t\t)}\n\t\t\t{places.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{places.map((place, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(place)}>\n\t\t\t\t\t\t\t\t{place.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default Places;\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { DataFunctionArgs } from \"@remix-run/node\";\nimport type { Prisma, Tune } from \"@prisma/client\";\n\nimport { type AudioItemWithRelations, SortBy } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport Layout from \"~/components/Layout\";\nimport ViewEntityAndAudioItems from \"~/components/ViewEntityAndAudioItems\";\n\ninterface LoaderData {\n\ttune: Tune;\n\taudioItems: AudioItemWithRelations[];\n\ttotalAudioItems: number;\n}\n\nexport async function loader({\n\tparams,\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst { slug } = params;\n\tconst tune = await db.tune.findUnique({\n\t\twhere: {\n\t\t\tslug,\n\t\t},\n\t});\n\tif (!tune) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find this Tune\",\n\t\t});\n\t}\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst sortBy = searchParams.get(\"sortBy\") ?? SortBy.RecentlyTagged;\n\tconst audioItemsOrderBy: Prisma.Enumerable<Prisma.AudioItemOrderByWithRelationInput> =\n\t\tsortBy === SortBy.RecentlyTagged\n\t\t\t? { updatedAt: \"desc\" }\n\t\t\t: { createdAt: \"desc\" };\n\n\tconst [audioItems, totalAudioItems] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: true,\n\t\t\t},\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectTuneId: tune.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\torderBy: audioItemsOrderBy,\n\t\t}),\n\t\tdb.audioItem.count({\n\t\t\twhere: {\n\t\t\t\ttagsAsObject: {\n\t\t\t\t\tsome: {\n\t\t\t\t\t\tsubjectTuneId: tune.id,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t]);\n\treturn {\n\t\ttune,\n\t\taudioItems,\n\t\ttotalAudioItems,\n\t};\n}\n\nconst ViewTuneBySlug = () => {\n\tconst { tune, audioItems, totalAudioItems } = useLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<ViewEntityAndAudioItems\n\t\t\t\tentity={tune}\n\t\t\t\taudioItems={audioItems}\n\t\t\t\ttotalAudioItems={totalAudioItems}\n\t\t\t/>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewTuneBySlug;\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport { type DataFunctionArgs } from \"@remix-run/node\";\nimport { type Tune } from \"@prisma/client\";\n\nimport EntityService from \"~/services/Entity\";\nimport useFilters from \"~/hooks/useFilters\";\n\nimport Layout from \"~/components/Layout\";\nimport { db } from \"~/utils/db.server\";\n\nexport function meta() {\n\treturn {\n\t\ttitle: \"Trad Archive - Tunes\",\n\t};\n}\n\nconst PER_PAGE = 100;\n\ninterface LoaderData {\n\ttunes: Tune[];\n\ttotalTunes: number;\n}\n\nexport async function loader({\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst url = new URL(request.url);\n\tconst params = new URLSearchParams(url.search);\n\tconst page = Number(params.get(\"page\") ?? 1);\n\tconst perPage = Number(params.get(\"perPage\") ?? PER_PAGE);\n\n\tconst [tunes, totalTunes] = await Promise.all([\n\t\tdb.tune.findMany({\n\t\t\ttake: perPage,\n\t\t\tskip: perPage * (page - 1),\n\t\t\torderBy: {\n\t\t\t\tname: \"asc\",\n\t\t\t},\n\t\t}),\n\t\tdb.tune.count(),\n\t]);\n\n\treturn {\n\t\ttunes,\n\t\ttotalTunes,\n\t};\n}\n\nconst Tunes = () => {\n\tconst { tunes, totalTunes } = useLoaderData<LoaderData>();\n\n\tconst { Filters, filtersProps } = useFilters({\n\t\ttotalItems: totalTunes,\n\t\tdefaultPerPage: PER_PAGE,\n\t});\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1>Tunes</h1>\n\t\t\t<Filters\n\t\t\t\t{...filtersProps}\n\t\t\t\tsortBy={undefined}\n\t\t\t\tviewAs={undefined}\n\t\t\t\tclassName=\"sticky left-0 right-0 py-3 bg-gray-100 top-[48px] mb-2\"\n\t\t\t/>\n\n\t\t\t{tunes.length === 0 && (\n\t\t\t\t<div className=\"text-gray-500\">No Tunes found</div>\n\t\t\t)}\n\t\t\t{tunes.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{tunes.map((tune, index) => (\n\t\t\t\t\t\t<li className=\"mb-2\" key={index}>\n\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(tune)}>{tune.name}</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Layout>\n\t);\n};\n\nexport default Tunes;\n", "import {\n\ttype ActionFunction,\n\ttype LoaderFunction,\n\tjson,\n\tredirect,\n} from \"@remix-run/node\";\nimport {\n\tLink,\n\tuseLoaderData,\n\tuseTransition,\n\tuseSearchParams,\n} from \"@remix-run/react\";\nimport bcrypt from \"bcryptjs\";\nimport isAfter from \"date-fns/isAfter\";\n\nimport { db } from \"~/utils/db.server\";\nimport { getSession, commitSession } from \"~/sessions.server\";\nimport Layout from \"~/components/Layout\";\n\ninterface LoaderData {\n\tvalidationError: string | null;\n\terror: string | null;\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst validationError = session.get(\"validationError\") || null;\n\tlet error: string | null = null;\n\n\tconst url = new URL(request.url);\n\tconst params = url.searchParams;\n\tconst userEmail = params.get(\"userEmail\") ?? \"\";\n\tconst tokenUnhashed = params.get(\"tokenUnhashed\") ?? \"\";\n\n\tconst user = await db.user.findUnique({ where: { email: userEmail } });\n\tif (!user || !user.autoLoginTokenHashed || !user.autoLoginTokenExpiry) {\n\t\treturn redirect(\"/reset-password\");\n\t}\n\n\t// Check token. If valid, set user on session and redirect to homepage.\n\tconst tokenIsMatch = await bcrypt.compare(\n\t\ttokenUnhashed,\n\t\tuser.autoLoginTokenHashed\n\t);\n\tconst expiryIsValid = isAfter(\n\t\tnew Date(user.autoLoginTokenExpiry),\n\t\tnew Date()\n\t);\n\tif (!tokenIsMatch || !expiryIsValid) {\n\t\terror =\n\t\t\t\"Reset password link is invalid or expired. Please request another one.\";\n\t}\n\n\treturn json(\n\t\t{ validationError, error },\n\t\t{\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t}\n\t);\n};\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst { searchParams } = new URL(request.url);\n\n\tconst formData = await request.formData();\n\tconst email = String(formData.get(\"email\") ?? \"\");\n\tconst password = String(formData.get(\"password\") ?? \"\");\n\tconst passwordConfirm = String(formData.get(\"password_confirm\") ?? \"\");\n\tif (password !== passwordConfirm) {\n\t\tsession.flash(\"validationError\", \"Passwords don't match\");\n\t\treturn redirect(`/choose-new-password?${searchParams.toString()}`, {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\tconst user = await db.user.findUnique({ where: { email } });\n\tif (!user) {\n\t\treturn redirect(\"/reset-password\");\n\t}\n\n\t// Update the user in DB, set in session cookie, and redirect to homepage\n\tconst newPasswordHashed = bcrypt.hashSync(password, 10);\n\tawait db.user.update({\n\t\twhere: { email },\n\t\tdata: {\n\t\t\tpasswordHashed: newPasswordHashed,\n\t\t\tautoLoginTokenHashed: null,\n\t\t\tautoLoginTokenExpiry: null,\n\t\t},\n\t});\n\tsession.set(\"userId\", user.id);\n\treturn redirect(\"/\", {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport default function ChooseNewPassword() {\n\tconst transition = useTransition();\n\tconst { error, validationError } = useLoaderData<LoaderData>();\n\tconst [searchParams] = useSearchParams();\n\tconst email = searchParams.get(\"userEmail\") ?? \"\";\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">Choose a new password</h1>\n\n\t\t\t{error ? (\n\t\t\t\t<div>\n\t\t\t\t\t<p className=\"text-red-600 mb-6\">{error}</p>\n\t\t\t\t\t<Link to=\"/reset-password\">Reset Password</Link>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<div className=\"flex flex-col align-start max-w-xs\">\n\t\t\t\t\t<form method=\"post\" className=\"space-y-4 mb-6\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tplaceholder=\"New password\"\n\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tplaceholder=\"New password (again)\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tname=\"password_confirm\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input type=\"hidden\" name=\"email\" value={email} />\n\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tclassName=\"btn w-auto\"\n\t\t\t\t\t\t\tdisabled={transition.state === \"submitting\"}\n\t\t\t\t\t\t\tvalue=\"Save\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</form>\n\n\t\t\t\t\t{validationError && (\n\t\t\t\t\t\t<div className=\"text-red-600\">{validationError}</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Layout>\n\t);\n}\n", "import {\n\ttype ActionFunction,\n\ttype LoaderFunction,\n\tjson,\n\tredirect,\n} from \"@remix-run/node\";\nimport { Link, useLoaderData, useTransition } from \"@remix-run/react\";\nimport sendgrid from \"@sendgrid/mail\";\nimport bcrypt from \"bcryptjs\";\nimport { v4 as uuid } from \"uuid\";\nimport addMinutes from \"date-fns/addMinutes\";\n\nimport { db } from \"~/utils/db.server\";\nimport { getSession, commitSession } from \"~/sessions.server\";\nimport Layout from \"~/components/Layout\";\n\ninterface LoaderData {\n\terror: string | null;\n\tconfirmation: string | null;\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst error = session.get(\"error\") || null;\n\tconst confirmation = session.get(\"confirmation\") || null;\n\treturn json(\n\t\t{ error, confirmation },\n\t\t{\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t}\n\t);\n};\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst formData = await request.formData();\n\tconst email = String(formData.get(\"email\") ?? \"\");\n\n\tconst user = await db.user.findUnique({ where: { email } });\n\tif (!user) {\n\t\tsession.flash(\"error\", \"Could not find a user with that email\");\n\t\treturn redirect(\"/reset-password\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\t// create an auto-login token for the user and save hashed version in DB\n\tconst autoLoginTokenUnhashed = uuid();\n\tconst autoLoginTokenHashed = await bcrypt.hash(autoLoginTokenUnhashed, 10);\n\tconst autoLoginTokenExpiry = addMinutes(new Date(), 10);\n\tawait db.user.update({\n\t\twhere: { id: user.id },\n\t\tdata: { autoLoginTokenHashed, autoLoginTokenExpiry },\n\t});\n\n\t// email a link with unhashed auto-login token to the user\n\tsendgrid.setApiKey(process.env.SENDGRID_API_KEY ?? \"\");\n\n\tconst params = new URLSearchParams({\n\t\ttokenUnhashed: autoLoginTokenUnhashed,\n\t\tuserEmail: email,\n\t});\n\tconst origin = new URL(request.url).origin;\n\tconst url = `${origin}/choose-new-password?${params.toString()}`;\n\n\tconst data = {\n\t\tto: user.email,\n\t\tfrom: \"no-reply@tradarchive.com\",\n\t\tsubject: \"Reset your password for Trad Archive\",\n\t\ttext: `Hi ${user.username}, click this link to reset your password for Trad Archive: ${url} . This link will be valid for the next 10 minutes. If you didn't request this, you can ignore this email.`,\n\t\thtml: `\n\t\t\tHi ${user.username},\n\t\t\t<br /><br />\n\t\t\t<a href=\"${url}\">Click here to reset your password for Trad Archive</a>\n\t\t\t<br /><br />\n\t\t\tThis link will be valid for the next 10 minutes.\n\t\t\t<br /><br />\n\t\t\t- - -\n\t\t\t<br /><br />\n\t\t\tIf it doesn't work, copy and paste this URL into your browser:\n\t\t\t<br /><br />\n\t\t\t<em>${url}</em>\n\t\t`,\n\t};\n\n\tawait sendgrid.send(data);\n\n\tsession.flash(\n\t\t\"confirmation\",\n\t\t\"Check your email for a link to reset your password\"\n\t);\n\treturn redirect(\"/reset-password\", {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport default function ResetPassword() {\n\tconst transition = useTransition();\n\tconst { error, confirmation } = useLoaderData<LoaderData>();\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-4\">Reset your password</h1>\n\n\t\t\t{confirmation ? (\n\t\t\t\t<div className=\"flex flex-row items-center\">\n\t\t\t\t\t<i className=\"material-icons mr-1\">mail_outline</i>\n\t\t\t\t\t{confirmation}\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<p className=\"text-gray-500 mb-4\">\n\t\t\t\t\t\tWe'll send you an email with a link to reset your password.\n\t\t\t\t\t</p>\n\t\t\t\t\t<div className=\"flex flex-col align-start max-w-xs\">\n\t\t\t\t\t\t<form method=\"post\" className=\"space-y-4 mb-6\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tclassName=\"btn w-auto\"\n\t\t\t\t\t\t\t\tdisabled={transition.state === \"submitting\"}\n\t\t\t\t\t\t\t\tvalue=\"Send Email\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</form>\n\n\t\t\t\t\t\t{error && <div className=\"text-red-600 mb-6\">{error}</div>}\n\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<Link to=\"/login\">Go Back</Link>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Layout>\n\t);\n}\n", "import { Link } from \"@remix-run/react\";\nimport type { LoaderFunction } from \"@remix-run/node\";\nimport { json, redirect } from \"@remix-run/node\";\nimport type { User } from \"@prisma/client\";\n\nimport Layout from \"~/components/Layout\";\nimport { getSession } from \"~/sessions.server\";\nimport { db } from \"~/utils/db.server\";\n\ninterface LoaderData {\n\tcurrentUser: User;\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst currentUserId = String(session.get(\"userId\") ?? \"\");\n\tconst currentUser = await db.user.findUnique({\n\t\twhere: { id: currentUserId },\n\t});\n\tif (!currentUser) {\n\t\tconst params = new URLSearchParams();\n\t\tparams.set(\"redirectTo\", \"/account\");\n\t\treturn redirect(`/login?${params.toString()}`);\n\t}\n\treturn json<LoaderData>({ currentUser });\n};\n\nexport default function AccountHome() {\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">Account</h1>\n\t\t\t<div className=\"flex flex-col space-y-2\">\n\t\t\t\t<Link to=\"/reset-password\">Change Password</Link>\n\t\t\t\t<Link to=\"/logout\">Log Out </Link>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n", "import { Link, useLoaderData } from \"@remix-run/react\";\nimport {\n\ttype ActionFunction,\n\tjson,\n\tredirect,\n\ttype LoaderFunction,\n} from \"@remix-run/node\";\n\nimport useFilters from \"~/hooks/useFilters\";\nimport { type AudioItemWithRelations, ViewAs } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\nimport { getSession } from \"~/sessions.server\";\n\nimport Layout from \"~/components/Layout\";\nimport AudioItem from \"~/components/AudioItem\";\n\ninterface LoaderData {\n\taudioItems: AudioItemWithRelations[];\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\n\tconst { pathname, searchParams } = new URL(request.url);\n\tconst redirectParams = new URLSearchParams({\n\t\tredirectTo: pathname,\n\t});\n\tif (!userId) {\n\t\treturn redirect(`/login?${redirectParams.toString()}`);\n\t}\n\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst audioItems = await db.audioItem.findMany({\n\t\twhere: {\n\t\t\tsavedItems: {\n\t\t\t\tsome: {\n\t\t\t\t\tuserId,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tinclude: {\n\t\t\ttagsAsSubject: {\n\t\t\t\tinclude: {\n\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\tobjectTune: true,\n\t\t\t\t\trelationship: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\tcreatedByUser: true,\n\t\t\tupdatedByUser: true,\n\t\t\tcomments: {\n\t\t\t\tinclude: {\n\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t},\n\t\t\t\torderBy: {\n\t\t\t\t\tcreatedAt: \"asc\",\n\t\t\t\t},\n\t\t\t},\n\t\t\tsavedItems: {\n\t\t\t\twhere: {\n\t\t\t\t\tuserId,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tskip: (page - 1) * perPage,\n\t\ttake: perPage,\n\t});\n\n\treturn json<LoaderData>({ audioItems });\n};\n\ninterface ActionData {\n\terror?: string;\n\tok: boolean;\n}\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\tconst referer = String(request.headers.get(\"referer\") ?? \"\");\n\tconst redirectParams = new URLSearchParams({\n\t\tredirectTo: referer ? new URL(referer).pathname : \"/\",\n\t});\n\tif (!userId) {\n\t\treturn redirect(`/login?${redirectParams.toString()}`);\n\t}\n\n\tconst formData = await request.formData();\n\tconst audioItemId = String(formData.get(\"audioItemId\") ?? \"\");\n\tconst existing = await db.savedItem.findUnique({\n\t\twhere: {\n\t\t\tuserId_audioItemId: {\n\t\t\t\tuserId,\n\t\t\t\taudioItemId,\n\t\t\t},\n\t\t},\n\t});\n\tif (existing) {\n\t\tawait db.savedItem.delete({ where: { id: existing.id } });\n\t} else {\n\t\tawait db.savedItem.create({ data: { userId, audioItemId } });\n\t}\n\treturn json<ActionData>({ ok: true }, { status: 200 });\n};\n\nexport default function SavedItems() {\n\tconst { audioItems } = useLoaderData<LoaderData>();\n\n\tconst { Filters, filtersProps, viewAs } = useFilters({\n\t\tdefaultViewAs: ViewAs.List,\n\t});\n\n\treturn (\n\t\t<Layout>\n\t\t\t<div className=\"flex flex-col\">\n\t\t\t\t<h1 className=\"mb-6\">Saved Items</h1>\n\n\t\t\t\t{audioItems.length > 0 && (\n\t\t\t\t\t<Filters {...filtersProps} className=\"mb-6\" />\n\t\t\t\t)}\n\n\t\t\t\t{audioItems.length === 0 && (\n\t\t\t\t\t<div className=\"text-gray-500\">\n\t\t\t\t\t\tNothing saved yet - try browsing some{\" \"}\n\t\t\t\t\t\t<Link to=\"/\">Audio Items</Link>!\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{audioItems.map((audioItem, index) => (\n\t\t\t\t\t<AudioItem\n\t\t\t\t\t\tviewAs={viewAs}\n\t\t\t\t\t\taudioItem={audioItem}\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tclassName={viewAs === ViewAs.List ? \"mb-4\" : \"mb-6\"}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n", "import { useLoaderData } from \"@remix-run/react\";\nimport type { LoaderFunction } from \"@remix-run/node\";\nimport { json } from \"@remix-run/node\";\n\nimport DateTimeService from \"~/services/DateTime\";\nimport { db } from \"~/utils/db.server\";\n\nimport Layout from \"~/components/Layout\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport type { User } from \"@prisma/client\";\n\ninterface LoaderData {\n\tuser: User;\n}\n\nexport const loader: LoaderFunction = async ({ params }) => {\n\tconst user = await db.user.findUnique({ where: { id: params.id } });\n\tif (!user) {\n\t\tthrow new Response(\"Not Found\", {\n\t\t\tstatus: 404,\n\t\t\tstatusText: \"Could not find a user with this ID\",\n\t\t});\n\t}\n\treturn json<LoaderData>({ user });\n};\n\nconst ViewUserById = () => {\n\tconst { user } = useLoaderData<LoaderData>();\n\tconst { username, createdAt } = user;\n\n\treturn (\n\t\t<Layout>\n\t\t\t<div className=\"flex flex-col-reverse md:flex-row\">\n\t\t\t\t<div className=\"flex flex-1 flex-col pb-8\">\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\tclassName=\"mb-6\"\n\t\t\t\t\t\titems={[{ label: \"Users\" }, { label: username }]}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div className=\"flex-col mb-8\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tAccount Created:\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span className=\"text-gray-500\">\n\t\t\t\t\t\t\t\t{DateTimeService.formatDateYear(createdAt)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n};\n\nexport default ViewUserById;\n", "import { type Comment } from \"@prisma/client\";\nimport { type ActionFunction, json, redirect } from \"@remix-run/node\";\nimport { getSession } from \"~/sessions.server\";\nimport { db } from \"~/utils/db.server\";\n\ninterface ActionData {\n\terror?: string;\n\tcomment?: Comment;\n}\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\tconst referer = String(request.headers.get(\"referer\") ?? \"\");\n\n\tconst redirectTo = encodeURIComponent(\n\t\treferer ? new URL(referer).pathname : \"/\"\n\t);\n\tif (!userId) {\n\t\treturn redirect(`/login?redirectTo=${redirectTo}`);\n\t}\n\n\tconst formData = await request.formData();\n\tconst text = String(formData.get(\"text\") ?? \"\");\n\tconst parentAudioItemId = String(formData.get(\"parentAudioItemId\") ?? \"\");\n\tlet error;\n\tif (!text) {\n\t\terror = \"Comment cannot be empty\";\n\t} else if (!parentAudioItemId) {\n\t\terror = \"Parent audio item ID not defined\";\n\t}\n\tif (error) {\n\t\treturn json<ActionData>({ error }, { status: 400 });\n\t}\n\tconst comment = await db.comment.create({\n\t\tdata: {\n\t\t\ttext,\n\t\t\tparentAudioItemId,\n\t\t\tcreatedByUserId: userId,\n\t\t},\n\t});\n\treturn json<ActionData>({ comment }, { status: 201 });\n};\n", "import type { LoaderFunction } from \"@remix-run/node\";\nimport { redirect } from \"@remix-run/node\";\nimport { getSession, destroySession } from \"~/sessions.server\";\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\treturn redirect(\"/login\", {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await destroySession(session),\n\t\t},\n\t});\n};\n", "import { EntityType } from \"@prisma/client\";\nimport { json, type LoaderFunction } from \"@remix-run/node\";\nimport { type Entity } from \"~/types\";\nimport { db } from \"~/utils/db.server\";\n\ninterface LoaderData {\n\terror?: string;\n\tresults?: Entity[];\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst url = new URL(request.url);\n\tconst searchTerm = url.searchParams.get(\"searchTerm\") || \"\";\n\tlet entityTypes = url.searchParams.getAll(\"entityTypes\");\n\tif (entityTypes.length === 0) {\n\t\tentityTypes = [\n\t\t\tEntityType.Person,\n\t\t\tEntityType.Instrument,\n\t\t\tEntityType.Place,\n\t\t\tEntityType.Tune,\n\t\t\tEntityType.Collection,\n\t\t\tEntityType.AudioItem,\n\t\t];\n\t}\n\tconst take = Number(url.searchParams.get(\"take\") ?? 24);\n\n\tif (searchTerm.length < 3) {\n\t\treturn json<LoaderData>(\n\t\t\t{ error: \"Must include a search term of at least 3 letters\" },\n\t\t\t{ status: 400 }\n\t\t);\n\t}\n\tconst cleanedSearchTerm = searchTerm.toLowerCase();\n\tconst takeFromEach = Math.round(take / entityTypes.length);\n\n\tconst personQuery = db.person.findMany({\n\t\tinclude: {\n\t\t\tcreatedByUser: true,\n\t\t},\n\t\twhere: {\n\t\t\tOR: [\n\t\t\t\t{\n\t\t\t\t\tname: {\n\t\t\t\t\t\tcontains: cleanedSearchTerm,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{ aliases: { contains: cleanedSearchTerm } },\n\t\t\t\t{ description: { contains: cleanedSearchTerm } },\n\t\t\t],\n\t\t},\n\t\ttake: takeFromEach,\n\t});\n\tconst instrumentQuery = db.instrument.findMany({\n\t\tinclude: {\n\t\t\tcreatedByUser: true,\n\t\t},\n\t\twhere: {\n\t\t\tOR: [\n\t\t\t\t{\n\t\t\t\t\tname: {\n\t\t\t\t\t\tcontains: cleanedSearchTerm,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{ aliases: { contains: cleanedSearchTerm } },\n\t\t\t\t{ description: { contains: cleanedSearchTerm } },\n\t\t\t],\n\t\t},\n\t\ttake: takeFromEach,\n\t});\n\tconst placeQuery = db.place.findMany({\n\t\tinclude: {\n\t\t\tcreatedByUser: true,\n\t\t},\n\t\twhere: {\n\t\t\tOR: [\n\t\t\t\t{\n\t\t\t\t\tname: {\n\t\t\t\t\t\tcontains: cleanedSearchTerm,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{ aliases: { contains: cleanedSearchTerm } },\n\t\t\t\t{ description: { contains: cleanedSearchTerm } },\n\t\t\t],\n\t\t},\n\t\ttake: takeFromEach,\n\t});\n\tconst tuneQuery = db.tune.findMany({\n\t\tinclude: {\n\t\t\tcreatedByUser: true,\n\t\t},\n\t\twhere: {\n\t\t\tOR: [\n\t\t\t\t{\n\t\t\t\t\tname: {\n\t\t\t\t\t\tcontains: cleanedSearchTerm,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{ aliases: { contains: cleanedSearchTerm } },\n\t\t\t\t{ theSessionTuneId: { equals: cleanedSearchTerm } },\n\t\t\t],\n\t\t},\n\t\ttake: takeFromEach,\n\t});\n\tconst collectionQuery = db.collection.findMany({\n\t\tinclude: {\n\t\t\tcreatedByUser: true,\n\t\t},\n\t\twhere: {\n\t\t\tOR: [\n\t\t\t\t{\n\t\t\t\t\tname: {\n\t\t\t\t\t\tcontains: cleanedSearchTerm,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{ aliases: { contains: cleanedSearchTerm } },\n\t\t\t\t{ description: { contains: cleanedSearchTerm } },\n\t\t\t],\n\t\t},\n\t\ttake: takeFromEach,\n\t});\n\tconst audioItemQuery = db.audioItem.findMany({\n\t\tinclude: {\n\t\t\tcreatedByUser: true,\n\t\t},\n\t\twhere: {\n\t\t\tOR: [\n\t\t\t\t{\n\t\t\t\t\tname: {\n\t\t\t\t\t\tcontains: cleanedSearchTerm,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{ aliases: { contains: cleanedSearchTerm } },\n\t\t\t\t{ description: { contains: cleanedSearchTerm } },\n\t\t\t],\n\t\t},\n\t\ttake: takeFromEach,\n\t});\n\n\t// Determine which queries to make\n\tconst queryPromises: Promise<Entity[]>[] = [];\n\tfor (const entityType of entityTypes) {\n\t\tswitch (entityType) {\n\t\t\tcase EntityType.Person:\n\t\t\t\tqueryPromises.push(personQuery);\n\t\t\t\tbreak;\n\t\t\tcase EntityType.Tune:\n\t\t\t\tqueryPromises.push(tuneQuery);\n\t\t\t\tbreak;\n\t\t\tcase EntityType.Instrument:\n\t\t\t\tqueryPromises.push(instrumentQuery);\n\t\t\t\tbreak;\n\t\t\tcase EntityType.Place:\n\t\t\t\tqueryPromises.push(placeQuery);\n\t\t\t\tbreak;\n\t\t\tcase EntityType.Collection:\n\t\t\t\tqueryPromises.push(collectionQuery);\n\t\t\t\tbreak;\n\t\t\tcase EntityType.AudioItem:\n\t\t\t\tqueryPromises.push(audioItemQuery);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tconst queryResults = await Promise.all(queryPromises);\n\tconst results = queryResults.reduce(\n\t\t(prevVal, curVal) => [...prevVal, ...curVal],\n\t\t[]\n\t);\n\treturn json<LoaderData>({ results }, { status: 200 });\n};\n", "import {\n\tuseLocation,\n\tLink,\n\tuseLoaderData,\n\tuseTransition,\n} from \"@remix-run/react\";\nimport bcrypt from \"bcryptjs\";\n\nimport Layout from \"~/components/Layout\";\nimport type { ActionFunction, LoaderFunction } from \"@remix-run/node\";\nimport { redirect, json } from \"@remix-run/node\";\nimport { commitSession, getSession } from \"~/sessions.server\";\nimport { db } from \"~/utils/db.server\";\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst url = new URL(request.url);\n\tconst redirectTo = url.searchParams.get(\"redirectTo\");\n\tif (session.has(\"userId\")) {\n\t\treturn redirect(redirectTo || \"/\");\n\t}\n\n\tconst data = { error: session.get(\"error\") };\n\treturn json(data, {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst url = new URL(request.url);\n\tconst redirectTo = url.searchParams.get(\"redirectTo\");\n\n\tconst formData = await request.formData();\n\tconst email = String(formData.get(\"email\") ?? \"\");\n\tconst fullName = String(formData.get(\"full_name\") ?? \"\");\n\tconst password = String(formData.get(\"password\") ?? \"\");\n\tconst passwordConfirm = String(formData.get(\"password_confirm\") ?? \"\");\n\n\t// Check for an existing user with this email\n\tconst user = await db.user.findUnique({ where: { email } });\n\tif (user) {\n\t\tsession.flash(\n\t\t\t\"error\",\n\t\t\t\"There is already a user with this email address. Try logging in?\"\n\t\t);\n\t\treturn redirect(\"/signup\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\t// Validate inputs\n\tconst emailValidityRegex = new RegExp(\n\t\t/^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i\n\t);\n\tconst emailIsValid = emailValidityRegex.test(email);\n\tif (!emailIsValid) {\n\t\tsession.flash(\"error\", \"Email is not valid\");\n\t\treturn redirect(\"/signup\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\tconst fullNameIsValid = fullName.split(\" \").length >= 2;\n\tif (!fullNameIsValid) {\n\t\tsession.flash(\"error\", \"Please enter your full name\");\n\t\treturn redirect(\"/signup\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\tconst passwordsMatch = password === passwordConfirm;\n\tif (!passwordsMatch) {\n\t\tsession.flash(\"error\", \"Passwords don't match\");\n\t\treturn redirect(\"/signup\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\tconst passwordIsValid = password.length >= 8;\n\tif (!passwordIsValid) {\n\t\tsession.flash(\"error\", \"Password must be at least 8 characters long\");\n\t\treturn redirect(\"/signup\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\t// Everything is valid - create the user and set it in a cookie\n\tconst passwordHashed = bcrypt.hashSync(password, 10);\n\tconst newUser = await db.user.create({\n\t\tdata: {\n\t\t\temail,\n\t\t\tusername: fullName,\n\t\t\tpasswordHashed,\n\t\t},\n\t});\n\tsession.set(\"userId\", newUser.id);\n\treturn redirect(redirectTo || \"/\", {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport default function SignUp() {\n\tconst { error } = useLoaderData();\n\tconst { state } = useTransition();\n\n\tconst { search } = useLocation();\n\tconst params = new URLSearchParams(search);\n\tconst redirectTo = params.get(\"redirectTo\");\n\n\tconst logInLinkQueryParams = new URLSearchParams(\n\t\tredirectTo ? { redirectTo } : undefined\n\t);\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">\n\t\t\t\t{redirectTo ? \"Create an account to continue\" : \"Create your account\"}\n\t\t\t</h1>\n\t\t\t<div className=\"flex flex-col align-start max-w-xs\">\n\t\t\t\t<form method=\"post\" className=\"space-y-4 mb-6\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\tplaceholder=\"Your email\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"full_name\"\n\t\t\t\t\t\tplaceholder=\"Your full name\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tplaceholder=\"Choose a password\"\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tname=\"password_confirm\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tplaceholder=\"Password (again)\"\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn mb-4 w-auto\"\n\t\t\t\t\t\tdisabled={state === \"submitting\"}\n\t\t\t\t\t\tvalue=\"Sign Up\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\n\t\t\t\t{error && <div className=\"text-red-600 mb-6\">{error}</div>}\n\n\t\t\t\t<div>\n\t\t\t\t\tAlready have an account?{\" \"}\n\t\t\t\t\t<Link to={`/login?${logInLinkQueryParams.toString()}`}>Log in</Link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n", "import { useEffect, useCallback, useState } from \"react\";\nimport { Link, useLoaderData, useLocation } from \"@remix-run/react\";\nimport { type DataFunctionArgs } from \"@remix-run/node\";\n\nimport type {\n\tCollectionWithRelations,\n\tCommentWithRelations,\n\tAudioItemWithRelations,\n} from \"~/types\";\nimport { ViewAs } from \"~/types\";\nimport useFilters from \"~/hooks/useFilters\";\nimport EntityService from \"~/services/Entity\";\nimport LocalStorageService from \"~/services/LocalStorage\";\nimport { db } from \"~/utils/db.server\";\nimport { getSession } from \"~/sessions.server\";\n\nimport Layout from \"~/components/Layout\";\nimport ProjectIntro from \"~/components/ProjectIntro\";\nimport AudioItemComponent from \"~/components/AudioItem\";\n\ninterface LoaderData {\n\taudioItems: AudioItemWithRelations[];\n\tcollections: CollectionWithRelations[];\n\tcomments: CommentWithRelations[];\n\tnumAudioItemsAllTime: number;\n\tnumTagsAllTime: number;\n\tnumCommentsAllTime: number;\n}\n\nexport async function loader({\n\trequest,\n}: DataFunctionArgs): Promise<LoaderData> {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst userId = String(session.get(\"userId\") ?? \"\");\n\n\tconst { searchParams } = new URL(request.url);\n\tconst page = Number(searchParams.get(\"page\") ?? 1);\n\tconst perPage = Number(searchParams.get(\"perPage\") ?? 20);\n\tconst [\n\t\taudioItems,\n\t\tcollections,\n\t\tcomments,\n\t\tnumAudioItemsAllTime,\n\t\tnumTagsAllTime,\n\t\tnumCommentsAllTime,\n\t] = await Promise.all([\n\t\tdb.audioItem.findMany({\n\t\t\tskip: (page - 1) * perPage,\n\t\t\ttake: perPage,\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tobjectAudioItem: true,\n\t\t\t\t\t\tobjectCollection: true,\n\t\t\t\t\t\tobjectInstrument: true,\n\t\t\t\t\t\tobjectPerson: true,\n\t\t\t\t\t\tobjectPlace: true,\n\t\t\t\t\t\tobjectTune: true,\n\t\t\t\t\t\trelationship: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t\tcomments: {\n\t\t\t\t\tinclude: {\n\t\t\t\t\t\tcreatedByUser: true,\n\t\t\t\t\t},\n\t\t\t\t\torderBy: {\n\t\t\t\t\t\tcreatedAt: \"asc\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsavedItems: {\n\t\t\t\t\twhere: {\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\torderBy: {\n\t\t\t\tupdatedAt: \"desc\",\n\t\t\t},\n\t\t}),\n\t\tdb.collection.findMany({\n\t\t\ttake: 5,\n\t\t\tinclude: {\n\t\t\t\ttagsAsSubject: true,\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tupdatedByUser: true,\n\t\t\t},\n\t\t\torderBy: {\n\t\t\t\tcreatedAt: \"desc\",\n\t\t\t},\n\t\t}),\n\t\tdb.comment.findMany({\n\t\t\ttake: 6,\n\t\t\tinclude: {\n\t\t\t\tcreatedByUser: true,\n\t\t\t\tparentAudioItem: true,\n\t\t\t},\n\t\t\torderBy: {\n\t\t\t\tcreatedAt: \"desc\",\n\t\t\t},\n\t\t}),\n\t\tdb.audioItem.count(),\n\t\tdb.tag.count(),\n\t\tdb.comment.count(),\n\t]);\n\n\treturn {\n\t\taudioItems,\n\t\tcollections,\n\t\tcomments,\n\t\tnumAudioItemsAllTime,\n\t\tnumTagsAllTime,\n\t\tnumCommentsAllTime,\n\t};\n}\n\nexport default function Home() {\n\tconst {\n\t\taudioItems,\n\t\tcollections,\n\t\tcomments,\n\t\tnumAudioItemsAllTime,\n\t\tnumTagsAllTime,\n\t\tnumCommentsAllTime,\n\t} = useLoaderData<LoaderData>();\n\tconst { search } = useLocation();\n\tconst viewAs =\n\t\t(new URLSearchParams(search).get(\"viewAs\") as ViewAs) ?? ViewAs.Cards;\n\n\tconst { Filters, filtersProps } = useFilters({\n\t\ttotalItems: numAudioItemsAllTime,\n\t});\n\n\t// Due to static rendering, we need to check localStorage for intro status\n\t// after client-side hydration.\n\tconst [shouldShowIntro, setShouldShowIntro] = useState(false);\n\tuseEffect(() => {\n\t\tif (LocalStorageService.getItem(\"SHOULD_SHOW_INTRO\") !== \"false\") {\n\t\t\tsetShouldShowIntro(true);\n\t\t}\n\t}, []);\n\tconst onCloseIntro = useCallback(() => {\n\t\tLocalStorageService.setItem(\"SHOULD_SHOW_INTRO\", \"false\");\n\t\tsetShouldShowIntro(false);\n\t}, []);\n\n\treturn (\n\t\t<Layout>\n\t\t\t{shouldShowIntro && (\n\t\t\t\t<ProjectIntro\n\t\t\t\t\tclassName=\"mb-8 md:mt-4 md:mb-12\"\n\t\t\t\t\tonClose={onCloseIntro}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t<div className=\"flex flex-col md:flex-row\">\n\t\t\t\t<div className=\"flex flex-1 flex-col pb-8\">\n\t\t\t\t\t<h1>Explore</h1>\n\n\t\t\t\t\t<Filters\n\t\t\t\t\t\t{...filtersProps}\n\t\t\t\t\t\tviewAs={undefined}\n\t\t\t\t\t\tsortBy={undefined}\n\t\t\t\t\t\tclassName=\"sticky left-0 right-0 py-3 px-2 -ml-2 -mr-2 mt-1 mb-2 bg-gray-100 top-[48px] z-10\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{audioItems.map((audioItem, index) => (\n\t\t\t\t\t\t<AudioItemComponent\n\t\t\t\t\t\t\tviewAs={viewAs}\n\t\t\t\t\t\t\taudioItem={audioItem}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName={viewAs === ViewAs.List ? \"mb-4\" : \"mb-6\"}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"flex flex-col items-start md:ml-8 md:pl-8 md:w-1/4 md:border-l md:border-gray-300\">\n\t\t\t\t\t<h3 className=\"mb-4\">Browse</h3>\n\t\t\t\t\t<Link to=\"/entities/people\" className=\"mb-2\">\n\t\t\t\t\t\tPeople\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/instruments\" className=\"mb-2\">\n\t\t\t\t\t\tInstruments\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/places\" className=\"mb-2\">\n\t\t\t\t\t\tPlaces\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/tunes\" className=\"mb-2\">\n\t\t\t\t\t\tTunes\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to=\"/entities/collections\" className=\"mb-2\">\n\t\t\t\t\t\tCollections\n\t\t\t\t\t</Link>\n\n\t\t\t\t\t<h3 className=\"mt-6 mb-4\">Stats</h3>\n\t\t\t\t\t<span className=\"mb-2 text-gray-500\">\n\t\t\t\t\t\t{numAudioItemsAllTime} Audio Items\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className=\"mb-2 text-gray-500\">{numTagsAllTime} Tags</span>\n\t\t\t\t\t<span className=\"mb-2 text-gray-500\">\n\t\t\t\t\t\t{numCommentsAllTime} Comments\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<h3 className=\"mt-6 mb-4\">Latest Collections</h3>\n\t\t\t\t\t{collections.map((collection, index) => {\n\t\t\t\t\t\tconst { name } = collection;\n\t\t\t\t\t\tif (!name) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"mb-2 text-gray-500\" key={index}>\n\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(collection)}>\n\t\t\t\t\t\t\t\t\t{collection.name}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\n\t\t\t\t\t<h3 className=\"mt-6 mb-4\">Latest Features + Fixes</h3>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"mb-2\"\n\t\t\t\t\t\thref=\"https://github.com/dgurns/trad-archive/pulls?q=is%3Apr+is%3Amerged+sort%3Aupdated-desc\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t>\n\t\t\t\t\t\tView on GitHub{\" \"}\n\t\t\t\t\t\t<i className=\"material-icons\">\n\t\t\t\t\t\t\t<span className=\"text-sm\">launch</span>\n\t\t\t\t\t\t</i>\n\t\t\t\t\t</a>\n\n\t\t\t\t\t<h3 className=\"mt-6 mb-4\">Latest Comments</h3>\n\t\t\t\t\t{comments.map((comment, index) => {\n\t\t\t\t\t\tconst { createdByUser, parentAudioItem, text } = comment;\n\t\t\t\t\t\tif (!createdByUser || !parentAudioItem) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"mb-4 text-gray-500\" key={index}>\n\t\t\t\t\t\t\t\t<div className=\" mb-1\">\n\t\t\t\t\t\t\t\t\t<Link to={`/users/${createdByUser.id}`}>\n\t\t\t\t\t\t\t\t\t\t{createdByUser.username}\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t{` commented on `}\n\t\t\t\t\t\t\t\t\t<Link to={EntityService.makeHrefForView(parentAudioItem)}>\n\t\t\t\t\t\t\t\t\t\t{parentAudioItem.name}\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t{\":\"}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"whitespace-pre-line text-sm\">{text}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n", "const localStorageIsAvailable =\n\ttypeof window !== \"undefined\" && window?.localStorage;\n\nconst setItem = (key: string, value: string) => {\n\tif (localStorageIsAvailable) {\n\t\twindow.localStorage.setItem(key, value);\n\t}\n};\nconst getItem = (key: string): string | null | undefined => {\n\tif (localStorageIsAvailable) {\n\t\treturn window.localStorage.getItem(key);\n\t}\n\treturn undefined;\n};\n\nconst LocalStorageService = {\n\tsetItem,\n\tgetItem,\n};\nexport default LocalStorageService;\n", "interface Props {\n\tclassName?: string;\n\tonClose?: () => void;\n}\n\nconst ProjectIntro = ({ className, onClose }: Props) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={`flex flex-col flex-grow bg-gray-200 rounded p-4 pl-16 lg:pl-20 relative ${\n\t\t\t\tclassName ?? \"\"\n\t\t\t}`}\n\t\t>\n\t\t\t<img\n\t\t\t\tsrc=\"/logo-square.png\"\n\t\t\t\tclassName=\"absolute top-5 -left-1 lg:-left-8 w-12 lg:w-20 -rotate-12\"\n\t\t\t/>\n\t\t\t<strong>Welcome!</strong>\n\t\t\t<br />\n\t\t\tTrad Archive is an open source experiment by the Irish Traditional Music\n\t\t\tArchive and Dan Gurney.\n\t\t\t<br />\n\t\t\t<br />\n\t\t\tYou can...\n\t\t\t<br />\n\t\t\t<ul className=\"list-disc list-inside\">\n\t\t\t\t<li>Listen to previously unreleased archival recordings</li>\n\t\t\t\t<li>\n\t\t\t\t\tHelp by tagging each recording with People, Places, Tunes,\n\t\t\t\t\tInstruments, and Collections\n\t\t\t\t</li>\n\t\t\t\t<li>Save favorites to listen later</li>\n\t\t\t</ul>\n\t\t\t<button className=\"absolute top-2 right-2 btn-icon\" onClick={onClose}>\n\t\t\t\t<i className=\"material-icons\">close</i>\n\t\t\t</button>\n\t\t</div>\n\t);\n};\n\nexport default ProjectIntro;\n", "import {\n\tuseLocation,\n\tLink,\n\tuseLoaderData,\n\tuseTransition,\n} from \"@remix-run/react\";\nimport type { ActionFunction, LoaderFunction } from \"@remix-run/node\";\nimport { redirect, json } from \"@remix-run/node\";\nimport bcrypt from \"bcryptjs\";\n\nimport { db } from \"~/utils/db.server\";\nimport { getSession, commitSession } from \"~/sessions.server\";\nimport Layout from \"~/components/Layout\";\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst url = new URL(request.url);\n\tconst redirectTo = url.searchParams.get(\"redirectTo\");\n\tif (session.has(\"userId\")) {\n\t\treturn redirect(redirectTo || \"/\");\n\t}\n\n\tconst data = { error: session.get(\"error\") };\n\treturn json(data, {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport const action: ActionFunction = async ({ request }) => {\n\tconst session = await getSession(request.headers.get(\"Cookie\"));\n\tconst url = new URL(request.url);\n\tconst redirectTo = url.searchParams.get(\"redirectTo\");\n\n\tconst formData = await request.formData();\n\tconst email = String(formData.get(\"email\") ?? \"\");\n\tconst password = String(formData.get(\"password\") ?? \"\");\n\n\tconst user = await db.user.findUnique({ where: { email } });\n\tif (!user) {\n\t\tsession.flash(\"error\", \"Could not find a user with this email\");\n\t\treturn redirect(\"/login\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\tif (!user.passwordHashed) {\n\t\tsession.flash(\n\t\t\t\"error\",\n\t\t\t\"This user does not have a password. TODO: Redirect to /reset-password page\"\n\t\t);\n\t\treturn redirect(\"/login\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\tconst passwordIsValid = bcrypt.compareSync(password, user.passwordHashed);\n\tif (!passwordIsValid) {\n\t\tsession.flash(\"error\", \"Incorrect password\");\n\t\treturn redirect(\"/login\", {\n\t\t\theaders: {\n\t\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t\t},\n\t\t});\n\t}\n\n\t// Email and password are valid; set the userId in a session cookie and\n\t// redirect\n\tsession.set(\"userId\", user.id);\n\treturn redirect(redirectTo || \"/\", {\n\t\theaders: {\n\t\t\t\"Set-Cookie\": await commitSession(session),\n\t\t},\n\t});\n};\n\nexport default function Login() {\n\tconst { error } = useLoaderData();\n\tconst transition = useTransition();\n\n\tconst { search } = useLocation();\n\tconst params = new URLSearchParams(search);\n\tconst redirectTo = params.get(\"redirectTo\");\n\n\tconst signUpLinkQueryParams = new URLSearchParams(\n\t\tredirectTo ? { redirectTo } : undefined\n\t);\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1 className=\"mb-6\">\n\t\t\t\tLog in to {redirectTo ? \"continue\" : \"Trad Archive\"}\n\t\t\t</h1>\n\t\t\t<div className=\"flex flex-col align-start max-w-xs\">\n\t\t\t\t<form method=\"post\" className=\"space-y-4 mb-6\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"btn w-auto\"\n\t\t\t\t\t\tdisabled={transition.state === \"submitting\"}\n\t\t\t\t\t\tvalue=\"Log In\"\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\n\t\t\t\t{error && <div className=\"text-red-600 mb-6\">{error}</div>}\n\n\t\t\t\t<p className=\"mb-2\">\n\t\t\t\t\tDon't have an account yet?{\" \"}\n\t\t\t\t\t<Link to={`/signup?${signUpLinkQueryParams.toString()}`}>\n\t\t\t\t\t\tSign Up\n\t\t\t\t\t</Link>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<Link to=\"/reset-password\">Reset Password</Link>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n", "export default {'version':'c17fb46a','entry':{'module':'/build/entry.client-4RBPKCCT.js','imports':['/build/_shared/chunk-LNAVFCVS.js','/build/_shared/chunk-SDLOU3B7.js']},'routes':{'root':{'id':'root','parentId':undefined,'path':'','index':undefined,'caseSensitive':undefined,'module':'/build/root-XDDPR2OT.js','imports':['/build/_shared/chunk-ZLRWE4NK.js','/build/_shared/chunk-MDTKGQUK.js','/build/_shared/chunk-QSZCPMIV.js','/build/_shared/chunk-WO5ZZCZ6.js','/build/_shared/chunk-PQJWRTRS.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':true,'hasErrorBoundary':true},'routes/account/index':{'id':'routes/account/index','parentId':'root','path':'account','index':true,'caseSensitive':undefined,'module':'/build/routes/account/index-2LI7FCI7.js','imports':['/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/choose-new-password':{'id':'routes/choose-new-password','parentId':'root','path':'choose-new-password','index':undefined,'caseSensitive':undefined,'module':'/build/routes/choose-new-password-ZWW7EULN.js','imports':['/build/_shared/chunk-K64X6GTJ.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/comments':{'id':'routes/comments','parentId':'root','path':'comments','index':undefined,'caseSensitive':undefined,'module':'/build/routes/comments-5P3ESY7C.js','imports':undefined,'hasAction':true,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/$slug':{'id':'routes/entities/audio-items/$slug','parentId':'root','path':'entities/audio-items/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/$slug-FFDAUACK.js','imports':['/build/_shared/chunk-GEYCQCXX.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/index':{'id':'routes/entities/audio-items/index','parentId':'root','path':'entities/audio-items','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/index-IWNJVVXR.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/audio-items/random':{'id':'routes/entities/audio-items/random','parentId':'root','path':'entities/audio-items/random','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/audio-items/random-5WJTYHAU.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/collections/$slug':{'id':'routes/entities/collections/$slug','parentId':'root','path':'entities/collections/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/collections/$slug-AKAMJ4H2.js','imports':['/build/_shared/chunk-W2JKSGUZ.js','/build/_shared/chunk-YGZ67H6T.js','/build/_shared/chunk-GEYCQCXX.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/collections/index':{'id':'routes/entities/collections/index','parentId':'root','path':'entities/collections','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/collections/index-RXX7JP2X.js','imports':['/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/instruments/$slug':{'id':'routes/entities/instruments/$slug','parentId':'root','path':'entities/instruments/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/instruments/$slug-VJKMPYWN.js','imports':['/build/_shared/chunk-W2JKSGUZ.js','/build/_shared/chunk-YGZ67H6T.js','/build/_shared/chunk-GEYCQCXX.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/instruments/index':{'id':'routes/entities/instruments/index','parentId':'root','path':'entities/instruments','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/instruments/index-5LYBQIEE.js','imports':['/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/people/$slug':{'id':'routes/entities/people/$slug','parentId':'root','path':'entities/people/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/people/$slug-4YC5UUHY.js','imports':['/build/_shared/chunk-W2JKSGUZ.js','/build/_shared/chunk-YGZ67H6T.js','/build/_shared/chunk-GEYCQCXX.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/people/index':{'id':'routes/entities/people/index','parentId':'root','path':'entities/people','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/people/index-YKYWO7I6.js','imports':['/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/places/$slug':{'id':'routes/entities/places/$slug','parentId':'root','path':'entities/places/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/places/$slug-YM6MFK54.js','imports':['/build/_shared/chunk-W2JKSGUZ.js','/build/_shared/chunk-YGZ67H6T.js','/build/_shared/chunk-GEYCQCXX.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/places/index':{'id':'routes/entities/places/index','parentId':'root','path':'entities/places','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/places/index-BZBNBSK5.js','imports':['/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/tunes/$slug':{'id':'routes/entities/tunes/$slug','parentId':'root','path':'entities/tunes/:slug','index':undefined,'caseSensitive':undefined,'module':'/build/routes/entities/tunes/$slug-3MQRRB4N.js','imports':['/build/_shared/chunk-W2JKSGUZ.js','/build/_shared/chunk-YGZ67H6T.js','/build/_shared/chunk-GEYCQCXX.js','/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/entities/tunes/index':{'id':'routes/entities/tunes/index','parentId':'root','path':'entities/tunes','index':true,'caseSensitive':undefined,'module':'/build/routes/entities/tunes/index-UKB7YR4N.js','imports':['/build/_shared/chunk-YGZ67H6T.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/index':{'id':'routes/index','parentId':'root','path':undefined,'index':true,'caseSensitive':undefined,'module':'/build/routes/index-UM4VNYLY.js','imports':['/build/_shared/chunk-YGZ67H6T.js','/build/_shared/chunk-GEYCQCXX.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/login':{'id':'routes/login','parentId':'root','path':'login','index':undefined,'caseSensitive':undefined,'module':'/build/routes/login-KBZKWI5M.js','imports':['/build/_shared/chunk-K64X6GTJ.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/logout':{'id':'routes/logout','parentId':'root','path':'logout','index':undefined,'caseSensitive':undefined,'module':'/build/routes/logout-HAGAUS4Y.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/reset-password':{'id':'routes/reset-password','parentId':'root','path':'reset-password','index':undefined,'caseSensitive':undefined,'module':'/build/routes/reset-password-NZFGXCTV.js','imports':['/build/_shared/chunk-K64X6GTJ.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/saved-items':{'id':'routes/saved-items','parentId':'root','path':'saved-items','index':undefined,'caseSensitive':undefined,'module':'/build/routes/saved-items-H47NBDQM.js','imports':['/build/_shared/chunk-YGZ67H6T.js','/build/_shared/chunk-GEYCQCXX.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/search':{'id':'routes/search','parentId':'root','path':'search','index':undefined,'caseSensitive':undefined,'module':'/build/routes/search-4SNRFG52.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/signup':{'id':'routes/signup','parentId':'root','path':'signup','index':undefined,'caseSensitive':undefined,'module':'/build/routes/signup-QBGHHBL2.js','imports':['/build/_shared/chunk-K64X6GTJ.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/users/$id':{'id':'routes/users/$id','parentId':'root','path':'users/:id','index':undefined,'caseSensitive':undefined,'module':'/build/routes/users/$id-CD5AOPP7.js','imports':['/build/_shared/chunk-WPQ6M4VW.js','/build/_shared/chunk-IAJZOXUY.js','/build/_shared/chunk-5PUKH5YP.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false}},'url':'/build/manifest-C17FB46A.js'};", "\nimport * as entryServer from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/entry.server.tsx\";\nimport * as route0 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/root.tsx\";\nimport * as route1 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/random.tsx\";\nimport * as route2 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/$slug.tsx\";\nimport * as route3 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/audio-items/index.tsx\";\nimport * as route4 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/$slug.tsx\";\nimport * as route5 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/collections/index.tsx\";\nimport * as route6 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/$slug.tsx\";\nimport * as route7 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/instruments/index.tsx\";\nimport * as route8 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/$slug.tsx\";\nimport * as route9 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/people/index.tsx\";\nimport * as route10 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/$slug.tsx\";\nimport * as route11 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/places/index.tsx\";\nimport * as route12 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/$slug.tsx\";\nimport * as route13 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/entities/tunes/index.tsx\";\nimport * as route14 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/choose-new-password.tsx\";\nimport * as route15 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/reset-password.tsx\";\nimport * as route16 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/account/index.tsx\";\nimport * as route17 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/saved-items.tsx\";\nimport * as route18 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/users/$id.tsx\";\nimport * as route19 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/comments.tsx\";\nimport * as route20 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/logout.tsx\";\nimport * as route21 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/search.tsx\";\nimport * as route22 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/signup.tsx\";\nimport * as route23 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/index.tsx\";\nimport * as route24 from \"/Users/dangurney/Desktop/Dev/trad-archive/remix/app/routes/login.tsx\";\n  export { default as assets } from \"@remix-run/dev/assets-manifest\";\n  export const entry = { module: entryServer };\n  export const routes = {\n    \"root\": {\n      id: \"root\",\n      parentId: undefined,\n      path: \"\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route0\n    },\n  \"routes/entities/audio-items/random\": {\n      id: \"routes/entities/audio-items/random\",\n      parentId: \"root\",\n      path: \"entities/audio-items/random\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route1\n    },\n  \"routes/entities/audio-items/$slug\": {\n      id: \"routes/entities/audio-items/$slug\",\n      parentId: \"root\",\n      path: \"entities/audio-items/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route2\n    },\n  \"routes/entities/audio-items/index\": {\n      id: \"routes/entities/audio-items/index\",\n      parentId: \"root\",\n      path: \"entities/audio-items\",\n      index: true,\n      caseSensitive: undefined,\n      module: route3\n    },\n  \"routes/entities/collections/$slug\": {\n      id: \"routes/entities/collections/$slug\",\n      parentId: \"root\",\n      path: \"entities/collections/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route4\n    },\n  \"routes/entities/collections/index\": {\n      id: \"routes/entities/collections/index\",\n      parentId: \"root\",\n      path: \"entities/collections\",\n      index: true,\n      caseSensitive: undefined,\n      module: route5\n    },\n  \"routes/entities/instruments/$slug\": {\n      id: \"routes/entities/instruments/$slug\",\n      parentId: \"root\",\n      path: \"entities/instruments/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route6\n    },\n  \"routes/entities/instruments/index\": {\n      id: \"routes/entities/instruments/index\",\n      parentId: \"root\",\n      path: \"entities/instruments\",\n      index: true,\n      caseSensitive: undefined,\n      module: route7\n    },\n  \"routes/entities/people/$slug\": {\n      id: \"routes/entities/people/$slug\",\n      parentId: \"root\",\n      path: \"entities/people/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route8\n    },\n  \"routes/entities/people/index\": {\n      id: \"routes/entities/people/index\",\n      parentId: \"root\",\n      path: \"entities/people\",\n      index: true,\n      caseSensitive: undefined,\n      module: route9\n    },\n  \"routes/entities/places/$slug\": {\n      id: \"routes/entities/places/$slug\",\n      parentId: \"root\",\n      path: \"entities/places/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route10\n    },\n  \"routes/entities/places/index\": {\n      id: \"routes/entities/places/index\",\n      parentId: \"root\",\n      path: \"entities/places\",\n      index: true,\n      caseSensitive: undefined,\n      module: route11\n    },\n  \"routes/entities/tunes/$slug\": {\n      id: \"routes/entities/tunes/$slug\",\n      parentId: \"root\",\n      path: \"entities/tunes/:slug\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route12\n    },\n  \"routes/entities/tunes/index\": {\n      id: \"routes/entities/tunes/index\",\n      parentId: \"root\",\n      path: \"entities/tunes\",\n      index: true,\n      caseSensitive: undefined,\n      module: route13\n    },\n  \"routes/choose-new-password\": {\n      id: \"routes/choose-new-password\",\n      parentId: \"root\",\n      path: \"choose-new-password\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route14\n    },\n  \"routes/reset-password\": {\n      id: \"routes/reset-password\",\n      parentId: \"root\",\n      path: \"reset-password\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route15\n    },\n  \"routes/account/index\": {\n      id: \"routes/account/index\",\n      parentId: \"root\",\n      path: \"account\",\n      index: true,\n      caseSensitive: undefined,\n      module: route16\n    },\n  \"routes/saved-items\": {\n      id: \"routes/saved-items\",\n      parentId: \"root\",\n      path: \"saved-items\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route17\n    },\n  \"routes/users/$id\": {\n      id: \"routes/users/$id\",\n      parentId: \"root\",\n      path: \"users/:id\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route18\n    },\n  \"routes/comments\": {\n      id: \"routes/comments\",\n      parentId: \"root\",\n      path: \"comments\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route19\n    },\n  \"routes/logout\": {\n      id: \"routes/logout\",\n      parentId: \"root\",\n      path: \"logout\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route20\n    },\n  \"routes/search\": {\n      id: \"routes/search\",\n      parentId: \"root\",\n      path: \"search\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route21\n    },\n  \"routes/signup\": {\n      id: \"routes/signup\",\n      parentId: \"root\",\n      path: \"signup\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route22\n    },\n  \"routes/index\": {\n      id: \"routes/index\",\n      parentId: \"root\",\n      path: undefined,\n      index: true,\n      caseSensitive: undefined,\n      module: route23\n    },\n  \"routes/login\": {\n      id: \"routes/login\",\n      parentId: \"root\",\n      path: \"login\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route24\n    }\n  };"],
  "mappings": "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",
  "names": []
}
